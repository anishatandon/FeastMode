{"ast":null,"code":"!function (t, e) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = e() : \"function\" == typeof define && define.amd ? define(e) : (t = t || self).firebase = e();\n}(this, function () {\n  \"use strict\";\n\n  !function (t) {\n    if (!t.fetch) {\n      var e = \"URLSearchParams\" in t,\n          n = \"Symbol\" in t && \"iterator\" in Symbol,\n          a = \"FileReader\" in t && \"Blob\" in t && function () {\n        try {\n          return new Blob(), !0;\n        } catch (t) {\n          return !1;\n        }\n      }(),\n          r = \"FormData\" in t,\n          i = \"ArrayBuffer\" in t;\n\n      if (i) var o = [\"[object Int8Array]\", \"[object Uint8Array]\", \"[object Uint8ClampedArray]\", \"[object Int16Array]\", \"[object Uint16Array]\", \"[object Int32Array]\", \"[object Uint32Array]\", \"[object Float32Array]\", \"[object Float64Array]\"],\n          s = function (t) {\n        return t && DataView.prototype.isPrototypeOf(t);\n      },\n          u = ArrayBuffer.isView || function (t) {\n        return t && -1 < o.indexOf(Object.prototype.toString.call(t));\n      };\n      d.prototype.append = function (t, e) {\n        t = l(t), e = f(e);\n        var n = this.map[t];\n        this.map[t] = n ? n + \",\" + e : e;\n      }, d.prototype.delete = function (t) {\n        delete this.map[l(t)];\n      }, d.prototype.get = function (t) {\n        return t = l(t), this.has(t) ? this.map[t] : null;\n      }, d.prototype.has = function (t) {\n        return this.map.hasOwnProperty(l(t));\n      }, d.prototype.set = function (t, e) {\n        this.map[l(t)] = f(e);\n      }, d.prototype.forEach = function (t, e) {\n        for (var n in this.map) this.map.hasOwnProperty(n) && t.call(e, this.map[n], n, this);\n      }, d.prototype.keys = function () {\n        var n = [];\n        return this.forEach(function (t, e) {\n          n.push(e);\n        }), p(n);\n      }, d.prototype.values = function () {\n        var e = [];\n        return this.forEach(function (t) {\n          e.push(t);\n        }), p(e);\n      }, d.prototype.entries = function () {\n        var n = [];\n        return this.forEach(function (t, e) {\n          n.push([e, t]);\n        }), p(n);\n      }, n && (d.prototype[Symbol.iterator] = d.prototype.entries);\n      var c = [\"DELETE\", \"GET\", \"HEAD\", \"OPTIONS\", \"POST\", \"PUT\"];\n      w.prototype.clone = function () {\n        return new w(this, {\n          body: this._bodyInit\n        });\n      }, b.call(w.prototype), b.call(E.prototype), E.prototype.clone = function () {\n        return new E(this._bodyInit, {\n          status: this.status,\n          statusText: this.statusText,\n          headers: new d(this.headers),\n          url: this.url\n        });\n      }, E.error = function () {\n        var t = new E(null, {\n          status: 0,\n          statusText: \"\"\n        });\n        return t.type = \"error\", t;\n      };\n      var h = [301, 302, 303, 307, 308];\n      E.redirect = function (t, e) {\n        if (-1 === h.indexOf(e)) throw new RangeError(\"Invalid status code\");\n        return new E(null, {\n          status: e,\n          headers: {\n            location: t\n          }\n        });\n      }, t.Headers = d, t.Request = w, t.Response = E, t.fetch = function (n, i) {\n        return new Promise(function (r, t) {\n          var e = new w(n, i),\n              o = new XMLHttpRequest();\n          o.onload = function () {\n            var t,\n                i,\n                e = {\n              status: o.status,\n              statusText: o.statusText,\n              headers: (t = o.getAllResponseHeaders() || \"\", i = new d(), t.replace(/\\r?\\n[\\t ]+/g, \" \").split(/\\r?\\n/).forEach(function (t) {\n                var e = t.split(\":\"),\n                    n = e.shift().trim();\n\n                if (n) {\n                  var r = e.join(\":\").trim();\n                  i.append(n, r);\n                }\n              }), i)\n            };\n            e.url = \"responseURL\" in o ? o.responseURL : e.headers.get(\"X-Request-URL\");\n            var n = \"response\" in o ? o.response : o.responseText;\n            r(new E(n, e));\n          }, o.onerror = function () {\n            t(new TypeError(\"Network request failed\"));\n          }, o.ontimeout = function () {\n            t(new TypeError(\"Network request failed\"));\n          }, o.open(e.method, e.url, !0), \"include\" === e.credentials ? o.withCredentials = !0 : \"omit\" === e.credentials && (o.withCredentials = !1), \"responseType\" in o && a && (o.responseType = \"blob\"), e.headers.forEach(function (t, e) {\n            o.setRequestHeader(e, t);\n          }), o.send(void 0 === e._bodyInit ? null : e._bodyInit);\n        });\n      }, t.fetch.polyfill = !0;\n    }\n\n    function l(t) {\n      if (\"string\" != typeof t && (t = String(t)), /[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(t)) throw new TypeError(\"Invalid character in header field name\");\n      return t.toLowerCase();\n    }\n\n    function f(t) {\n      return \"string\" != typeof t && (t = String(t)), t;\n    }\n\n    function p(e) {\n      var t = {\n        next: function () {\n          var t = e.shift();\n          return {\n            done: void 0 === t,\n            value: t\n          };\n        }\n      };\n      return n && (t[Symbol.iterator] = function () {\n        return t;\n      }), t;\n    }\n\n    function d(e) {\n      this.map = {}, e instanceof d ? e.forEach(function (t, e) {\n        this.append(e, t);\n      }, this) : Array.isArray(e) ? e.forEach(function (t) {\n        this.append(t[0], t[1]);\n      }, this) : e && Object.getOwnPropertyNames(e).forEach(function (t) {\n        this.append(t, e[t]);\n      }, this);\n    }\n\n    function y(t) {\n      if (t.bodyUsed) return Promise.reject(new TypeError(\"Already read\"));\n      t.bodyUsed = !0;\n    }\n\n    function m(n) {\n      return new Promise(function (t, e) {\n        n.onload = function () {\n          t(n.result);\n        }, n.onerror = function () {\n          e(n.error);\n        };\n      });\n    }\n\n    function g(t) {\n      var e = new FileReader(),\n          n = m(e);\n      return e.readAsArrayBuffer(t), n;\n    }\n\n    function v(t) {\n      if (t.slice) return t.slice(0);\n      var e = new Uint8Array(t.byteLength);\n      return e.set(new Uint8Array(t)), e.buffer;\n    }\n\n    function b() {\n      return this.bodyUsed = !1, this._initBody = function (t) {\n        if (this._bodyInit = t) {\n          if (\"string\" == typeof t) this._bodyText = t;else if (a && Blob.prototype.isPrototypeOf(t)) this._bodyBlob = t;else if (r && FormData.prototype.isPrototypeOf(t)) this._bodyFormData = t;else if (e && URLSearchParams.prototype.isPrototypeOf(t)) this._bodyText = t.toString();else if (i && a && s(t)) this._bodyArrayBuffer = v(t.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer]);else {\n            if (!i || !ArrayBuffer.prototype.isPrototypeOf(t) && !u(t)) throw new Error(\"unsupported BodyInit type\");\n            this._bodyArrayBuffer = v(t);\n          }\n        } else this._bodyText = \"\";\n        this.headers.get(\"content-type\") || (\"string\" == typeof t ? this.headers.set(\"content-type\", \"text/plain;charset=UTF-8\") : this._bodyBlob && this._bodyBlob.type ? this.headers.set(\"content-type\", this._bodyBlob.type) : e && URLSearchParams.prototype.isPrototypeOf(t) && this.headers.set(\"content-type\", \"application/x-www-form-urlencoded;charset=UTF-8\"));\n      }, a && (this.blob = function () {\n        var t = y(this);\n        if (t) return t;\n        if (this._bodyBlob) return Promise.resolve(this._bodyBlob);\n        if (this._bodyArrayBuffer) return Promise.resolve(new Blob([this._bodyArrayBuffer]));\n        if (this._bodyFormData) throw new Error(\"could not read FormData body as blob\");\n        return Promise.resolve(new Blob([this._bodyText]));\n      }, this.arrayBuffer = function () {\n        return this._bodyArrayBuffer ? y(this) || Promise.resolve(this._bodyArrayBuffer) : this.blob().then(g);\n      }), this.text = function () {\n        var t,\n            e,\n            n,\n            r = y(this);\n        if (r) return r;\n        if (this._bodyBlob) return t = this._bodyBlob, e = new FileReader(), n = m(e), e.readAsText(t), n;\n        if (this._bodyArrayBuffer) return Promise.resolve(function (t) {\n          for (var e = new Uint8Array(t), n = new Array(e.length), r = 0; r < e.length; r++) n[r] = String.fromCharCode(e[r]);\n\n          return n.join(\"\");\n        }(this._bodyArrayBuffer));\n        if (this._bodyFormData) throw new Error(\"could not read FormData body as text\");\n        return Promise.resolve(this._bodyText);\n      }, r && (this.formData = function () {\n        return this.text().then(_);\n      }), this.json = function () {\n        return this.text().then(JSON.parse);\n      }, this;\n    }\n\n    function w(t, e) {\n      var n,\n          r,\n          i = (e = e || {}).body;\n\n      if (t instanceof w) {\n        if (t.bodyUsed) throw new TypeError(\"Already read\");\n        this.url = t.url, this.credentials = t.credentials, e.headers || (this.headers = new d(t.headers)), this.method = t.method, this.mode = t.mode, i || null == t._bodyInit || (i = t._bodyInit, t.bodyUsed = !0);\n      } else this.url = String(t);\n\n      if (this.credentials = e.credentials || this.credentials || \"omit\", !e.headers && this.headers || (this.headers = new d(e.headers)), this.method = (n = e.method || this.method || \"GET\", r = n.toUpperCase(), -1 < c.indexOf(r) ? r : n), this.mode = e.mode || this.mode || null, this.referrer = null, (\"GET\" === this.method || \"HEAD\" === this.method) && i) throw new TypeError(\"Body not allowed for GET or HEAD requests\");\n\n      this._initBody(i);\n    }\n\n    function _(t) {\n      var i = new FormData();\n      return t.trim().split(\"&\").forEach(function (t) {\n        if (t) {\n          var e = t.split(\"=\"),\n              n = e.shift().replace(/\\+/g, \" \"),\n              r = e.join(\"=\").replace(/\\+/g, \" \");\n          i.append(decodeURIComponent(n), decodeURIComponent(r));\n        }\n      }), i;\n    }\n\n    function E(t, e) {\n      e || (e = {}), this.type = \"default\", this.status = void 0 === e.status ? 200 : e.status, this.ok = 200 <= this.status && this.status < 300, this.statusText = \"statusText\" in e ? e.statusText : \"OK\", this.headers = new d(e.headers), this.url = e.url || \"\", this._initBody(t);\n    }\n  }(\"undefined\" != typeof self ? self : void 0);\n  var t = \"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {};\n\n  function e(t, e) {\n    return t(e = {\n      exports: {}\n    }, e.exports), e.exports;\n  }\n\n  function n(e) {\n    var n = this.constructor;\n    return this.then(function (t) {\n      return n.resolve(e()).then(function () {\n        return t;\n      });\n    }, function (t) {\n      return n.resolve(e()).then(function () {\n        return n.reject(t);\n      });\n    });\n  }\n\n  var r = setTimeout;\n\n  function i() {}\n\n  function o(t) {\n    if (!(this instanceof o)) throw new TypeError(\"Promises must be constructed via new\");\n    if (\"function\" != typeof t) throw new TypeError(\"not a function\");\n    this._state = 0, this._handled = !1, this._value = void 0, this._deferreds = [], l(t, this);\n  }\n\n  function a(n, r) {\n    for (; 3 === n._state;) n = n._value;\n\n    0 !== n._state ? (n._handled = !0, o._immediateFn(function () {\n      var t = 1 === n._state ? r.onFulfilled : r.onRejected;\n\n      if (null !== t) {\n        var e;\n\n        try {\n          e = t(n._value);\n        } catch (t) {\n          return void u(r.promise, t);\n        }\n\n        s(r.promise, e);\n      } else (1 === n._state ? s : u)(r.promise, n._value);\n    })) : n._deferreds.push(r);\n  }\n\n  function s(e, t) {\n    try {\n      if (t === e) throw new TypeError(\"A promise cannot be resolved with itself.\");\n\n      if (t && (\"object\" == typeof t || \"function\" == typeof t)) {\n        var n = t.then;\n        if (t instanceof o) return e._state = 3, e._value = t, void c(e);\n        if (\"function\" == typeof n) return void l((r = n, i = t, function () {\n          r.apply(i, arguments);\n        }), e);\n      }\n\n      e._state = 1, e._value = t, c(e);\n    } catch (t) {\n      u(e, t);\n    }\n\n    var r, i;\n  }\n\n  function u(t, e) {\n    t._state = 2, t._value = e, c(t);\n  }\n\n  function c(t) {\n    2 === t._state && 0 === t._deferreds.length && o._immediateFn(function () {\n      t._handled || o._unhandledRejectionFn(t._value);\n    });\n\n    for (var e = 0, n = t._deferreds.length; e < n; e++) a(t, t._deferreds[e]);\n\n    t._deferreds = null;\n  }\n\n  function h(t, e, n) {\n    this.onFulfilled = \"function\" == typeof t ? t : null, this.onRejected = \"function\" == typeof e ? e : null, this.promise = n;\n  }\n\n  function l(t, e) {\n    var n = !1;\n\n    try {\n      t(function (t) {\n        n || (n = !0, s(e, t));\n      }, function (t) {\n        n || (n = !0, u(e, t));\n      });\n    } catch (t) {\n      if (n) return;\n      n = !0, u(e, t);\n    }\n  }\n\n  o.prototype.catch = function (t) {\n    return this.then(null, t);\n  }, o.prototype.then = function (t, e) {\n    var n = new this.constructor(i);\n    return a(this, new h(t, e, n)), n;\n  }, o.prototype.finally = n, o.all = function (e) {\n    return new o(function (r, i) {\n      if (!e || void 0 === e.length) throw new TypeError(\"Promise.all accepts an array\");\n      var o = Array.prototype.slice.call(e);\n      if (0 === o.length) return r([]);\n      var a = o.length;\n\n      function s(e, t) {\n        try {\n          if (t && (\"object\" == typeof t || \"function\" == typeof t)) {\n            var n = t.then;\n            if (\"function\" == typeof n) return void n.call(t, function (t) {\n              s(e, t);\n            }, i);\n          }\n\n          o[e] = t, 0 == --a && r(o);\n        } catch (t) {\n          i(t);\n        }\n      }\n\n      for (var t = 0; t < o.length; t++) s(t, o[t]);\n    });\n  }, o.resolve = function (e) {\n    return e && \"object\" == typeof e && e.constructor === o ? e : new o(function (t) {\n      t(e);\n    });\n  }, o.reject = function (n) {\n    return new o(function (t, e) {\n      e(n);\n    });\n  }, o.race = function (i) {\n    return new o(function (t, e) {\n      for (var n = 0, r = i.length; n < r; n++) i[n].then(t, e);\n    });\n  }, o._immediateFn = \"function\" == typeof setImmediate && function (t) {\n    setImmediate(t);\n  } || function (t) {\n    r(t, 0);\n  }, o._unhandledRejectionFn = function (t) {\n    \"undefined\" != typeof console && console && console.warn(\"Possible Unhandled Promise Rejection:\", t);\n  };\n\n  var f = function () {\n    if (\"undefined\" != typeof self) return self;\n    if (\"undefined\" != typeof window) return window;\n    if (void 0 !== t) return t;\n    throw new Error(\"unable to locate global object\");\n  }();\n\n  \"Promise\" in f ? f.Promise.prototype.finally || (f.Promise.prototype.finally = n) : f.Promise = o;\n\n  var p,\n      d,\n      y,\n      b = function (r, i, t) {\n    if (function (t) {\n      if (\"function\" != typeof t) throw TypeError(String(t) + \" is not a function\");\n    }(r), void 0 === i) return r;\n\n    switch (t) {\n      case 0:\n        return function () {\n          return r.call(i);\n        };\n\n      case 1:\n        return function (t) {\n          return r.call(i, t);\n        };\n\n      case 2:\n        return function (t, e) {\n          return r.call(i, t, e);\n        };\n\n      case 3:\n        return function (t, e, n) {\n          return r.call(i, t, e, n);\n        };\n    }\n\n    return function () {\n      return r.apply(i, arguments);\n    };\n  },\n      m = function (t) {\n    try {\n      return !!t();\n    } catch (t) {\n      return !0;\n    }\n  },\n      g = {}.toString,\n      v = function (t) {\n    return g.call(t).slice(8, -1);\n  },\n      w = \"\".split,\n      _ = m(function () {\n    return !Object(\"z\").propertyIsEnumerable(0);\n  }) ? function (t) {\n    return \"String\" == v(t) ? w.call(t, \"\") : Object(t);\n  } : Object,\n      E = function (t) {\n    if (null == t) throw TypeError(\"Can't call method on \" + t);\n    return t;\n  },\n      T = function (t) {\n    return Object(E(t));\n  },\n      S = Math.ceil,\n      I = Math.floor,\n      C = function (t) {\n    return isNaN(t = +t) ? 0 : (0 < t ? I : S)(t);\n  },\n      N = Math.min,\n      A = function (t) {\n    return 0 < t ? N(C(t), 9007199254740991) : 0;\n  },\n      k = function (t) {\n    return \"object\" == typeof t ? null !== t : \"function\" == typeof t;\n  },\n      D = Array.isArray || function (t) {\n    return \"Array\" == v(t);\n  },\n      R = \"object\" == typeof window && window && window.Math == Math ? window : \"object\" == typeof self && self && self.Math == Math ? self : Function(\"return this\")(),\n      O = !m(function () {\n    return 7 != Object.defineProperty({}, \"a\", {\n      get: function () {\n        return 7;\n      }\n    }).a;\n  }),\n      P = R.document,\n      M = k(P) && k(P.createElement),\n      x = function (t) {\n    return M ? P.createElement(t) : {};\n  },\n      L = !O && !m(function () {\n    return 7 != Object.defineProperty(x(\"div\"), \"a\", {\n      get: function () {\n        return 7;\n      }\n    }).a;\n  }),\n      F = function (t) {\n    if (!k(t)) throw TypeError(String(t) + \" is not an object\");\n    return t;\n  },\n      U = function (t, e) {\n    if (!k(t)) return t;\n    var n, r;\n    if (e && \"function\" == typeof (n = t.toString) && !k(r = n.call(t))) return r;\n    if (\"function\" == typeof (n = t.valueOf) && !k(r = n.call(t))) return r;\n    if (!e && \"function\" == typeof (n = t.toString) && !k(r = n.call(t))) return r;\n    throw TypeError(\"Can't convert object to primitive value\");\n  },\n      q = Object.defineProperty,\n      V = {\n    f: O ? q : function (t, e, n) {\n      if (F(t), e = U(e, !0), F(n), L) try {\n        return q(t, e, n);\n      } catch (t) {}\n      if (\"get\" in n || \"set\" in n) throw TypeError(\"Accessors not supported\");\n      return \"value\" in n && (t[e] = n.value), t;\n    }\n  },\n      B = function (t, e) {\n    return {\n      enumerable: !(1 & t),\n      configurable: !(2 & t),\n      writable: !(4 & t),\n      value: e\n    };\n  },\n      j = O ? function (t, e, n) {\n    return V.f(t, e, B(1, n));\n  } : function (t, e, n) {\n    return t[e] = n, t;\n  },\n      W = function (e, n) {\n    try {\n      j(R, e, n);\n    } catch (t) {\n      R[e] = n;\n    }\n\n    return n;\n  },\n      K = e(function (t) {\n    var e = \"__core-js_shared__\",\n        n = R[e] || W(e, {});\n    (t.exports = function (t, e) {\n      return n[t] || (n[t] = void 0 !== e ? e : {});\n    })(\"versions\", []).push({\n      version: \"3.0.1\",\n      mode: \"global\",\n      copyright: \"Â© 2019 Denis Pushkarev (zloirock.ru)\"\n    });\n  }),\n      Q = 0,\n      H = Math.random(),\n      G = function (t) {\n    return \"Symbol(\".concat(void 0 === t ? \"\" : t, \")_\", (++Q + H).toString(36));\n  },\n      z = !m(function () {\n    return !String(Symbol());\n  }),\n      Y = K(\"wks\"),\n      X = R.Symbol,\n      J = function (t) {\n    return Y[t] || (Y[t] = z && X[t] || (z ? X : G)(\"Symbol.\" + t));\n  },\n      $ = J(\"species\"),\n      Z = function (t, e) {\n    var n;\n    return D(t) && (\"function\" != typeof (n = t.constructor) || n !== Array && !D(n.prototype) ? k(n) && null === (n = n[$]) && (n = void 0) : n = void 0), new (void 0 === n ? Array : n)(0 === e ? 0 : e);\n  },\n      tt = function (l, t) {\n    var f = 1 == l,\n        p = 2 == l,\n        d = 3 == l,\n        y = 4 == l,\n        m = 6 == l,\n        g = 5 == l || m,\n        v = t || Z;\n    return function (t, e, n) {\n      for (var r, i, o = T(t), a = _(o), s = b(e, n, 3), u = A(a.length), c = 0, h = f ? v(t, u) : p ? v(t, 0) : void 0; c < u; c++) if ((g || c in a) && (i = s(r = a[c], c, o), l)) if (f) h[c] = i;else if (i) switch (l) {\n        case 3:\n          return !0;\n\n        case 5:\n          return r;\n\n        case 6:\n          return c;\n\n        case 2:\n          h.push(r);\n      } else if (y) return !1;\n\n      return m ? -1 : d || y ? y : h;\n    };\n  },\n      et = {}.propertyIsEnumerable,\n      nt = Object.getOwnPropertyDescriptor,\n      rt = {\n    f: nt && !et.call({\n      1: 2\n    }, 1) ? function (t) {\n      var e = nt(this, t);\n      return !!e && e.enumerable;\n    } : et\n  },\n      it = function (t) {\n    return _(E(t));\n  },\n      ot = {}.hasOwnProperty,\n      at = function (t, e) {\n    return ot.call(t, e);\n  },\n      st = Object.getOwnPropertyDescriptor,\n      ut = {\n    f: O ? st : function (t, e) {\n      if (t = it(t), e = U(e, !0), L) try {\n        return st(t, e);\n      } catch (t) {}\n      if (at(t, e)) return B(!rt.f.call(t, e), t[e]);\n    }\n  },\n      ct = K(\"native-function-to-string\", Function.toString),\n      ht = R.WeakMap,\n      lt = \"function\" == typeof ht && /native code/.test(ct.call(ht)),\n      ft = K(\"keys\"),\n      pt = function (t) {\n    return ft[t] || (ft[t] = G(t));\n  },\n      dt = {},\n      yt = R.WeakMap;\n\n  if (lt) {\n    var mt = new yt(),\n        gt = mt.get,\n        vt = mt.has,\n        bt = mt.set;\n    p = function (t, e) {\n      return bt.call(mt, t, e), e;\n    }, d = function (t) {\n      return gt.call(mt, t) || {};\n    }, y = function (t) {\n      return vt.call(mt, t);\n    };\n  } else {\n    var wt = pt(\"state\");\n    dt[wt] = !0, p = function (t, e) {\n      return j(t, wt, e), e;\n    }, d = function (t) {\n      return at(t, wt) ? t[wt] : {};\n    }, y = function (t) {\n      return at(t, wt);\n    };\n  }\n\n  var _t,\n      Et = {\n    set: p,\n    get: d,\n    has: y,\n    enforce: function (t) {\n      return y(t) ? d(t) : p(t, {});\n    },\n    getterFor: function (n) {\n      return function (t) {\n        var e;\n        if (!k(t) || (e = d(t)).type !== n) throw TypeError(\"Incompatible receiver, \" + n + \" required\");\n        return e;\n      };\n    }\n  },\n      Tt = e(function (t) {\n    var e = Et.get,\n        s = Et.enforce,\n        u = String(ct).split(\"toString\");\n    K(\"inspectSource\", function (t) {\n      return ct.call(t);\n    }), (t.exports = function (t, e, n, r) {\n      var i = !!r && !!r.unsafe,\n          o = !!r && !!r.enumerable,\n          a = !!r && !!r.noTargetGet;\n      \"function\" == typeof n && (\"string\" != typeof e || at(n, \"name\") || j(n, \"name\", e), s(n).source = u.join(\"string\" == typeof e ? e : \"\")), t !== R ? (i ? !a && t[e] && (o = !0) : delete t[e], o ? t[e] = n : j(t, e, n)) : o ? t[e] = n : W(e, n);\n    })(Function.prototype, \"toString\", function () {\n      return \"function\" == typeof this && e(this).source || ct.call(this);\n    });\n  }),\n      St = Math.max,\n      It = Math.min,\n      Ct = (_t = !1, function (t, e, n) {\n    var r,\n        i,\n        o,\n        a = it(t),\n        s = A(a.length),\n        u = (r = s, (i = C(n)) < 0 ? St(i + r, 0) : It(i, r));\n\n    if (_t && e != e) {\n      for (; u < s;) if ((o = a[u++]) != o) return !0;\n    } else for (; u < s; u++) if ((_t || u in a) && a[u] === e) return _t || u || 0;\n\n    return !_t && -1;\n  }),\n      Nt = function (t, e) {\n    var n,\n        r = it(t),\n        i = 0,\n        o = [];\n\n    for (n in r) !at(dt, n) && at(r, n) && o.push(n);\n\n    for (; e.length > i;) at(r, n = e[i++]) && (~Ct(o, n) || o.push(n));\n\n    return o;\n  },\n      At = [\"constructor\", \"hasOwnProperty\", \"isPrototypeOf\", \"propertyIsEnumerable\", \"toLocaleString\", \"toString\", \"valueOf\"],\n      kt = At.concat(\"length\", \"prototype\"),\n      Dt = {\n    f: Object.getOwnPropertyNames || function (t) {\n      return Nt(t, kt);\n    }\n  },\n      Rt = {\n    f: Object.getOwnPropertySymbols\n  },\n      Ot = R.Reflect,\n      Pt = Ot && Ot.ownKeys || function (t) {\n    var e = Dt.f(F(t)),\n        n = Rt.f;\n    return n ? e.concat(n(t)) : e;\n  },\n      Mt = function (t, e) {\n    for (var n = Pt(e), r = V.f, i = ut.f, o = 0; o < n.length; o++) {\n      var a = n[o];\n      at(t, a) || r(t, a, i(e, a));\n    }\n  },\n      xt = /#|\\.prototype\\./,\n      Lt = function (t, e) {\n    var n = Ut[Ft(t)];\n    return n == Vt || n != qt && (\"function\" == typeof e ? m(e) : !!e);\n  },\n      Ft = Lt.normalize = function (t) {\n    return String(t).replace(xt, \".\").toLowerCase();\n  },\n      Ut = Lt.data = {},\n      qt = Lt.NATIVE = \"N\",\n      Vt = Lt.POLYFILL = \"P\",\n      Bt = Lt,\n      jt = ut.f,\n      Wt = function (t, e) {\n    var n,\n        r,\n        i,\n        o,\n        a,\n        s = t.target,\n        u = t.global,\n        c = t.stat;\n    if (n = u ? R : c ? R[s] || W(s, {}) : (R[s] || {}).prototype) for (r in e) {\n      if (o = e[r], i = t.noTargetGet ? (a = jt(n, r)) && a.value : n[r], !Bt(u ? r : s + (c ? \".\" : \"#\") + r, t.forced) && void 0 !== i) {\n        if (typeof o == typeof i) continue;\n        Mt(o, i);\n      }\n\n      (t.sham || i && i.sham) && j(o, \"sham\", !0), Tt(n, r, o, t);\n    }\n  },\n      Kt = Object.keys || function (t) {\n    return Nt(t, At);\n  },\n      Qt = O ? Object.defineProperties : function (t, e) {\n    F(t);\n\n    for (var n, r = Kt(e), i = r.length, o = 0; o < i;) V.f(t, n = r[o++], e[n]);\n\n    return t;\n  },\n      Ht = R.document,\n      Gt = Ht && Ht.documentElement,\n      zt = pt(\"IE_PROTO\"),\n      Yt = \"prototype\",\n      Xt = function () {},\n      Jt = function () {\n    var t,\n        e = x(\"iframe\"),\n        n = At.length,\n        r = \"script\";\n\n    for (e.style.display = \"none\", Gt.appendChild(e), e.src = String(\"javascript:\"), (t = e.contentWindow.document).open(), t.write(\"<script>document.F=Object</\" + r + \">\"), t.close(), Jt = t.F; n--;) delete Jt[Yt][At[n]];\n\n    return Jt();\n  },\n      $t = Object.create || function (t, e) {\n    var n;\n    return null !== t ? (Xt[Yt] = F(t), n = new Xt(), Xt[Yt] = null, n[zt] = t) : n = Jt(), void 0 === e ? n : Qt(n, e);\n  };\n\n  dt[zt] = !0;\n  var Zt = J(\"unscopables\"),\n      te = Array.prototype;\n  null == te[Zt] && j(te, Zt, $t(null));\n\n  var ee = function (t) {\n    te[Zt][t] = !0;\n  },\n      ne = tt(5),\n      re = \"find\",\n      ie = !0;\n\n  re in [] && Array(1)[re](function () {\n    ie = !1;\n  }), Wt({\n    target: \"Array\",\n    proto: !0,\n    forced: ie\n  }, {\n    find: function (t) {\n      return ne(this, t, 1 < arguments.length ? arguments[1] : void 0);\n    }\n  }), ee(re);\n\n  var oe = Function.call,\n      ae = function (t, e, n) {\n    return b(oe, R[t].prototype[e], n);\n  },\n      se = (ae(\"Array\", \"find\"), tt(6)),\n      ue = \"findIndex\",\n      ce = !0;\n\n  ue in [] && Array(1)[ue](function () {\n    ce = !1;\n  }), Wt({\n    target: \"Array\",\n    proto: !0,\n    forced: ce\n  }, {\n    findIndex: function (t) {\n      return se(this, t, 1 < arguments.length ? arguments[1] : void 0);\n    }\n  }), ee(ue);\n  ae(\"Array\", \"findIndex\");\n  var he = Object.assign,\n      le = !he || m(function () {\n    var t = {},\n        e = {},\n        n = Symbol(),\n        r = \"abcdefghijklmnopqrst\";\n    return t[n] = 7, r.split(\"\").forEach(function (t) {\n      e[t] = t;\n    }), 7 != he({}, t)[n] || Kt(he({}, e)).join(\"\") != r;\n  }) ? function (t, e) {\n    for (var n = T(t), r = arguments.length, i = 1, o = Rt.f, a = rt.f; i < r;) for (var s, u = _(arguments[i++]), c = o ? Kt(u).concat(o(u)) : Kt(u), h = c.length, l = 0; l < h;) a.call(u, s = c[l++]) && (n[s] = u[s]);\n\n    return n;\n  } : he;\n  Wt({\n    target: \"Object\",\n    stat: !0,\n    forced: Object.assign !== le\n  }, {\n    assign: le\n  });\n\n  var fe = R,\n      pe = (fe.Object.assign, J(\"match\")),\n      de = function (t, e, n) {\n    if (k(r = e) && (void 0 !== (i = r[pe]) ? i : \"RegExp\" == v(r))) throw TypeError(\"String.prototype.\" + n + \" doesn't accept regex\");\n    var r, i;\n    return String(E(t));\n  },\n      ye = J(\"match\"),\n      me = \"startsWith\",\n      ge = function (e) {\n    var n = /./;\n\n    try {\n      \"/./\"[e](n);\n    } catch (t) {\n      try {\n        return n[ye] = !1, \"/./\"[e](n);\n      } catch (t) {}\n    }\n\n    return !1;\n  }(me),\n      ve = \"\"[me];\n\n  Wt({\n    target: \"String\",\n    proto: !0,\n    forced: !ge\n  }, {\n    startsWith: function (t) {\n      var e = de(this, t, me),\n          n = A(Math.min(1 < arguments.length ? arguments[1] : void 0, e.length)),\n          r = String(t);\n      return ve ? ve.call(e, r, n) : e.slice(n, n + r.length) === r;\n    }\n  });\n  ae(\"String\", \"startsWith\");\n  Wt({\n    target: \"String\",\n    proto: !0\n  }, {\n    repeat: \"\".repeat || function (t) {\n      var e = String(E(this)),\n          n = \"\",\n          r = C(t);\n      if (r < 0 || r == 1 / 0) throw RangeError(\"Wrong number of repetitions\");\n\n      for (; 0 < r; (r >>>= 1) && (e += e)) 1 & r && (n += e);\n\n      return n;\n    }\n  });\n  ae(\"String\", \"repeat\");\n\n  var be,\n      we = function (t, e, n) {\n    var r = U(e);\n    r in t ? V.f(t, r, B(0, n)) : t[r] = n;\n  },\n      _e = J(\"species\"),\n      Ee = J(\"isConcatSpreadable\"),\n      Te = 9007199254740991,\n      Se = \"Maximum allowed index exceeded\",\n      Ie = !m(function () {\n    var t = [];\n    return t[Ee] = !1, t.concat()[0] !== t;\n  }),\n      Ce = (be = \"concat\", !m(function () {\n    var t = [];\n    return (t.constructor = {})[_e] = function () {\n      return {\n        foo: 1\n      };\n    }, 1 !== t[be](Boolean).foo;\n  })),\n      Ne = function (t) {\n    if (!k(t)) return !1;\n    var e = t[Ee];\n    return void 0 !== e ? !!e : D(t);\n  };\n\n  Wt({\n    target: \"Array\",\n    proto: !0,\n    forced: !Ie || !Ce\n  }, {\n    concat: function (t) {\n      var e,\n          n,\n          r,\n          i,\n          o,\n          a = T(this),\n          s = Z(a, 0),\n          u = 0;\n\n      for (e = -1, r = arguments.length; e < r; e++) if (o = -1 === e ? a : arguments[e], Ne(o)) {\n        if (i = A(o.length), Te < u + i) throw TypeError(Se);\n\n        for (n = 0; n < i; n++, u++) n in o && we(s, u, o[n]);\n      } else {\n        if (Te <= u) throw TypeError(Se);\n        we(s, u++, o);\n      }\n\n      return s.length = u, s;\n    }\n  });\n  var Ae = J(\"toStringTag\"),\n      ke = \"Arguments\" == v(function () {\n    return arguments;\n  }()),\n      De = {};\n  De[J(\"toStringTag\")] = \"z\";\n  var Re = \"[object z]\" !== String(De) ? function () {\n    return \"[object \" + (void 0 === (t = this) ? \"Undefined\" : null === t ? \"Null\" : \"string\" == typeof (n = function (t, e) {\n      try {\n        return t[e];\n      } catch (t) {}\n    }(e = Object(t), Ae)) ? n : ke ? v(e) : \"Object\" == (r = v(e)) && \"function\" == typeof e.callee ? \"Arguments\" : r) + \"]\";\n    var t, e, n, r;\n  } : De.toString,\n      Oe = Object.prototype;\n  Re !== Oe.toString && Tt(Oe, \"toString\", Re, {\n    unsafe: !0\n  });\n\n  var Pe = V.f,\n      Me = J(\"toStringTag\"),\n      xe = function (t, e, n) {\n    t && !at(t = n ? t : t.prototype, Me) && Pe(t, Me, {\n      configurable: !0,\n      value: e\n    });\n  },\n      Le = {\n    f: J\n  },\n      Fe = V.f,\n      Ue = function (t) {\n    var e = fe.Symbol || (fe.Symbol = {});\n    at(e, t) || Fe(e, t, {\n      value: Le.f(t)\n    });\n  },\n      qe = Dt.f,\n      Ve = {}.toString,\n      Be = \"object\" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [],\n      je = {\n    f: function (t) {\n      return Be && \"[object Window]\" == Ve.call(t) ? function (t) {\n        try {\n          return qe(t);\n        } catch (t) {\n          return Be.slice();\n        }\n      }(t) : qe(it(t));\n    }\n  },\n      We = pt(\"hidden\"),\n      Ke = \"Symbol\",\n      Qe = Et.set,\n      He = Et.getterFor(Ke),\n      Ge = ut.f,\n      ze = V.f,\n      Ye = je.f,\n      Xe = R.Symbol,\n      Je = R.JSON,\n      $e = Je && Je.stringify,\n      Ze = \"prototype\",\n      tn = J(\"toPrimitive\"),\n      en = rt.f,\n      nn = K(\"symbol-registry\"),\n      rn = K(\"symbols\"),\n      on = K(\"op-symbols\"),\n      an = K(\"wks\"),\n      sn = Object[Ze],\n      un = R.QObject,\n      cn = !un || !un[Ze] || !un[Ze].findChild,\n      hn = O && m(function () {\n    return 7 != $t(ze({}, \"a\", {\n      get: function () {\n        return ze(this, \"a\", {\n          value: 7\n        }).a;\n      }\n    })).a;\n  }) ? function (t, e, n) {\n    var r = Ge(sn, e);\n    r && delete sn[e], ze(t, e, n), r && t !== sn && ze(sn, e, r);\n  } : ze,\n      ln = function (t, e) {\n    var n = rn[t] = $t(Xe[Ze]);\n    return Qe(n, {\n      type: Ke,\n      tag: t,\n      description: e\n    }), O || (n.description = e), n;\n  },\n      fn = z && \"symbol\" == typeof Xe.iterator ? function (t) {\n    return \"symbol\" == typeof t;\n  } : function (t) {\n    return Object(t) instanceof Xe;\n  },\n      pn = function (t, e, n) {\n    return t === sn && pn(on, e, n), F(t), e = U(e, !0), F(n), at(rn, e) ? (n.enumerable ? (at(t, We) && t[We][e] && (t[We][e] = !1), n = $t(n, {\n      enumerable: B(0, !1)\n    })) : (at(t, We) || ze(t, We, B(1, {})), t[We][e] = !0), hn(t, e, n)) : ze(t, e, n);\n  },\n      dn = function (t, e) {\n    F(t);\n\n    for (var n, r = function (t) {\n      var e = Kt(t),\n          n = Rt.f;\n      if (n) for (var r, i = n(t), o = rt.f, a = 0; i.length > a;) o.call(t, r = i[a++]) && e.push(r);\n      return e;\n    }(e = it(e)), i = 0, o = r.length; i < o;) pn(t, n = r[i++], e[n]);\n\n    return t;\n  },\n      yn = function (t) {\n    var e = en.call(this, t = U(t, !0));\n    return !(this === sn && at(rn, t) && !at(on, t)) && (!(e || !at(this, t) || !at(rn, t) || at(this, We) && this[We][t]) || e);\n  },\n      mn = function (t, e) {\n    if (t = it(t), e = U(e, !0), t !== sn || !at(rn, e) || at(on, e)) {\n      var n = Ge(t, e);\n      return !n || !at(rn, e) || at(t, We) && t[We][e] || (n.enumerable = !0), n;\n    }\n  },\n      gn = function (t) {\n    for (var e, n = Ye(it(t)), r = [], i = 0; n.length > i;) at(rn, e = n[i++]) || at(dt, e) || r.push(e);\n\n    return r;\n  },\n      vn = function (t) {\n    for (var e, n = t === sn, r = Ye(n ? on : it(t)), i = [], o = 0; r.length > o;) !at(rn, e = r[o++]) || n && !at(sn, e) || i.push(rn[e]);\n\n    return i;\n  };\n\n  z || (Tt((Xe = function () {\n    if (this instanceof Xe) throw TypeError(\"Symbol is not a constructor\");\n\n    var t = void 0 === arguments[0] ? void 0 : String(arguments[0]),\n        e = G(t),\n        n = function (t) {\n      this === sn && n.call(on, t), at(this, We) && at(this[We], e) && (this[We][e] = !1), hn(this, e, B(1, t));\n    };\n\n    return O && cn && hn(sn, e, {\n      configurable: !0,\n      set: n\n    }), ln(e, t);\n  })[Ze], \"toString\", function () {\n    return He(this).tag;\n  }), rt.f = yn, V.f = pn, ut.f = mn, Dt.f = je.f = gn, Rt.f = vn, O && (ze(Xe[Ze], \"description\", {\n    configurable: !0,\n    get: function () {\n      return He(this).description;\n    }\n  }), Tt(sn, \"propertyIsEnumerable\", yn, {\n    unsafe: !0\n  })), Le.f = function (t) {\n    return ln(J(t), t);\n  }), Wt({\n    global: !0,\n    wrap: !0,\n    forced: !z,\n    sham: !z\n  }, {\n    Symbol: Xe\n  });\n\n  for (var bn = Kt(an), wn = 0; bn.length > wn;) Ue(bn[wn++]);\n\n  Wt({\n    target: Ke,\n    stat: !0,\n    forced: !z\n  }, {\n    for: function (t) {\n      return at(nn, t += \"\") ? nn[t] : nn[t] = Xe(t);\n    },\n    keyFor: function (t) {\n      if (!fn(t)) throw TypeError(t + \" is not a symbol\");\n\n      for (var e in nn) if (nn[e] === t) return e;\n    },\n    useSetter: function () {\n      cn = !0;\n    },\n    useSimple: function () {\n      cn = !1;\n    }\n  }), Wt({\n    target: \"Object\",\n    stat: !0,\n    forced: !z,\n    sham: !O\n  }, {\n    create: function (t, e) {\n      return void 0 === e ? $t(t) : dn($t(t), e);\n    },\n    defineProperty: pn,\n    defineProperties: dn,\n    getOwnPropertyDescriptor: mn\n  }), Wt({\n    target: \"Object\",\n    stat: !0,\n    forced: !z\n  }, {\n    getOwnPropertyNames: gn,\n    getOwnPropertySymbols: vn\n  }), Je && Wt({\n    target: \"JSON\",\n    stat: !0,\n    forced: !z || m(function () {\n      var t = Xe();\n      return \"[null]\" != $e([t]) || \"{}\" != $e({\n        a: t\n      }) || \"{}\" != $e(Object(t));\n    })\n  }, {\n    stringify: function (t) {\n      for (var e, n, r = [t], i = 1; arguments.length > i;) r.push(arguments[i++]);\n\n      if (n = e = r[1], (k(e) || void 0 !== t) && !fn(t)) return D(e) || (e = function (t, e) {\n        if (\"function\" == typeof n && (e = n.call(this, t, e)), !fn(e)) return e;\n      }), r[1] = e, $e.apply(Je, r);\n    }\n  }), Xe[Ze][tn] || j(Xe[Ze], tn, Xe[Ze].valueOf), xe(Xe, Ke), dt[We] = !0, Ue(\"asyncIterator\");\n  var _n = V.f,\n      En = R.Symbol;\n\n  if (O && \"function\" == typeof En && (!(\"description\" in En.prototype) || void 0 !== En().description)) {\n    var Tn = {},\n        Sn = function () {\n      var t = arguments.length < 1 || void 0 === arguments[0] ? void 0 : String(arguments[0]),\n          e = this instanceof Sn ? new En(t) : void 0 === t ? En() : En(t);\n      return \"\" === t && (Tn[e] = !0), e;\n    };\n\n    Mt(Sn, En);\n    var In = Sn.prototype = En.prototype;\n    In.constructor = Sn;\n    var Cn = In.toString,\n        Nn = \"Symbol(test)\" == String(En(\"test\")),\n        An = /^Symbol\\((.*)\\)[^)]+$/;\n    _n(In, \"description\", {\n      configurable: !0,\n      get: function () {\n        var t = k(this) ? this.valueOf() : this,\n            e = Cn.call(t);\n        if (at(Tn, t)) return \"\";\n        var n = Nn ? e.slice(7, -1) : e.replace(An, \"$1\");\n        return \"\" === n ? void 0 : n;\n      }\n    }), Wt({\n      global: !0,\n      forced: !0\n    }, {\n      Symbol: Sn\n    });\n  }\n\n  Ue(\"hasInstance\"), Ue(\"isConcatSpreadable\"), Ue(\"iterator\"), Ue(\"match\"), Ue(\"replace\"), Ue(\"search\"), Ue(\"species\"), Ue(\"split\"), Ue(\"toPrimitive\"), Ue(\"toStringTag\"), Ue(\"unscopables\"), xe(Math, \"Math\", !0), xe(R.JSON, \"JSON\", !0);\n  fe.Symbol;\n  Ue(\"dispose\"), Ue(\"observable\"), Ue(\"patternMatch\");\n  var kn,\n      Dn,\n      Rn,\n      On = !m(function () {\n    function t() {}\n\n    return t.prototype.constructor = null, Object.getPrototypeOf(new t()) !== t.prototype;\n  }),\n      Pn = pt(\"IE_PROTO\"),\n      Mn = Object.prototype,\n      xn = On ? Object.getPrototypeOf : function (t) {\n    return t = T(t), at(t, Pn) ? t[Pn] : \"function\" == typeof t.constructor && t instanceof t.constructor ? t.constructor.prototype : t instanceof Object ? Mn : null;\n  },\n      Ln = J(\"iterator\"),\n      Fn = !1;\n  [].keys && (\"next\" in (Rn = [].keys()) ? (Dn = xn(xn(Rn))) !== Object.prototype && (kn = Dn) : Fn = !0), null == kn && (kn = {}), at(kn, Ln) || j(kn, Ln, function () {\n    return this;\n  });\n\n  var Un = {\n    IteratorPrototype: kn,\n    BUGGY_SAFARI_ITERATORS: Fn\n  },\n      qn = Un.IteratorPrototype,\n      Vn = Object.setPrototypeOf || (\"__proto__\" in {} ? function () {\n    var n,\n        r = !1,\n        t = {};\n\n    try {\n      (n = Object.getOwnPropertyDescriptor(Object.prototype, \"__proto__\").set).call(t, []), r = t instanceof Array;\n    } catch (t) {}\n\n    return function (t, e) {\n      return function (t, e) {\n        if (F(t), !k(e) && null !== e) throw TypeError(\"Can't set \" + String(e) + \" as a prototype\");\n      }(t, e), r ? n.call(t, e) : t.__proto__ = e, t;\n    };\n  }() : void 0),\n      Bn = J(\"iterator\"),\n      jn = Un.IteratorPrototype,\n      Wn = Un.BUGGY_SAFARI_ITERATORS,\n      Kn = \"values\",\n      Qn = \"entries\",\n      Hn = function () {\n    return this;\n  },\n      Gn = function (t, e, n, r, i, o, a) {\n    var s, u, c;\n    u = r, c = e + \" Iterator\", (s = n).prototype = $t(qn, {\n      next: B(1, u)\n    }), xe(s, c, !1);\n\n    var h,\n        l,\n        f,\n        p = function (t) {\n      if (t === i && v) return v;\n      if (!Wn && t in m) return m[t];\n\n      switch (t) {\n        case \"keys\":\n        case Kn:\n        case Qn:\n          return function () {\n            return new n(this, t);\n          };\n      }\n\n      return function () {\n        return new n(this);\n      };\n    },\n        d = e + \" Iterator\",\n        y = !1,\n        m = t.prototype,\n        g = m[Bn] || m[\"@@iterator\"] || i && m[i],\n        v = !Wn && g || p(i),\n        b = \"Array\" == e && m.entries || g;\n\n    if (b && (h = xn(b.call(new t())), jn !== Object.prototype && h.next && (xn(h) !== jn && (Vn ? Vn(h, jn) : \"function\" != typeof h[Bn] && j(h, Bn, Hn)), xe(h, d, !0))), i == Kn && g && g.name !== Kn && (y = !0, v = function () {\n      return g.call(this);\n    }), m[Bn] !== v && j(m, Bn, v), i) if (l = {\n      values: p(Kn),\n      keys: o ? v : p(\"keys\"),\n      entries: p(Qn)\n    }, a) for (f in l) !Wn && !y && f in m || Tt(m, f, l[f]);else Wt({\n      target: e,\n      proto: !0,\n      forced: Wn || y\n    }, l);\n    return l;\n  },\n      zn = \"String Iterator\",\n      Yn = Et.set,\n      Xn = Et.getterFor(zn);\n\n  Gn(String, \"String\", function (t) {\n    Yn(this, {\n      type: zn,\n      string: String(t),\n      index: 0\n    });\n  }, function () {\n    var t,\n        e,\n        n,\n        r,\n        i,\n        o,\n        a,\n        s,\n        u = Xn(this),\n        c = u.string,\n        h = u.index;\n    return h >= c.length ? {\n      value: void 0,\n      done: !0\n    } : (e = h, n = !0, o = String(E(c)), a = C(e), s = o.length, t = a < 0 || s <= a ? n ? \"\" : void 0 : (r = o.charCodeAt(a)) < 55296 || 56319 < r || a + 1 === s || (i = o.charCodeAt(a + 1)) < 56320 || 57343 < i ? n ? o.charAt(a) : r : n ? o.slice(a, a + 2) : i - 56320 + (r - 55296 << 10) + 65536, u.index += t.length, {\n      value: t,\n      done: !1\n    });\n  });\n  var Jn = {\n    CSSRuleList: 0,\n    CSSStyleDeclaration: 0,\n    CSSValueList: 0,\n    ClientRectList: 0,\n    DOMRectList: 0,\n    DOMStringList: 0,\n    DOMTokenList: 1,\n    DataTransferItemList: 0,\n    FileList: 0,\n    HTMLAllCollection: 0,\n    HTMLCollection: 0,\n    HTMLFormElement: 0,\n    HTMLSelectElement: 0,\n    MediaList: 0,\n    MimeTypeArray: 0,\n    NamedNodeMap: 0,\n    NodeList: 1,\n    PaintRequestList: 0,\n    Plugin: 0,\n    PluginArray: 0,\n    SVGLengthList: 0,\n    SVGNumberList: 0,\n    SVGPathSegList: 0,\n    SVGPointList: 0,\n    SVGStringList: 0,\n    SVGTransformList: 0,\n    SourceBufferList: 0,\n    StyleSheetList: 0,\n    TextTrackCueList: 0,\n    TextTrackList: 0,\n    TouchList: 0\n  },\n      $n = \"Array Iterator\",\n      Zn = Et.set,\n      tr = Et.getterFor($n),\n      er = Gn(Array, \"Array\", function (t, e) {\n    Zn(this, {\n      type: $n,\n      target: it(t),\n      index: 0,\n      kind: e\n    });\n  }, function () {\n    var t = tr(this),\n        e = t.target,\n        n = t.kind,\n        r = t.index++;\n    return !e || r >= e.length ? {\n      value: t.target = void 0,\n      done: !0\n    } : \"keys\" == n ? {\n      value: r,\n      done: !1\n    } : \"values\" == n ? {\n      value: e[r],\n      done: !1\n    } : {\n      value: [r, e[r]],\n      done: !1\n    };\n  }, \"values\");\n  ee(\"keys\"), ee(\"values\"), ee(\"entries\");\n  var nr = J(\"iterator\"),\n      rr = J(\"toStringTag\"),\n      ir = er.values;\n\n  for (var or in Jn) {\n    var ar = R[or],\n        sr = ar && ar.prototype;\n\n    if (sr) {\n      if (sr[nr] !== ir) try {\n        j(sr, nr, ir);\n      } catch (Di) {\n        sr[nr] = ir;\n      }\n      if (sr[rr] || j(sr, rr, or), Jn[or]) for (var ur in er) if (sr[ur] !== er[ur]) try {\n        j(sr, ur, er[ur]);\n      } catch (Di) {\n        sr[ur] = er[ur];\n      }\n    }\n  }\n\n  Le.f(\"iterator\");\n\n  var cr = function (t, e) {\n    return (cr = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (t, e) {\n      t.__proto__ = e;\n    } || function (t, e) {\n      for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);\n    })(t, e);\n  };\n\n  function hr(t, e) {\n    function n() {\n      this.constructor = t;\n    }\n\n    cr(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n  }\n\n  var lr = function () {\n    return (lr = Object.assign || function (t) {\n      for (var e, n = 1, r = arguments.length; n < r; n++) for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);\n\n      return t;\n    }).apply(this, arguments);\n  };\n\n  function fr(o, a, s, u) {\n    return new (s || (s = Promise))(function (t, e) {\n      function n(t) {\n        try {\n          i(u.next(t));\n        } catch (t) {\n          e(t);\n        }\n      }\n\n      function r(t) {\n        try {\n          i(u.throw(t));\n        } catch (t) {\n          e(t);\n        }\n      }\n\n      function i(e) {\n        e.done ? t(e.value) : new s(function (t) {\n          t(e.value);\n        }).then(n, r);\n      }\n\n      i((u = u.apply(o, a || [])).next());\n    });\n  }\n\n  function pr(n, r) {\n    var i,\n        o,\n        a,\n        t,\n        s = {\n      label: 0,\n      sent: function () {\n        if (1 & a[0]) throw a[1];\n        return a[1];\n      },\n      trys: [],\n      ops: []\n    };\n    return t = {\n      next: e(0),\n      throw: e(1),\n      return: e(2)\n    }, \"function\" == typeof Symbol && (t[Symbol.iterator] = function () {\n      return this;\n    }), t;\n\n    function e(e) {\n      return function (t) {\n        return function (e) {\n          if (i) throw new TypeError(\"Generator is already executing.\");\n\n          for (; s;) try {\n            if (i = 1, o && (a = 2 & e[0] ? o.return : e[0] ? o.throw || ((a = o.return) && a.call(o), 0) : o.next) && !(a = a.call(o, e[1])).done) return a;\n\n            switch (o = 0, a && (e = [2 & e[0], a.value]), e[0]) {\n              case 0:\n              case 1:\n                a = e;\n                break;\n\n              case 4:\n                return s.label++, {\n                  value: e[1],\n                  done: !1\n                };\n\n              case 5:\n                s.label++, o = e[1], e = [0];\n                continue;\n\n              case 7:\n                e = s.ops.pop(), s.trys.pop();\n                continue;\n\n              default:\n                if (!(a = 0 < (a = s.trys).length && a[a.length - 1]) && (6 === e[0] || 2 === e[0])) {\n                  s = 0;\n                  continue;\n                }\n\n                if (3 === e[0] && (!a || e[1] > a[0] && e[1] < a[3])) {\n                  s.label = e[1];\n                  break;\n                }\n\n                if (6 === e[0] && s.label < a[1]) {\n                  s.label = a[1], a = e;\n                  break;\n                }\n\n                if (a && s.label < a[2]) {\n                  s.label = a[2], s.ops.push(e);\n                  break;\n                }\n\n                a[2] && s.ops.pop(), s.trys.pop();\n                continue;\n            }\n\n            e = r.call(n, s);\n          } catch (t) {\n            e = [6, t], o = 0;\n          } finally {\n            i = a = 0;\n          }\n\n          if (5 & e[0]) throw e[1];\n          return {\n            value: e[0] ? e[1] : void 0,\n            done: !0\n          };\n        }([e, t]);\n      };\n    }\n  }\n\n  function dr(t, e) {\n    var n = \"function\" == typeof Symbol && t[Symbol.iterator];\n    if (!n) return t;\n    var r,\n        i,\n        o = n.call(t),\n        a = [];\n\n    try {\n      for (; (void 0 === e || 0 < e--) && !(r = o.next()).done;) a.push(r.value);\n    } catch (t) {\n      i = {\n        error: t\n      };\n    } finally {\n      try {\n        r && !r.done && (n = o.return) && n.call(o);\n      } finally {\n        if (i) throw i.error;\n      }\n    }\n\n    return a;\n  }\n\n  function yr() {\n    for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(dr(arguments[e]));\n\n    return t;\n  }\n\n  var mr = {\n    NODE_CLIENT: !1,\n    NODE_ADMIN: !1,\n    SDK_VERSION: \"${JSCORE_VERSION}\"\n  },\n      gr = function (t, e) {\n    if (!t) throw vr(e);\n  },\n      vr = function (t) {\n    return new Error(\"Firebase Database (\" + mr.SDK_VERSION + \") INTERNAL ASSERT FAILED: \" + t);\n  },\n      br = function (t) {\n    for (var e = [], n = 0, r = 0; r < t.length; r++) {\n      var i = t.charCodeAt(r);\n      e[n++] = i < 128 ? i : (e[n++] = i < 2048 ? i >> 6 | 192 : (55296 == (64512 & i) && r + 1 < t.length && 56320 == (64512 & t.charCodeAt(r + 1)) ? (i = 65536 + ((1023 & i) << 10) + (1023 & t.charCodeAt(++r)), e[n++] = i >> 18 | 240, e[n++] = i >> 12 & 63 | 128) : e[n++] = i >> 12 | 224, i >> 6 & 63 | 128), 63 & i | 128);\n    }\n\n    return e;\n  },\n      wr = {\n    byteToCharMap_: null,\n    charToByteMap_: null,\n    byteToCharMapWebSafe_: null,\n    charToByteMapWebSafe_: null,\n    ENCODED_VALS_BASE: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",\n\n    get ENCODED_VALS() {\n      return this.ENCODED_VALS_BASE + \"+/=\";\n    },\n\n    get ENCODED_VALS_WEBSAFE() {\n      return this.ENCODED_VALS_BASE + \"-_.\";\n    },\n\n    HAS_NATIVE_SUPPORT: \"function\" == typeof atob,\n    encodeByteArray: function (t, e) {\n      if (!Array.isArray(t)) throw Error(\"encodeByteArray takes an array as a parameter\");\n      this.init_();\n\n      for (var n = e ? this.byteToCharMapWebSafe_ : this.byteToCharMap_, r = [], i = 0; i < t.length; i += 3) {\n        var o = t[i],\n            a = i + 1 < t.length,\n            s = a ? t[i + 1] : 0,\n            u = i + 2 < t.length,\n            c = u ? t[i + 2] : 0,\n            h = o >> 2,\n            l = (3 & o) << 4 | s >> 4,\n            f = (15 & s) << 2 | c >> 6,\n            p = 63 & c;\n        u || (p = 64, a || (f = 64)), r.push(n[h], n[l], n[f], n[p]);\n      }\n\n      return r.join(\"\");\n    },\n    encodeString: function (t, e) {\n      return this.HAS_NATIVE_SUPPORT && !e ? btoa(t) : this.encodeByteArray(br(t), e);\n    },\n    decodeString: function (t, e) {\n      return this.HAS_NATIVE_SUPPORT && !e ? atob(t) : function (t) {\n        for (var e = [], n = 0, r = 0; n < t.length;) {\n          var i = t[n++];\n          if (i < 128) e[r++] = String.fromCharCode(i);else if (191 < i && i < 224) {\n            var o = t[n++];\n            e[r++] = String.fromCharCode((31 & i) << 6 | 63 & o);\n          } else if (239 < i && i < 365) {\n            var a = ((7 & i) << 18 | (63 & (o = t[n++])) << 12 | (63 & (s = t[n++])) << 6 | 63 & t[n++]) - 65536;\n            e[r++] = String.fromCharCode(55296 + (a >> 10)), e[r++] = String.fromCharCode(56320 + (1023 & a));\n          } else {\n            o = t[n++];\n            var s = t[n++];\n            e[r++] = String.fromCharCode((15 & i) << 12 | (63 & o) << 6 | 63 & s);\n          }\n        }\n\n        return e.join(\"\");\n      }(this.decodeStringToByteArray(t, e));\n    },\n    decodeStringToByteArray: function (t, e) {\n      this.init_();\n\n      for (var n = e ? this.charToByteMapWebSafe_ : this.charToByteMap_, r = [], i = 0; i < t.length;) {\n        var o = n[t.charAt(i++)],\n            a = i < t.length ? n[t.charAt(i)] : 0,\n            s = ++i < t.length ? n[t.charAt(i)] : 64,\n            u = ++i < t.length ? n[t.charAt(i)] : 64;\n        if (++i, null == o || null == a || null == s || null == u) throw Error();\n        var c = o << 2 | a >> 4;\n\n        if (r.push(c), 64 !== s) {\n          var h = a << 4 & 240 | s >> 2;\n\n          if (r.push(h), 64 !== u) {\n            var l = s << 6 & 192 | u;\n            r.push(l);\n          }\n        }\n      }\n\n      return r;\n    },\n    init_: function () {\n      if (!this.byteToCharMap_) {\n        this.byteToCharMap_ = {}, this.charToByteMap_ = {}, this.byteToCharMapWebSafe_ = {}, this.charToByteMapWebSafe_ = {};\n\n        for (var t = 0; t < this.ENCODED_VALS.length; t++) this.byteToCharMap_[t] = this.ENCODED_VALS.charAt(t), this.charToByteMap_[this.byteToCharMap_[t]] = t, this.byteToCharMapWebSafe_[t] = this.ENCODED_VALS_WEBSAFE.charAt(t), (this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]] = t) >= this.ENCODED_VALS_BASE.length && (this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)] = t, this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)] = t);\n      }\n    }\n  },\n      _r = function (t) {\n    try {\n      return wr.decodeString(t, !0);\n    } catch (t) {\n      console.error(\"base64Decode failed: \", t);\n    }\n\n    return null;\n  };\n\n  function Er(t) {\n    return Tr(void 0, t);\n  }\n\n  function Tr(t, e) {\n    if (!(e instanceof Object)) return e;\n\n    switch (e.constructor) {\n      case Date:\n        return new Date(e.getTime());\n\n      case Object:\n        void 0 === t && (t = {});\n        break;\n\n      case Array:\n        t = [];\n        break;\n\n      default:\n        return e;\n    }\n\n    for (var n in e) e.hasOwnProperty(n) && (t[n] = Tr(t[n], e[n]));\n\n    return t;\n  }\n\n  var Sr = function () {\n    function t() {\n      var n = this;\n      this.promise = new Promise(function (t, e) {\n        n.resolve = t, n.reject = e;\n      });\n    }\n\n    return t.prototype.wrapCallback = function (n) {\n      var r = this;\n      return function (t, e) {\n        t ? r.reject(t) : r.resolve(e), \"function\" == typeof n && (r.promise.catch(function () {}), 1 === n.length ? n(t) : n(t, e));\n      };\n    }, t;\n  }();\n\n  function Ir() {\n    return \"undefined\" != typeof navigator && \"string\" == typeof navigator.userAgent ? navigator.userAgent : \"\";\n  }\n\n  function Cr() {\n    return \"undefined\" != typeof window && !!(window.cordova || window.phonegap || window.PhoneGap) && /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ir());\n  }\n\n  function Nr() {\n    return \"object\" == typeof navigator && \"ReactNative\" === navigator.product;\n  }\n\n  function Ar() {\n    return !0 === mr.NODE_ADMIN;\n  }\n\n  var kr = function (r) {\n    function i(t, e) {\n      var n = r.call(this, e) || this;\n      return n.code = t, n.name = \"FirebaseError\", Object.setPrototypeOf(n, i.prototype), Error.captureStackTrace && Error.captureStackTrace(n, Dr.prototype.create), n;\n    }\n\n    return hr(i, r), i;\n  }(Error),\n      Dr = function () {\n    function t(t, e, n) {\n      this.service = t, this.serviceName = e, this.errors = n;\n    }\n\n    return t.prototype.create = function (t) {\n      for (var e = [], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];\n\n      for (var r, i = e[0] || {}, o = this.service + \"/\" + t, a = this.errors[t], s = a ? (r = i, a.replace(Rr, function (t, e) {\n        var n = r[e];\n        return null != n ? n.toString() : \"<\" + e + \"?>\";\n      })) : \"Error\", u = this.serviceName + \": \" + s + \" (\" + o + \").\", c = new kr(o, u), h = 0, l = Object.keys(i); h < l.length; h++) {\n        var f = l[h];\n        \"_\" !== f.slice(-1) && (f in c && console.warn('Overwriting FirebaseError base field \"' + f + '\" can cause unexpected behavior.'), c[f] = i[f]);\n      }\n\n      return c;\n    }, t;\n  }();\n\n  var Rr = /\\{\\$([^}]+)}/g;\n\n  function Or(t) {\n    return JSON.parse(t);\n  }\n\n  function Pr(t) {\n    return JSON.stringify(t);\n  }\n\n  var Mr = function (t) {\n    var e = {},\n        n = {},\n        r = {},\n        i = \"\";\n\n    try {\n      var o = t.split(\".\");\n      e = Or(_r(o[0]) || \"\"), n = Or(_r(o[1]) || \"\"), i = o[2], r = n.d || {}, delete n.d;\n    } catch (t) {}\n\n    return {\n      header: e,\n      claims: n,\n      data: r,\n      signature: i\n    };\n  },\n      xr = function (t, e) {\n    return Object.prototype.hasOwnProperty.call(t, e);\n  },\n      Lr = function (t, e) {\n    if (Object.prototype.hasOwnProperty.call(t, e)) return t[e];\n  },\n      Fr = function (t, e) {\n    for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e(n, t[n]);\n  },\n      Ur = function (t) {\n    return n = {}, Fr(t, function (t, e) {\n      n[t] = e;\n    }), n;\n    var n;\n  },\n      qr = function (t) {\n    for (var e in t) return !1;\n\n    return !0;\n  },\n      Vr = function (t) {\n    var e = 0;\n\n    for (var n in t) e++;\n\n    return e;\n  },\n      Br = function (t, e, n) {\n    var r = {};\n\n    for (var i in t) r[i] = e.call(n, t[i], i, t);\n\n    return r;\n  },\n      jr = function (t, e, n) {\n    for (var r in t) if (e.call(n, t[r], r, t)) return r;\n  },\n      Wr = function (t) {\n    for (var e in t) return e;\n  },\n      Kr = function () {\n    function t() {\n      this.chain_ = [], this.buf_ = [], this.W_ = [], this.pad_ = [], this.inbuf_ = 0, this.total_ = 0, this.blockSize = 64, this.pad_[0] = 128;\n\n      for (var t = 1; t < this.blockSize; ++t) this.pad_[t] = 0;\n\n      this.reset();\n    }\n\n    return t.prototype.reset = function () {\n      this.chain_[0] = 1732584193, this.chain_[1] = 4023233417, this.chain_[2] = 2562383102, this.chain_[3] = 271733878, this.chain_[4] = 3285377520, this.inbuf_ = 0, this.total_ = 0;\n    }, t.prototype.compress_ = function (t, e) {\n      e || (e = 0);\n      var n = this.W_;\n      if (\"string\" == typeof t) for (var r = 0; r < 16; r++) n[r] = t.charCodeAt(e) << 24 | t.charCodeAt(e + 1) << 16 | t.charCodeAt(e + 2) << 8 | t.charCodeAt(e + 3), e += 4;else for (r = 0; r < 16; r++) n[r] = t[e] << 24 | t[e + 1] << 16 | t[e + 2] << 8 | t[e + 3], e += 4;\n\n      for (r = 16; r < 80; r++) {\n        var i = n[r - 3] ^ n[r - 8] ^ n[r - 14] ^ n[r - 16];\n        n[r] = 4294967295 & (i << 1 | i >>> 31);\n      }\n\n      var o,\n          a,\n          s = this.chain_[0],\n          u = this.chain_[1],\n          c = this.chain_[2],\n          h = this.chain_[3],\n          l = this.chain_[4];\n\n      for (r = 0; r < 80; r++) {\n        a = r < 40 ? r < 20 ? (o = h ^ u & (c ^ h), 1518500249) : (o = u ^ c ^ h, 1859775393) : r < 60 ? (o = u & c | h & (u | c), 2400959708) : (o = u ^ c ^ h, 3395469782);\n        i = (s << 5 | s >>> 27) + o + l + a + n[r] & 4294967295;\n        l = h, h = c, c = 4294967295 & (u << 30 | u >>> 2), u = s, s = i;\n      }\n\n      this.chain_[0] = this.chain_[0] + s & 4294967295, this.chain_[1] = this.chain_[1] + u & 4294967295, this.chain_[2] = this.chain_[2] + c & 4294967295, this.chain_[3] = this.chain_[3] + h & 4294967295, this.chain_[4] = this.chain_[4] + l & 4294967295;\n    }, t.prototype.update = function (t, e) {\n      if (null != t) {\n        void 0 === e && (e = t.length);\n\n        for (var n = e - this.blockSize, r = 0, i = this.buf_, o = this.inbuf_; r < e;) {\n          if (0 === o) for (; r <= n;) this.compress_(t, r), r += this.blockSize;\n\n          if (\"string\" == typeof t) {\n            for (; r < e;) if (i[o] = t.charCodeAt(r), ++r, ++o === this.blockSize) {\n              this.compress_(i), o = 0;\n              break;\n            }\n          } else for (; r < e;) if (i[o] = t[r], ++r, ++o === this.blockSize) {\n            this.compress_(i), o = 0;\n            break;\n          }\n        }\n\n        this.inbuf_ = o, this.total_ += e;\n      }\n    }, t.prototype.digest = function () {\n      var t = [],\n          e = 8 * this.total_;\n      this.inbuf_ < 56 ? this.update(this.pad_, 56 - this.inbuf_) : this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\n\n      for (var n = this.blockSize - 1; 56 <= n; n--) this.buf_[n] = 255 & e, e /= 256;\n\n      this.compress_(this.buf_);\n      var r = 0;\n\n      for (n = 0; n < 5; n++) for (var i = 24; 0 <= i; i -= 8) t[r] = this.chain_[n] >> i & 255, ++r;\n\n      return t;\n    }, t;\n  }();\n\n  function Qr(t, e) {\n    var n = new Hr(t, e);\n    return n.subscribe.bind(n);\n  }\n\n  var Hr = function () {\n    function t(t, e) {\n      var n = this;\n      this.observers = [], this.unsubscribes = [], this.observerCount = 0, this.task = Promise.resolve(), this.finalized = !1, this.onNoObservers = e, this.task.then(function () {\n        t(n);\n      }).catch(function (t) {\n        n.error(t);\n      });\n    }\n\n    return t.prototype.next = function (e) {\n      this.forEachObserver(function (t) {\n        t.next(e);\n      });\n    }, t.prototype.error = function (e) {\n      this.forEachObserver(function (t) {\n        t.error(e);\n      }), this.close(e);\n    }, t.prototype.complete = function () {\n      this.forEachObserver(function (t) {\n        t.complete();\n      }), this.close();\n    }, t.prototype.subscribe = function (t, e, n) {\n      var r,\n          i = this;\n      if (void 0 === t && void 0 === e && void 0 === n) throw new Error(\"Missing Observer.\");\n      void 0 === (r = function (t, e) {\n        if (\"object\" != typeof t || null === t) return !1;\n\n        for (var n = 0, r = e; n < r.length; n++) {\n          var i = r[n];\n          if (i in t && \"function\" == typeof t[i]) return !0;\n        }\n\n        return !1;\n      }(t, [\"next\", \"error\", \"complete\"]) ? t : {\n        next: t,\n        error: e,\n        complete: n\n      }).next && (r.next = Gr), void 0 === r.error && (r.error = Gr), void 0 === r.complete && (r.complete = Gr);\n      var o = this.unsubscribeOne.bind(this, this.observers.length);\n      return this.finalized && this.task.then(function () {\n        try {\n          i.finalError ? r.error(i.finalError) : r.complete();\n        } catch (t) {}\n      }), this.observers.push(r), o;\n    }, t.prototype.unsubscribeOne = function (t) {\n      void 0 !== this.observers && void 0 !== this.observers[t] && (delete this.observers[t], this.observerCount -= 1, 0 === this.observerCount && void 0 !== this.onNoObservers && this.onNoObservers(this));\n    }, t.prototype.forEachObserver = function (t) {\n      if (!this.finalized) for (var e = 0; e < this.observers.length; e++) this.sendOne(e, t);\n    }, t.prototype.sendOne = function (t, e) {\n      var n = this;\n      this.task.then(function () {\n        if (void 0 !== n.observers && void 0 !== n.observers[t]) try {\n          e(n.observers[t]);\n        } catch (t) {\n          \"undefined\" != typeof console && console.error && console.error(t);\n        }\n      });\n    }, t.prototype.close = function (t) {\n      var e = this;\n      this.finalized || (this.finalized = !0, void 0 !== t && (this.finalError = t), this.task.then(function () {\n        e.observers = void 0, e.onNoObservers = void 0;\n      }));\n    }, t;\n  }();\n\n  function Gr() {}\n\n  var zr = function (t, e, n, r) {\n    var i;\n    if (r < e ? i = \"at least \" + e : n < r && (i = 0 === n ? \"none\" : \"no more than \" + n), i) throw new Error(t + \" failed: Was called with \" + r + (1 === r ? \" argument.\" : \" arguments.\") + \" Expects \" + i + \".\");\n  };\n\n  function Yr(t, e, n) {\n    var r = \"\";\n\n    switch (e) {\n      case 1:\n        r = n ? \"first\" : \"First\";\n        break;\n\n      case 2:\n        r = n ? \"second\" : \"Second\";\n        break;\n\n      case 3:\n        r = n ? \"third\" : \"Third\";\n        break;\n\n      case 4:\n        r = n ? \"fourth\" : \"Fourth\";\n        break;\n\n      default:\n        throw new Error(\"errorPrefix called with argumentNumber > 4.  Need to update it?\");\n    }\n\n    var i = t + \" failed: \";\n    return i += r + \" argument \";\n  }\n\n  function Xr(t, e, n, r) {\n    if ((!r || n) && \"function\" != typeof n) throw new Error(Yr(t, e, r) + \"must be a valid function.\");\n  }\n\n  function Jr(t, e, n, r) {\n    if ((!r || n) && (\"object\" != typeof n || null === n)) throw new Error(Yr(t, e, r) + \"must be a valid context object.\");\n  }\n\n  var $r,\n      Zr,\n      ti = function (t) {\n    for (var e = 0, n = 0; n < t.length; n++) {\n      var r = t.charCodeAt(n);\n      r < 128 ? e++ : r < 2048 ? e += 2 : 55296 <= r && r <= 56319 ? (e += 4, n++) : e += 3;\n    }\n\n    return e;\n  };\n\n  (Zr = $r || ($r = {}))[Zr.DEBUG = 0] = \"DEBUG\", Zr[Zr.VERBOSE = 1] = \"VERBOSE\", Zr[Zr.INFO = 2] = \"INFO\", Zr[Zr.WARN = 3] = \"WARN\", Zr[Zr.ERROR = 4] = \"ERROR\", Zr[Zr.SILENT = 5] = \"SILENT\";\n\n  var ei,\n      ni = $r.INFO,\n      ri = function (t, e) {\n    for (var n = [], r = 2; r < arguments.length; r++) n[r - 2] = arguments[r];\n\n    if (!(e < t.logLevel)) {\n      var i = new Date().toISOString();\n\n      switch (e) {\n        case $r.DEBUG:\n        case $r.VERBOSE:\n          console.log.apply(console, [\"[\" + i + \"]  \" + t.name + \":\"].concat(n));\n          break;\n\n        case $r.INFO:\n          console.info.apply(console, [\"[\" + i + \"]  \" + t.name + \":\"].concat(n));\n          break;\n\n        case $r.WARN:\n          console.warn.apply(console, [\"[\" + i + \"]  \" + t.name + \":\"].concat(n));\n          break;\n\n        case $r.ERROR:\n          console.error.apply(console, [\"[\" + i + \"]  \" + t.name + \":\"].concat(n));\n          break;\n\n        default:\n          throw new Error(\"Attempted to log a message with an invalid logType (value: \" + e + \")\");\n      }\n    }\n  },\n      ii = function () {\n    function t(t) {\n      this.name = t, this._logLevel = ni, this._logHandler = ri;\n    }\n\n    return Object.defineProperty(t.prototype, \"logLevel\", {\n      get: function () {\n        return this._logLevel;\n      },\n      set: function (t) {\n        if (!(t in $r)) throw new TypeError(\"Invalid value assigned to `logLevel`\");\n        this._logLevel = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"logHandler\", {\n      get: function () {\n        return this._logHandler;\n      },\n      set: function (t) {\n        if (\"function\" != typeof t) throw new TypeError(\"Value assigned to `logHandler` must be a function\");\n        this._logHandler = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.debug = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      this._logHandler.apply(this, [this, $r.DEBUG].concat(t));\n    }, t.prototype.log = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      this._logHandler.apply(this, [this, $r.VERBOSE].concat(t));\n    }, t.prototype.info = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      this._logHandler.apply(this, [this, $r.INFO].concat(t));\n    }, t.prototype.warn = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      this._logHandler.apply(this, [this, $r.WARN].concat(t));\n    }, t.prototype.error = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      this._logHandler.apply(this, [this, $r.ERROR].concat(t));\n    }, t;\n  }(),\n      oi = ((ei = {})[\"no-app\"] = \"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()\", ei[\"bad-app-name\"] = \"Illegal App name: '{$name}\", ei[\"duplicate-app\"] = \"Firebase App named '{$name}' already exists\", ei[\"app-deleted\"] = \"Firebase App named '{$name}' already deleted\", ei[\"duplicate-service\"] = \"Firebase service named '{$name}' already registered\", ei[\"invalid-app-argument\"] = \"firebase.{$name}() takes either no argument or a Firebase App instance.\", ei),\n      ai = new Dr(\"app\", \"Firebase\", oi),\n      si = \"[DEFAULT]\",\n      ui = [],\n      ci = function () {\n    function t(t, e, n) {\n      this.firebase_ = n, this.isDeleted_ = !1, this.services_ = {}, this.name_ = e.name, this.automaticDataCollectionEnabled_ = e.automaticDataCollectionEnabled || !1, this.options_ = Er(t), this.INTERNAL = {\n        getUid: function () {\n          return null;\n        },\n        getToken: function () {\n          return Promise.resolve(null);\n        },\n        addAuthTokenListener: function (t) {\n          ui.push(t), setTimeout(function () {\n            return t(null);\n          }, 0);\n        },\n        removeAuthTokenListener: function (e) {\n          ui = ui.filter(function (t) {\n            return t !== e;\n          });\n        }\n      };\n    }\n\n    return Object.defineProperty(t.prototype, \"automaticDataCollectionEnabled\", {\n      get: function () {\n        return this.checkDestroyed_(), this.automaticDataCollectionEnabled_;\n      },\n      set: function (t) {\n        this.checkDestroyed_(), this.automaticDataCollectionEnabled_ = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"name\", {\n      get: function () {\n        return this.checkDestroyed_(), this.name_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"options\", {\n      get: function () {\n        return this.checkDestroyed_(), this.options_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.delete = function () {\n      var s = this;\n      return new Promise(function (t) {\n        s.checkDestroyed_(), t();\n      }).then(function () {\n        s.firebase_.INTERNAL.removeApp(s.name_);\n\n        for (var t = [], e = 0, n = Object.keys(s.services_); e < n.length; e++) for (var r = n[e], i = 0, o = Object.keys(s.services_[r]); i < o.length; i++) {\n          var a = o[i];\n          t.push(s.services_[r][a]);\n        }\n\n        return Promise.all(t.filter(function (t) {\n          return \"INTERNAL\" in t;\n        }).map(function (t) {\n          return t.INTERNAL.delete();\n        }));\n      }).then(function () {\n        s.isDeleted_ = !0, s.services_ = {};\n      });\n    }, t.prototype._getService = function (t, e) {\n      if (void 0 === e && (e = si), this.checkDestroyed_(), this.services_[t] || (this.services_[t] = {}), !this.services_[t][e]) {\n        var n = e !== si ? e : void 0,\n            r = this.firebase_.INTERNAL.factories[t](this, this.extendApp.bind(this), n);\n        this.services_[t][e] = r;\n      }\n\n      return this.services_[t][e];\n    }, t.prototype.extendApp = function (t) {\n      var e = this;\n      Tr(this, t), t.INTERNAL && t.INTERNAL.addAuthTokenListener && (ui.forEach(function (t) {\n        e.INTERNAL.addAuthTokenListener(t);\n      }), ui = []);\n    }, t.prototype.checkDestroyed_ = function () {\n      if (this.isDeleted_) throw ai.create(\"app-deleted\", {\n        name: this.name_\n      });\n    }, t;\n  }();\n\n  ci.prototype.name && ci.prototype.options || ci.prototype.delete || console.log(\"dc\");\n  var hi = \"6.2.4\";\n  var li = new ii(\"@firebase/app\");\n\n  if (\"object\" == typeof self && self.self === self && void 0 !== self.firebase) {\n    li.warn(\"\\n    Warning: Firebase is already defined in the global scope. Please make sure\\n    Firebase library is only loaded once.\\n  \");\n    var fi = self.firebase.SDK_VERSION;\n    fi && 0 <= fi.indexOf(\"LITE\") && li.warn(\"\\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\\n    \");\n  }\n\n  var pi = function t() {\n    var e = function (a) {\n      var s = {},\n          u = {},\n          c = {},\n          h = {\n        __esModule: !0,\n        initializeApp: function (t, e) {\n          if (void 0 === e && (e = {}), \"object\" != typeof e || null === e) {\n            var n = e;\n            e = {\n              name: n\n            };\n          }\n\n          var r = e;\n          void 0 === r.name && (r.name = si);\n          var i = r.name;\n          if (\"string\" != typeof i || !i) throw ai.create(\"bad-app-name\", {\n            name: String(i)\n          });\n          if (xr(s, i)) throw ai.create(\"duplicate-app\", {\n            name: i\n          });\n          var o = new a(t, r, h);\n          return p(s[i] = o, \"create\"), o;\n        },\n        app: l,\n        apps: null,\n        SDK_VERSION: hi,\n        INTERNAL: {\n          registerService: function (n, t, e, r, i) {\n            if (void 0 === i && (i = !1), u[n]) throw ai.create(\"duplicate-service\", {\n              name: n\n            });\n\n            function o(t) {\n              if (void 0 === t && (t = l()), \"function\" != typeof t[n]) throw ai.create(\"invalid-app-argument\", {\n                name: n\n              });\n              return t[n]();\n            }\n\n            return u[n] = t, r && (c[n] = r, f().forEach(function (t) {\n              r(\"create\", t);\n            })), void 0 !== e && Tr(o, e), h[n] = o, a.prototype[n] = function () {\n              for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n              return this._getService.bind(this, n).apply(this, i ? t : []);\n            }, o;\n          },\n          removeApp: function (t) {\n            p(s[t], \"delete\"), delete s[t];\n          },\n          factories: u,\n          useAsService: o\n        }\n      };\n\n      function l(t) {\n        if (!xr(s, t = t || si)) throw ai.create(\"no-app\", {\n          name: t\n        });\n        return s[t];\n      }\n\n      function f() {\n        return Object.keys(s).map(function (t) {\n          return s[t];\n        });\n      }\n\n      function p(t, e) {\n        for (var n = 0, r = Object.keys(u); n < r.length; n++) {\n          var i = o(0, r[n]);\n          if (null === i) return;\n          c[i] && c[i](e, t);\n        }\n      }\n\n      function o(t, e) {\n        return \"serverAuth\" === e ? null : e;\n      }\n\n      return h.default = h, Object.defineProperty(h, \"apps\", {\n        get: f\n      }), l.App = a, h;\n    }(ci);\n\n    return e.INTERNAL = lr({}, e.INTERNAL, {\n      createFirebaseNamespace: t,\n      extendNamespace: function (t) {\n        Tr(e, t);\n      },\n      createSubscribe: Qr,\n      ErrorFactory: Dr,\n      deepExtend: Tr\n    }), e;\n  }(),\n      di = pi.initializeApp;\n\n  pi.initializeApp = function () {\n    return function () {\n      try {\n        return \"[object process]\" === Object.prototype.toString.call(global.process);\n      } catch (t) {\n        return !1;\n      }\n    }() && li.warn('\\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\\n      run in a Node environment.  If running in a Node environment, make sure you\\n      are using the bundle specified by the \"main\" field in package.json.\\n      \\n      If you are using Webpack, you can specify \"main\" as the first item in\\n      \"resolve.mainFields\":\\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\\n      \\n      If using Rollup, use the rollup-plugin-node-resolve plugin and set \"module\"\\n      to false and \"main\" to true:\\n      https://github.com/rollup/rollup-plugin-node-resolve\\n      '), di.apply(void 0, arguments);\n  };\n\n  var Hh = pi;\n  (function () {\n    var t,\n        o = \"function\" == typeof Object.defineProperties ? Object.defineProperty : function (t, e, n) {\n      t != Array.prototype && t != Object.prototype && (t[e] = n.value);\n    },\n        a = \"undefined\" != typeof window && window === this ? this : \"undefined\" != typeof global && null != global ? global : this;\n\n    function c(t) {\n      var e,\n          n,\n          r = \"undefined\" != typeof Symbol && Symbol.iterator && t[Symbol.iterator];\n      return r ? r.call(t) : {\n        next: (e = t, n = 0, function () {\n          return n < e.length ? {\n            done: !1,\n            value: e[n++]\n          } : {\n            done: !0\n          };\n        })\n      };\n    }\n\n    !function (t, e) {\n      if (e) {\n        var n = a;\n        t = t.split(\".\");\n\n        for (var r = 0; r < t.length - 1; r++) {\n          var i = t[r];\n          i in n || (n[i] = {}), n = n[i];\n        }\n\n        (e = e(r = n[t = t[t.length - 1]])) != r && null != e && o(n, t, {\n          configurable: !0,\n          writable: !0,\n          value: e\n        });\n      }\n    }(\"Promise\", function (t) {\n      function s(t) {\n        this.b = 0, this.c = void 0, this.a = [];\n        var e = this.f();\n\n        try {\n          t(e.resolve, e.reject);\n        } catch (t) {\n          e.reject(t);\n        }\n      }\n\n      function e() {\n        this.a = null;\n      }\n\n      function u(e) {\n        return e instanceof s ? e : new s(function (t) {\n          t(e);\n        });\n      }\n\n      if (t) return t;\n\n      e.prototype.b = function (t) {\n        if (null == this.a) {\n          this.a = [];\n          var e = this;\n          this.c(function () {\n            e.g();\n          });\n        }\n\n        this.a.push(t);\n      };\n\n      var n = a.setTimeout;\n      e.prototype.c = function (t) {\n        n(t, 0);\n      }, e.prototype.g = function () {\n        for (; this.a && this.a.length;) {\n          var t = this.a;\n          this.a = [];\n\n          for (var e = 0; e < t.length; ++e) {\n            var n = t[e];\n            t[e] = null;\n\n            try {\n              n();\n            } catch (t) {\n              this.f(t);\n            }\n          }\n        }\n\n        this.a = null;\n      }, e.prototype.f = function (t) {\n        this.c(function () {\n          throw t;\n        });\n      }, s.prototype.f = function () {\n        function t(e) {\n          return function (t) {\n            r || (r = !0, e.call(n, t));\n          };\n        }\n\n        var n = this,\n            r = !1;\n        return {\n          resolve: t(this.o),\n          reject: t(this.g)\n        };\n      }, s.prototype.o = function (t) {\n        if (t === this) this.g(new TypeError(\"A Promise cannot resolve to itself\"));else if (t instanceof s) this.u(t);else {\n          t: switch (typeof t) {\n            case \"object\":\n              var e = null != t;\n              break t;\n\n            case \"function\":\n              e = !0;\n              break t;\n\n            default:\n              e = !1;\n          }\n\n          e ? this.l(t) : this.h(t);\n        }\n      }, s.prototype.l = function (t) {\n        var e = void 0;\n\n        try {\n          e = t.then;\n        } catch (t) {\n          return void this.g(t);\n        }\n\n        \"function\" == typeof e ? this.v(e, t) : this.h(t);\n      }, s.prototype.g = function (t) {\n        this.i(2, t);\n      }, s.prototype.h = function (t) {\n        this.i(1, t);\n      }, s.prototype.i = function (t, e) {\n        if (0 != this.b) throw Error(\"Cannot settle(\" + t + \", \" + e + \"): Promise already settled in state\" + this.b);\n        this.b = t, this.c = e, this.m();\n      }, s.prototype.m = function () {\n        if (null != this.a) {\n          for (var t = 0; t < this.a.length; ++t) i.b(this.a[t]);\n\n          this.a = null;\n        }\n      };\n      var i = new e();\n      return s.prototype.u = function (t) {\n        var e = this.f();\n        t.Ja(e.resolve, e.reject);\n      }, s.prototype.v = function (t, e) {\n        var n = this.f();\n\n        try {\n          t.call(e, n.resolve, n.reject);\n        } catch (t) {\n          n.reject(t);\n        }\n      }, s.prototype.then = function (t, e) {\n        function n(e, t) {\n          return \"function\" == typeof e ? function (t) {\n            try {\n              r(e(t));\n            } catch (t) {\n              i(t);\n            }\n          } : t;\n        }\n\n        var r,\n            i,\n            o = new s(function (t, e) {\n          r = t, i = e;\n        });\n        return this.Ja(n(t, r), n(e, i)), o;\n      }, s.prototype.catch = function (t) {\n        return this.then(void 0, t);\n      }, s.prototype.Ja = function (t, e) {\n        function n() {\n          switch (r.b) {\n            case 1:\n              t(r.c);\n              break;\n\n            case 2:\n              e(r.c);\n              break;\n\n            default:\n              throw Error(\"Unexpected state: \" + r.b);\n          }\n        }\n\n        var r = this;\n        null == this.a ? i.b(n) : this.a.push(n);\n      }, s.resolve = u, s.reject = function (n) {\n        return new s(function (t, e) {\n          e(n);\n        });\n      }, s.race = function (i) {\n        return new s(function (t, e) {\n          for (var n = c(i), r = n.next(); !r.done; r = n.next()) u(r.value).Ja(t, e);\n        });\n      }, s.all = function (t) {\n        var o = c(t),\n            a = o.next();\n        return a.done ? u([]) : new s(function (n, t) {\n          function e(e) {\n            return function (t) {\n              r[e] = t, 0 == --i && n(r);\n            };\n          }\n\n          for (var r = [], i = 0; r.push(void 0), i++, u(a.value).Ja(e(r.length - 1), t), !(a = o.next()).done;);\n        });\n      }, s;\n    });\n    var u = u || {},\n        l = this;\n\n    function h(t) {\n      return \"string\" == typeof t;\n    }\n\n    function n(t) {\n      return \"boolean\" == typeof t;\n    }\n\n    var f = /^[\\w+/_-]+[=]{0,2}$/,\n        p = null;\n\n    function s() {}\n\n    function d(t) {\n      var e = typeof t;\n\n      if (\"object\" == e) {\n        if (!t) return \"null\";\n        if (t instanceof Array) return \"array\";\n        if (t instanceof Object) return e;\n        var n = Object.prototype.toString.call(t);\n        if (\"[object Window]\" == n) return \"object\";\n        if (\"[object Array]\" == n || \"number\" == typeof t.length && void 0 !== t.splice && void 0 !== t.propertyIsEnumerable && !t.propertyIsEnumerable(\"splice\")) return \"array\";\n        if (\"[object Function]\" == n || void 0 !== t.call && void 0 !== t.propertyIsEnumerable && !t.propertyIsEnumerable(\"call\")) return \"function\";\n      } else if (\"function\" == e && void 0 === t.call) return \"object\";\n\n      return e;\n    }\n\n    function r(t) {\n      return null === t;\n    }\n\n    function y(t) {\n      return \"array\" == d(t);\n    }\n\n    function m(t) {\n      var e = d(t);\n      return \"array\" == e || \"object\" == e && \"number\" == typeof t.length;\n    }\n\n    function g(t) {\n      return \"function\" == d(t);\n    }\n\n    function v(t) {\n      var e = typeof t;\n      return \"object\" == e && null != t || \"function\" == e;\n    }\n\n    var e = \"closure_uid_\" + (1e9 * Math.random() >>> 0),\n        i = 0;\n\n    function b(t, e, n) {\n      return t.call.apply(t.bind, arguments);\n    }\n\n    function w(e, n, t) {\n      if (!e) throw Error();\n\n      if (2 < arguments.length) {\n        var r = Array.prototype.slice.call(arguments, 2);\n        return function () {\n          var t = Array.prototype.slice.call(arguments);\n          return Array.prototype.unshift.apply(t, r), e.apply(n, t);\n        };\n      }\n\n      return function () {\n        return e.apply(n, arguments);\n      };\n    }\n\n    function _(t, e, n) {\n      return (_ = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf(\"native code\") ? b : w).apply(null, arguments);\n    }\n\n    function E(e, t) {\n      var n = Array.prototype.slice.call(arguments, 1);\n      return function () {\n        var t = n.slice();\n        return t.push.apply(t, arguments), e.apply(this, t);\n      };\n    }\n\n    var T = Date.now || function () {\n      return +new Date();\n    };\n\n    function S(t, o) {\n      function e() {}\n\n      e.prototype = o.prototype, t.qb = o.prototype, t.prototype = new e(), (t.prototype.constructor = t).cd = function (t, e, n) {\n        for (var r = Array(arguments.length - 2), i = 2; i < arguments.length; i++) r[i - 2] = arguments[i];\n\n        return o.prototype[e].apply(t, r);\n      };\n    }\n\n    function I(t) {\n      if (!t) return !1;\n\n      try {\n        return !!t.$goog_Thenable;\n      } catch (t) {\n        return !1;\n      }\n    }\n\n    function C(t) {\n      if (Error.captureStackTrace) Error.captureStackTrace(this, C);else {\n        var e = Error().stack;\n        e && (this.stack = e);\n      }\n      t && (this.message = String(t));\n    }\n\n    function N(t, e) {\n      for (var n = \"\", r = (t = t.split(\"%s\")).length - 1, i = 0; i < r; i++) n += t[i] + (i < e.length ? e[i] : \"%s\");\n\n      C.call(this, n + t[r]);\n    }\n\n    function A(t, e) {\n      throw new N(\"Failure\" + (t ? \": \" + t : \"\"), Array.prototype.slice.call(arguments, 1));\n    }\n\n    function k(t, e) {\n      this.c = t, this.f = e, this.b = 0, this.a = null;\n    }\n\n    function D(t, e) {\n      t.f(e), t.b < 100 && (t.b++, e.next = t.a, t.a = e);\n    }\n\n    function R() {\n      this.b = this.a = null;\n    }\n\n    S(C, Error), C.prototype.name = \"CustomError\", S(N, C), N.prototype.name = \"AssertionError\", k.prototype.get = function () {\n      if (0 < this.b) {\n        this.b--;\n        var t = this.a;\n        this.a = t.next, t.next = null;\n      } else t = this.c();\n\n      return t;\n    };\n    var O = new k(function () {\n      return new P();\n    }, function (t) {\n      t.reset();\n    });\n\n    function P() {\n      this.next = this.b = this.a = null;\n    }\n\n    R.prototype.add = function (t, e) {\n      var n = O.get();\n      n.set(t, e), this.b ? this.b.next = n : this.a = n, this.b = n;\n    }, P.prototype.set = function (t, e) {\n      this.a = t, this.b = e, this.next = null;\n    }, P.prototype.reset = function () {\n      this.next = this.b = this.a = null;\n    };\n    var M = Array.prototype.indexOf ? function (t, e) {\n      return Array.prototype.indexOf.call(t, e, void 0);\n    } : function (t, e) {\n      if (h(t)) return h(e) && 1 == e.length ? t.indexOf(e, 0) : -1;\n\n      for (var n = 0; n < t.length; n++) if (n in t && t[n] === e) return n;\n\n      return -1;\n    },\n        x = Array.prototype.forEach ? function (t, e, n) {\n      Array.prototype.forEach.call(t, e, n);\n    } : function (t, e, n) {\n      for (var r = t.length, i = h(t) ? t.split(\"\") : t, o = 0; o < r; o++) o in i && e.call(n, i[o], o, t);\n    };\n    var L = Array.prototype.map ? function (t, e) {\n      return Array.prototype.map.call(t, e, void 0);\n    } : function (t, e) {\n      for (var n = t.length, r = Array(n), i = h(t) ? t.split(\"\") : t, o = 0; o < n; o++) o in i && (r[o] = e.call(void 0, i[o], o, t));\n\n      return r;\n    },\n        F = Array.prototype.some ? function (t, e) {\n      return Array.prototype.some.call(t, e, void 0);\n    } : function (t, e) {\n      for (var n = t.length, r = h(t) ? t.split(\"\") : t, i = 0; i < n; i++) if (i in r && e.call(void 0, r[i], i, t)) return !0;\n\n      return !1;\n    };\n\n    function U(t, e) {\n      return 0 <= M(t, e);\n    }\n\n    function q(t, e) {\n      var n;\n      return (n = 0 <= (e = M(t, e))) && Array.prototype.splice.call(t, e, 1), n;\n    }\n\n    function V(n, r) {\n      !function (t, e) {\n        for (var n = h(t) ? t.split(\"\") : t, r = t.length - 1; 0 <= r; --r) r in n && e.call(void 0, n[r], r, t);\n      }(n, function (t, e) {\n        r.call(void 0, t, e, n) && 1 == Array.prototype.splice.call(n, e, 1).length && 0;\n      });\n    }\n\n    function B(t) {\n      return Array.prototype.concat.apply([], arguments);\n    }\n\n    function j(t) {\n      var e = t.length;\n\n      if (0 < e) {\n        for (var n = Array(e), r = 0; r < e; r++) n[r] = t[r];\n\n        return n;\n      }\n\n      return [];\n    }\n\n    var W,\n        K = String.prototype.trim ? function (t) {\n      return t.trim();\n    } : function (t) {\n      return /^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(t)[1];\n    },\n        Q = /&/g,\n        H = /</g,\n        G = />/g,\n        z = /\"/g,\n        Y = /'/g,\n        X = /\\x00/g,\n        J = /[\\x00&<>\"']/;\n\n    function $(t, e) {\n      return -1 != t.indexOf(e);\n    }\n\n    function Z(t, e) {\n      return t < e ? -1 : e < t ? 1 : 0;\n    }\n\n    t: {\n      var tt = l.navigator;\n\n      if (tt) {\n        var et = tt.userAgent;\n\n        if (et) {\n          W = et;\n          break t;\n        }\n      }\n\n      W = \"\";\n    }\n\n    function nt(t) {\n      return $(W, t);\n    }\n\n    function rt(t, e) {\n      for (var n in t) e.call(void 0, t[n], n, t);\n    }\n\n    function it(t) {\n      for (var e in t) return !1;\n\n      return !0;\n    }\n\n    function ot(t) {\n      var e,\n          n = {};\n\n      for (e in t) n[e] = t[e];\n\n      return n;\n    }\n\n    var at,\n        st,\n        ut = \"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");\n\n    function ct(t, e) {\n      for (var n, r, i = 1; i < arguments.length; i++) {\n        for (n in r = arguments[i]) t[n] = r[n];\n\n        for (var o = 0; o < ut.length; o++) n = ut[o], Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n      }\n    }\n\n    function ht(t, e) {\n      for (var n = t.split(\"%s\"), r = \"\", i = Array.prototype.slice.call(arguments, 1); i.length && 1 < n.length;) r += n.shift() + i.shift();\n\n      return r + n.join(\"%s\");\n    }\n\n    function lt(t) {\n      return J.test(t) && (-1 != t.indexOf(\"&\") && (t = t.replace(Q, \"&amp;\")), -1 != t.indexOf(\"<\") && (t = t.replace(H, \"&lt;\")), -1 != t.indexOf(\">\") && (t = t.replace(G, \"&gt;\")), -1 != t.indexOf('\"') && (t = t.replace(z, \"&quot;\")), -1 != t.indexOf(\"'\") && (t = t.replace(Y, \"&#39;\")), -1 != t.indexOf(\"\\0\") && (t = t.replace(X, \"&#0;\"))), t;\n    }\n\n    function ft(t) {\n      l.setTimeout(function () {\n        throw t;\n      }, 0);\n    }\n\n    function pt(t, e) {\n      st || function () {\n        if (l.Promise && l.Promise.resolve) {\n          var t = l.Promise.resolve(void 0);\n\n          st = function () {\n            t.then(mt);\n          };\n        } else st = function () {\n          var t = mt;\n          !g(l.setImmediate) || l.Window && l.Window.prototype && !nt(\"Edge\") && l.Window.prototype.setImmediate == l.setImmediate ? (at || (at = function () {\n            var t = l.MessageChannel;\n            if (void 0 === t && \"undefined\" != typeof window && window.postMessage && window.addEventListener && !nt(\"Presto\") && (t = function () {\n              var t = document.createElement(\"IFRAME\");\n              t.style.display = \"none\", t.src = \"\", document.documentElement.appendChild(t);\n              var e = t.contentWindow;\n              (t = e.document).open(), t.write(\"\"), t.close();\n              var n = \"callImmediate\" + Math.random(),\n                  r = \"file:\" == e.location.protocol ? \"*\" : e.location.protocol + \"//\" + e.location.host;\n              t = _(function (t) {\n                \"*\" != r && t.origin != r || t.data != n || this.port1.onmessage();\n              }, this), e.addEventListener(\"message\", t, !1), this.port1 = {}, this.port2 = {\n                postMessage: function () {\n                  e.postMessage(n, r);\n                }\n              };\n            }), void 0 === t || nt(\"Trident\") || nt(\"MSIE\")) return \"undefined\" != typeof document && \"onreadystatechange\" in document.createElement(\"SCRIPT\") ? function (t) {\n              var e = document.createElement(\"SCRIPT\");\n              e.onreadystatechange = function () {\n                e.onreadystatechange = null, e.parentNode.removeChild(e), e = null, t(), t = null;\n              }, document.documentElement.appendChild(e);\n            } : function (t) {\n              l.setTimeout(t, 0);\n            };\n            var e = new t(),\n                n = {},\n                r = n;\n            return e.port1.onmessage = function () {\n              if (void 0 !== n.next) {\n                var t = (n = n.next).yb;\n                n.yb = null, t();\n              }\n            }, function (t) {\n              r.next = {\n                yb: t\n              }, r = r.next, e.port2.postMessage(0);\n            };\n          }()), at(t)) : l.setImmediate(t);\n        };\n      }(), dt || (st(), dt = !0), yt.add(t, e);\n    }\n\n    var dt = !1,\n        yt = new R();\n\n    function mt() {\n      for (var t; n = e = void 0, n = null, (e = yt).a && (n = e.a, e.a = e.a.next, e.a || (e.b = null), n.next = null), t = n;) {\n        try {\n          t.a.call(t.b);\n        } catch (t) {\n          ft(t);\n        }\n\n        D(O, t);\n      }\n\n      var e, n;\n      dt = !1;\n    }\n\n    function gt(t, e) {\n      if (this.a = vt, this.i = void 0, this.f = this.b = this.c = null, this.g = this.h = !1, t != s) try {\n        var n = this;\n        t.call(e, function (t) {\n          Dt(n, bt, t);\n        }, function (t) {\n          if (!(t instanceof Ft)) try {\n            if (t instanceof Error) throw t;\n            throw Error(\"Promise rejected.\");\n          } catch (t) {}\n          Dt(n, wt, t);\n        });\n      } catch (t) {\n        Dt(this, wt, t);\n      }\n    }\n\n    var vt = 0,\n        bt = 2,\n        wt = 3;\n\n    function _t() {\n      this.next = this.f = this.b = this.g = this.a = null, this.c = !1;\n    }\n\n    _t.prototype.reset = function () {\n      this.f = this.b = this.g = this.a = null, this.c = !1;\n    };\n\n    var Et = new k(function () {\n      return new _t();\n    }, function (t) {\n      t.reset();\n    });\n\n    function Tt(t, e, n) {\n      var r = Et.get();\n      return r.g = t, r.b = e, r.f = n, r;\n    }\n\n    function St(t) {\n      if (t instanceof gt) return t;\n      var e = new gt(s);\n      return Dt(e, bt, t), e;\n    }\n\n    function It(n) {\n      return new gt(function (t, e) {\n        e(n);\n      });\n    }\n\n    function Ct(t, e, n) {\n      Rt(t, e, n, null) || pt(E(e, t));\n    }\n\n    function Nt(n) {\n      return new gt(function (r) {\n        var i = n.length,\n            o = [];\n        if (i) for (var t = function (t, e, n) {\n          i--, o[t] = e ? {\n            Eb: !0,\n            value: n\n          } : {\n            Eb: !1,\n            reason: n\n          }, 0 == i && r(o);\n        }, e = 0; e < n.length; e++) Ct(n[e], E(t, e, !0), E(t, e, !1));else r(o);\n      });\n    }\n\n    function At(t, e) {\n      t.b || t.a != bt && t.a != wt || Ot(t), t.f ? t.f.next = e : t.b = e, t.f = e;\n    }\n\n    function kt(t, i, o, a) {\n      var e = Tt(null, null, null);\n      return e.a = new gt(function (n, r) {\n        e.g = i ? function (t) {\n          try {\n            var e = i.call(a, t);\n            n(e);\n          } catch (t) {\n            r(t);\n          }\n        } : n, e.b = o ? function (t) {\n          try {\n            var e = o.call(a, t);\n            void 0 === e && t instanceof Ft ? r(t) : n(e);\n          } catch (t) {\n            r(t);\n          }\n        } : r;\n      }), At(e.a.c = t, e), e.a;\n    }\n\n    function Dt(t, e, n) {\n      var r, i;\n      t.a == vt && (t === n && (e = wt, n = new TypeError(\"Promise cannot resolve to itself\")), t.a = 1, Rt(n, t.Lc, t.Mc, t) || (t.i = n, t.a = e, t.c = null, Ot(t), e != wt || n instanceof Ft || (i = n, (r = t).g = !0, pt(function () {\n        r.g && Lt.call(null, i);\n      }))));\n    }\n\n    function Rt(t, e, n, r) {\n      if (t instanceof gt) return At(t, Tt(e || s, n || null, r)), !0;\n      if (I(t)) return t.then(e, n, r), !0;\n      if (v(t)) try {\n        var i = t.then;\n        if (g(i)) return function (t, e, n, r, i) {\n          function o(t) {\n            a || (a = !0, r.call(i, t));\n          }\n\n          var a = !1;\n\n          try {\n            e.call(t, function (t) {\n              a || (a = !0, n.call(i, t));\n            }, o);\n          } catch (t) {\n            o(t);\n          }\n        }(t, i, e, n, r), !0;\n      } catch (t) {\n        return n.call(r, t), !0;\n      }\n      return !1;\n    }\n\n    function Ot(t) {\n      t.h || (t.h = !0, pt(t.Xb, t));\n    }\n\n    function Pt(t) {\n      var e = null;\n      return t.b && (e = t.b, t.b = e.next, e.next = null), t.b || (t.f = null), e;\n    }\n\n    function Mt(t, e, n, r) {\n      if (n == wt && e.b && !e.c) for (; t && t.g; t = t.c) t.g = !1;\n      if (e.a) e.a.c = null, xt(e, n, r);else try {\n        e.c ? e.g.call(e.f) : xt(e, n, r);\n      } catch (t) {\n        Lt.call(null, t);\n      }\n      D(Et, e);\n    }\n\n    function xt(t, e, n) {\n      e == bt ? t.g.call(t.f, n) : t.b && t.b.call(t.f, n);\n    }\n\n    gt.prototype.then = function (t, e, n) {\n      return kt(this, g(t) ? t : null, g(e) ? e : null, n);\n    }, gt.prototype.$goog_Thenable = !0, (t = gt.prototype).ia = function (t, e) {\n      return (t = Tt(t, t, e)).c = !0, At(this, t), this;\n    }, t.s = function (t, e) {\n      return kt(this, null, t, e);\n    }, t.cancel = function (t) {\n      this.a == vt && pt(function () {\n        !function t(e, n) {\n          if (e.a == vt) if (e.c) {\n            var r = e.c;\n\n            if (r.b) {\n              for (var i = 0, o = null, a = null, s = r.b; s && (s.c || (i++, s.a == e && (o = s), !(o && 1 < i))); s = s.next) o || (a = s);\n\n              o && (r.a == vt && 1 == i ? t(r, n) : (a ? ((i = a).next == r.f && (r.f = i), i.next = i.next.next) : Pt(r), Mt(r, o, wt, n)));\n            }\n\n            e.c = null;\n          } else Dt(e, wt, n);\n        }(this, new Ft(t));\n      }, this);\n    }, t.Lc = function (t) {\n      this.a = vt, Dt(this, bt, t);\n    }, t.Mc = function (t) {\n      this.a = vt, Dt(this, wt, t);\n    }, t.Xb = function () {\n      for (var t; t = Pt(this);) Mt(this, t, this.a, this.i);\n\n      this.h = !1;\n    };\n    var Lt = ft;\n\n    function Ft(t) {\n      C.call(this, t);\n    }\n\n    function Ut() {\n      this.qa = this.qa, this.ja = this.ja;\n    }\n\n    S(Ft, C);\n    var qt = 0;\n\n    function Vt(t) {\n      if (!t.qa && (t.qa = !0, t.va(), 0 != qt)) t[e] || (t[e] = ++i);\n    }\n\n    function Bt(t) {\n      return Bt[\" \"](t), t;\n    }\n\n    Ut.prototype.qa = !(Ft.prototype.name = \"cancel\"), Ut.prototype.va = function () {\n      if (this.ja) for (; this.ja.length;) this.ja.shift()();\n    }, Bt[\" \"] = s;\n    var jt,\n        Wt,\n        Kt = nt(\"Opera\"),\n        Qt = nt(\"Trident\") || nt(\"MSIE\"),\n        Ht = nt(\"Edge\"),\n        Gt = Ht || Qt,\n        zt = nt(\"Gecko\") && !($(W.toLowerCase(), \"webkit\") && !nt(\"Edge\")) && !(nt(\"Trident\") || nt(\"MSIE\")) && !nt(\"Edge\"),\n        Yt = $(W.toLowerCase(), \"webkit\") && !nt(\"Edge\");\n\n    function Xt() {\n      var t = l.document;\n      return t ? t.documentMode : void 0;\n    }\n\n    t: {\n      var Jt = \"\",\n          $t = (Wt = W, zt ? /rv:([^\\);]+)(\\)|;)/.exec(Wt) : Ht ? /Edge\\/([\\d\\.]+)/.exec(Wt) : Qt ? /\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(Wt) : Yt ? /WebKit\\/(\\S+)/.exec(Wt) : Kt ? /(?:Version)[ \\/]?(\\S+)/.exec(Wt) : void 0);\n\n      if ($t && (Jt = $t ? $t[1] : \"\"), Qt) {\n        var Zt = Xt();\n\n        if (null != Zt && Zt > parseFloat(Jt)) {\n          jt = String(Zt);\n          break t;\n        }\n      }\n\n      jt = Jt;\n    }\n\n    var te,\n        ee = {};\n\n    function ne(s) {\n      return t = s, e = function () {\n        for (var t = 0, e = K(String(jt)).split(\".\"), n = K(String(s)).split(\".\"), r = Math.max(e.length, n.length), i = 0; 0 == t && i < r; i++) {\n          var o = e[i] || \"\",\n              a = n[i] || \"\";\n\n          do {\n            if (o = /(\\d*)(\\D*)(.*)/.exec(o) || [\"\", \"\", \"\", \"\"], a = /(\\d*)(\\D*)(.*)/.exec(a) || [\"\", \"\", \"\", \"\"], 0 == o[0].length && 0 == a[0].length) break;\n            t = Z(0 == o[1].length ? 0 : parseInt(o[1], 10), 0 == a[1].length ? 0 : parseInt(a[1], 10)) || Z(0 == o[2].length, 0 == a[2].length) || Z(o[2], a[2]), o = o[3], a = a[3];\n          } while (0 == t);\n        }\n\n        return 0 <= t;\n      }, n = ee, Object.prototype.hasOwnProperty.call(n, t) ? n[t] : n[t] = e(t);\n      var t, e, n;\n    }\n\n    var re = l.document;\n    te = re && Qt ? Xt() || (\"CSS1Compat\" == re.compatMode ? parseInt(jt, 10) : 5) : void 0;\n\n    var ie = Object.freeze || function (t) {\n      return t;\n    },\n        oe = !Qt || 9 <= Number(te),\n        ae = Qt && !ne(\"9\"),\n        se = function () {\n      if (!l.addEventListener || !Object.defineProperty) return !1;\n      var t = !1,\n          e = Object.defineProperty({}, \"passive\", {\n        get: function () {\n          t = !0;\n        }\n      });\n\n      try {\n        l.addEventListener(\"test\", s, e), l.removeEventListener(\"test\", s, e);\n      } catch (t) {}\n\n      return t;\n    }();\n\n    function ue(t, e) {\n      this.type = t, this.b = this.target = e, this.Kb = !0;\n    }\n\n    function ce(t, e) {\n      if (ue.call(this, t ? t.type : \"\"), this.relatedTarget = this.b = this.target = null, this.button = this.screenY = this.screenX = this.clientY = this.clientX = 0, this.key = \"\", this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1, this.pointerId = 0, this.pointerType = \"\", this.a = null, t) {\n        var n = this.type = t.type,\n            r = t.changedTouches && t.changedTouches.length ? t.changedTouches[0] : null;\n\n        if (this.target = t.target || t.srcElement, this.b = e, e = t.relatedTarget) {\n          if (zt) {\n            t: {\n              try {\n                Bt(e.nodeName);\n                var i = !0;\n                break t;\n              } catch (t) {}\n\n              i = !1;\n            }\n\n            i || (e = null);\n          }\n        } else \"mouseover\" == n ? e = t.fromElement : \"mouseout\" == n && (e = t.toElement);\n\n        this.relatedTarget = e, this.screenY = r ? (this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX, this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY, this.screenX = r.screenX || 0, r.screenY || 0) : (this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX, this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY, this.screenX = t.screenX || 0, t.screenY || 0), this.button = t.button, this.key = t.key || \"\", this.ctrlKey = t.ctrlKey, this.altKey = t.altKey, this.shiftKey = t.shiftKey, this.metaKey = t.metaKey, this.pointerId = t.pointerId || 0, this.pointerType = h(t.pointerType) ? t.pointerType : he[t.pointerType] || \"\", (this.a = t).defaultPrevented && this.preventDefault();\n      }\n    }\n\n    ue.prototype.preventDefault = function () {\n      this.Kb = !1;\n    }, S(ce, ue);\n    var he = ie({\n      2: \"touch\",\n      3: \"pen\",\n      4: \"mouse\"\n    });\n    ce.prototype.preventDefault = function () {\n      ce.qb.preventDefault.call(this);\n      var t = this.a;\n      if (t.preventDefault) t.preventDefault();else if (t.returnValue = !1, ae) try {\n        (t.ctrlKey || 112 <= t.keyCode && t.keyCode <= 123) && (t.keyCode = -1);\n      } catch (t) {}\n    }, ce.prototype.f = function () {\n      return this.a;\n    };\n    var le = \"closure_listenable_\" + (1e6 * Math.random() | 0),\n        fe = 0;\n\n    function pe(t, e, n, r, i) {\n      this.listener = t, this.proxy = null, this.src = e, this.type = n, this.capture = !!r, this.Na = i, this.key = ++fe, this.oa = this.Ia = !1;\n    }\n\n    function de(t) {\n      t.oa = !0, t.listener = null, t.proxy = null, t.src = null, t.Na = null;\n    }\n\n    function ye(t) {\n      this.src = t, this.a = {}, this.b = 0;\n    }\n\n    function me(t, e) {\n      var n = e.type;\n      n in t.a && q(t.a[n], e) && (de(e), 0 == t.a[n].length && (delete t.a[n], t.b--));\n    }\n\n    function ge(t, e, n, r) {\n      for (var i = 0; i < t.length; ++i) {\n        var o = t[i];\n        if (!o.oa && o.listener == e && o.capture == !!n && o.Na == r) return i;\n      }\n\n      return -1;\n    }\n\n    ye.prototype.add = function (t, e, n, r, i) {\n      var o = t.toString();\n      (t = this.a[o]) || (t = this.a[o] = [], this.b++);\n      var a = ge(t, e, r, i);\n      return -1 < a ? (e = t[a], n || (e.Ia = !1)) : ((e = new pe(e, this.src, o, !!r, i)).Ia = n, t.push(e)), e;\n    };\n\n    var ve = \"closure_lm_\" + (1e6 * Math.random() | 0),\n        be = {};\n\n    function we(t, e, n, r, i) {\n      if (r && r.once) Ee(t, e, n, r, i);else if (y(e)) for (var o = 0; o < e.length; o++) we(t, e[o], n, r, i);else n = Re(n), t && t[le] ? Pe(t, e, n, v(r) ? !!r.capture : !!r, i) : _e(t, e, n, !1, r, i);\n    }\n\n    function _e(t, e, n, r, i, o) {\n      if (!e) throw Error(\"Invalid event type\");\n      var a,\n          s,\n          u = v(i) ? !!i.capture : !!i,\n          c = ke(t);\n      if (c || (t[ve] = c = new ye(t)), !(n = c.add(e, n, r, u, o)).proxy) if (a = Ae, r = s = oe ? function (t) {\n        return a.call(s.src, s.listener, t);\n      } : function (t) {\n        if (!(t = a.call(s.src, s.listener, t))) return t;\n      }, (n.proxy = r).src = t, r.listener = n, t.addEventListener) se || (i = u), void 0 === i && (i = !1), t.addEventListener(e.toString(), r, i);else if (t.attachEvent) t.attachEvent(Ie(e.toString()), r);else {\n        if (!t.addListener || !t.removeListener) throw Error(\"addEventListener and attachEvent are unavailable.\");\n        t.addListener(r);\n      }\n    }\n\n    function Ee(t, e, n, r, i) {\n      if (y(e)) for (var o = 0; o < e.length; o++) Ee(t, e[o], n, r, i);else n = Re(n), t && t[le] ? Me(t, e, n, v(r) ? !!r.capture : !!r, i) : _e(t, e, n, !0, r, i);\n    }\n\n    function Te(t, e, n, r, i) {\n      if (y(e)) for (var o = 0; o < e.length; o++) Te(t, e[o], n, r, i);else r = v(r) ? !!r.capture : !!r, n = Re(n), t && t[le] ? (t = t.m, (e = String(e).toString()) in t.a && -1 < (n = ge(o = t.a[e], n, r, i)) && (de(o[n]), Array.prototype.splice.call(o, n, 1), 0 == o.length && (delete t.a[e], t.b--))) : t && (t = ke(t)) && (e = t.a[e.toString()], t = -1, e && (t = ge(e, n, r, i)), (n = -1 < t ? e[t] : null) && Se(n));\n    }\n\n    function Se(t) {\n      if (\"number\" != typeof t && t && !t.oa) {\n        var e = t.src;\n        if (e && e[le]) me(e.m, t);else {\n          var n = t.type,\n              r = t.proxy;\n          e.removeEventListener ? e.removeEventListener(n, r, t.capture) : e.detachEvent ? e.detachEvent(Ie(n), r) : e.addListener && e.removeListener && e.removeListener(r), (n = ke(e)) ? (me(n, t), 0 == n.b && (n.src = null, e[ve] = null)) : de(t);\n        }\n      }\n    }\n\n    function Ie(t) {\n      return t in be ? be[t] : be[t] = \"on\" + t;\n    }\n\n    function Ce(t, e, n, r) {\n      var i = !0;\n      if ((t = ke(t)) && (e = t.a[e.toString()])) for (e = e.concat(), t = 0; t < e.length; t++) {\n        var o = e[t];\n        o && o.capture == n && !o.oa && (o = Ne(o, r), i = i && !1 !== o);\n      }\n      return i;\n    }\n\n    function Ne(t, e) {\n      var n = t.listener,\n          r = t.Na || t.src;\n      return t.Ia && Se(t), n.call(r, e);\n    }\n\n    function Ae(t, e) {\n      if (t.oa) return !0;\n      if (oe) return Ne(t, new ce(e, this));\n      if (!e) t: {\n        e = [\"window\", \"event\"];\n\n        for (var n = l, r = 0; r < e.length; r++) if (null == (n = n[e[r]])) {\n          e = null;\n          break t;\n        }\n\n        e = n;\n      }\n\n      if (e = new ce(r = e, this), n = !0, !(r.keyCode < 0 || null != r.returnValue)) {\n        t: {\n          var i = !1;\n          if (0 == r.keyCode) try {\n            r.keyCode = -1;\n            break t;\n          } catch (t) {\n            i = !0;\n          }\n          (i || null == r.returnValue) && (r.returnValue = !0);\n        }\n\n        for (r = [], i = e.b; i; i = i.parentNode) r.push(i);\n\n        for (t = t.type, i = r.length - 1; 0 <= i; i--) {\n          e.b = r[i];\n          var o = Ce(r[i], t, !0, e);\n          n = n && o;\n        }\n\n        for (i = 0; i < r.length; i++) e.b = r[i], o = Ce(r[i], t, !1, e), n = n && o;\n      }\n\n      return n;\n    }\n\n    function ke(t) {\n      return (t = t[ve]) instanceof ye ? t : null;\n    }\n\n    var De = \"__closure_events_fn_\" + (1e9 * Math.random() >>> 0);\n\n    function Re(e) {\n      return g(e) ? e : (e[De] || (e[De] = function (t) {\n        return e.handleEvent(t);\n      }), e[De]);\n    }\n\n    function Oe() {\n      Ut.call(this), this.m = new ye(this), (this.Qb = this).Va = null;\n    }\n\n    function Pe(t, e, n, r, i) {\n      t.m.add(String(e), n, !1, r, i);\n    }\n\n    function Me(t, e, n, r, i) {\n      t.m.add(String(e), n, !0, r, i);\n    }\n\n    function xe(t, e, n, r) {\n      if (!(e = t.m.a[String(e)])) return !0;\n      e = e.concat();\n\n      for (var i = !0, o = 0; o < e.length; ++o) {\n        var a = e[o];\n\n        if (a && !a.oa && a.capture == n) {\n          var s = a.listener,\n              u = a.Na || a.src;\n          a.Ia && me(t.m, a), i = !1 !== s.call(u, r) && i;\n        }\n      }\n\n      return i && 0 != r.Kb;\n    }\n\n    function Le(t, e, n) {\n      if (g(t)) n && (t = _(t, n));else {\n        if (!t || \"function\" != typeof t.handleEvent) throw Error(\"Invalid listener argument\");\n        t = _(t.handleEvent, t);\n      }\n      return 2147483647 < Number(e) ? -1 : l.setTimeout(t, e || 0);\n    }\n\n    function Fe(n) {\n      var r = null;\n      return new gt(function (t, e) {\n        -1 == (r = Le(function () {\n          t(void 0);\n        }, n)) && e(Error(\"Failed to schedule timer.\"));\n      }).s(function (t) {\n        throw l.clearTimeout(r), t;\n      });\n    }\n\n    function Ue(t) {\n      if (t.S && \"function\" == typeof t.S) return t.S();\n      if (h(t)) return t.split(\"\");\n\n      if (m(t)) {\n        for (var e = [], n = t.length, r = 0; r < n; r++) e.push(t[r]);\n\n        return e;\n      }\n\n      for (r in e = [], n = 0, t) e[n++] = t[r];\n\n      return e;\n    }\n\n    function qe(t) {\n      if (t.U && \"function\" == typeof t.U) return t.U();\n\n      if (!t.S || \"function\" != typeof t.S) {\n        if (m(t) || h(t)) {\n          var e = [];\n          t = t.length;\n\n          for (var n = 0; n < t; n++) e.push(n);\n\n          return e;\n        }\n\n        for (var r in e = [], n = 0, t) e[n++] = r;\n\n        return e;\n      }\n    }\n\n    function Ve(t, e) {\n      this.b = {}, this.a = [], this.c = 0;\n      var n = arguments.length;\n\n      if (1 < n) {\n        if (n % 2) throw Error(\"Uneven number of arguments\");\n\n        for (var r = 0; r < n; r += 2) this.set(arguments[r], arguments[r + 1]);\n      } else if (t) if (t instanceof Ve) for (n = t.U(), r = 0; r < n.length; r++) this.set(n[r], t.get(n[r]));else for (r in t) this.set(r, t[r]);\n    }\n\n    function Be(t) {\n      if (t.c != t.a.length) {\n        for (var e = 0, n = 0; e < t.a.length;) {\n          var r = t.a[e];\n          je(t.b, r) && (t.a[n++] = r), e++;\n        }\n\n        t.a.length = n;\n      }\n\n      if (t.c != t.a.length) {\n        var i = {};\n\n        for (n = e = 0; e < t.a.length;) je(i, r = t.a[e]) || (i[t.a[n++] = r] = 1), e++;\n\n        t.a.length = n;\n      }\n    }\n\n    function je(t, e) {\n      return Object.prototype.hasOwnProperty.call(t, e);\n    }\n\n    S(Oe, Ut), Oe.prototype[le] = !0, Oe.prototype.addEventListener = function (t, e, n, r) {\n      we(this, t, e, n, r);\n    }, Oe.prototype.removeEventListener = function (t, e, n, r) {\n      Te(this, t, e, n, r);\n    }, Oe.prototype.dispatchEvent = function (t) {\n      var e,\n          n = this.Va;\n      if (n) for (e = []; n; n = n.Va) e.push(n);\n      n = this.Qb;\n      var r = t.type || t;\n      if (h(t)) t = new ue(t, n);else if (t instanceof ue) t.target = t.target || n;else {\n        var i = t;\n        ct(t = new ue(r, n), i);\n      }\n      if (i = !0, e) for (var o = e.length - 1; 0 <= o; o--) {\n        var a = t.b = e[o];\n        i = xe(a, r, !0, t) && i;\n      }\n      if (i = xe(a = t.b = n, r, !0, t) && i, i = xe(a, r, !1, t) && i, e) for (o = 0; o < e.length; o++) i = xe(a = t.b = e[o], r, !1, t) && i;\n      return i;\n    }, Oe.prototype.va = function () {\n      if (Oe.qb.va.call(this), this.m) {\n        var t,\n            e = this.m;\n\n        for (t in e.a) {\n          for (var n = e.a[t], r = 0; r < n.length; r++) de(n[r]);\n\n          delete e.a[t], e.b--;\n        }\n      }\n\n      this.Va = null;\n    }, (t = Ve.prototype).S = function () {\n      Be(this);\n\n      for (var t = [], e = 0; e < this.a.length; e++) t.push(this.b[this.a[e]]);\n\n      return t;\n    }, t.U = function () {\n      return Be(this), this.a.concat();\n    }, t.clear = function () {\n      this.b = {}, this.c = this.a.length = 0;\n    }, t.get = function (t, e) {\n      return je(this.b, t) ? this.b[t] : e;\n    }, t.set = function (t, e) {\n      je(this.b, t) || (this.c++, this.a.push(t)), this.b[t] = e;\n    }, t.forEach = function (t, e) {\n      for (var n = this.U(), r = 0; r < n.length; r++) {\n        var i = n[r],\n            o = this.get(i);\n        t.call(e, o, i, this);\n      }\n    };\n    var We = /^(?:([^:/?#.]+):)?(?:\\/\\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$/;\n\n    function Ke(t, e) {\n      var n;\n      this.b = this.i = this.f = \"\", this.m = null, this.g = this.c = \"\", this.h = !1, t instanceof Ke ? (this.h = void 0 !== e ? e : t.h, Qe(this, t.f), this.i = t.i, this.b = t.b, He(this, t.m), this.c = t.c, Ge(this, pn(t.a)), this.g = t.g) : t && (n = String(t).match(We)) ? (this.h = !!e, Qe(this, n[1] || \"\", !0), this.i = $e(n[2] || \"\"), this.b = $e(n[3] || \"\", !0), He(this, n[4]), this.c = $e(n[5] || \"\", !0), Ge(this, n[6] || \"\", !0), this.g = $e(n[7] || \"\")) : (this.h = !!e, this.a = new sn(null, this.h));\n    }\n\n    function Qe(t, e, n) {\n      t.f = n ? $e(e, !0) : e, t.f && (t.f = t.f.replace(/:$/, \"\"));\n    }\n\n    function He(t, e) {\n      if (e) {\n        if (e = Number(e), isNaN(e) || e < 0) throw Error(\"Bad port number \" + e);\n        t.m = e;\n      } else t.m = null;\n    }\n\n    function Ge(t, e, n) {\n      var r, i;\n      e instanceof sn ? (t.a = e, r = t.a, (i = t.h) && !r.f && (un(r), r.c = null, r.a.forEach(function (t, e) {\n        var n = e.toLowerCase();\n        e != n && (hn(this, e), fn(this, n, t));\n      }, r)), r.f = i) : (n || (e = Ze(e, on)), t.a = new sn(e, t.h));\n    }\n\n    function ze(t, e, n) {\n      t.a.set(e, n);\n    }\n\n    function Ye(t, e) {\n      return t.a.get(e);\n    }\n\n    function Xe(t) {\n      return t instanceof Ke ? new Ke(t) : new Ke(t, void 0);\n    }\n\n    function Je(t, e) {\n      var n = new Ke(null, void 0);\n      return Qe(n, \"https\"), t && (n.b = t), e && (n.c = e), n;\n    }\n\n    function $e(t, e) {\n      return t ? e ? decodeURI(t.replace(/%25/g, \"%2525\")) : decodeURIComponent(t) : \"\";\n    }\n\n    function Ze(t, e, n) {\n      return h(t) ? (t = encodeURI(t).replace(e, tn), n && (t = t.replace(/%25([0-9a-fA-F]{2})/g, \"%$1\")), t) : null;\n    }\n\n    function tn(t) {\n      return \"%\" + ((t = t.charCodeAt(0)) >> 4 & 15).toString(16) + (15 & t).toString(16);\n    }\n\n    Ke.prototype.toString = function () {\n      var t = [],\n          e = this.f;\n      e && t.push(Ze(e, en, !0), \":\");\n      var n = this.b;\n      return (n || \"file\" == e) && (t.push(\"//\"), (e = this.i) && t.push(Ze(e, en, !0), \"@\"), t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g, \"%$1\")), null != (n = this.m) && t.push(\":\", String(n))), (n = this.c) && (this.b && \"/\" != n.charAt(0) && t.push(\"/\"), t.push(Ze(n, \"/\" == n.charAt(0) ? rn : nn, !0))), (n = this.a.toString()) && t.push(\"?\", n), (n = this.g) && t.push(\"#\", Ze(n, an)), t.join(\"\");\n    }, Ke.prototype.resolve = function (t) {\n      var e = new Ke(this),\n          n = !!t.f;\n      n ? Qe(e, t.f) : n = !!t.i, n ? e.i = t.i : n = !!t.b, n ? e.b = t.b : n = null != t.m;\n      var r = t.c;\n      if (n) He(e, t.m);else if (n = !!t.c) {\n        if (\"/\" != r.charAt(0)) if (this.b && !this.c) r = \"/\" + r;else {\n          var i = e.c.lastIndexOf(\"/\");\n          -1 != i && (r = e.c.substr(0, i + 1) + r);\n        }\n        if (\"..\" == (i = r) || \".\" == i) r = \"\";else if ($(i, \"./\") || $(i, \"/.\")) {\n          r = 0 == i.lastIndexOf(\"/\", 0), i = i.split(\"/\");\n\n          for (var o = [], a = 0; a < i.length;) {\n            var s = i[a++];\n            \".\" == s ? r && a == i.length && o.push(\"\") : \"..\" == s ? ((1 < o.length || 1 == o.length && \"\" != o[0]) && o.pop(), r && a == i.length && o.push(\"\")) : (o.push(s), r = !0);\n          }\n\n          r = o.join(\"/\");\n        } else r = i;\n      }\n      return n ? e.c = r : n = \"\" !== t.a.toString(), n ? Ge(e, pn(t.a)) : n = !!t.g, n && (e.g = t.g), e;\n    };\n    var en = /[#\\/\\?@]/g,\n        nn = /[#\\?:]/g,\n        rn = /[#\\?]/g,\n        on = /[#\\?@]/g,\n        an = /#/g;\n\n    function sn(t, e) {\n      this.b = this.a = null, this.c = t || null, this.f = !!e;\n    }\n\n    function un(n) {\n      n.a || (n.a = new Ve(), n.b = 0, n.c && function (t, e) {\n        if (t) {\n          t = t.split(\"&\");\n\n          for (var n = 0; n < t.length; n++) {\n            var r = t[n].indexOf(\"=\"),\n                i = null;\n\n            if (0 <= r) {\n              var o = t[n].substring(0, r);\n              i = t[n].substring(r + 1);\n            } else o = t[n];\n\n            e(o, i ? decodeURIComponent(i.replace(/\\+/g, \" \")) : \"\");\n          }\n        }\n      }(n.c, function (t, e) {\n        n.add(decodeURIComponent(t.replace(/\\+/g, \" \")), e);\n      }));\n    }\n\n    function cn(t) {\n      var e = qe(t);\n      if (void 0 === e) throw Error(\"Keys are undefined\");\n      var n = new sn(null, void 0);\n      t = Ue(t);\n\n      for (var r = 0; r < e.length; r++) {\n        var i = e[r],\n            o = t[r];\n        y(o) ? fn(n, i, o) : n.add(i, o);\n      }\n\n      return n;\n    }\n\n    function hn(t, e) {\n      un(t), e = dn(t, e), je(t.a.b, e) && (t.c = null, t.b -= t.a.get(e).length, je((t = t.a).b, e) && (delete t.b[e], t.c--, t.a.length > 2 * t.c && Be(t)));\n    }\n\n    function ln(t, e) {\n      return un(t), e = dn(t, e), je(t.a.b, e);\n    }\n\n    function fn(t, e, n) {\n      hn(t, e), 0 < n.length && (t.c = null, t.a.set(dn(t, e), j(n)), t.b += n.length);\n    }\n\n    function pn(t) {\n      var e = new sn();\n      return e.c = t.c, t.a && (e.a = new Ve(t.a), e.b = t.b), e;\n    }\n\n    function dn(t, e) {\n      return e = String(e), t.f && (e = e.toLowerCase()), e;\n    }\n\n    (t = sn.prototype).add = function (t, e) {\n      un(this), this.c = null, t = dn(this, t);\n      var n = this.a.get(t);\n      return n || this.a.set(t, n = []), n.push(e), this.b += 1, this;\n    }, t.clear = function () {\n      this.a = this.c = null, this.b = 0;\n    }, t.forEach = function (n, r) {\n      un(this), this.a.forEach(function (t, e) {\n        x(t, function (t) {\n          n.call(r, t, e, this);\n        }, this);\n      }, this);\n    }, t.U = function () {\n      un(this);\n\n      for (var t = this.a.S(), e = this.a.U(), n = [], r = 0; r < e.length; r++) for (var i = t[r], o = 0; o < i.length; o++) n.push(e[r]);\n\n      return n;\n    }, t.S = function (t) {\n      un(this);\n      var e = [];\n      if (h(t)) ln(this, t) && (e = B(e, this.a.get(dn(this, t))));else {\n        t = this.a.S();\n\n        for (var n = 0; n < t.length; n++) e = B(e, t[n]);\n      }\n      return e;\n    }, t.set = function (t, e) {\n      return un(this), this.c = null, ln(this, t = dn(this, t)) && (this.b -= this.a.get(t).length), this.a.set(t, [e]), this.b += 1, this;\n    }, t.get = function (t, e) {\n      return t && 0 < (t = this.S(t)).length ? String(t[0]) : e;\n    }, t.toString = function () {\n      if (this.c) return this.c;\n      if (!this.a) return \"\";\n\n      for (var t = [], e = this.a.U(), n = 0; n < e.length; n++) {\n        var r = e[n],\n            i = encodeURIComponent(String(r));\n        r = this.S(r);\n\n        for (var o = 0; o < r.length; o++) {\n          var a = i;\n          \"\" !== r[o] && (a += \"=\" + encodeURIComponent(String(r[o]))), t.push(a);\n        }\n      }\n\n      return this.c = t.join(\"&\");\n    };\n    var yn = !Qt || 9 <= Number(te);\n\n    function mn(t, e) {\n      this.a = t === bn && e || \"\", this.b = vn;\n    }\n\n    function gn(t) {\n      return t instanceof mn && t.constructor === mn && t.b === vn ? t.a : (A(\"expected object of type Const, got '\" + t + \"'\"), \"type_error:Const\");\n    }\n\n    mn.prototype.na = !0, mn.prototype.ma = function () {\n      return this.a;\n    }, mn.prototype.toString = function () {\n      return \"Const{\" + this.a + \"}\";\n    };\n    var vn = {},\n        bn = {};\n\n    function wn() {\n      this.a = \"\", this.b = In;\n    }\n\n    function _n(t) {\n      return t instanceof wn && t.constructor === wn && t.b === In ? t.a : (A(\"expected object of type TrustedResourceUrl, got '\" + t + \"' of type \" + d(t)), \"type_error:TrustedResourceUrl\");\n    }\n\n    function En(t, n) {\n      var e,\n          r,\n          i = gn(t);\n      if (!Sn.test(i)) throw Error(\"Invalid TrustedResourceUrl format: \" + i);\n      return t = i.replace(Tn, function (t, e) {\n        if (!Object.prototype.hasOwnProperty.call(n, e)) throw Error('Found marker, \"' + e + '\", in format string, \"' + i + '\", but no valid label mapping found in args: ' + JSON.stringify(n));\n        return (t = n[e]) instanceof mn ? gn(t) : encodeURIComponent(String(t));\n      }), e = t, (r = new wn()).a = e, r;\n    }\n\n    wn.prototype.na = !0, wn.prototype.ma = function () {\n      return this.a.toString();\n    }, wn.prototype.toString = function () {\n      return \"TrustedResourceUrl{\" + this.a + \"}\";\n    };\n    var Tn = /%{(\\w+)}/g,\n        Sn = /^((https:)?\\/\\/[0-9a-z.:[\\]-]+\\/|\\/[^/\\\\]|[^:/\\\\%]+\\/|[^:/\\\\%]*[?#]|about:blank#)/i,\n        In = {};\n\n    function Cn() {\n      this.a = \"\", this.b = Dn;\n    }\n\n    function Nn(t) {\n      return t instanceof Cn && t.constructor === Cn && t.b === Dn ? t.a : (A(\"expected object of type SafeUrl, got '\" + t + \"' of type \" + d(t)), \"type_error:SafeUrl\");\n    }\n\n    Cn.prototype.na = !0, Cn.prototype.ma = function () {\n      return this.a.toString();\n    }, Cn.prototype.toString = function () {\n      return \"SafeUrl{\" + this.a + \"}\";\n    };\n    var An = /^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;\n\n    function kn(t) {\n      return t instanceof Cn ? t : (t = \"object\" == typeof t && t.na ? t.ma() : String(t), An.test(t) || (t = \"about:invalid#zClosurez\"), Rn(t));\n    }\n\n    var Dn = {};\n\n    function Rn(t) {\n      var e = new Cn();\n      return e.a = t, e;\n    }\n\n    function On() {\n      this.a = \"\", this.b = Pn;\n    }\n\n    Rn(\"about:blank\"), On.prototype.na = !0, On.prototype.ma = function () {\n      return this.a.toString();\n    }, On.prototype.toString = function () {\n      return \"SafeHtml{\" + this.a + \"}\";\n    };\n    var Pn = {};\n\n    function Mn(t) {\n      var e = new On();\n      return e.a = t, e;\n    }\n\n    function xn(t) {\n      var e = document;\n      return h(t) ? e.getElementById(t) : t;\n    }\n\n    function Ln(n, t) {\n      rt(t, function (t, e) {\n        t && \"object\" == typeof t && t.na && (t = t.ma()), \"style\" == e ? n.style.cssText = t : \"class\" == e ? n.className = t : \"for\" == e ? n.htmlFor = t : Fn.hasOwnProperty(e) ? n.setAttribute(Fn[e], t) : 0 == e.lastIndexOf(\"aria-\", 0) || 0 == e.lastIndexOf(\"data-\", 0) ? n.setAttribute(e, t) : n[e] = t;\n      });\n    }\n\n    Mn(\"<!DOCTYPE html>\"), Mn(\"\"), Mn(\"<br>\");\n    var Fn = {\n      cellpadding: \"cellPadding\",\n      cellspacing: \"cellSpacing\",\n      colspan: \"colSpan\",\n      frameborder: \"frameBorder\",\n      height: \"height\",\n      maxlength: \"maxLength\",\n      nonce: \"nonce\",\n      role: \"role\",\n      rowspan: \"rowSpan\",\n      type: \"type\",\n      usemap: \"useMap\",\n      valign: \"vAlign\",\n      width: \"width\"\n    };\n\n    function Un(t, e, n) {\n      var r = arguments,\n          i = document,\n          o = String(r[0]),\n          a = r[1];\n\n      if (!yn && a && (a.name || a.type)) {\n        if (o = [\"<\", o], a.name && o.push(' name=\"', lt(a.name), '\"'), a.type) {\n          o.push(' type=\"', lt(a.type), '\"');\n          var s = {};\n          ct(s, a), delete s.type, a = s;\n        }\n\n        o.push(\">\"), o = o.join(\"\");\n      }\n\n      return o = i.createElement(o), a && (h(a) ? o.className = a : y(a) ? o.className = a.join(\" \") : Ln(o, a)), 2 < r.length && function (e, n, t) {\n        function r(t) {\n          t && n.appendChild(h(t) ? e.createTextNode(t) : t);\n        }\n\n        for (var i = 2; i < t.length; i++) {\n          var o = t[i];\n          !m(o) || v(o) && 0 < o.nodeType ? r(o) : x(qn(o) ? j(o) : o, r);\n        }\n      }(i, o, r), o;\n    }\n\n    function qn(t) {\n      if (t && \"number\" == typeof t.length) {\n        if (v(t)) return \"function\" == typeof t.item || \"string\" == typeof t.item;\n        if (g(t)) return \"function\" == typeof t.item;\n      }\n\n      return !1;\n    }\n\n    function Vn(t) {\n      var e = [];\n      return function t(e, n, r) {\n        if (null == n) r.push(\"null\");else {\n          if (\"object\" == typeof n) {\n            if (y(n)) {\n              var i = n;\n              n = i.length, r.push(\"[\");\n\n              for (var o = \"\", a = 0; a < n; a++) r.push(o), t(e, i[a], r), o = \",\";\n\n              return void r.push(\"]\");\n            }\n\n            if (!(n instanceof String || n instanceof Number || n instanceof Boolean)) {\n              for (i in r.push(\"{\"), o = \"\", n) Object.prototype.hasOwnProperty.call(n, i) && \"function\" != typeof (a = n[i]) && (r.push(o), Kn(i, r), r.push(\":\"), t(e, a, r), o = \",\");\n\n              return void r.push(\"}\");\n            }\n\n            n = n.valueOf();\n          }\n\n          switch (typeof n) {\n            case \"string\":\n              Kn(n, r);\n              break;\n\n            case \"number\":\n              r.push(isFinite(n) && !isNaN(n) ? String(n) : \"null\");\n              break;\n\n            case \"boolean\":\n              r.push(String(n));\n              break;\n\n            case \"function\":\n              r.push(\"null\");\n              break;\n\n            default:\n              throw Error(\"Unknown type: \" + typeof n);\n          }\n        }\n      }(new Bn(), t, e), e.join(\"\");\n    }\n\n    function Bn() {}\n\n    var jn = {\n      '\"': '\\\\\"',\n      \"\\\\\": \"\\\\\\\\\",\n      \"/\": \"\\\\/\",\n      \"\\b\": \"\\\\b\",\n      \"\\f\": \"\\\\f\",\n      \"\\n\": \"\\\\n\",\n      \"\\r\": \"\\\\r\",\n      \"\\t\": \"\\\\t\",\n      \"\\v\": \"\\\\u000b\"\n    },\n        Wn = /\\uffff/.test(\"ï¿¿\") ? /[\\\\\"\\x00-\\x1f\\x7f-\\uffff]/g : /[\\\\\"\\x00-\\x1f\\x7f-\\xff]/g;\n\n    function Kn(t, e) {\n      e.push('\"', t.replace(Wn, function (t) {\n        var e = jn[t];\n        return e || (e = \"\\\\u\" + (65536 | t.charCodeAt(0)).toString(16).substr(1), jn[t] = e), e;\n      }), '\"');\n    }\n\n    function Qn() {\n      var t = hr();\n      return Qt && !!te && 11 == te || /Edge\\/\\d+/.test(t);\n    }\n\n    function Hn() {\n      return l.window && l.window.location.href || self && self.location && self.location.href || \"\";\n    }\n\n    function Gn(t, e) {\n      e = e || l.window;\n      var n = \"about:blank\";\n      t && (n = Nn(kn(t)).toString()), e.location.href = n;\n    }\n\n    function zn(t) {\n      return !!((t = (t || hr()).toLowerCase()).match(/android/) || t.match(/webos/) || t.match(/iphone|ipad|ipod/) || t.match(/blackberry/) || t.match(/windows phone/) || t.match(/iemobile/));\n    }\n\n    function Yn(t) {\n      t = t || l.window;\n\n      try {\n        t.close();\n      } catch (t) {}\n    }\n\n    function Xn(t, e, n) {\n      var r = Math.floor(1e9 * Math.random()).toString();\n      e = e || 500, n = n || 600;\n      var i = (window.screen.availHeight - n) / 2,\n          o = (window.screen.availWidth - e) / 2;\n\n      for (s in e = {\n        width: e,\n        height: n,\n        top: 0 < i ? i : 0,\n        left: 0 < o ? o : 0,\n        location: !0,\n        resizable: !0,\n        statusbar: !0,\n        toolbar: !1\n      }, n = hr().toLowerCase(), r && (e.target = r, $(n, \"crios/\") && (e.target = \"_blank\")), sr(hr()) == or && (t = t || \"http://localhost\", e.scrollbars = !0), n = t || \"\", (t = e) || (t = {}), r = window, e = n instanceof Cn ? n : kn(void 0 !== n.href ? n.href : String(n)), n = t.target || n.target, i = [], t) switch (s) {\n        case \"width\":\n        case \"height\":\n        case \"top\":\n        case \"left\":\n          i.push(s + \"=\" + t[s]);\n          break;\n\n        case \"target\":\n        case \"noopener\":\n        case \"noreferrer\":\n          break;\n\n        default:\n          i.push(s + \"=\" + (t[s] ? 1 : 0));\n      }\n\n      var a,\n          s = i.join(\",\");\n      if ((nt(\"iPhone\") && !nt(\"iPod\") && !nt(\"iPad\") || nt(\"iPad\") || nt(\"iPod\")) && r.navigator && r.navigator.standalone && n && \"_self\" != n ? (s = r.document.createElement(\"A\"), e instanceof Cn || e instanceof Cn || (e = \"object\" == typeof e && e.na ? e.ma() : String(e), An.test(e) || (e = \"about:invalid#zClosurez\"), e = Rn(e)), s.href = Nn(e), s.setAttribute(\"target\", n), t.noreferrer && s.setAttribute(\"rel\", \"noreferrer\"), (t = document.createEvent(\"MouseEvent\")).initMouseEvent(\"click\", !0, !0, r, 1), s.dispatchEvent(t), s = {}) : t.noreferrer ? (s = r.open(\"\", n, s), t = Nn(e).toString(), s && (Gt && $(t, \";\") && (t = \"'\" + t.replace(/'/g, \"%27\") + \"'\"), s.opener = null, t = Mn('<meta name=\"referrer\" content=\"no-referrer\"><meta http-equiv=\"refresh\" content=\"0; url=' + lt(t) + '\">'), s.document.write((a = t) instanceof On && a.constructor === On && a.b === Pn ? a.a : (A(\"expected object of type SafeHtml, got '\" + a + \"' of type \" + d(a)), \"type_error:SafeHtml\")), s.document.close())) : (s = r.open(Nn(e).toString(), n, s)) && t.noopener && (s.opener = null), s) try {\n        s.focus();\n      } catch (t) {}\n      return s;\n    }\n\n    var Jn = /^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/,\n        $n = /^[^@]+@[^@]+$/;\n\n    function Zn() {\n      var e = null;\n      return new gt(function (t) {\n        \"complete\" == l.document.readyState ? t() : (e = function () {\n          t();\n        }, Ee(window, \"load\", e));\n      }).s(function (t) {\n        throw Te(window, \"load\", e), t;\n      });\n    }\n\n    function tr(t) {\n      return t = t || hr(), !(\"file:\" !== yr() || !t.toLowerCase().match(/iphone|ipad|ipod|android/));\n    }\n\n    function er() {\n      var t = l.window;\n\n      try {\n        return !(!t || t == t.top);\n      } catch (t) {\n        return !1;\n      }\n    }\n\n    function nr() {\n      return void 0 !== l.WorkerGlobalScope && \"function\" == typeof l.importScripts;\n    }\n\n    function rr() {\n      return Hh.INTERNAL.hasOwnProperty(\"reactNative\") ? \"ReactNative\" : Hh.INTERNAL.hasOwnProperty(\"node\") ? \"Node\" : nr() ? \"Worker\" : \"Browser\";\n    }\n\n    function ir() {\n      var t = rr();\n      return \"ReactNative\" === t || \"Node\" === t;\n    }\n\n    var or = \"Firefox\",\n        ar = \"Chrome\";\n\n    function sr(t) {\n      var e = t.toLowerCase();\n      return $(e, \"opera/\") || $(e, \"opr/\") || $(e, \"opios/\") ? \"Opera\" : $(e, \"iemobile\") ? \"IEMobile\" : $(e, \"msie\") || $(e, \"trident/\") ? \"IE\" : $(e, \"edge/\") ? \"Edge\" : $(e, \"firefox/\") ? or : $(e, \"silk/\") ? \"Silk\" : $(e, \"blackberry\") ? \"Blackberry\" : $(e, \"webos\") ? \"Webos\" : !$(e, \"safari/\") || $(e, \"chrome/\") || $(e, \"crios/\") || $(e, \"android\") ? !$(e, \"chrome/\") && !$(e, \"crios/\") || $(e, \"edge/\") ? $(e, \"android\") ? \"Android\" : (t = t.match(/([a-zA-Z\\d\\.]+)\\/[a-zA-Z\\d\\.]*$/)) && 2 == t.length ? t[1] : \"Other\" : ar : \"Safari\";\n    }\n\n    var ur = {\n      Sc: \"FirebaseCore-web\",\n      Uc: \"FirebaseUI-web\"\n    };\n\n    function cr(t, e) {\n      e = e || [];\n      var n,\n          r = [],\n          i = {};\n\n      for (n in ur) i[ur[n]] = !0;\n\n      for (n = 0; n < e.length; n++) void 0 !== i[e[n]] && (delete i[e[n]], r.push(e[n]));\n\n      return r.sort(), (e = r).length || (e = [\"FirebaseCore-web\"]), \"Browser\" === (r = rr()) ? r = sr(i = hr()) : \"Worker\" === r && (r = sr(i = hr()) + \"-\" + r), r + \"/JsCore/\" + t + \"/\" + e.join(\",\");\n    }\n\n    function hr() {\n      return l.navigator && l.navigator.userAgent || \"\";\n    }\n\n    function lr(t, e) {\n      t = t.split(\".\"), e = e || l;\n\n      for (var n = 0; n < t.length && \"object\" == typeof e && null != e; n++) e = e[t[n]];\n\n      return n != t.length && (e = void 0), e;\n    }\n\n    function fr() {\n      try {\n        var t = l.localStorage,\n            e = wr();\n        if (t) return t.setItem(e, \"1\"), t.removeItem(e), !Qn() || !!l.indexedDB;\n      } catch (t) {\n        return nr() && !!l.indexedDB;\n      }\n\n      return !1;\n    }\n\n    function pr() {\n      return (dr() || \"chrome-extension:\" === yr() || tr()) && !ir() && fr() && !nr();\n    }\n\n    function dr() {\n      return \"http:\" === yr() || \"https:\" === yr();\n    }\n\n    function yr() {\n      return l.location && l.location.protocol || null;\n    }\n\n    function mr(t) {\n      return !zn(t = t || hr()) && sr(t) != or;\n    }\n\n    function gr(t) {\n      return void 0 === t ? null : Vn(t);\n    }\n\n    function vr(t) {\n      var e,\n          n = {};\n\n      for (e in t) t.hasOwnProperty(e) && null !== t[e] && void 0 !== t[e] && (n[e] = t[e]);\n\n      return n;\n    }\n\n    function br(t) {\n      if (null !== t) return JSON.parse(t);\n    }\n\n    function wr(t) {\n      return t || Math.floor(1e9 * Math.random()).toString();\n    }\n\n    function _r(t) {\n      return \"Safari\" != sr(t = t || hr()) && !t.toLowerCase().match(/iphone|ipad|ipod/);\n    }\n\n    function Er() {\n      var t = l.___jsl;\n      if (t && t.H) for (var e in t.H) if (t.H[e].r = t.H[e].r || [], t.H[e].L = t.H[e].L || [], t.H[e].r = t.H[e].L.concat(), t.CP) for (var n = 0; n < t.CP.length; n++) t.CP[n] = null;\n    }\n\n    function Tr(t, e) {\n      if (e < t) throw Error(\"Short delay should be less than long delay!\");\n      this.a = t, this.c = e, t = hr(), e = rr(), this.b = zn(t) || \"ReactNative\" === e;\n    }\n\n    function Sr() {\n      var t = l.document;\n      return !t || void 0 === t.visibilityState || \"visible\" == t.visibilityState;\n    }\n\n    function Ir(t) {\n      try {\n        var e = new Date(parseInt(t, 10));\n        if (!isNaN(e.getTime()) && !/[^0-9]/.test(t)) return e.toUTCString();\n      } catch (t) {}\n\n      return null;\n    }\n\n    function Cr() {\n      return !(!lr(\"fireauth.oauthhelper\", l) && !lr(\"fireauth.iframe\", l));\n    }\n\n    Tr.prototype.get = function () {\n      var t = l.navigator;\n      return !t || \"boolean\" != typeof t.onLine || !dr() && \"chrome-extension:\" !== yr() && void 0 === t.connection || t.onLine ? this.b ? this.c : this.a : Math.min(5e3, this.a);\n    };\n\n    var Nr,\n        Ar = {};\n\n    function kr(t) {\n      Ar[t] || (Ar[t] = !0, \"undefined\" != typeof console && \"function\" == typeof console.warn && console.warn(t));\n    }\n\n    try {\n      var Dr = {};\n      Object.defineProperty(Dr, \"abcd\", {\n        configurable: !0,\n        enumerable: !0,\n        value: 1\n      }), Object.defineProperty(Dr, \"abcd\", {\n        configurable: !0,\n        enumerable: !0,\n        value: 2\n      }), Nr = 2 == Dr.abcd;\n    } catch (t) {\n      Nr = !1;\n    }\n\n    function Rr(t, e, n) {\n      Nr ? Object.defineProperty(t, e, {\n        configurable: !0,\n        enumerable: !0,\n        value: n\n      }) : t[e] = n;\n    }\n\n    function Or(t, e) {\n      if (e) for (var n in e) e.hasOwnProperty(n) && Rr(t, n, e[n]);\n    }\n\n    function Pr(t) {\n      var e = {};\n      return Or(e, t), e;\n    }\n\n    function Mr(t) {\n      var e = t;\n      if (\"object\" == typeof t && null != t) for (var n in e = \"length\" in t ? [] : {}, t) Rr(e, n, Mr(t[n]));\n      return e;\n    }\n\n    function xr(t) {\n      var e = {},\n          n = t[Fr],\n          r = t[Ur];\n      if (!(t = t[qr]) || t != Lr && !n) throw Error(\"Invalid provider user info!\");\n      e[Br] = r || null, e[Vr] = n || null, Rr(this, Wr, t), Rr(this, jr, Mr(e));\n    }\n\n    var Lr = \"EMAIL_SIGNIN\",\n        Fr = \"email\",\n        Ur = \"newEmail\",\n        qr = \"requestType\",\n        Vr = \"email\",\n        Br = \"fromEmail\",\n        jr = \"data\",\n        Wr = \"operation\";\n\n    function Kr(t, e) {\n      this.code = Hr + t, this.message = e || Gr[t] || \"\";\n    }\n\n    function Qr(t) {\n      var e = t && t.code;\n      return e ? new Kr(e.substring(Hr.length), t.message) : null;\n    }\n\n    S(Kr, Error), Kr.prototype.w = function () {\n      return {\n        code: this.code,\n        message: this.message\n      };\n    }, Kr.prototype.toJSON = function () {\n      return this.w();\n    };\n    var Hr = \"auth/\",\n        Gr = {\n      \"admin-restricted-operation\": \"This operation is restricted to administrators only.\",\n      \"argument-error\": \"\",\n      \"app-not-authorized\": \"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.\",\n      \"app-not-installed\": \"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.\",\n      \"captcha-check-failed\": \"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.\",\n      \"code-expired\": \"The SMS code has expired. Please re-send the verification code to try again.\",\n      \"cordova-not-ready\": \"Cordova framework is not ready.\",\n      \"cors-unsupported\": \"This browser is not supported.\",\n      \"credential-already-in-use\": \"This credential is already associated with a different user account.\",\n      \"custom-token-mismatch\": \"The custom token corresponds to a different audience.\",\n      \"requires-recent-login\": \"This operation is sensitive and requires recent authentication. Log in again before retrying this request.\",\n      \"dynamic-link-not-activated\": \"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.\",\n      \"email-already-in-use\": \"The email address is already in use by another account.\",\n      \"expired-action-code\": \"The action code has expired. \",\n      \"cancelled-popup-request\": \"This operation has been cancelled due to another conflicting popup being opened.\",\n      \"internal-error\": \"An internal error has occurred.\",\n      \"invalid-app-credential\": \"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.\",\n      \"invalid-app-id\": \"The mobile app identifier is not registed for the current project.\",\n      \"invalid-user-token\": \"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.\",\n      \"invalid-auth-event\": \"An internal error has occurred.\",\n      \"invalid-verification-code\": \"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.\",\n      \"invalid-continue-uri\": \"The continue URL provided in the request is invalid.\",\n      \"invalid-cordova-configuration\": \"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.\",\n      \"invalid-custom-token\": \"The custom token format is incorrect. Please check the documentation.\",\n      \"invalid-dynamic-link-domain\": \"The provided dynamic link domain is not configured or authorized for the current project.\",\n      \"invalid-email\": \"The email address is badly formatted.\",\n      \"invalid-api-key\": \"Your API key is invalid, please check you have copied it correctly.\",\n      \"invalid-cert-hash\": \"The SHA-1 certificate hash provided is invalid.\",\n      \"invalid-credential\": \"The supplied auth credential is malformed or has expired.\",\n      \"invalid-message-payload\": \"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.\",\n      \"invalid-oauth-provider\": \"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.\",\n      \"invalid-oauth-client-id\": \"The OAuth client ID provided is either invalid or does not match the specified API key.\",\n      \"unauthorized-domain\": \"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.\",\n      \"invalid-action-code\": \"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.\",\n      \"wrong-password\": \"The password is invalid or the user does not have a password.\",\n      \"invalid-persistence-type\": \"The specified persistence type is invalid. It can only be local, session or none.\",\n      \"invalid-phone-number\": \"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].\",\n      \"invalid-provider-id\": \"The specified provider ID is invalid.\",\n      \"invalid-recipient-email\": \"The email corresponding to this action failed to send as the provided recipient email address is invalid.\",\n      \"invalid-sender\": \"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.\",\n      \"invalid-verification-id\": \"The verification ID used to create the phone auth credential is invalid.\",\n      \"missing-android-pkg-name\": \"An Android Package Name must be provided if the Android App is required to be installed.\",\n      \"auth-domain-config-required\": \"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.\",\n      \"missing-app-credential\": \"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.\",\n      \"missing-verification-code\": \"The phone auth credential was created with an empty SMS verification code.\",\n      \"missing-continue-uri\": \"A continue URL must be provided in the request.\",\n      \"missing-iframe-start\": \"An internal error has occurred.\",\n      \"missing-ios-bundle-id\": \"An iOS Bundle ID must be provided if an App Store ID is provided.\",\n      \"missing-or-invalid-nonce\": \"The OIDC ID token requires a valid unhashed nonce.\",\n      \"missing-phone-number\": \"To send verification codes, provide a phone number for the recipient.\",\n      \"missing-verification-id\": \"The phone auth credential was created with an empty verification ID.\",\n      \"app-deleted\": \"This instance of FirebaseApp has been deleted.\",\n      \"account-exists-with-different-credential\": \"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.\",\n      \"network-request-failed\": \"A network error (such as timeout, interrupted connection or unreachable host) has occurred.\",\n      \"no-auth-event\": \"An internal error has occurred.\",\n      \"no-such-provider\": \"User was not linked to an account with the given provider.\",\n      \"null-user\": \"A null user object was provided as the argument for an operation which requires a non-null user object.\",\n      \"operation-not-allowed\": \"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.\",\n      \"operation-not-supported-in-this-environment\": 'This operation is not supported in the environment this application is running on. \"location.protocol\" must be http, https or chrome-extension and web storage must be enabled.',\n      \"popup-blocked\": \"Unable to establish a connection with the popup. It may have been blocked by the browser.\",\n      \"popup-closed-by-user\": \"The popup has been closed by the user before finalizing the operation.\",\n      \"provider-already-linked\": \"User can only be linked to one identity for the given provider.\",\n      \"quota-exceeded\": \"The project's quota for this operation has been exceeded.\",\n      \"redirect-cancelled-by-user\": \"The redirect operation has been cancelled by the user before finalizing.\",\n      \"redirect-operation-pending\": \"A redirect sign-in operation is already pending.\",\n      \"rejected-credential\": \"The request contains malformed or mismatching credentials.\",\n      timeout: \"The operation has timed out.\",\n      \"user-token-expired\": \"The user's credential is no longer valid. The user must sign in again.\",\n      \"too-many-requests\": \"We have blocked all requests from this device due to unusual activity. Try again later.\",\n      \"unauthorized-continue-uri\": \"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.\",\n      \"unsupported-persistence-type\": \"The current environment does not support the specified persistence type.\",\n      \"user-cancelled\": \"User did not grant your application the permissions it requested.\",\n      \"user-not-found\": \"There is no user record corresponding to this identifier. The user may have been deleted.\",\n      \"user-disabled\": \"The user account has been disabled by an administrator.\",\n      \"user-mismatch\": \"The supplied credentials do not correspond to the previously signed in user.\",\n      \"user-signed-out\": \"\",\n      \"weak-password\": \"The password must be 6 characters long or more.\",\n      \"web-storage-unsupported\": \"This browser is not supported or 3rd party cookies and data may be disabled.\"\n    };\n\n    function zr(t) {\n      var e = t[Zr];\n      if (void 0 === e) throw new Kr(\"missing-continue-uri\");\n      if (\"string\" != typeof e || \"string\" == typeof e && !e.length) throw new Kr(\"invalid-continue-uri\");\n      this.h = e, this.b = this.a = null, this.g = !1;\n      var n = t[Yr];\n\n      if (n && \"object\" == typeof n) {\n        e = n[ni];\n        var r = n[ti];\n\n        if (n = n[ei], \"string\" == typeof e && e.length) {\n          if (this.a = e, void 0 !== r && \"boolean\" != typeof r) throw new Kr(\"argument-error\", ti + \" property must be a boolean when specified.\");\n          if (this.g = !!r, void 0 !== n && (\"string\" != typeof n || \"string\" == typeof n && !n.length)) throw new Kr(\"argument-error\", ei + \" property must be a non empty string when specified.\");\n          this.b = n || null;\n        } else {\n          if (void 0 !== e) throw new Kr(\"argument-error\", ni + \" property must be a non empty string when specified.\");\n          if (void 0 !== r || void 0 !== n) throw new Kr(\"missing-android-pkg-name\");\n        }\n      } else if (void 0 !== n) throw new Kr(\"argument-error\", Yr + \" property must be a non null object when specified.\");\n\n      if (this.f = null, (e = t[$r]) && \"object\" == typeof e) {\n        if (\"string\" == typeof (e = e[ri]) && e.length) this.f = e;else if (void 0 !== e) throw new Kr(\"argument-error\", ri + \" property must be a non empty string when specified.\");\n      } else if (void 0 !== e) throw new Kr(\"argument-error\", $r + \" property must be a non null object when specified.\");\n\n      if (void 0 !== (e = t[Jr]) && \"boolean\" != typeof e) throw new Kr(\"argument-error\", Jr + \" property must be a boolean when specified.\");\n      if (this.c = !!e, void 0 !== (t = t[Xr]) && (\"string\" != typeof t || \"string\" == typeof t && !t.length)) throw new Kr(\"argument-error\", Xr + \" property must be a non empty string when specified.\");\n      this.i = t || null;\n    }\n\n    var Yr = \"android\",\n        Xr = \"dynamicLinkDomain\",\n        Jr = \"handleCodeInApp\",\n        $r = \"iOS\",\n        Zr = \"url\",\n        ti = \"installApp\",\n        ei = \"minimumVersion\",\n        ni = \"packageName\",\n        ri = \"bundleId\";\n\n    function ii(t) {\n      var e = {};\n\n      for (var n in e.continueUrl = t.h, e.canHandleCodeInApp = t.c, (e.androidPackageName = t.a) && (e.androidMinimumVersion = t.b, e.androidInstallApp = t.g), e.iOSBundleId = t.f, e.dynamicLinkDomain = t.i, e) null === e[n] && delete e[n];\n\n      return e;\n    }\n\n    var oi = null,\n        ai = null;\n\n    function si(t) {\n      var e = \"\";\n      return function (r, t) {\n        function e(t) {\n          for (; i < r.length;) {\n            var e = r.charAt(i++),\n                n = ai[e];\n            if (null != n) return n;\n            if (!/^[\\s\\xa0]*$/.test(e)) throw Error(\"Unknown base64 encoding at char: \" + e);\n          }\n\n          return t;\n        }\n\n        !function () {\n          if (!oi) {\n            oi = {}, ai = {};\n\n            for (var t = 0; t < 65; t++) oi[t] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".charAt(t), 62 <= (ai[oi[t]] = t) && (ai[\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.\".charAt(t)] = t);\n          }\n        }();\n\n        for (var i = 0;;) {\n          var n = e(-1),\n              o = e(0),\n              a = e(64),\n              s = e(64);\n          if (64 === s && -1 === n) break;\n          t(n << 2 | o >> 4), 64 != a && (t(o << 4 & 240 | a >> 2), 64 != s && t(a << 6 & 192 | s));\n        }\n      }(t, function (t) {\n        e += String.fromCharCode(t);\n      }), e;\n    }\n\n    function ui(t) {\n      this.c = t.sub, this.a = t.provider_id || t.firebase && t.firebase.sign_in_provider || null, this.b = !!t.is_anonymous || \"anonymous\" == this.a;\n    }\n\n    function ci(t) {\n      return (t = hi(t)) && t.sub && t.iss && t.aud && t.exp ? new ui(t) : null;\n    }\n\n    function hi(t) {\n      if (!t) return null;\n      if (3 != (t = t.split(\".\")).length) return null;\n\n      for (var e = (4 - (t = t[1]).length % 4) % 4, n = 0; n < e; n++) t += \".\";\n\n      try {\n        return JSON.parse(si(t));\n      } catch (t) {}\n\n      return null;\n    }\n\n    ui.prototype.f = function () {\n      return this.b;\n    };\n\n    var li,\n        fi = {\n      Yc: {\n        ab: \"https://www.googleapis.com/identitytoolkit/v3/relyingparty/\",\n        ib: \"https://securetoken.googleapis.com/v1/token\",\n        id: \"p\"\n      },\n      $c: {\n        ab: \"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/\",\n        ib: \"https://staging-securetoken.sandbox.googleapis.com/v1/token\",\n        id: \"s\"\n      },\n      ad: {\n        ab: \"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/\",\n        ib: \"https://test-securetoken.sandbox.googleapis.com/v1/token\",\n        id: \"t\"\n      }\n    };\n\n    function pi(t) {\n      for (var e in fi) if (fi[e].id === t) return {\n        firebaseEndpoint: (t = fi[e]).ab,\n        secureTokenEndpoint: t.ib\n      };\n\n      return null;\n    }\n\n    li = pi(\"__EID__\") ? \"__EID__\" : void 0;\n    var di = \"oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version\".split(\" \"),\n        yi = [\"client_id\", \"response_type\", \"scope\", \"redirect_uri\", \"state\"],\n        mi = {\n      Tc: {\n        Oa: \"locale\",\n        Ba: 500,\n        Aa: 600,\n        Pa: \"facebook.com\",\n        hb: yi\n      },\n      Vc: {\n        Oa: null,\n        Ba: 500,\n        Aa: 620,\n        Pa: \"github.com\",\n        hb: yi\n      },\n      Wc: {\n        Oa: \"hl\",\n        Ba: 515,\n        Aa: 680,\n        Pa: \"google.com\",\n        hb: yi\n      },\n      bd: {\n        Oa: \"lang\",\n        Ba: 485,\n        Aa: 705,\n        Pa: \"twitter.com\",\n        hb: di\n      }\n    };\n\n    function gi(t) {\n      for (var e in mi) if (mi[e].Pa == t) return mi[e];\n\n      return null;\n    }\n\n    function vi(t) {\n      var e = {};\n      e[\"facebook.com\"] = Ti, e[\"google.com\"] = Ii, e[\"github.com\"] = Si, e[\"twitter.com\"] = Ci;\n      var n = t && t[wi];\n\n      try {\n        if (n) return e[n] ? new e[n](t) : new Ei(t);\n        if (void 0 !== t[bi]) return new _i(t);\n      } catch (t) {}\n\n      return null;\n    }\n\n    var bi = \"idToken\",\n        wi = \"providerId\";\n\n    function _i(t) {\n      var e = t[wi];\n\n      if (!e && t[bi]) {\n        var n = ci(t[bi]);\n        n && n.a && (e = n.a);\n      }\n\n      if (!e) throw Error(\"Invalid additional user info!\");\n      \"anonymous\" != e && \"custom\" != e || (e = null), n = !1, void 0 !== t.isNewUser ? n = !!t.isNewUser : \"identitytoolkit#SignupNewUserResponse\" === t.kind && (n = !0), Rr(this, \"providerId\", e), Rr(this, \"isNewUser\", n);\n    }\n\n    function Ei(t) {\n      _i.call(this, t), Rr(this, \"profile\", Mr((t = br(t.rawUserInfo || \"{}\")) || {}));\n    }\n\n    function Ti(t) {\n      if (Ei.call(this, t), \"facebook.com\" != this.providerId) throw Error(\"Invalid provider ID!\");\n    }\n\n    function Si(t) {\n      if (Ei.call(this, t), \"github.com\" != this.providerId) throw Error(\"Invalid provider ID!\");\n      Rr(this, \"username\", this.profile && this.profile.login || null);\n    }\n\n    function Ii(t) {\n      if (Ei.call(this, t), \"google.com\" != this.providerId) throw Error(\"Invalid provider ID!\");\n    }\n\n    function Ci(t) {\n      if (Ei.call(this, t), \"twitter.com\" != this.providerId) throw Error(\"Invalid provider ID!\");\n      Rr(this, \"username\", t.screenName || null);\n    }\n\n    function Ni(t) {\n      this.a = Xe(t);\n    }\n\n    function Ai(t) {\n      var e = Xe(t),\n          n = Ye(e, \"link\"),\n          r = Ye(Xe(n), \"link\");\n      return Ye(Xe(e = Ye(e, \"deep_link_id\")), \"link\") || e || r || n || t;\n    }\n\n    function ki() {}\n\n    function Di(t, n) {\n      return t.then(function (t) {\n        if (t[ba]) {\n          var e = ci(t[ba]);\n          if (!e || n != e.c) throw new Kr(\"user-mismatch\");\n          return t;\n        }\n\n        throw new Kr(\"user-mismatch\");\n      }).s(function (t) {\n        throw t && t.code && t.code == Hr + \"user-not-found\" ? new Kr(\"user-mismatch\") : t;\n      });\n    }\n\n    function Ri(t, e) {\n      if (!e) throw new Kr(\"internal-error\", \"failed to construct a credential\");\n      this.a = e, Rr(this, \"providerId\", t), Rr(this, \"signInMethod\", t);\n    }\n\n    function Oi(t) {\n      return {\n        pendingToken: t.a,\n        requestUri: \"http://localhost\"\n      };\n    }\n\n    function Pi(t) {\n      if (t && t.providerId && t.signInMethod && 0 == t.providerId.indexOf(\"saml.\") && t.pendingToken) try {\n        return new Ri(t.providerId, t.pendingToken);\n      } catch (t) {}\n      return null;\n    }\n\n    function Mi(t, e, n) {\n      if (this.a = null, e.idToken || e.accessToken) e.idToken && Rr(this, \"idToken\", e.idToken), e.accessToken && Rr(this, \"accessToken\", e.accessToken), e.nonce && !e.pendingToken && Rr(this, \"nonce\", e.nonce), e.pendingToken && (this.a = e.pendingToken);else {\n        if (!e.oauthToken || !e.oauthTokenSecret) throw new Kr(\"internal-error\", \"failed to construct a credential\");\n        Rr(this, \"accessToken\", e.oauthToken), Rr(this, \"secret\", e.oauthTokenSecret);\n      }\n      Rr(this, \"providerId\", t), Rr(this, \"signInMethod\", n);\n    }\n\n    function xi(t) {\n      var e = {};\n      return t.idToken && (e.id_token = t.idToken), t.accessToken && (e.access_token = t.accessToken), t.secret && (e.oauth_token_secret = t.secret), e.providerId = t.providerId, t.nonce && !t.a && (e.nonce = t.nonce), e = {\n        postBody: cn(e).toString(),\n        requestUri: \"http://localhost\"\n      }, t.a && (delete e.postBody, e.pendingToken = t.a), e;\n    }\n\n    function Li(t) {\n      if (t && t.providerId && t.signInMethod) {\n        var e = {\n          idToken: t.oauthIdToken,\n          accessToken: t.oauthTokenSecret ? null : t.oauthAccessToken,\n          oauthTokenSecret: t.oauthTokenSecret,\n          oauthToken: t.oauthTokenSecret && t.oauthAccessToken,\n          nonce: t.nonce,\n          pendingToken: t.pendingToken\n        };\n\n        try {\n          return new Mi(t.providerId, e, t.signInMethod);\n        } catch (t) {}\n      }\n\n      return null;\n    }\n\n    function Fi(t, e) {\n      this.Dc = e || [], Or(this, {\n        providerId: t,\n        isOAuthProvider: !0\n      }), this.zb = {}, this.cb = (gi(t) || {}).Oa || null, this.$a = null;\n    }\n\n    function Ui(t) {\n      if (\"string\" != typeof t || 0 != t.indexOf(\"saml.\")) throw new Kr(\"argument-error\", 'SAML provider IDs must be prefixed with \"saml.\"');\n      Fi.call(this, t, []);\n    }\n\n    function qi(t) {\n      Fi.call(this, t, yi), this.a = [];\n    }\n\n    function Vi() {\n      qi.call(this, \"facebook.com\");\n    }\n\n    function Bi(t) {\n      if (!t) throw new Kr(\"argument-error\", \"credential failed: expected 1 argument (the OAuth access token).\");\n      var e = t;\n      return v(t) && (e = t.accessToken), new Vi().credential({\n        accessToken: e\n      });\n    }\n\n    function ji() {\n      qi.call(this, \"github.com\");\n    }\n\n    function Wi(t) {\n      if (!t) throw new Kr(\"argument-error\", \"credential failed: expected 1 argument (the OAuth access token).\");\n      var e = t;\n      return v(t) && (e = t.accessToken), new ji().credential({\n        accessToken: e\n      });\n    }\n\n    function Ki() {\n      qi.call(this, \"google.com\"), this.ua(\"profile\");\n    }\n\n    function Qi(t, e) {\n      var n = t;\n      return v(t) && (n = t.idToken, e = t.accessToken), new Ki().credential({\n        idToken: n,\n        accessToken: e\n      });\n    }\n\n    function Hi() {\n      Fi.call(this, \"twitter.com\", di);\n    }\n\n    function Gi(t, e) {\n      var n = t;\n      if (v(n) || (n = {\n        oauthToken: t,\n        oauthTokenSecret: e\n      }), !n.oauthToken || !n.oauthTokenSecret) throw new Kr(\"argument-error\", \"credential failed: expected 2 arguments (the OAuth access token and secret).\");\n      return new Mi(\"twitter.com\", n, \"twitter.com\");\n    }\n\n    function zi(t, e, n) {\n      this.a = t, this.c = e, Rr(this, \"providerId\", \"password\"), Rr(this, \"signInMethod\", n === Xi.EMAIL_LINK_SIGN_IN_METHOD ? Xi.EMAIL_LINK_SIGN_IN_METHOD : Xi.EMAIL_PASSWORD_SIGN_IN_METHOD);\n    }\n\n    function Yi(t) {\n      return t && t.email && t.password ? new zi(t.email, t.password, t.signInMethod) : null;\n    }\n\n    function Xi() {\n      Or(this, {\n        providerId: \"password\",\n        isOAuthProvider: !1\n      });\n    }\n\n    function Ji(t, e) {\n      if (!(e = $i(e))) throw new Kr(\"argument-error\", \"Invalid email link!\");\n      return new zi(t, e, Xi.EMAIL_LINK_SIGN_IN_METHOD);\n    }\n\n    function $i(t) {\n      var e = Ye((t = new Ni(t = Ai(t))).a, \"oobCode\") || null;\n      return \"signIn\" === (Ye(t.a, \"mode\") || null) && e ? e : null;\n    }\n\n    function Zi(t) {\n      if (!(t.Ta && t.Sa || t.Fa && t.$)) throw new Kr(\"internal-error\");\n      this.a = t, Rr(this, \"providerId\", \"phone\"), Rr(this, \"signInMethod\", \"phone\");\n    }\n\n    function to(e) {\n      if (e && \"phone\" === e.providerId && (e.verificationId && e.verificationCode || e.temporaryProof && e.phoneNumber)) {\n        var n = {};\n        return x([\"verificationId\", \"verificationCode\", \"temporaryProof\", \"phoneNumber\"], function (t) {\n          e[t] && (n[t] = e[t]);\n        }), new Zi(n);\n      }\n\n      return null;\n    }\n\n    function eo(t) {\n      return t.a.Fa && t.a.$ ? {\n        temporaryProof: t.a.Fa,\n        phoneNumber: t.a.$\n      } : {\n        sessionInfo: t.a.Ta,\n        code: t.a.Sa\n      };\n    }\n\n    function no(t) {\n      try {\n        this.a = t || Hh.auth();\n      } catch (t) {\n        throw new Kr(\"argument-error\", \"Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().\");\n      }\n\n      Or(this, {\n        providerId: \"phone\",\n        isOAuthProvider: !1\n      });\n    }\n\n    function ro(t, e) {\n      if (!t) throw new Kr(\"missing-verification-id\");\n      if (!e) throw new Kr(\"missing-verification-code\");\n      return new Zi({\n        Ta: t,\n        Sa: e\n      });\n    }\n\n    function io(t) {\n      if (t.temporaryProof && t.phoneNumber) return new Zi({\n        Fa: t.temporaryProof,\n        $: t.phoneNumber\n      });\n      var e = t && t.providerId;\n      if (!e || \"password\" === e) return null;\n      var n = t && t.oauthAccessToken,\n          r = t && t.oauthTokenSecret,\n          i = t && t.nonce,\n          o = t && t.oauthIdToken,\n          a = t && t.pendingToken;\n\n      try {\n        switch (e) {\n          case \"google.com\":\n            return Qi(o, n);\n\n          case \"facebook.com\":\n            return Bi(n);\n\n          case \"github.com\":\n            return Wi(n);\n\n          case \"twitter.com\":\n            return Gi(n, r);\n\n          default:\n            return n || r || o || a ? a ? 0 == e.indexOf(\"saml.\") ? new Ri(e, a) : new Mi(e, {\n              pendingToken: a,\n              idToken: t.oauthIdToken,\n              accessToken: t.oauthAccessToken\n            }, e) : new qi(e).credential({\n              idToken: o,\n              accessToken: n,\n              rawNonce: i\n            }) : null;\n        }\n      } catch (t) {\n        return null;\n      }\n    }\n\n    function oo(t) {\n      if (!t.isOAuthProvider) throw new Kr(\"invalid-oauth-provider\");\n    }\n\n    function ao(t, e, n, r, i, o) {\n      if (this.c = t, this.b = e || null, this.g = n || null, this.f = r || null, this.h = o || null, this.a = i || null, !this.g && !this.a) throw new Kr(\"invalid-auth-event\");\n      if (this.g && this.a) throw new Kr(\"invalid-auth-event\");\n      if (this.g && !this.f) throw new Kr(\"invalid-auth-event\");\n    }\n\n    function so(t) {\n      return (t = t || {}).type ? new ao(t.type, t.eventId, t.urlResponse, t.sessionId, t.error && Qr(t.error), t.postBody) : null;\n    }\n\n    function uo() {\n      this.b = null, this.a = [];\n    }\n\n    S(Ei, _i), S(Ti, Ei), S(Si, Ei), S(Ii, Ei), S(Ci, Ei), Ri.prototype.la = function (t) {\n      return Fa(t, Oi(this));\n    }, Ri.prototype.b = function (t, e) {\n      var n = Oi(this);\n      return n.idToken = e, Ua(t, n);\n    }, Ri.prototype.f = function (t, e) {\n      return Di(qa(t, Oi(this)), e);\n    }, Ri.prototype.w = function () {\n      return {\n        providerId: this.providerId,\n        signInMethod: this.signInMethod,\n        pendingToken: this.a\n      };\n    }, Mi.prototype.la = function (t) {\n      return Fa(t, xi(this));\n    }, Mi.prototype.b = function (t, e) {\n      var n = xi(this);\n      return n.idToken = e, Ua(t, n);\n    }, Mi.prototype.f = function (t, e) {\n      return Di(qa(t, xi(this)), e);\n    }, Mi.prototype.w = function () {\n      var t = {\n        providerId: this.providerId,\n        signInMethod: this.signInMethod\n      };\n      return this.idToken && (t.oauthIdToken = this.idToken), this.accessToken && (t.oauthAccessToken = this.accessToken), this.secret && (t.oauthTokenSecret = this.secret), this.nonce && (t.nonce = this.nonce), this.a && (t.pendingToken = this.a), t;\n    }, Fi.prototype.Da = function (t) {\n      return this.zb = ot(t), this;\n    }, S(Ui, Fi), S(qi, Fi), qi.prototype.ua = function (t) {\n      return U(this.a, t) || this.a.push(t), this;\n    }, qi.prototype.Fb = function () {\n      return j(this.a);\n    }, qi.prototype.credential = function (t, e) {\n      var n;\n      if (!(n = v(t) ? {\n        idToken: t.idToken || null,\n        accessToken: t.accessToken || null,\n        nonce: t.rawNonce || null\n      } : {\n        idToken: t || null,\n        accessToken: e || null\n      }).idToken && !n.accessToken) throw new Kr(\"argument-error\", \"credential failed: must provide the ID token and/or the access token.\");\n      return new Mi(this.providerId, n, this.providerId);\n    }, S(Vi, qi), Rr(Vi, \"PROVIDER_ID\", \"facebook.com\"), Rr(Vi, \"FACEBOOK_SIGN_IN_METHOD\", \"facebook.com\"), S(ji, qi), Rr(ji, \"PROVIDER_ID\", \"github.com\"), Rr(ji, \"GITHUB_SIGN_IN_METHOD\", \"github.com\"), S(Ki, qi), Rr(Ki, \"PROVIDER_ID\", \"google.com\"), Rr(Ki, \"GOOGLE_SIGN_IN_METHOD\", \"google.com\"), S(Hi, Fi), Rr(Hi, \"PROVIDER_ID\", \"twitter.com\"), Rr(Hi, \"TWITTER_SIGN_IN_METHOD\", \"twitter.com\"), zi.prototype.la = function (t) {\n      return this.signInMethod == Xi.EMAIL_LINK_SIGN_IN_METHOD ? ds(t, Ga, {\n        email: this.a,\n        oobCode: this.c\n      }) : ds(t, hs, {\n        email: this.a,\n        password: this.c\n      });\n    }, zi.prototype.b = function (t, e) {\n      return this.signInMethod == Xi.EMAIL_LINK_SIGN_IN_METHOD ? ds(t, za, {\n        idToken: e,\n        email: this.a,\n        oobCode: this.c\n      }) : ds(t, is, {\n        idToken: e,\n        email: this.a,\n        password: this.c\n      });\n    }, zi.prototype.f = function (t, e) {\n      return Di(this.la(t), e);\n    }, zi.prototype.w = function () {\n      return {\n        email: this.a,\n        password: this.c,\n        signInMethod: this.signInMethod\n      };\n    }, Or(Xi, {\n      PROVIDER_ID: \"password\"\n    }), Or(Xi, {\n      EMAIL_LINK_SIGN_IN_METHOD: \"emailLink\"\n    }), Or(Xi, {\n      EMAIL_PASSWORD_SIGN_IN_METHOD: \"password\"\n    }), Zi.prototype.la = function (t) {\n      return t.Ua(eo(this));\n    }, Zi.prototype.b = function (t, e) {\n      var n = eo(this);\n      return n.idToken = e, ds(t, fs, n);\n    }, Zi.prototype.f = function (t, e) {\n      var n = eo(this);\n      return n.operation = \"REAUTH\", Di(t = ds(t, ps, n), e);\n    }, Zi.prototype.w = function () {\n      var t = {\n        providerId: \"phone\"\n      };\n      return this.a.Ta && (t.verificationId = this.a.Ta), this.a.Sa && (t.verificationCode = this.a.Sa), this.a.Fa && (t.temporaryProof = this.a.Fa), this.a.$ && (t.phoneNumber = this.a.$), t;\n    }, no.prototype.Ua = function (r, i) {\n      var o = this.a.c;\n      return St(i.verify()).then(function (t) {\n        if (!h(t)) throw new Kr(\"argument-error\", \"An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.\");\n\n        switch (i.type) {\n          case \"recaptcha\":\n            return (e = o, n = {\n              phoneNumber: r,\n              recaptchaToken: t\n            }, ds(e, ns, n)).then(function (t) {\n              return \"function\" == typeof i.reset && i.reset(), t;\n            }, function (t) {\n              throw \"function\" == typeof i.reset && i.reset(), t;\n            });\n\n          default:\n            throw new Kr(\"argument-error\", 'Only firebase.auth.ApplicationVerifiers with type=\"recaptcha\" are currently supported.');\n        }\n\n        var e, n;\n      });\n    }, Or(no, {\n      PROVIDER_ID: \"phone\"\n    }), Or(no, {\n      PHONE_SIGN_IN_METHOD: \"phone\"\n    }), ao.prototype.getUid = function () {\n      var t = [];\n      return t.push(this.c), this.b && t.push(this.b), this.f && t.push(this.f), this.i && t.push(this.i), t.join(\"-\");\n    }, ao.prototype.w = function () {\n      return {\n        type: this.c,\n        eventId: this.b,\n        urlResponse: this.g,\n        sessionId: this.f,\n        postBody: this.h,\n        error: this.a && this.a.w()\n      };\n    };\n    var co,\n        ho = null;\n\n    function lo(t) {\n      var e = \"unauthorized-domain\",\n          n = void 0,\n          r = Xe(t);\n      t = r.b, \"chrome-extension\" == (r = r.f) ? n = ht(\"This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.\", t) : \"http\" == r || \"https\" == r ? n = ht(\"This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.\", t) : e = \"operation-not-supported-in-this-environment\", Kr.call(this, e, n);\n    }\n\n    function fo(t, e, n) {\n      Kr.call(this, t, n), (t = e || {}).Ab && Rr(this, \"email\", t.Ab), t.$ && Rr(this, \"phoneNumber\", t.$), t.credential && Rr(this, \"credential\", t.credential);\n    }\n\n    function po(t) {\n      if (t.code) {\n        var e = t.code || \"\";\n        0 == e.indexOf(Hr) && (e = e.substring(Hr.length));\n        var n = {\n          credential: io(t)\n        };\n        if (t.email) n.Ab = t.email;else if (t.phoneNumber) n.$ = t.phoneNumber;else if (!n.credential) return new Kr(e, t.message || void 0);\n        return new fo(e, n, t.message);\n      }\n\n      return null;\n    }\n\n    function yo() {}\n\n    function mo(t) {\n      return t.c || (t.c = t.b());\n    }\n\n    function go() {}\n\n    function vo(t) {\n      if (t.f || \"undefined\" != typeof XMLHttpRequest || \"undefined\" == typeof ActiveXObject) return t.f;\n\n      for (var e = [\"MSXML2.XMLHTTP.6.0\", \"MSXML2.XMLHTTP.3.0\", \"MSXML2.XMLHTTP\", \"Microsoft.XMLHTTP\"], n = 0; n < e.length; n++) {\n        var r = e[n];\n\n        try {\n          return new ActiveXObject(r), t.f = r;\n        } catch (t) {}\n      }\n\n      throw Error(\"Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed\");\n    }\n\n    function bo() {}\n\n    function wo() {\n      this.a = new XDomainRequest(), this.readyState = 0, this.onreadystatechange = null, this.responseType = this.responseText = this.response = \"\", this.status = -1, this.statusText = \"\", this.a.onload = _(this.dc, this), this.a.onerror = _(this.Gb, this), this.a.onprogress = _(this.ec, this), this.a.ontimeout = _(this.ic, this);\n    }\n\n    function _o(t, e) {\n      t.readyState = e, t.onreadystatechange && t.onreadystatechange();\n    }\n\n    function Eo(t, e, n) {\n      this.reset(t, e, n, void 0, void 0);\n    }\n\n    function To(t) {\n      this.f = t, this.b = this.c = this.a = null;\n    }\n\n    function So(t, e) {\n      this.name = t, this.value = e;\n    }\n\n    uo.prototype.subscribe = function (t) {\n      var n = this;\n      this.a.push(t), this.b || (this.b = function (t) {\n        for (var e = 0; e < n.a.length; e++) n.a[e](t);\n      }, \"function\" == typeof (t = lr(\"universalLinks.subscribe\", l)) && t(null, this.b));\n    }, uo.prototype.unsubscribe = function (e) {\n      V(this.a, function (t) {\n        return t == e;\n      });\n    }, S(lo, Kr), S(fo, Kr), fo.prototype.w = function () {\n      var t = {\n        code: this.code,\n        message: this.message\n      };\n      this.email && (t.email = this.email), this.phoneNumber && (t.phoneNumber = this.phoneNumber);\n      var e = this.credential && this.credential.w();\n      return e && ct(t, e), t;\n    }, fo.prototype.toJSON = function () {\n      return this.w();\n    }, yo.prototype.c = null, S(go, yo), go.prototype.a = function () {\n      var t = vo(this);\n      return t ? new ActiveXObject(t) : new XMLHttpRequest();\n    }, go.prototype.b = function () {\n      var t = {};\n      return vo(this) && (t[0] = !0, t[1] = !0), t;\n    }, co = new go(), S(bo, yo), bo.prototype.a = function () {\n      var t = new XMLHttpRequest();\n      if (\"withCredentials\" in t) return t;\n      if (\"undefined\" != typeof XDomainRequest) return new wo();\n      throw Error(\"Unsupported browser\");\n    }, bo.prototype.b = function () {\n      return {};\n    }, (t = wo.prototype).open = function (t, e, n) {\n      if (null != n && !n) throw Error(\"Only async requests are supported.\");\n      this.a.open(t, e);\n    }, t.send = function (t) {\n      if (t) {\n        if (\"string\" != typeof t) throw Error(\"Only string data is supported\");\n        this.a.send(t);\n      } else this.a.send();\n    }, t.abort = function () {\n      this.a.abort();\n    }, t.setRequestHeader = function () {}, t.getResponseHeader = function (t) {\n      return \"content-type\" == t.toLowerCase() ? this.a.contentType : \"\";\n    }, t.dc = function () {\n      this.status = 200, this.response = this.responseText = this.a.responseText, _o(this, 4);\n    }, t.Gb = function () {\n      this.status = 500, this.response = this.responseText = \"\", _o(this, 4);\n    }, t.ic = function () {\n      this.Gb();\n    }, t.ec = function () {\n      this.status = 200, _o(this, 1);\n    }, t.getAllResponseHeaders = function () {\n      return \"content-type: \" + this.a.contentType;\n    }, Eo.prototype.a = null, Eo.prototype.reset = function (t, e, n, r, i) {\n      delete this.a;\n    }, So.prototype.toString = function () {\n      return this.name;\n    };\n    var Io = new So(\"SEVERE\", 1e3),\n        Co = new So(\"WARNING\", 900),\n        No = new So(\"CONFIG\", 700),\n        Ao = new So(\"FINE\", 500);\n\n    To.prototype.log = function (t, e, n) {\n      if (t.value >= function t(e) {\n        return e.c ? e.c : e.a ? t(e.a) : (A(\"Root logger has no level set.\"), null);\n      }(this).value) for (g(e) && (e = e()), t = new Eo(t, String(e), this.f), n && (t.a = n), n = this; n;) n = n.a;\n    };\n\n    var ko,\n        Do = {},\n        Ro = null;\n\n    function Oo(t) {\n      var e;\n\n      if (Ro || (Ro = new To(\"\"), (Do[\"\"] = Ro).c = No), !(e = Do[t])) {\n        e = new To(t);\n        var n = t.lastIndexOf(\".\"),\n            r = t.substr(n + 1);\n        (n = Oo(t.substr(0, n))).b || (n.b = {}), (n.b[r] = e).a = n, Do[t] = e;\n      }\n\n      return e;\n    }\n\n    function Po(t, e) {\n      t && t.log(Ao, e, void 0);\n    }\n\n    function Mo(t) {\n      this.f = t;\n    }\n\n    function xo(t) {\n      Oe.call(this), this.u = t, this.readyState = Lo, this.status = 0, this.responseType = this.responseText = this.response = this.statusText = \"\", this.onreadystatechange = null, this.i = new Headers(), this.b = null, this.o = \"GET\", this.g = \"\", this.a = !1, this.h = Oo(\"goog.net.FetchXmlHttp\"), this.l = this.c = this.f = null;\n    }\n\n    S(Mo, yo), Mo.prototype.a = function () {\n      return new xo(this.f);\n    }, Mo.prototype.b = (ko = {}, function () {\n      return ko;\n    }), S(xo, Oe);\n    var Lo = 0;\n\n    function Fo(t) {\n      t.c.read().then(t.cc.bind(t)).catch(t.Ma.bind(t));\n    }\n\n    function Uo(t, e) {\n      e && t.f && (t.status = t.f.status, t.statusText = t.f.statusText), t.readyState = 4, t.f = null, t.c = null, t.l = null, qo(t);\n    }\n\n    function qo(t) {\n      t.onreadystatechange && t.onreadystatechange.call(t);\n    }\n\n    function Vo(t) {\n      Oe.call(this), this.headers = new Ve(), this.D = t || null, this.c = !1, this.A = this.a = null, this.h = this.N = this.l = \"\", this.f = this.I = this.i = this.G = !1, this.g = 0, this.u = null, this.o = Bo, this.v = this.O = !1;\n    }\n\n    (t = xo.prototype).open = function (t, e) {\n      if (this.readyState != Lo) throw this.abort(), Error(\"Error reopening a connection\");\n      this.o = t, this.g = e, this.readyState = 1, qo(this);\n    }, t.send = function (t) {\n      if (1 != this.readyState) throw this.abort(), Error(\"need to call open() first. \");\n      this.a = !0;\n      var e = {\n        headers: this.i,\n        method: this.o,\n        credentials: void 0,\n        cache: void 0\n      };\n      t && (e.body = t), this.u.fetch(new Request(this.g, e)).then(this.hc.bind(this), this.Ma.bind(this));\n    }, t.abort = function () {\n      this.response = this.responseText = \"\", this.i = new Headers(), this.status = 0, this.c && this.c.cancel(\"Request was aborted.\"), 1 <= this.readyState && this.a && 4 != this.readyState && (this.a = !1, Uo(this, !1)), this.readyState = Lo;\n    }, t.hc = function (t) {\n      this.a && (this.f = t, this.b || (this.b = t.headers, this.readyState = 2, qo(this)), this.a && (this.readyState = 3, qo(this), this.a && (\"arraybuffer\" === this.responseType ? t.arrayBuffer().then(this.fc.bind(this), this.Ma.bind(this)) : void 0 !== l.ReadableStream && \"body\" in t ? (this.response = this.responseText = \"\", this.c = t.body.getReader(), this.l = new TextDecoder(), Fo(this)) : t.text().then(this.gc.bind(this), this.Ma.bind(this)))));\n    }, t.cc = function (t) {\n      if (this.a) {\n        var e = this.l.decode(t.value ? t.value : new Uint8Array(0), {\n          stream: !t.done\n        });\n        e && (this.response = this.responseText += e), t.done ? Uo(this, !0) : qo(this), 3 == this.readyState && Fo(this);\n      }\n    }, t.gc = function (t) {\n      this.a && (this.response = this.responseText = t, Uo(this, !0));\n    }, t.fc = function (t) {\n      this.a && (this.response = t, Uo(this, !0));\n    }, t.Ma = function (t) {\n      var e = this.h;\n      e && e.log(Co, \"Failed to fetch url \" + this.g, t instanceof Error ? t : Error(t)), this.a && Uo(this, !0);\n    }, t.setRequestHeader = function (t, e) {\n      this.i.append(t, e);\n    }, t.getResponseHeader = function (t) {\n      return this.b ? this.b.get(t.toLowerCase()) || \"\" : ((t = this.h) && t.log(Co, \"Attempting to get response header but no headers have been received for url: \" + this.g, void 0), \"\");\n    }, t.getAllResponseHeaders = function () {\n      if (!this.b) {\n        var t = this.h;\n        return t && t.log(Co, \"Attempting to get all response headers but no headers have been received for url: \" + this.g, void 0), \"\";\n      }\n\n      t = [];\n\n      for (var e = this.b.entries(), n = e.next(); !n.done;) n = n.value, t.push(n[0] + \": \" + n[1]), n = e.next();\n\n      return t.join(\"\\r\\n\");\n    }, S(Vo, Oe);\n    var Bo = \"\";\n    Vo.prototype.b = Oo(\"goog.net.XhrIo\");\n    var jo = /^https?$/i,\n        Wo = [\"POST\", \"PUT\"];\n\n    function Ko(e, t, n, r, i) {\n      if (e.a) throw Error(\"[goog.net.XhrIo] Object is active with another request=\" + e.l + \"; newUri=\" + t);\n      n = n ? n.toUpperCase() : \"GET\", e.l = t, e.h = \"\", e.N = n, e.G = !1, e.c = !0, e.a = e.D ? e.D.a() : co.a(), e.A = e.D ? mo(e.D) : mo(co), e.a.onreadystatechange = _(e.Jb, e);\n\n      try {\n        Po(e.b, Zo(e, \"Opening Xhr\")), e.I = !0, e.a.open(n, String(t), !0), e.I = !1;\n      } catch (t) {\n        return Po(e.b, Zo(e, \"Error opening Xhr: \" + t.message)), void Ho(e, t);\n      }\n\n      t = r || \"\";\n      var o,\n          a = new Ve(e.headers);\n      i && function (t, e) {\n        if (t.forEach && \"function\" == typeof t.forEach) t.forEach(e, void 0);else if (m(t) || h(t)) x(t, e, void 0);else for (var n = qe(t), r = Ue(t), i = r.length, o = 0; o < i; o++) e.call(void 0, r[o], n && n[o], t);\n      }(i, function (t, e) {\n        a.set(e, t);\n      }), i = function (t) {\n        t: {\n          for (var e = Qo, n = t.length, r = h(t) ? t.split(\"\") : t, i = 0; i < n; i++) if (i in r && e.call(void 0, r[i], i, t)) {\n            e = i;\n            break t;\n          }\n\n          e = -1;\n        }\n\n        return e < 0 ? null : h(t) ? t.charAt(e) : t[e];\n      }(a.U()), r = l.FormData && t instanceof l.FormData, !U(Wo, n) || i || r || a.set(\"Content-Type\", \"application/x-www-form-urlencoded;charset=utf-8\"), a.forEach(function (t, e) {\n        this.a.setRequestHeader(e, t);\n      }, e), e.o && (e.a.responseType = e.o), \"withCredentials\" in e.a && e.a.withCredentials !== e.O && (e.a.withCredentials = e.O);\n\n      try {\n        Xo(e), 0 < e.g && (e.v = (o = e.a, Qt && ne(9) && \"number\" == typeof o.timeout && void 0 !== o.ontimeout), Po(e.b, Zo(e, \"Will abort after \" + e.g + \"ms if incomplete, xhr2 \" + e.v)), e.v ? (e.a.timeout = e.g, e.a.ontimeout = _(e.Ga, e)) : e.u = Le(e.Ga, e.g, e)), Po(e.b, Zo(e, \"Sending request\")), e.i = !0, e.a.send(t), e.i = !1;\n      } catch (t) {\n        Po(e.b, Zo(e, \"Send error: \" + t.message)), Ho(e, t);\n      }\n    }\n\n    function Qo(t) {\n      return \"content-type\" == t.toLowerCase();\n    }\n\n    function Ho(t, e) {\n      t.c = !1, t.a && (t.f = !0, t.a.abort(), t.f = !1), t.h = e, Go(t), Yo(t);\n    }\n\n    function Go(t) {\n      t.G || (t.G = !0, t.dispatchEvent(\"complete\"), t.dispatchEvent(\"error\"));\n    }\n\n    function zo(e) {\n      if (e.c && void 0 !== u) if (e.A[1] && 4 == Jo(e) && 2 == $o(e)) Po(e.b, Zo(e, \"Local request error detected and ignored\"));else if (e.i && 4 == Jo(e)) Le(e.Jb, 0, e);else if (e.dispatchEvent(\"readystatechange\"), 4 == Jo(e)) {\n        Po(e.b, Zo(e, \"Request complete\")), e.c = !1;\n\n        try {\n          var t,\n              n = $o(e);\n\n          t: switch (n) {\n            case 200:\n            case 201:\n            case 202:\n            case 204:\n            case 206:\n            case 304:\n            case 1223:\n              var r = !0;\n              break t;\n\n            default:\n              r = !1;\n          }\n\n          if (!(t = r)) {\n            var i;\n\n            if (i = 0 === n) {\n              var o = String(e.l).match(We)[1] || null;\n\n              if (!o && l.self && l.self.location) {\n                var a = l.self.location.protocol;\n                o = a.substr(0, a.length - 1);\n              }\n\n              i = !jo.test(o ? o.toLowerCase() : \"\");\n            }\n\n            t = i;\n          }\n\n          if (t) e.dispatchEvent(\"complete\"), e.dispatchEvent(\"success\");else {\n            try {\n              var s = 2 < Jo(e) ? e.a.statusText : \"\";\n            } catch (t) {\n              Po(e.b, \"Can not get status: \" + t.message), s = \"\";\n            }\n\n            e.h = s + \" [\" + $o(e) + \"]\", Go(e);\n          }\n        } finally {\n          Yo(e);\n        }\n      }\n    }\n\n    function Yo(e, t) {\n      if (e.a) {\n        Xo(e);\n        var n = e.a,\n            r = e.A[0] ? s : null;\n        e.a = null, e.A = null, t || e.dispatchEvent(\"ready\");\n\n        try {\n          n.onreadystatechange = r;\n        } catch (t) {\n          (e = e.b) && e.log(Io, \"Problem encountered resetting onreadystatechange: \" + t.message, void 0);\n        }\n      }\n    }\n\n    function Xo(t) {\n      t.a && t.v && (t.a.ontimeout = null), t.u && (l.clearTimeout(t.u), t.u = null);\n    }\n\n    function Jo(t) {\n      return t.a ? t.a.readyState : 0;\n    }\n\n    function $o(t) {\n      try {\n        return 2 < Jo(t) ? t.a.status : -1;\n      } catch (t) {\n        return -1;\n      }\n    }\n\n    function Zo(t, e) {\n      return e + \" [\" + t.N + \" \" + t.l + \" \" + $o(t) + \"]\";\n    }\n\n    function ta(t) {\n      var e = la;\n      this.g = [], this.v = e, this.u = t || null, this.f = this.a = !1, this.c = void 0, this.l = this.A = this.i = !1, this.h = 0, this.b = null, this.m = 0;\n    }\n\n    function ea(t, e, n) {\n      t.a = !0, t.c = n, t.f = !e, oa(t);\n    }\n\n    function na(t) {\n      if (t.a) {\n        if (!t.l) throw new aa(t);\n        t.l = !1;\n      }\n    }\n\n    function ra(t, e, n, r) {\n      t.g.push([e, n, r]), t.a && oa(t);\n    }\n\n    function ia(t) {\n      return F(t.g, function (t) {\n        return g(t[1]);\n      });\n    }\n\n    function oa(e) {\n      if (e.h && e.a && ia(e)) {\n        var n = e.h,\n            r = ca[n];\n        r && (l.clearTimeout(r.a), delete ca[n]), e.h = 0;\n      }\n\n      e.b && (e.b.m--, delete e.b), n = e.c;\n\n      for (var t = r = !1; e.g.length && !e.i;) {\n        var i = e.g.shift(),\n            o = i[0],\n            a = i[1];\n        if (i = i[2], o = e.f ? a : o) try {\n          var s = o.call(i || e.u, n);\n          void 0 !== s && (e.f = e.f && (s == n || s instanceof Error), e.c = n = s), (I(n) || \"function\" == typeof l.Promise && n instanceof l.Promise) && (t = !0, e.i = !0);\n        } catch (t) {\n          n = t, e.f = !0, ia(e) || (r = !0);\n        }\n      }\n\n      e.c = n, t && (s = _(e.o, e, !0), t = _(e.o, e, !1), n instanceof ta ? (ra(n, s, t), n.A = !0) : n.then(s, t)), r && (n = new ua(n), ca[n.a] = n, e.h = n.a);\n    }\n\n    function aa() {\n      C.call(this);\n    }\n\n    function sa() {\n      C.call(this);\n    }\n\n    function ua(t) {\n      this.a = l.setTimeout(_(this.c, this), 0), this.b = t;\n    }\n\n    (t = Vo.prototype).Ga = function () {\n      void 0 !== u && this.a && (this.h = \"Timed out after \" + this.g + \"ms, aborting\", Po(this.b, Zo(this, this.h)), this.dispatchEvent(\"timeout\"), this.abort(8));\n    }, t.abort = function () {\n      this.a && this.c && (Po(this.b, Zo(this, \"Aborting\")), this.c = !1, this.f = !0, this.a.abort(), this.f = !1, this.dispatchEvent(\"complete\"), this.dispatchEvent(\"abort\"), Yo(this));\n    }, t.va = function () {\n      this.a && (this.c && (this.c = !1, this.f = !0, this.a.abort(), this.f = !1), Yo(this, !0)), Vo.qb.va.call(this);\n    }, t.Jb = function () {\n      this.qa || (this.I || this.i || this.f ? zo(this) : this.wc());\n    }, t.wc = function () {\n      zo(this);\n    }, t.getResponse = function () {\n      try {\n        if (!this.a) return null;\n        if (\"response\" in this.a) return this.a.response;\n\n        switch (this.o) {\n          case Bo:\n          case \"text\":\n            return this.a.responseText;\n\n          case \"arraybuffer\":\n            if (\"mozResponseArrayBuffer\" in this.a) return this.a.mozResponseArrayBuffer;\n        }\n\n        var t = this.b;\n        return t && t.log(Io, \"Response type \" + this.o + \" is not supported on this browser\", void 0), null;\n      } catch (t) {\n        return Po(this.b, \"Can not get response: \" + t.message), null;\n      }\n    }, ta.prototype.cancel = function (t) {\n      if (this.a) this.c instanceof ta && this.c.cancel();else {\n        if (this.b) {\n          var e = this.b;\n          delete this.b, t ? e.cancel(t) : (e.m--, e.m <= 0 && e.cancel());\n        }\n\n        this.v ? this.v.call(this.u, this) : this.l = !0, this.a || (t = new sa(this), na(this), ea(this, !1, t));\n      }\n    }, ta.prototype.o = function (t, e) {\n      this.i = !1, ea(this, t, e);\n    }, ta.prototype.then = function (t, e, n) {\n      var r,\n          i,\n          o = new gt(function (t, e) {\n        r = t, i = e;\n      });\n      return ra(this, r, function (t) {\n        t instanceof sa ? o.cancel() : i(t);\n      }), o.then(t, e, n);\n    }, ta.prototype.$goog_Thenable = !0, S(aa, C), aa.prototype.message = \"Deferred has already fired\", aa.prototype.name = \"AlreadyCalledError\", S(sa, C), sa.prototype.message = \"Deferred was canceled\", sa.prototype.name = \"CanceledError\", ua.prototype.c = function () {\n      throw delete ca[this.a], this.b;\n    };\n    var ca = {};\n\n    function ha(t) {\n      var e,\n          n,\n          r,\n          i,\n          o,\n          a = document,\n          s = _n(t).toString(),\n          u = document.createElement(\"SCRIPT\"),\n          c = {\n        Lb: u,\n        Ga: void 0\n      },\n          h = new ta(c);\n\n      return e = window.setTimeout(function () {\n        fa(u, !0);\n        var t = new ya(da, \"Timeout reached for loading script \" + s);\n        na(h), ea(h, !1, t);\n      }, 5e3), c.Ga = e, u.onload = u.onreadystatechange = function () {\n        u.readyState && \"loaded\" != u.readyState && \"complete\" != u.readyState || (fa(u, !1, e), na(h), ea(h, !0, null));\n      }, u.onerror = function () {\n        fa(u, !0, e);\n        var t = new ya(pa, \"Error while loading script \" + s);\n        na(h), ea(h, !1, t);\n      }, ct(c = {}, {\n        type: \"text/javascript\",\n        charset: \"UTF-8\"\n      }), Ln(u, c), r = t, (n = u).src = _n(r), null === p && (p = (r = (r = l.document).querySelector && r.querySelector(\"script[nonce]\")) && (r = r.nonce || r.getAttribute(\"nonce\")) && f.test(r) ? r : \"\"), (r = p) && n.setAttribute(\"nonce\", r), (i = a, (o = (i || document).getElementsByTagName(\"HEAD\")) && 0 != o.length ? o[0] : i.documentElement).appendChild(u), h;\n    }\n\n    function la() {\n      if (this && this.Lb) {\n        var t = this.Lb;\n        t && \"SCRIPT\" == t.tagName && fa(t, !0, this.Ga);\n      }\n    }\n\n    function fa(t, e, n) {\n      null != n && l.clearTimeout(n), t.onload = s, t.onerror = s, t.onreadystatechange = s, e && window.setTimeout(function () {\n        t && t.parentNode && t.parentNode.removeChild(t);\n      }, 0);\n    }\n\n    var pa = 0,\n        da = 1;\n\n    function ya(t, e) {\n      var n = \"Jsloader error (code #\" + t + \")\";\n      e && (n += \": \" + e), C.call(this, n), this.code = t;\n    }\n\n    function ma(t) {\n      this.f = t;\n    }\n\n    function ga(t, e, n) {\n      if (this.b = t, t = e || {}, this.i = t.secureTokenEndpoint || \"https://securetoken.googleapis.com/v1/token\", this.m = t.secureTokenTimeout || wa, this.f = ot(t.secureTokenHeaders || _a), this.g = t.firebaseEndpoint || \"https://www.googleapis.com/identitytoolkit/v3/relyingparty/\", this.h = t.firebaseTimeout || Ea, this.a = ot(t.firebaseHeaders || Ta), n && (this.a[\"X-Client-Version\"] = n, this.f[\"X-Client-Version\"] = n), n = \"Node\" == rr(), !(n = l.XMLHttpRequest || n && Hh.INTERNAL.node && Hh.INTERNAL.node.XMLHttpRequest) && !nr()) throw new Kr(\"internal-error\", \"The XMLHttpRequest compatibility library was not found.\");\n      this.c = void 0, nr() ? this.c = new Mo(self) : ir() ? this.c = new ma(n) : this.c = new bo();\n    }\n\n    S(ya, C), S(ma, yo), ma.prototype.a = function () {\n      return new this.f();\n    }, ma.prototype.b = function () {\n      return {};\n    };\n    var va,\n        ba = \"idToken\",\n        wa = new Tr(3e4, 6e4),\n        _a = {\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    },\n        Ea = new Tr(3e4, 6e4),\n        Ta = {\n      \"Content-Type\": \"application/json\"\n    };\n\n    function Sa(t, e) {\n      e ? t.a[\"X-Firebase-Locale\"] = e : delete t.a[\"X-Firebase-Locale\"];\n    }\n\n    function Ia(t, e) {\n      e ? (t.a[\"X-Client-Version\"] = e, t.f[\"X-Client-Version\"] = e) : (delete t.a[\"X-Client-Version\"], delete t.f[\"X-Client-Version\"]);\n    }\n\n    function Ca(t, e, n, r, i, o, a) {\n      var s;\n      (t = !((s = sr(s = hr()) != ar ? null : (s = s.match(/\\sChrome\\/(\\d+)/i)) && 2 == s.length ? parseInt(s[1], 10) : null) && s < 30 || Qt && te && !(9 < te)) || nr() ? _(t.o, t) : (va || (va = new gt(function (t, e) {\n        !function (t, e) {\n          if (((window.gapi || {}).client || {}).request) t();else {\n            l[Aa] = function () {\n              ((window.gapi || {}).client || {}).request ? t() : e(Error(\"CORS_UNSUPPORTED\"));\n            };\n\n            var n = En(Na, {\n              onload: Aa\n            });\n            ra(ha(n), null, function () {\n              e(Error(\"CORS_UNSUPPORTED\"));\n            }, void 0);\n          }\n        }(t, e);\n      })), _(t.l, t)))(e, n, r, i, o, a);\n    }\n\n    ga.prototype.o = function (t, n, e, r, i, o) {\n      if (nr() && (void 0 === l.fetch || void 0 === l.Headers || void 0 === l.Request)) throw new Kr(\"operation-not-supported-in-this-environment\", \"fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.\");\n      var a = new Vo(this.c);\n\n      if (o) {\n        a.g = Math.max(0, o);\n        var s = setTimeout(function () {\n          a.dispatchEvent(\"timeout\");\n        }, o);\n      }\n\n      Pe(a, \"complete\", function () {\n        s && clearTimeout(s);\n        var e = null;\n\n        try {\n          e = JSON.parse(function (e) {\n            try {\n              return e.a ? e.a.responseText : \"\";\n            } catch (t) {\n              return Po(e.b, \"Can not get responseText: \" + t.message), \"\";\n            }\n          }(this)) || null;\n        } catch (t) {\n          e = null;\n        }\n\n        n && n(e);\n      }), Me(a, \"ready\", function () {\n        s && clearTimeout(s), Vt(this);\n      }), Me(a, \"timeout\", function () {\n        s && clearTimeout(s), Vt(this), n && n(null);\n      }), Ko(a, t, e, r, i);\n    };\n\n    var Na = new mn(bn, \"https://apis.google.com/js/client.js?onload=%{onload}\"),\n        Aa = \"__fcb\" + Math.floor(1e6 * Math.random()).toString();\n\n    function ka(t) {\n      if (!h(t = t.email) || !$n.test(t)) throw new Kr(\"invalid-email\");\n    }\n\n    function Da(t) {\n      \"email\" in t && ka(t);\n    }\n\n    function Ra(t) {\n      if (!t[ba]) throw new Kr(\"internal-error\");\n    }\n\n    function Oa(t) {\n      if (t.phoneNumber || t.temporaryProof) {\n        if (!t.phoneNumber || !t.temporaryProof) throw new Kr(\"internal-error\");\n      } else {\n        if (!t.sessionInfo) throw new Kr(\"missing-verification-id\");\n        if (!t.code) throw new Kr(\"missing-verification-code\");\n      }\n    }\n\n    ga.prototype.l = function (t, n, r, i, o) {\n      var a = this;\n      va.then(function () {\n        window.gapi.client.setApiKey(a.b);\n        var e = window.gapi.auth.getToken();\n        window.gapi.auth.setToken(null), window.gapi.client.request({\n          path: t,\n          method: r,\n          body: i,\n          headers: o,\n          authType: \"none\",\n          callback: function (t) {\n            window.gapi.auth.setToken(e), n && n(t);\n          }\n        });\n      }).s(function (t) {\n        n && n({\n          error: {\n            message: t && t.message || \"CORS_UNSUPPORTED\"\n          }\n        });\n      });\n    }, ga.prototype.ob = function () {\n      return ds(this, os, {});\n    }, ga.prototype.rb = function (t, e) {\n      return ds(this, rs, {\n        idToken: t,\n        email: e\n      });\n    }, ga.prototype.sb = function (t, e) {\n      return ds(this, is, {\n        idToken: t,\n        password: e\n      });\n    };\n    var Pa = {\n      displayName: \"DISPLAY_NAME\",\n      photoUrl: \"PHOTO_URL\"\n    };\n\n    function Ma(t) {\n      if (!t.requestUri || !t.sessionId && !t.postBody && !t.pendingToken) throw new Kr(\"internal-error\");\n    }\n\n    function xa(t, e) {\n      return e.oauthIdToken && e.providerId && 0 == e.providerId.indexOf(\"oidc.\") && !e.pendingToken && (t.sessionId ? e.nonce = t.sessionId : t.postBody && ln(t = new sn(t.postBody), \"nonce\") && (e.nonce = t.get(\"nonce\"))), e;\n    }\n\n    function La(t) {\n      var e = null;\n      if (t.needConfirmation ? (t.code = \"account-exists-with-different-credential\", e = po(t)) : \"FEDERATED_USER_ID_ALREADY_LINKED\" == t.errorMessage ? (t.code = \"credential-already-in-use\", e = po(t)) : \"EMAIL_EXISTS\" == t.errorMessage ? (t.code = \"email-already-in-use\", e = po(t)) : t.errorMessage && (e = ys(t.errorMessage)), e) throw e;\n      if (!t[ba]) throw new Kr(\"internal-error\");\n    }\n\n    function Fa(t, e) {\n      return e.returnIdpCredential = !0, ds(t, as, e);\n    }\n\n    function Ua(t, e) {\n      return e.returnIdpCredential = !0, ds(t, us, e);\n    }\n\n    function qa(t, e) {\n      return e.returnIdpCredential = !0, e.autoCreate = !1, ds(t, ss, e);\n    }\n\n    function Va(t) {\n      if (!t.oobCode) throw new Kr(\"invalid-action-code\");\n    }\n\n    (t = ga.prototype).tb = function (t, r) {\n      var i = {\n        idToken: t\n      },\n          o = [];\n      return rt(Pa, function (t, e) {\n        var n = r[e];\n        null === n ? o.push(t) : e in r && (i[e] = n);\n      }), o.length && (i.deleteAttribute = o), ds(this, rs, i);\n    }, t.kb = function (t, e) {\n      return ct(t = {\n        requestType: \"PASSWORD_RESET\",\n        email: t\n      }, e), ds(this, $a, t);\n    }, t.lb = function (t, e) {\n      return ct(t = {\n        requestType: \"EMAIL_SIGNIN\",\n        email: t\n      }, e), ds(this, Xa, t);\n    }, t.jb = function (t, e) {\n      return ct(t = {\n        requestType: \"VERIFY_EMAIL\",\n        idToken: t\n      }, e), ds(this, Ja, t);\n    }, t.Ua = function (t) {\n      return ds(this, ls, t);\n    }, t.Za = function (t, e) {\n      return ds(this, es, {\n        oobCode: t,\n        newPassword: e\n      });\n    }, t.Ka = function (t) {\n      return ds(this, ja, {\n        oobCode: t\n      });\n    }, t.Wa = function (t) {\n      return ds(this, Ba, {\n        oobCode: t\n      });\n    };\n    var Ba = {\n      endpoint: \"setAccountInfo\",\n      C: Va,\n      da: \"email\"\n    },\n        ja = {\n      endpoint: \"resetPassword\",\n      C: Va,\n      J: function (t) {\n        var e = t.requestType;\n        if (!e || !t.email && \"EMAIL_SIGNIN\" != e) throw new Kr(\"internal-error\");\n      }\n    },\n        Wa = {\n      endpoint: \"signupNewUser\",\n      C: function (t) {\n        if (ka(t), !t.password) throw new Kr(\"weak-password\");\n      },\n      J: Ra,\n      R: !0\n    },\n        Ka = {\n      endpoint: \"createAuthUri\"\n    },\n        Qa = {\n      endpoint: \"deleteAccount\",\n      T: [\"idToken\"]\n    },\n        Ha = {\n      endpoint: \"setAccountInfo\",\n      T: [\"idToken\", \"deleteProvider\"],\n      C: function (t) {\n        if (!y(t.deleteProvider)) throw new Kr(\"internal-error\");\n      }\n    },\n        Ga = {\n      endpoint: \"emailLinkSignin\",\n      T: [\"email\", \"oobCode\"],\n      C: ka,\n      J: Ra,\n      R: !0\n    },\n        za = {\n      endpoint: \"emailLinkSignin\",\n      T: [\"idToken\", \"email\", \"oobCode\"],\n      C: ka,\n      J: Ra,\n      R: !0\n    },\n        Ya = {\n      endpoint: \"getAccountInfo\"\n    },\n        Xa = {\n      endpoint: \"getOobConfirmationCode\",\n      T: [\"requestType\"],\n      C: function (t) {\n        if (\"EMAIL_SIGNIN\" != t.requestType) throw new Kr(\"internal-error\");\n        ka(t);\n      },\n      da: \"email\"\n    },\n        Ja = {\n      endpoint: \"getOobConfirmationCode\",\n      T: [\"idToken\", \"requestType\"],\n      C: function (t) {\n        if (\"VERIFY_EMAIL\" != t.requestType) throw new Kr(\"internal-error\");\n      },\n      da: \"email\"\n    },\n        $a = {\n      endpoint: \"getOobConfirmationCode\",\n      T: [\"requestType\"],\n      C: function (t) {\n        if (\"PASSWORD_RESET\" != t.requestType) throw new Kr(\"internal-error\");\n        ka(t);\n      },\n      da: \"email\"\n    },\n        Za = {\n      wb: !0,\n      endpoint: \"getProjectConfig\",\n      Ib: \"GET\"\n    },\n        ts = {\n      wb: !0,\n      endpoint: \"getRecaptchaParam\",\n      Ib: \"GET\",\n      J: function (t) {\n        if (!t.recaptchaSiteKey) throw new Kr(\"internal-error\");\n      }\n    },\n        es = {\n      endpoint: \"resetPassword\",\n      C: Va,\n      da: \"email\"\n    },\n        ns = {\n      endpoint: \"sendVerificationCode\",\n      T: [\"phoneNumber\", \"recaptchaToken\"],\n      da: \"sessionInfo\"\n    },\n        rs = {\n      endpoint: \"setAccountInfo\",\n      T: [\"idToken\"],\n      C: Da,\n      R: !0\n    },\n        is = {\n      endpoint: \"setAccountInfo\",\n      T: [\"idToken\"],\n      C: function (t) {\n        if (Da(t), !t.password) throw new Kr(\"weak-password\");\n      },\n      J: Ra,\n      R: !0\n    },\n        os = {\n      endpoint: \"signupNewUser\",\n      J: Ra,\n      R: !0\n    },\n        as = {\n      endpoint: \"verifyAssertion\",\n      C: Ma,\n      Qa: xa,\n      J: La,\n      R: !0\n    },\n        ss = {\n      endpoint: \"verifyAssertion\",\n      C: Ma,\n      Qa: xa,\n      J: function (t) {\n        if (t.errorMessage && \"USER_NOT_FOUND\" == t.errorMessage) throw new Kr(\"user-not-found\");\n        if (t.errorMessage) throw ys(t.errorMessage);\n        if (!t[ba]) throw new Kr(\"internal-error\");\n      },\n      R: !0\n    },\n        us = {\n      endpoint: \"verifyAssertion\",\n      C: function (t) {\n        if (Ma(t), !t.idToken) throw new Kr(\"internal-error\");\n      },\n      Qa: xa,\n      J: La,\n      R: !0\n    },\n        cs = {\n      endpoint: \"verifyCustomToken\",\n      C: function (t) {\n        if (!t.token) throw new Kr(\"invalid-custom-token\");\n      },\n      J: Ra,\n      R: !0\n    },\n        hs = {\n      endpoint: \"verifyPassword\",\n      C: function (t) {\n        if (ka(t), !t.password) throw new Kr(\"wrong-password\");\n      },\n      J: Ra,\n      R: !0\n    },\n        ls = {\n      endpoint: \"verifyPhoneNumber\",\n      C: Oa,\n      J: Ra\n    },\n        fs = {\n      endpoint: \"verifyPhoneNumber\",\n      C: function (t) {\n        if (!t.idToken) throw new Kr(\"internal-error\");\n        Oa(t);\n      },\n      J: function (t) {\n        if (t.temporaryProof) throw t.code = \"credential-already-in-use\", po(t);\n        Ra(t);\n      }\n    },\n        ps = {\n      Wb: {\n        USER_NOT_FOUND: \"user-not-found\"\n      },\n      endpoint: \"verifyPhoneNumber\",\n      C: Oa,\n      J: Ra\n    };\n\n    function ds(t, e, n) {\n      if (!function (t, e) {\n        if (!e || !e.length) return !0;\n        if (!t) return !1;\n\n        for (var n = 0; n < e.length; n++) {\n          var r = t[e[n]];\n          if (null == r || \"\" === r) return !1;\n        }\n\n        return !0;\n      }(n, e.T)) return It(new Kr(\"internal-error\"));\n      var r,\n          i = e.Ib || \"POST\";\n      return St(n).then(e.C).then(function () {\n        return e.R && (n.returnSecureToken = !0), function (t, e, r, i, o, n) {\n          var a = Xe(t.g + e);\n          ze(a, \"key\", t.b), n && ze(a, \"cb\", T().toString());\n          var s = \"GET\" == r;\n          if (s) for (var u in i) i.hasOwnProperty(u) && ze(a, u, i[u]);\n          return new gt(function (e, n) {\n            Ca(t, a.toString(), function (t) {\n              t ? t.error ? n(ms(t, o || {})) : e(t) : n(new Kr(\"network-request-failed\"));\n            }, r, s ? void 0 : Vn(vr(i)), t.a, t.h.get());\n          });\n        }(t, e.endpoint, i, n, e.Wb, e.wb || !1);\n      }).then(function (t) {\n        return r = t, e.Qa ? e.Qa(n, r) : r;\n      }).then(e.J).then(function () {\n        if (!e.da) return r;\n        if (!(e.da in r)) throw new Kr(\"internal-error\");\n        return r[e.da];\n      });\n    }\n\n    function ys(t) {\n      return ms({\n        error: {\n          errors: [{\n            message: t\n          }],\n          code: 400,\n          message: t\n        }\n      });\n    }\n\n    function ms(t, e) {\n      var n = (t.error && t.error.errors && t.error.errors[0] || {}).reason || \"\",\n          r = {\n        keyInvalid: \"invalid-api-key\",\n        ipRefererBlocked: \"app-not-authorized\"\n      };\n      if (n = r[n] ? new Kr(r[n]) : null) return n;\n\n      for (var i in n = t.error && t.error.message || \"\", ct(r = {\n        INVALID_CUSTOM_TOKEN: \"invalid-custom-token\",\n        CREDENTIAL_MISMATCH: \"custom-token-mismatch\",\n        MISSING_CUSTOM_TOKEN: \"internal-error\",\n        INVALID_IDENTIFIER: \"invalid-email\",\n        MISSING_CONTINUE_URI: \"internal-error\",\n        INVALID_EMAIL: \"invalid-email\",\n        INVALID_PASSWORD: \"wrong-password\",\n        USER_DISABLED: \"user-disabled\",\n        MISSING_PASSWORD: \"internal-error\",\n        EMAIL_EXISTS: \"email-already-in-use\",\n        PASSWORD_LOGIN_DISABLED: \"operation-not-allowed\",\n        INVALID_IDP_RESPONSE: \"invalid-credential\",\n        INVALID_PENDING_TOKEN: \"invalid-credential\",\n        FEDERATED_USER_ID_ALREADY_LINKED: \"credential-already-in-use\",\n        MISSING_OR_INVALID_NONCE: \"missing-or-invalid-nonce\",\n        INVALID_MESSAGE_PAYLOAD: \"invalid-message-payload\",\n        INVALID_RECIPIENT_EMAIL: \"invalid-recipient-email\",\n        INVALID_SENDER: \"invalid-sender\",\n        EMAIL_NOT_FOUND: \"user-not-found\",\n        RESET_PASSWORD_EXCEED_LIMIT: \"too-many-requests\",\n        EXPIRED_OOB_CODE: \"expired-action-code\",\n        INVALID_OOB_CODE: \"invalid-action-code\",\n        MISSING_OOB_CODE: \"internal-error\",\n        INVALID_PROVIDER_ID: \"invalid-provider-id\",\n        CREDENTIAL_TOO_OLD_LOGIN_AGAIN: \"requires-recent-login\",\n        INVALID_ID_TOKEN: \"invalid-user-token\",\n        TOKEN_EXPIRED: \"user-token-expired\",\n        USER_NOT_FOUND: \"user-token-expired\",\n        CORS_UNSUPPORTED: \"cors-unsupported\",\n        DYNAMIC_LINK_NOT_ACTIVATED: \"dynamic-link-not-activated\",\n        INVALID_APP_ID: \"invalid-app-id\",\n        TOO_MANY_ATTEMPTS_TRY_LATER: \"too-many-requests\",\n        WEAK_PASSWORD: \"weak-password\",\n        OPERATION_NOT_ALLOWED: \"operation-not-allowed\",\n        USER_CANCELLED: \"user-cancelled\",\n        CAPTCHA_CHECK_FAILED: \"captcha-check-failed\",\n        INVALID_APP_CREDENTIAL: \"invalid-app-credential\",\n        INVALID_CODE: \"invalid-verification-code\",\n        INVALID_PHONE_NUMBER: \"invalid-phone-number\",\n        INVALID_SESSION_INFO: \"invalid-verification-id\",\n        INVALID_TEMPORARY_PROOF: \"invalid-credential\",\n        MISSING_APP_CREDENTIAL: \"missing-app-credential\",\n        MISSING_CODE: \"missing-verification-code\",\n        MISSING_PHONE_NUMBER: \"missing-phone-number\",\n        MISSING_SESSION_INFO: \"missing-verification-id\",\n        QUOTA_EXCEEDED: \"quota-exceeded\",\n        SESSION_EXPIRED: \"code-expired\",\n        REJECTED_CREDENTIAL: \"rejected-credential\",\n        INVALID_CONTINUE_URI: \"invalid-continue-uri\",\n        MISSING_ANDROID_PACKAGE_NAME: \"missing-android-pkg-name\",\n        MISSING_IOS_BUNDLE_ID: \"missing-ios-bundle-id\",\n        UNAUTHORIZED_DOMAIN: \"unauthorized-continue-uri\",\n        INVALID_DYNAMIC_LINK_DOMAIN: \"invalid-dynamic-link-domain\",\n        INVALID_OAUTH_CLIENT_ID: \"invalid-oauth-client-id\",\n        INVALID_CERT_HASH: \"invalid-cert-hash\",\n        ADMIN_ONLY_OPERATION: \"admin-restricted-operation\"\n      }, e || {}), e = (e = n.match(/^[^\\s]+\\s*:\\s*(.*)$/)) && 1 < e.length ? e[1] : void 0, r) if (0 === n.indexOf(i)) return new Kr(r[i], e);\n\n      return !e && t && (e = gr(t)), new Kr(\"internal-error\", e);\n    }\n\n    function gs(t) {\n      var o;\n      this.b = t, this.a = null, this.fb = (o = this, (_s || (_s = new gt(function (t, e) {\n        function n() {\n          Er(), lr(\"gapi.load\")(\"gapi.iframes\", {\n            callback: t,\n            ontimeout: function () {\n              Er(), e(Error(\"Network Error\"));\n            },\n            timeout: bs.get()\n          });\n        }\n\n        if (lr(\"gapi.iframes.Iframe\")) t();else if (lr(\"gapi.load\")) n();else {\n          var r = \"__iframefcb\" + Math.floor(1e6 * Math.random()).toString();\n          l[r] = function () {\n            lr(\"gapi.load\") ? n() : e(Error(\"Network Error\"));\n          }, St(ha(r = En(vs, {\n            onload: r\n          }))).s(function () {\n            e(Error(\"Network Error\"));\n          });\n        }\n      }).s(function (t) {\n        throw _s = null, t;\n      }))).then(function () {\n        return new gt(function (r, i) {\n          lr(\"gapi.iframes.getContext\")().open({\n            where: document.body,\n            url: o.b,\n            messageHandlersFilter: lr(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"),\n            attributes: {\n              style: {\n                position: \"absolute\",\n                top: \"-100px\",\n                width: \"1px\",\n                height: \"1px\"\n              }\n            },\n            dontclear: !0\n          }, function (t) {\n            function e() {\n              clearTimeout(n), r();\n            }\n\n            o.a = t, o.a.restyle({\n              setHideOnLeave: !1\n            });\n            var n = setTimeout(function () {\n              i(Error(\"Network Error\"));\n            }, ws.get());\n            t.ping(e).then(e, function () {\n              i(Error(\"Network Error\"));\n            });\n          });\n        });\n      }));\n    }\n\n    var vs = new mn(bn, \"https://apis.google.com/js/api.js?onload=%{onload}\"),\n        bs = new Tr(3e4, 6e4),\n        ws = new Tr(5e3, 15e3),\n        _s = null;\n\n    function Es(t, e, n) {\n      this.i = t, this.g = e, this.h = n, this.f = null, this.a = Je(this.i, \"/__/auth/iframe\"), ze(this.a, \"apiKey\", this.g), ze(this.a, \"appName\", this.h), this.b = null, this.c = [];\n    }\n\n    function Ts(t, e, n, r, i) {\n      this.o = t, this.l = e, this.c = n, this.m = r, this.h = this.g = this.i = null, this.a = i, this.f = null;\n    }\n\n    function Ss(t) {\n      try {\n        return Hh.app(t).auth().ya();\n      } catch (t) {\n        return [];\n      }\n    }\n\n    function Is(t, e, n, r, i) {\n      this.l = t, this.f = e, this.b = n, this.c = r || null, this.h = i || null, this.o = this.u = this.v = null, this.g = [], this.m = this.a = null;\n    }\n\n    function Cs(t) {\n      var e,\n          s = Hn();\n      return (e = t, ds(e, Za, {}).then(function (t) {\n        return t.authorizedDomains || [];\n      })).then(function (t) {\n        t: {\n          var e = Xe(s),\n              n = e.f;\n          e = e.b;\n\n          for (var r = 0; r < t.length; r++) {\n            var i = t[r],\n                o = e,\n                a = n;\n\n            if (o = 0 == i.indexOf(\"chrome-extension://\") ? Xe(i).b == o && \"chrome-extension\" == a : (\"http\" == a || \"https\" == a) && (Jn.test(i) ? o == i : (i = i.split(\".\").join(\"\\\\.\"), new RegExp(\"^(.+\\\\.\" + i + \"|\" + i + \")$\", \"i\").test(o)))) {\n              t = !0;\n              break t;\n            }\n          }\n\n          t = !1;\n        }\n\n        if (!t) throw new lo(Hn());\n      });\n    }\n\n    function Ns(i) {\n      return i.m || (i.m = Zn().then(function () {\n        if (!i.u) {\n          var t = i.c,\n              e = i.h,\n              n = Ss(i.b),\n              r = new Es(i.l, i.f, i.b);\n          r.f = t, r.b = e, r.c = j(n || []), i.u = r.toString();\n        }\n\n        i.i = new gs(i.u), function (r) {\n          if (!r.i) throw Error(\"IfcHandler must be initialized!\");\n          t = r.i, e = function (t) {\n            var e = {};\n\n            if (t && t.authEvent) {\n              var n = !1;\n\n              for (t = so(t.authEvent), e = 0; e < r.g.length; e++) n = r.g[e](t) || n;\n\n              return (e = {}).status = n ? \"ACK\" : \"ERROR\", St(e);\n            }\n\n            return e.status = \"ERROR\", St(e);\n          }, t.fb.then(function () {\n            t.a.register(\"authEvent\", e, lr(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"));\n          });\n          var t, e;\n        }(i);\n      })), i.m;\n    }\n\n    function As(t) {\n      return t.o || (t.v = t.c ? cr(t.c, Ss(t.b)) : null, t.o = new ga(t.f, pi(t.h), t.v)), t.o;\n    }\n\n    function ks(t, e, n, r, i, o, a, s, u, c) {\n      return (t = new Ts(t, e, n, r, i)).i = o, t.g = a, t.h = s, t.b = ot(u || null), t.f = c, t.toString();\n    }\n\n    function Ds(t) {\n      if (this.a = t || Hh.INTERNAL.reactNative && Hh.INTERNAL.reactNative.AsyncStorage, !this.a) throw new Kr(\"internal-error\", \"The React Native compatibility library was not found.\");\n      this.type = \"asyncStorage\";\n    }\n\n    function Rs(t) {\n      this.b = t, this.a = {}, this.c = _(this.f, this);\n    }\n\n    Es.prototype.toString = function () {\n      return this.f ? ze(this.a, \"v\", this.f) : hn(this.a.a, \"v\"), this.b ? ze(this.a, \"eid\", this.b) : hn(this.a.a, \"eid\"), this.c.length ? ze(this.a, \"fw\", this.c.join(\",\")) : hn(this.a.a, \"fw\"), this.a.toString();\n    }, Ts.prototype.toString = function () {\n      var t = Je(this.o, \"/__/auth/handler\");\n\n      if (ze(t, \"apiKey\", this.l), ze(t, \"appName\", this.c), ze(t, \"authType\", this.m), this.a.isOAuthProvider) {\n        var e = this.a;\n\n        try {\n          var n = Hh.app(this.c).auth().ea();\n        } catch (t) {\n          n = null;\n        }\n\n        for (var r in e.$a = n, ze(t, \"providerId\", this.a.providerId), n = vr((e = this.a).zb)) n[r] = n[r].toString();\n\n        r = e.Dc, n = ot(n);\n\n        for (var i = 0; i < r.length; i++) {\n          var o = r[i];\n          o in n && delete n[o];\n        }\n\n        e.cb && e.$a && !n[e.cb] && (n[e.cb] = e.$a), it(n) || ze(t, \"customParameters\", gr(n));\n      }\n\n      if (\"function\" == typeof this.a.Fb && (e = this.a.Fb()).length && ze(t, \"scopes\", e.join(\",\")), this.i ? ze(t, \"redirectUrl\", this.i) : hn(t.a, \"redirectUrl\"), this.g ? ze(t, \"eventId\", this.g) : hn(t.a, \"eventId\"), this.h ? ze(t, \"v\", this.h) : hn(t.a, \"v\"), this.b) for (var a in this.b) this.b.hasOwnProperty(a) && !Ye(t, a) && ze(t, a, this.b[a]);\n      return this.f ? ze(t, \"eid\", this.f) : hn(t.a, \"eid\"), (a = Ss(this.c)).length && ze(t, \"fw\", a.join(\",\")), t.toString();\n    }, (t = Is.prototype).Ea = function (e, n, t) {\n      var r = new Kr(\"popup-closed-by-user\"),\n          i = new Kr(\"web-storage-unsupported\"),\n          o = this,\n          a = !1;\n      return this.ga().then(function () {\n        var t, r;\n        (t = o, r = {\n          type: \"webStorageSupport\"\n        }, Ns(t).then(function () {\n          return e = t.i, n = r, e.fb.then(function () {\n            return new gt(function (t) {\n              e.a.send(n.type, n, t, lr(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"));\n            });\n          });\n          var e, n;\n        }).then(function (t) {\n          if (t && t.length && void 0 !== t[0].webStorageSupport) return t[0].webStorageSupport;\n          throw Error();\n        })).then(function (t) {\n          t || (e && Yn(e), n(i), a = !0);\n        });\n      }).s(function () {}).then(function () {\n        if (!a) return n = e, new gt(function (e) {\n          return function t() {\n            Fe(2e3).then(function () {\n              if (n && !n.closed) return t();\n              e();\n            });\n          }();\n        });\n        var n;\n      }).then(function () {\n        if (!a) return Fe(t).then(function () {\n          n(r);\n        });\n      });\n    }, t.Mb = function () {\n      var t = hr();\n      return !mr(t) && !_r(t);\n    }, t.Hb = function () {\n      return !1;\n    }, t.Db = function (e, t, n, r, i, o, a) {\n      if (!e) return It(new Kr(\"popup-blocked\"));\n      if (a && !mr()) return this.ga().s(function (t) {\n        Yn(e), i(t);\n      }), r(), St();\n      this.a || (this.a = Cs(As(this)));\n      var s = this;\n      return this.a.then(function () {\n        var t = s.ga().s(function (t) {\n          throw Yn(e), i(t), t;\n        });\n        return r(), t;\n      }).then(function () {\n        (oo(n), a) || Gn(ks(s.l, s.f, s.b, t, n, null, o, s.c, void 0, s.h), e);\n      }).s(function (t) {\n        throw \"auth/network-request-failed\" == t.code && (s.a = null), t;\n      });\n    }, t.Ca = function (t, e, n) {\n      this.a || (this.a = Cs(As(this)));\n      var r = this;\n      return this.a.then(function () {\n        oo(e), Gn(ks(r.l, r.f, r.b, t, e, Hn(), n, r.c, void 0, r.h));\n      }).s(function (t) {\n        throw \"auth/network-request-failed\" == t.code && (r.a = null), t;\n      });\n    }, t.ga = function () {\n      var t = this;\n      return Ns(this).then(function () {\n        return t.i.fb;\n      }).s(function () {\n        throw t.a = null, new Kr(\"network-request-failed\");\n      });\n    }, t.Pb = function () {\n      return !0;\n    }, t.wa = function (t) {\n      this.g.push(t);\n    }, t.La = function (e) {\n      V(this.g, function (t) {\n        return t == e;\n      });\n    }, (t = Ds.prototype).get = function (t) {\n      return St(this.a.getItem(t)).then(function (t) {\n        return t && br(t);\n      });\n    }, t.set = function (t, e) {\n      return St(this.a.setItem(t, gr(e)));\n    }, t.P = function (t) {\n      return St(this.a.removeItem(t));\n    }, t.Y = function () {}, t.ca = function () {};\n    var Os,\n        Ps = [];\n\n    function Ms(t) {\n      this.a = t;\n    }\n\n    function xs(t) {\n      this.c = t, this.b = !1, this.a = [];\n    }\n\n    function Ls(r, t, e, n) {\n      var i,\n          o,\n          a,\n          s,\n          u = e || {},\n          c = null;\n      if (r.b) return It(Error(\"connection_unavailable\"));\n      var h = n ? 800 : 50,\n          l = \"undefined\" != typeof MessageChannel ? new MessageChannel() : null;\n      return new gt(function (e, n) {\n        l ? (i = Math.floor(Math.random() * Math.pow(10, 20)).toString(), l.port1.start(), a = setTimeout(function () {\n          n(Error(\"unsupported_event\"));\n        }, h), c = {\n          messageChannel: l,\n          onMessage: o = function (t) {\n            t.data.eventId === i && (\"ack\" === t.data.status ? (clearTimeout(a), s = setTimeout(function () {\n              n(Error(\"timeout\"));\n            }, 3e3)) : \"done\" === t.data.status ? (clearTimeout(s), void 0 !== t.data.response ? e(t.data.response) : n(Error(\"unknown_error\"))) : (clearTimeout(a), clearTimeout(s), n(Error(\"invalid_response\"))));\n          }\n        }, r.a.push(c), l.port1.addEventListener(\"message\", o), r.c.postMessage({\n          eventType: t,\n          eventId: i,\n          data: u\n        }, [l.port2])) : n(Error(\"connection_unavailable\"));\n      }).then(function (t) {\n        return Fs(r, c), t;\n      }).s(function (t) {\n        throw Fs(r, c), t;\n      });\n    }\n\n    function Fs(t, e) {\n      if (e) {\n        var n = e.messageChannel,\n            r = e.onMessage;\n        n && (n.port1.removeEventListener(\"message\", r), n.port1.close()), V(t.a, function (t) {\n          return t == e;\n        });\n      }\n    }\n\n    function Us() {\n      if (!Bs()) throw new Kr(\"web-storage-unsupported\");\n      this.c = {}, this.a = [], this.b = 0, this.l = l.indexedDB, this.type = \"indexedDB\", this.g = this.m = this.f = this.i = null, this.u = !1, this.h = null;\n      var t,\n          r = this;\n      nr() && self ? (this.m = function () {\n        var e = nr() ? self : null;\n\n        if (x(Ps, function (t) {\n          t.b == e && (n = t);\n        }), !n) {\n          var n = new Rs(e);\n          Ps.push(n);\n        }\n\n        return n;\n      }(), this.m.subscribe(\"keyChanged\", function (t, n) {\n        return Hs(r).then(function (e) {\n          return 0 < e.length && x(r.a, function (t) {\n            t(e);\n          }), {\n            keyProcessed: U(e, n.key)\n          };\n        });\n      }), this.m.subscribe(\"ping\", function () {\n        return St([\"keyChanged\"]);\n      })) : (t = l.navigator, t && t.serviceWorker ? St().then(function () {\n        return t.serviceWorker.ready;\n      }).then(function (t) {\n        return t.active || null;\n      }).s(function () {\n        return null;\n      }) : St(null)).then(function (t) {\n        (r.h = t) && (r.g = new xs(new Ms(t)), Ls(r.g, \"ping\", null, !0).then(function (t) {\n          t[0].fulfilled && U(t[0].value, \"keyChanged\") && (r.u = !0);\n        }).s(function () {}));\n      });\n    }\n\n    function qs(i) {\n      return new gt(function (e, n) {\n        var t = i.l.open(\"firebaseLocalStorageDb\", 1);\n        t.onerror = function (t) {\n          try {\n            t.preventDefault();\n          } catch (t) {}\n\n          n(Error(t.target.error));\n        }, t.onupgradeneeded = function (t) {\n          t = t.target.result;\n\n          try {\n            t.createObjectStore(\"firebaseLocalStorage\", {\n              keyPath: \"fbase_key\"\n            });\n          } catch (t) {\n            n(t);\n          }\n        }, t.onsuccess = function (t) {\n          var r;\n          (t = t.target.result).objectStoreNames.contains(\"firebaseLocalStorage\") ? e(t) : (r = i, new gt(function (t, e) {\n            var n = r.l.deleteDatabase(\"firebaseLocalStorageDb\");\n            n.onsuccess = function () {\n              t();\n            }, n.onerror = function (t) {\n              e(Error(t.target.error));\n            };\n          })).then(function () {\n            return qs(i);\n          }).then(function (t) {\n            e(t);\n          }).s(function (t) {\n            n(t);\n          });\n        };\n      });\n    }\n\n    function Vs(t) {\n      return t.o || (t.o = qs(t)), t.o;\n    }\n\n    function Bs() {\n      try {\n        return !!l.indexedDB;\n      } catch (t) {\n        return !1;\n      }\n    }\n\n    function js(t) {\n      return t.objectStore(\"firebaseLocalStorage\");\n    }\n\n    function Ws(t, e) {\n      return t.transaction([\"firebaseLocalStorage\"], e ? \"readwrite\" : \"readonly\");\n    }\n\n    function Ks(t) {\n      return new gt(function (e, n) {\n        t.onsuccess = function (t) {\n          t && t.target ? e(t.target.result) : e();\n        }, t.onerror = function (t) {\n          n(t.target.error);\n        };\n      });\n    }\n\n    function Qs(t, e) {\n      return t.g && t.h && ((n = l.navigator) && n.serviceWorker && n.serviceWorker.controller || null) === t.h ? Ls(t.g, \"keyChanged\", {\n        key: e\n      }, t.u).then(function () {}).s(function () {}) : St();\n      var n;\n    }\n\n    function Hs(r) {\n      return Vs(r).then(function (t) {\n        var i = js(Ws(t, !1));\n        return i.getAll ? Ks(i.getAll()) : new gt(function (e, n) {\n          var r = [],\n              t = i.openCursor();\n          t.onsuccess = function (t) {\n            (t = t.target.result) ? (r.push(t.value), t.continue()) : e(r);\n          }, t.onerror = function (t) {\n            n(t.target.error);\n          };\n        });\n      }).then(function (t) {\n        var e = {},\n            n = [];\n\n        if (0 == r.b) {\n          for (n = 0; n < t.length; n++) e[t[n].fbase_key] = t[n].value;\n\n          n = function t(e, n) {\n            var r,\n                i = [];\n\n            for (r in e) r in n ? typeof e[r] != typeof n[r] ? i.push(r) : \"object\" == typeof e[r] && null != e[r] && null != n[r] ? 0 < t(e[r], n[r]).length && i.push(r) : e[r] !== n[r] && i.push(r) : i.push(r);\n\n            for (r in n) r in e || i.push(r);\n\n            return i;\n          }(r.c, e), r.c = e;\n        }\n\n        return n;\n      });\n    }\n\n    function Gs(t) {\n      t.i && t.i.cancel(\"STOP_EVENT\"), t.f && (clearTimeout(t.f), t.f = null);\n    }\n\n    function zs(t) {\n      var r = this,\n          i = null;\n      this.a = [], this.type = \"indexedDB\", this.c = t, this.b = St().then(function () {\n        if (Bs()) {\n          var e = wr(),\n              n = \"__sak\" + e;\n          return Os || (Os = new Us()), (i = Os).set(n, e).then(function () {\n            return i.get(n);\n          }).then(function (t) {\n            if (t !== e) throw Error(\"indexedDB not supported!\");\n            return i.P(n);\n          }).then(function () {\n            return i;\n          }).s(function () {\n            return r.c;\n          });\n        }\n\n        return r.c;\n      }).then(function (t) {\n        return r.type = t.type, t.Y(function (e) {\n          x(r.a, function (t) {\n            t(e);\n          });\n        }), t;\n      });\n    }\n\n    function Ys() {\n      this.a = {}, this.type = \"inMemory\";\n    }\n\n    function Xs() {\n      if (!function () {\n        var t = \"Node\" == rr();\n        if (!(t = Js() || t && Hh.INTERNAL.node && Hh.INTERNAL.node.localStorage)) return !1;\n\n        try {\n          return t.setItem(\"__sak\", \"1\"), t.removeItem(\"__sak\"), !0;\n        } catch (t) {\n          return !1;\n        }\n      }()) {\n        if (\"Node\" == rr()) throw new Kr(\"internal-error\", \"The LocalStorage compatibility library was not found.\");\n        throw new Kr(\"web-storage-unsupported\");\n      }\n\n      this.a = Js() || Hh.INTERNAL.node.localStorage, this.type = \"localStorage\";\n    }\n\n    function Js() {\n      try {\n        var t = l.localStorage,\n            e = wr();\n        return t && (t.setItem(e, \"1\"), t.removeItem(e)), t;\n      } catch (t) {\n        return null;\n      }\n    }\n\n    function $s() {\n      this.type = \"nullStorage\";\n    }\n\n    function Zs() {\n      if (!function () {\n        var t = \"Node\" == rr();\n        if (!(t = tu() || t && Hh.INTERNAL.node && Hh.INTERNAL.node.sessionStorage)) return !1;\n\n        try {\n          return t.setItem(\"__sak\", \"1\"), t.removeItem(\"__sak\"), !0;\n        } catch (t) {\n          return !1;\n        }\n      }()) {\n        if (\"Node\" == rr()) throw new Kr(\"internal-error\", \"The SessionStorage compatibility library was not found.\");\n        throw new Kr(\"web-storage-unsupported\");\n      }\n\n      this.a = tu() || Hh.INTERNAL.node.sessionStorage, this.type = \"sessionStorage\";\n    }\n\n    function tu() {\n      try {\n        var t = l.sessionStorage,\n            e = wr();\n        return t && (t.setItem(e, \"1\"), t.removeItem(e)), t;\n      } catch (t) {\n        return null;\n      }\n    }\n\n    function eu() {\n      var t = {};\n      t.Browser = iu, t.Node = ou, t.ReactNative = au, t.Worker = su, this.a = t[rr()];\n    }\n\n    Rs.prototype.f = function (n) {\n      var r = n.data.eventType,\n          i = n.data.eventId,\n          t = this.a[r];\n\n      if (t && 0 < t.length) {\n        n.ports[0].postMessage({\n          status: \"ack\",\n          eventId: i,\n          eventType: r,\n          response: null\n        });\n        var e = [];\n        x(t, function (t) {\n          e.push(St().then(function () {\n            return t(n.origin, n.data.data);\n          }));\n        }), Nt(e).then(function (t) {\n          var e = [];\n          x(t, function (t) {\n            e.push({\n              fulfilled: t.Eb,\n              value: t.value,\n              reason: t.reason ? t.reason.message : void 0\n            });\n          }), x(e, function (t) {\n            for (var e in t) void 0 === t[e] && delete t[e];\n          }), n.ports[0].postMessage({\n            status: \"done\",\n            eventId: i,\n            eventType: r,\n            response: e\n          });\n        });\n      }\n    }, Rs.prototype.subscribe = function (t, e) {\n      it(this.a) && this.b.addEventListener(\"message\", this.c), void 0 === this.a[t] && (this.a[t] = []), this.a[t].push(e);\n    }, Rs.prototype.unsubscribe = function (t, e) {\n      void 0 !== this.a[t] && e ? (V(this.a[t], function (t) {\n        return t == e;\n      }), 0 == this.a[t].length && delete this.a[t]) : e || delete this.a[t], it(this.a) && this.b.removeEventListener(\"message\", this.c);\n    }, Ms.prototype.postMessage = function (t, e) {\n      this.a.postMessage(t, e);\n    }, xs.prototype.close = function () {\n      for (; 0 < this.a.length;) Fs(this, this.a[0]);\n\n      this.b = !0;\n    }, (t = Us.prototype).set = function (n, r) {\n      var i,\n          o = !1,\n          a = this;\n      return Vs(this).then(function (t) {\n        return Ks((t = js(Ws(i = t, !0))).get(n));\n      }).then(function (t) {\n        var e = js(Ws(i, !0));\n        return t ? (t.value = r, Ks(e.put(t))) : (a.b++, o = !0, (t = {}).fbase_key = n, t.value = r, Ks(e.add(t)));\n      }).then(function () {\n        return a.c[n] = r, Qs(a, n);\n      }).ia(function () {\n        o && a.b--;\n      });\n    }, t.get = function (e) {\n      return Vs(this).then(function (t) {\n        return Ks(js(Ws(t, !1)).get(e));\n      }).then(function (t) {\n        return t && t.value;\n      });\n    }, t.P = function (e) {\n      var n = !1,\n          r = this;\n      return Vs(this).then(function (t) {\n        return n = !0, r.b++, Ks(js(Ws(t, !0)).delete(e));\n      }).then(function () {\n        return delete r.c[e], Qs(r, e);\n      }).ia(function () {\n        n && r.b--;\n      });\n    }, t.Y = function (t) {\n      var n;\n      0 == this.a.length && (Gs(n = this), function e() {\n        n.f = setTimeout(function () {\n          n.i = Hs(n).then(function (e) {\n            0 < e.length && x(n.a, function (t) {\n              t(e);\n            });\n          }).then(function () {\n            e();\n          }).s(function (t) {\n            \"STOP_EVENT\" != t.message && e();\n          });\n        }, 800);\n      }()), this.a.push(t);\n    }, t.ca = function (e) {\n      V(this.a, function (t) {\n        return t == e;\n      }), 0 == this.a.length && Gs(this);\n    }, (t = zs.prototype).get = function (e) {\n      return this.b.then(function (t) {\n        return t.get(e);\n      });\n    }, t.set = function (e, n) {\n      return this.b.then(function (t) {\n        return t.set(e, n);\n      });\n    }, t.P = function (e) {\n      return this.b.then(function (t) {\n        return t.P(e);\n      });\n    }, t.Y = function (t) {\n      this.a.push(t);\n    }, t.ca = function (e) {\n      V(this.a, function (t) {\n        return t == e;\n      });\n    }, (t = Ys.prototype).get = function (t) {\n      return St(this.a[t]);\n    }, t.set = function (t, e) {\n      return this.a[t] = e, St();\n    }, t.P = function (t) {\n      return delete this.a[t], St();\n    }, t.Y = function () {}, t.ca = function () {}, (t = Xs.prototype).get = function (t) {\n      var e = this;\n      return St().then(function () {\n        return br(e.a.getItem(t));\n      });\n    }, t.set = function (e, n) {\n      var r = this;\n      return St().then(function () {\n        var t = gr(n);\n        null === t ? r.P(e) : r.a.setItem(e, t);\n      });\n    }, t.P = function (t) {\n      var e = this;\n      return St().then(function () {\n        e.a.removeItem(t);\n      });\n    }, t.Y = function (t) {\n      l.window && we(l.window, \"storage\", t);\n    }, t.ca = function (t) {\n      l.window && Te(l.window, \"storage\", t);\n    }, (t = $s.prototype).get = function () {\n      return St(null);\n    }, t.set = function () {\n      return St();\n    }, t.P = function () {\n      return St();\n    }, t.Y = function () {}, t.ca = function () {}, (t = Zs.prototype).get = function (t) {\n      var e = this;\n      return St().then(function () {\n        return br(e.a.getItem(t));\n      });\n    }, t.set = function (e, n) {\n      var r = this;\n      return St().then(function () {\n        var t = gr(n);\n        null === t ? r.P(e) : r.a.setItem(e, t);\n      });\n    }, t.P = function (t) {\n      var e = this;\n      return St().then(function () {\n        e.a.removeItem(t);\n      });\n    }, t.Y = function () {}, t.ca = function () {};\n    var nu,\n        ru,\n        iu = {\n      B: Xs,\n      Ra: Zs\n    },\n        ou = {\n      B: Xs,\n      Ra: Zs\n    },\n        au = {\n      B: Ds,\n      Ra: $s\n    },\n        su = {\n      B: Xs,\n      Ra: $s\n    },\n        uu = {\n      Xc: \"local\",\n      NONE: \"none\",\n      Zc: \"session\"\n    };\n\n    function cu() {\n      var t = !(_r(hr()) || !er()),\n          e = mr(),\n          n = fr();\n      this.o = t, this.h = e, this.m = n, this.a = {}, nu || (nu = new eu()), t = nu;\n\n      try {\n        this.g = !Qn() && Cr() || !l.indexedDB ? new t.a.B() : new zs(nr() ? new Ys() : new t.a.B());\n      } catch (t) {\n        this.g = new Ys(), this.h = !0;\n      }\n\n      try {\n        this.i = new t.a.Ra();\n      } catch (t) {\n        this.i = new Ys();\n      }\n\n      this.l = new Ys(), this.f = _(this.Ob, this), this.b = {};\n    }\n\n    function hu() {\n      return ru || (ru = new cu()), ru;\n    }\n\n    function lu(t, e) {\n      switch (e) {\n        case \"session\":\n          return t.i;\n\n        case \"none\":\n          return t.l;\n\n        default:\n          return t.g;\n      }\n    }\n\n    function fu(t, e) {\n      return \"firebase:\" + t.name + (e ? \":\" + e : \"\");\n    }\n\n    function pu(t, e, n) {\n      return n = fu(e, n), \"local\" == e.B && (t.b[n] = null), lu(t, e.B).P(n);\n    }\n\n    function du(t) {\n      t.c && (clearInterval(t.c), t.c = null);\n    }\n\n    function yu(t) {\n      this.a = t, this.b = hu();\n    }\n\n    (t = cu.prototype).get = function (t, e) {\n      return lu(this, t.B).get(fu(t, e));\n    }, t.set = function (e, t, n) {\n      var r = fu(e, n),\n          i = this,\n          o = lu(this, e.B);\n      return o.set(r, t).then(function () {\n        return o.get(r);\n      }).then(function (t) {\n        \"local\" == e.B && (i.b[r] = t);\n      });\n    }, t.addListener = function (t, e, n) {\n      var r;\n      t = fu(t, e), this.m && (this.b[t] = l.localStorage.getItem(t)), it(this.a) && (lu(this, \"local\").Y(this.f), this.h || (Qn() || !Cr()) && l.indexedDB || !this.m || (du(r = this), r.c = setInterval(function () {\n        for (var t in r.a) {\n          var e = l.localStorage.getItem(t),\n              n = r.b[t];\n          e != n && (r.b[t] = e, e = new ce({\n            type: \"storage\",\n            key: t,\n            target: window,\n            oldValue: n,\n            newValue: e,\n            a: !0\n          }), r.Ob(e));\n        }\n      }, 1e3))), this.a[t] || (this.a[t] = []), this.a[t].push(n);\n    }, t.removeListener = function (t, e, n) {\n      t = fu(t, e), this.a[t] && (V(this.a[t], function (t) {\n        return t == n;\n      }), 0 == this.a[t].length && delete this.a[t]), it(this.a) && (lu(this, \"local\").ca(this.f), du(this));\n    }, t.Ob = function (t) {\n      if (t && t.f) {\n        var e = t.a.key;\n        if (null == e) for (var n in this.a) {\n          var r = this.b[n];\n          void 0 === r && (r = null);\n          var i = l.localStorage.getItem(n);\n          i !== r && (this.b[n] = i, this.Xa(n));\n        } else if (0 == e.indexOf(\"firebase:\") && this.a[e]) {\n          if (void 0 !== t.a.a ? lu(this, \"local\").ca(this.f) : du(this), this.o) if (n = l.localStorage.getItem(e), (r = t.a.newValue) !== n) null !== r ? l.localStorage.setItem(e, r) : l.localStorage.removeItem(e);else if (this.b[e] === r && void 0 === t.a.a) return;\n          var o = this;\n          n = function () {\n            void 0 === t.a.a && o.b[e] === l.localStorage.getItem(e) || (o.b[e] = l.localStorage.getItem(e), o.Xa(e));\n          }, Qt && te && 10 == te && l.localStorage.getItem(e) !== t.a.newValue && t.a.newValue !== t.a.oldValue ? setTimeout(n, 10) : n();\n        }\n      } else x(t, _(this.Xa, this));\n    }, t.Xa = function (t) {\n      this.a[t] && x(this.a[t], function (t) {\n        t();\n      });\n    };\n    var mu,\n        gu = {\n      name: \"authEvent\",\n      B: \"local\"\n    };\n\n    function vu() {\n      this.a = hu();\n    }\n\n    function bu(t, e) {\n      this.b = wu, this.f = l.Uint8Array ? new Uint8Array(this.b) : Array(this.b), this.g = this.c = 0, this.a = [], this.i = t, this.h = e, this.m = l.Int32Array ? new Int32Array(64) : Array(64), void 0 !== mu || (mu = l.Int32Array ? new Int32Array(Nu) : Nu), this.reset();\n    }\n\n    S(bu, function () {\n      this.b = -1;\n    });\n\n    for (var wu = 64, _u = wu - 1, Eu = [], Tu = 0; Tu < _u; Tu++) Eu[Tu] = 0;\n\n    var Su = B(128, Eu);\n\n    function Iu(t) {\n      for (var e = t.f, n = t.m, r = 0, i = 0; i < e.length;) n[r++] = e[i] << 24 | e[i + 1] << 16 | e[i + 2] << 8 | e[i + 3], i = 4 * r;\n\n      for (e = 16; e < 64; e++) {\n        i = 0 | n[e - 15], r = 0 | n[e - 2];\n        var o = (0 | n[e - 16]) + ((i >>> 7 | i << 25) ^ (i >>> 18 | i << 14) ^ i >>> 3) | 0,\n            a = (0 | n[e - 7]) + ((r >>> 17 | r << 15) ^ (r >>> 19 | r << 13) ^ r >>> 10) | 0;\n        n[e] = o + a | 0;\n      }\n\n      r = 0 | t.a[0], i = 0 | t.a[1];\n      var s = 0 | t.a[2],\n          u = 0 | t.a[3],\n          c = 0 | t.a[4],\n          h = 0 | t.a[5],\n          l = 0 | t.a[6];\n\n      for (o = 0 | t.a[7], e = 0; e < 64; e++) {\n        var f = ((r >>> 2 | r << 30) ^ (r >>> 13 | r << 19) ^ (r >>> 22 | r << 10)) + (r & i ^ r & s ^ i & s) | 0;\n        a = (o = o + ((c >>> 6 | c << 26) ^ (c >>> 11 | c << 21) ^ (c >>> 25 | c << 7)) | 0) + ((a = (a = c & h ^ ~c & l) + (0 | mu[e]) | 0) + (0 | n[e]) | 0) | 0, o = l, l = h, h = c, c = u + a | 0, u = s, s = i, i = r, r = a + f | 0;\n      }\n\n      t.a[0] = t.a[0] + r | 0, t.a[1] = t.a[1] + i | 0, t.a[2] = t.a[2] + s | 0, t.a[3] = t.a[3] + u | 0, t.a[4] = t.a[4] + c | 0, t.a[5] = t.a[5] + h | 0, t.a[6] = t.a[6] + l | 0, t.a[7] = t.a[7] + o | 0;\n    }\n\n    function Cu(t, e, n) {\n      void 0 === n && (n = e.length);\n      var r = 0,\n          i = t.c;\n      if (h(e)) for (; r < n;) t.f[i++] = e.charCodeAt(r++), i == t.b && (Iu(t), i = 0);else {\n        if (!m(e)) throw Error(\"message must be string or array\");\n\n        for (; r < n;) {\n          var o = e[r++];\n          if (!(\"number\" == typeof o && 0 <= o && o <= 255 && o == (0 | o))) throw Error(\"message must be a byte array\");\n          t.f[i++] = o, i == t.b && (Iu(t), i = 0);\n        }\n      }\n      t.c = i, t.g += n;\n    }\n\n    bu.prototype.reset = function () {\n      this.g = this.c = 0, this.a = l.Int32Array ? new Int32Array(this.h) : j(this.h);\n    };\n\n    var Nu = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298];\n\n    function Au() {\n      bu.call(this, 8, ku);\n    }\n\n    S(Au, bu);\n    var ku = [1779033703, 3144134277, 1013904242, 2773480762, 1359893119, 2600822924, 528734635, 1541459225];\n\n    function Du(t, e, n, r, i) {\n      this.l = t, this.i = e, this.m = n, this.o = r || null, this.u = i || null, this.h = e + \":\" + n, this.v = new vu(), this.g = new yu(this.h), this.f = null, this.b = [], this.a = this.c = null;\n    }\n\n    function Ru(t) {\n      return new Kr(\"invalid-cordova-configuration\", t);\n    }\n\n    function Ou(t) {\n      var e = new Au();\n      Cu(e, t), t = [];\n      var n = 8 * e.g;\n      e.c < 56 ? Cu(e, Su, 56 - e.c) : Cu(e, Su, e.b - (e.c - 56));\n\n      for (var r = 63; 56 <= r; r--) e.f[r] = 255 & n, n /= 256;\n\n      for (Iu(e), r = n = 0; r < e.i; r++) for (var i = 24; 0 <= i; i -= 8) t[n++] = e.a[r] >> i & 255;\n\n      return L(t, function (t) {\n        return 1 < (t = t.toString(16)).length ? t : \"0\" + t;\n      }).join(\"\");\n    }\n\n    function Pu(t, e) {\n      for (var n = 0; n < t.b.length; n++) try {\n        t.b[n](e);\n      } catch (t) {}\n    }\n\n    function Mu(r) {\n      return r.f || (r.f = r.ga().then(function () {\n        return new gt(function (n) {\n          r.wa(function t(e) {\n            return n(e), r.La(t), !1;\n          }), function (i) {\n            function e(r) {\n              t = !0, n && n.cancel(), xu(i).then(function (t) {\n                var e = o;\n\n                if (t && r && r.url) {\n                  var n = null;\n                  -1 != (e = Ai(r.url)).indexOf(\"/__/auth/callback\") && (n = (n = \"object\" == typeof (n = br(Ye(n = Xe(e), \"firebaseError\") || null)) ? Qr(n) : null) ? new ao(t.c, t.b, null, null, n) : new ao(t.c, t.b, e, t.f)), e = n || o;\n                }\n\n                Pu(i, e);\n              });\n            }\n\n            var o = new ao(\"unknown\", null, null, null, new Kr(\"no-auth-event\")),\n                t = !1,\n                n = Fe(500).then(function () {\n              return xu(i).then(function () {\n                t || Pu(i, o);\n              });\n            }),\n                r = l.handleOpenURL;\n            l.handleOpenURL = function (t) {\n              if (0 == t.toLowerCase().indexOf(lr(\"BuildInfo.packageName\", l).toLowerCase() + \"://\") && e({\n                url: t\n              }), \"function\" == typeof r) try {\n                r(t);\n              } catch (t) {\n                console.error(t);\n              }\n            }, ho || (ho = new uo()), ho.subscribe(e);\n          }(r);\n        });\n      })), r.f;\n    }\n\n    function xu(e) {\n      var t,\n          n = null;\n      return (t = e.g, t.b.get(gu, t.a).then(function (t) {\n        return so(t);\n      })).then(function (t) {\n        return n = t, pu((t = e.g).b, gu, t.a);\n      }).then(function () {\n        return n;\n      });\n    }\n\n    function Lu(t) {\n      this.a = t, this.b = hu();\n    }\n\n    (t = Du.prototype).ga = function () {\n      return this.za ? this.za : this.za = (tr(void 0) ? Zn().then(function () {\n        return new gt(function (t, e) {\n          var n = l.document,\n              r = setTimeout(function () {\n            e(Error(\"Cordova framework is not ready.\"));\n          }, 1e3);\n          n.addEventListener(\"deviceready\", function () {\n            clearTimeout(r), t();\n          }, !1);\n        });\n      }) : It(Error(\"Cordova must run in an Android or iOS file scheme.\"))).then(function () {\n        if (\"function\" != typeof lr(\"universalLinks.subscribe\", l)) throw Ru(\"cordova-universal-links-plugin-fix is not installed\");\n        if (void 0 === lr(\"BuildInfo.packageName\", l)) throw Ru(\"cordova-plugin-buildinfo is not installed\");\n        if (\"function\" != typeof lr(\"cordova.plugins.browsertab.openUrl\", l)) throw Ru(\"cordova-plugin-browsertab is not installed\");\n        if (\"function\" != typeof lr(\"cordova.InAppBrowser.open\", l)) throw Ru(\"cordova-plugin-inappbrowser is not installed\");\n      }, function () {\n        throw new Kr(\"cordova-not-ready\");\n      });\n    }, t.Ea = function (t, e) {\n      return e(new Kr(\"operation-not-supported-in-this-environment\")), St();\n    }, t.Db = function () {\n      return It(new Kr(\"operation-not-supported-in-this-environment\"));\n    }, t.Pb = function () {\n      return !1;\n    }, t.Mb = function () {\n      return !0;\n    }, t.Hb = function () {\n      return !0;\n    }, t.Ca = function (t, e, n) {\n      if (this.c) return It(new Kr(\"redirect-operation-pending\"));\n      var r = this,\n          i = l.document,\n          o = null,\n          a = null,\n          s = null,\n          u = null;\n      return this.c = St().then(function () {\n        return oo(e), Mu(r);\n      }).then(function () {\n        return function (n, t, e, r) {\n          var i = function () {\n            for (var t = 20, e = []; 0 < t;) e.push(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".charAt(Math.floor(62 * Math.random()))), t--;\n\n            return e.join(\"\");\n          }(),\n              o = new ao(t, r, null, i, new Kr(\"no-auth-event\")),\n              a = lr(\"BuildInfo.packageName\", l);\n\n          if (\"string\" != typeof a) throw new Kr(\"invalid-cordova-configuration\");\n          var s = lr(\"BuildInfo.displayName\", l),\n              u = {};\n          if (hr().toLowerCase().match(/iphone|ipad|ipod/)) u.ibi = a;else {\n            if (!hr().toLowerCase().match(/android/)) return It(new Kr(\"operation-not-supported-in-this-environment\"));\n            u.apn = a;\n          }\n          s && (u.appDisplayName = s), i = Ou(i), u.sessionId = i;\n          var c = ks(n.l, n.i, n.m, t, e, null, r, n.o, u, n.u);\n          return n.ga().then(function () {\n            var t = n.h;\n            return n.v.a.set(gu, o.w(), t);\n          }).then(function () {\n            var t = lr(\"cordova.plugins.browsertab.isAvailable\", l);\n            if (\"function\" != typeof t) throw new Kr(\"invalid-cordova-configuration\");\n            var e = null;\n            t(function (t) {\n              if (t) {\n                if (\"function\" != typeof (e = lr(\"cordova.plugins.browsertab.openUrl\", l))) throw new Kr(\"invalid-cordova-configuration\");\n                e(c);\n              } else {\n                if (\"function\" != typeof (e = lr(\"cordova.InAppBrowser.open\", l))) throw new Kr(\"invalid-cordova-configuration\");\n                t = hr(), n.a = e(c, t.match(/(iPad|iPhone|iPod).*OS 7_\\d/i) || t.match(/(iPad|iPhone|iPod).*OS 8_\\d/i) ? \"_blank\" : \"_system\", \"location=yes\");\n              }\n            });\n          });\n        }(r, t, e, n);\n      }).then(function () {\n        return new gt(function (e, t) {\n          a = function () {\n            var t = lr(\"cordova.plugins.browsertab.close\", l);\n            return e(), \"function\" == typeof t && t(), r.a && \"function\" == typeof r.a.close && (r.a.close(), r.a = null), !1;\n          }, r.wa(a), s = function () {\n            o || (o = Fe(2e3).then(function () {\n              t(new Kr(\"redirect-cancelled-by-user\"));\n            }));\n          }, u = function () {\n            Sr() && s();\n          }, i.addEventListener(\"resume\", s, !1), hr().toLowerCase().match(/android/) || i.addEventListener(\"visibilitychange\", u, !1);\n        }).s(function (t) {\n          return xu(r).then(function () {\n            throw t;\n          });\n        });\n      }).ia(function () {\n        s && i.removeEventListener(\"resume\", s, !1), u && i.removeEventListener(\"visibilitychange\", u, !1), o && o.cancel(), a && r.La(a), r.c = null;\n      });\n    }, t.wa = function (e) {\n      this.b.push(e), Mu(this).s(function (t) {\n        \"auth/invalid-cordova-configuration\" === t.code && (t = new ao(\"unknown\", null, null, null, new Kr(\"no-auth-event\")), e(t));\n      });\n    }, t.La = function (e) {\n      V(this.b, function (t) {\n        return t == e;\n      });\n    };\n    var Fu = {\n      name: \"pendingRedirect\",\n      B: \"session\"\n    };\n\n    function Uu(t) {\n      return pu(t.b, Fu, t.a);\n    }\n\n    function qu(t, e, n) {\n      this.i = {}, this.u = 0, this.A = t, this.l = e, this.o = n, this.h = [], this.f = !1, this.m = _(this.bb, this), this.b = new Yu(), this.v = new Zu(), this.g = new Lu(this.l + \":\" + this.o), this.c = {}, this.c.unknown = this.b, this.c.signInViaRedirect = this.b, this.c.linkViaRedirect = this.b, this.c.reauthViaRedirect = this.b, this.c.signInViaPopup = this.v, this.c.linkViaPopup = this.v, this.c.reauthViaPopup = this.v, this.a = Vu(this.A, this.l, this.o, li);\n    }\n\n    function Vu(t, e, n, r) {\n      var i = Hh.SDK_VERSION || null;\n      return tr() ? new Du(t, e, n, i, r) : new Is(t, e, n, i, r);\n    }\n\n    function Bu(e) {\n      e.f || (e.f = !0, e.a.wa(e.m));\n      var n = e.a;\n      return e.a.ga().s(function (t) {\n        throw e.a == n && e.reset(), t;\n      });\n    }\n\n    function ju(n) {\n      n.a.Mb() && Bu(n).s(function (t) {\n        var e = new ao(\"unknown\", null, null, null, new Kr(\"operation-not-supported-in-this-environment\"));\n        Hu(t) && n.bb(e);\n      }), n.a.Hb() || Xu(n.b);\n    }\n\n    (t = qu.prototype).reset = function () {\n      this.f = !1, this.a.La(this.m), this.a = Vu(this.A, this.l, this.o), this.i = {};\n    }, t.Ya = function () {\n      this.b.Ya();\n    }, t.subscribe = function (t) {\n      if (U(this.h, t) || this.h.push(t), !this.f) {\n        var n = this;\n        (e = this.g, e.b.get(Fu, e.a).then(function (t) {\n          return \"pending\" == t;\n        })).then(function (t) {\n          t ? Uu(n.g).then(function () {\n            Bu(n).s(function (t) {\n              var e = new ao(\"unknown\", null, null, null, new Kr(\"operation-not-supported-in-this-environment\"));\n              Hu(t) && n.bb(e);\n            });\n          }) : ju(n);\n        }).s(function () {\n          ju(n);\n        });\n      }\n\n      var e;\n    }, t.unsubscribe = function (e) {\n      V(this.h, function (t) {\n        return t == e;\n      });\n    }, t.bb = function (t) {\n      if (!t) throw new Kr(\"invalid-auth-event\");\n      if (6e5 <= T() - this.u && (this.i = {}, this.u = 0), t && t.getUid() && this.i.hasOwnProperty(t.getUid())) return !1;\n\n      for (var e = !1, n = 0; n < this.h.length; n++) {\n        var r = this.h[n];\n\n        if (r.xb(t.c, t.b)) {\n          (e = this.c[t.c]) && (e.h(t, r), t && (t.f || t.b) && (this.i[t.getUid()] = !0, this.u = T())), e = !0;\n          break;\n        }\n      }\n\n      return Xu(this.b), e;\n    };\n    var Wu = new Tr(2e3, 1e4),\n        Ku = new Tr(3e4, 6e4);\n\n    function Qu(t, e, n, r, i, o) {\n      return t.a.Db(e, n, r, function () {\n        t.f || (t.f = !0, t.a.wa(t.m));\n      }, function () {\n        t.reset();\n      }, i, o);\n    }\n\n    function Hu(t) {\n      return !(!t || \"auth/cordova-not-ready\" != t.code);\n    }\n\n    qu.prototype.fa = function () {\n      return this.b.fa();\n    }, qu.prototype.Ca = function (t, e, n) {\n      var r,\n          i,\n          o = this;\n      return (i = this.g, i.b.set(Fu, \"pending\", i.a)).then(function () {\n        return o.a.Ca(t, e, n).s(function (t) {\n          if (Hu(t)) throw new Kr(\"operation-not-supported-in-this-environment\");\n          return r = t, Uu(o.g).then(function () {\n            throw r;\n          });\n        }).then(function () {\n          return o.a.Pb() ? new gt(function () {}) : Uu(o.g).then(function () {\n            return o.fa();\n          }).then(function () {}).s(function () {});\n        });\n      });\n    }, qu.prototype.Ea = function (e, n, t, r) {\n      return this.a.Ea(t, function (t) {\n        e.ha(n, null, t, r);\n      }, Wu.get());\n    };\n    var Gu = {};\n\n    function zu(t, e, n) {\n      var r = e + \":\" + n;\n      return Gu[r] || (Gu[r] = new qu(t, e, n)), Gu[r];\n    }\n\n    function Yu() {\n      this.b = null, this.f = [], this.c = [], this.a = null, this.i = this.g = !1;\n    }\n\n    function Xu(t) {\n      t.g || (t.g = !0, $u(t, !1, null, null));\n    }\n\n    function Ju(t, e) {\n      if (t.b = function () {\n        return St(e);\n      }, t.f.length) for (var n = 0; n < t.f.length; n++) t.f[n](e);\n    }\n\n    function $u(t, e, n, r) {\n      e ? r ? function (t, e) {\n        if (t.b = function () {\n          return It(e);\n        }, t.c.length) for (var n = 0; n < t.c.length; n++) t.c[n](e);\n      }(t, r) : Ju(t, n) : Ju(t, {\n        user: null\n      }), t.f = [], t.c = [];\n    }\n\n    function Zu() {}\n\n    function tc() {\n      this.ub = !1, Object.defineProperty(this, \"appVerificationDisabled\", {\n        get: function () {\n          return this.ub;\n        },\n        set: function (t) {\n          this.ub = t;\n        },\n        enumerable: !1\n      });\n    }\n\n    function ec(t, e) {\n      this.a = e, Rr(this, \"verificationId\", t);\n    }\n\n    function nc(t, e, n, r) {\n      return new no(t).Ua(e, n).then(function (t) {\n        return new ec(t, r);\n      });\n    }\n\n    function rc(t) {\n      var e = hi(t);\n      if (!(e && e.exp && e.auth_time && e.iat)) throw new Kr(\"internal-error\", \"An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.\");\n      Or(this, {\n        token: t,\n        expirationTime: Ir(1e3 * e.exp),\n        authTime: Ir(1e3 * e.auth_time),\n        issuedAtTime: Ir(1e3 * e.iat),\n        signInProvider: e.firebase && e.firebase.sign_in_provider ? e.firebase.sign_in_provider : null,\n        claims: e\n      });\n    }\n\n    function ic(t, e, n) {\n      if (this.h = t, this.i = e, this.g = n, this.c = 3e4, this.f = 96e4, this.b = null, this.a = this.c, this.f < this.c) throw Error(\"Proactive refresh lower bound greater than upper bound!\");\n    }\n\n    function oc(t, e) {\n      return e ? (t.a = t.c, t.g()) : (e = t.a, t.a *= 2, t.a > t.f && (t.a = t.f), e);\n    }\n\n    function ac(t) {\n      this.f = t, this.b = this.a = null, this.c = 0;\n    }\n\n    function sc(t, e) {\n      var n = e[ba],\n          r = e.refreshToken;\n      e = uc(e.expiresIn), t.b = n, t.c = e, t.a = r;\n    }\n\n    function uc(t) {\n      return T() + 1e3 * parseInt(t, 10);\n    }\n\n    function cc(e, t) {\n      return (r = e.f, i = t, new gt(function (e, n) {\n        \"refresh_token\" == i.grant_type && i.refresh_token || \"authorization_code\" == i.grant_type && i.code ? Ca(r, r.i + \"?key=\" + encodeURIComponent(r.b), function (t) {\n          t ? t.error ? n(ms(t)) : t.access_token && t.refresh_token ? e(t) : n(new Kr(\"internal-error\")) : n(new Kr(\"network-request-failed\"));\n        }, \"POST\", cn(i).toString(), r.f, r.m.get()) : n(new Kr(\"internal-error\"));\n      })).then(function (t) {\n        return e.b = t.access_token, e.c = uc(t.expires_in), e.a = t.refresh_token, {\n          accessToken: e.b,\n          expirationTime: e.c,\n          refreshToken: e.a\n        };\n      }).s(function (t) {\n        throw \"auth/user-token-expired\" == t.code && (e.a = null), t;\n      });\n      var r, i;\n    }\n\n    function hc(t, e) {\n      this.a = t || null, this.b = e || null, Or(this, {\n        lastSignInTime: Ir(e || null),\n        creationTime: Ir(t || null)\n      });\n    }\n\n    function lc(t, e, n, r, i, o) {\n      Or(this, {\n        uid: t,\n        displayName: r || null,\n        photoURL: i || null,\n        email: n || null,\n        phoneNumber: o || null,\n        providerId: e\n      });\n    }\n\n    function fc(t, e) {\n      for (var n in ue.call(this, t), e) this[n] = e[n];\n    }\n\n    function pc(t, e, n) {\n      var r;\n      this.G = [], this.l = t.apiKey, this.o = t.appName, this.u = t.authDomain || null, t = Hh.SDK_VERSION ? cr(Hh.SDK_VERSION) : null, this.c = new ga(this.l, pi(li), t), this.h = new ac(this.c), wc(this, e[ba]), sc(this.h, e), Rr(this, \"refreshToken\", this.h.a), Tc(this, n || {}), Oe.call(this), this.I = !1, this.u && pr() && (this.a = zu(this.u, this.l, this.o)), this.N = [], this.i = null, this.A = (r = this, new ic(function () {\n        return r.F(!0);\n      }, function (t) {\n        return !(!t || \"auth/network-request-failed\" != t.code);\n      }, function () {\n        var t = r.h.c - T() - 3e5;\n        return 0 < t ? t : 0;\n      })), this.V = _(this.Ha, this);\n      var i = this;\n      this.ka = null, this.ta = function (t) {\n        i.pa(t.g);\n      }, this.X = null, this.O = [], this.sa = function (t) {\n        yc(i, t.c);\n      }, this.W = null;\n    }\n\n    function dc(t, e) {\n      t.X && Te(t.X, \"languageCodeChanged\", t.ta), (t.X = e) && we(e, \"languageCodeChanged\", t.ta);\n    }\n\n    function yc(t, e) {\n      t.O = e, Ia(t.c, Hh.SDK_VERSION ? cr(Hh.SDK_VERSION, t.O) : null);\n    }\n\n    function mc(t, e) {\n      t.W && Te(t.W, \"frameworkChanged\", t.sa), (t.W = e) && we(e, \"frameworkChanged\", t.sa);\n    }\n\n    function gc(e) {\n      try {\n        return Hh.app(e.o).auth();\n      } catch (t) {\n        throw new Kr(\"internal-error\", \"No firebase.auth.Auth instance is available for the Firebase App '\" + e.o + \"'!\");\n      }\n    }\n\n    function vc(t) {\n      t.D || t.A.b || (t.A.start(), Te(t, \"tokenChanged\", t.V), we(t, \"tokenChanged\", t.V));\n    }\n\n    function bc(t) {\n      Te(t, \"tokenChanged\", t.V), t.A.stop();\n    }\n\n    function wc(t, e) {\n      t.ra = e, Rr(t, \"_lat\", e);\n    }\n\n    function _c(t) {\n      for (var e = [], n = 0; n < t.N.length; n++) e.push(t.N[n](t));\n\n      return Nt(e).then(function () {\n        return t;\n      });\n    }\n\n    function Ec(t) {\n      t.a && !t.I && (t.I = !0, t.a.subscribe(t));\n    }\n\n    function Tc(t, e) {\n      Or(t, {\n        uid: e.uid,\n        displayName: e.displayName || null,\n        photoURL: e.photoURL || null,\n        email: e.email || null,\n        emailVerified: e.emailVerified || !1,\n        phoneNumber: e.phoneNumber || null,\n        isAnonymous: e.isAnonymous || !1,\n        metadata: new hc(e.createdAt, e.lastLoginAt),\n        providerData: []\n      });\n    }\n\n    function Sc() {}\n\n    function Ic(t) {\n      return St().then(function () {\n        if (t.D) throw new Kr(\"app-deleted\");\n      });\n    }\n\n    function Cc(t) {\n      return L(t.providerData, function (t) {\n        return t.providerId;\n      });\n    }\n\n    function Nc(t, e) {\n      e && (Ac(t, e.providerId), t.providerData.push(e));\n    }\n\n    function Ac(t, e) {\n      V(t.providerData, function (t) {\n        return t.providerId == e;\n      });\n    }\n\n    function kc(t, e, n) {\n      (\"uid\" != e || n) && t.hasOwnProperty(e) && Rr(t, e, n);\n    }\n\n    function Dc(e, t) {\n      var n, r, i;\n      e != t && (Or(e, {\n        uid: t.uid,\n        displayName: t.displayName,\n        photoURL: t.photoURL,\n        email: t.email,\n        emailVerified: t.emailVerified,\n        phoneNumber: t.phoneNumber,\n        isAnonymous: t.isAnonymous,\n        providerData: []\n      }), t.metadata ? Rr(e, \"metadata\", new hc((i = t.metadata).a, i.b)) : Rr(e, \"metadata\", new hc()), x(t.providerData, function (t) {\n        Nc(e, t);\n      }), n = e.h, r = t.h, n.b = r.b, n.a = r.a, n.c = r.c, Rr(e, \"refreshToken\", e.h.a));\n    }\n\n    function Rc(i) {\n      return i.F().then(function (t) {\n        var e,\n            n,\n            r = i.isAnonymous;\n        return (e = i, n = t, ds(e.c, Ya, {\n          idToken: n\n        }).then(_(e.xc, e))).then(function () {\n          return r || kc(i, \"isAnonymous\", !1), t;\n        });\n      });\n    }\n\n    function Oc(t, e) {\n      e[ba] && t.ra != e[ba] && (sc(t.h, e), t.dispatchEvent(new fc(\"tokenChanged\")), wc(t, e[ba]), kc(t, \"refreshToken\", t.h.a));\n    }\n\n    function Pc(t, e) {\n      return Rc(t).then(function () {\n        if (U(Cc(t), e)) return _c(t).then(function () {\n          throw new Kr(\"provider-already-linked\");\n        });\n      });\n    }\n\n    function Mc(t, e, n) {\n      return Pr({\n        user: t,\n        credential: io(e),\n        additionalUserInfo: e = vi(e),\n        operationType: n\n      });\n    }\n\n    function xc(t, e) {\n      return Oc(t, e), t.reload().then(function () {\n        return t;\n      });\n    }\n\n    function Lc(n, r, t, e, i) {\n      if (!pr()) return It(new Kr(\"operation-not-supported-in-this-environment\"));\n      if (n.i && !i) return It(n.i);\n      var o = gi(t.providerId),\n          a = wr(n.uid + \":::\"),\n          s = null;\n      (!mr() || er()) && n.u && t.isOAuthProvider && (s = ks(n.u, n.l, n.o, r, t, null, a, Hh.SDK_VERSION || null));\n      var u = Xn(s, o && o.Ba, o && o.Aa);\n      return e = e().then(function () {\n        if (Uc(n), !i) return n.F().then(function () {});\n      }).then(function () {\n        return Qu(n.a, u, r, t, a, !!s);\n      }).then(function () {\n        return new gt(function (t, e) {\n          n.ha(r, null, new Kr(\"cancelled-popup-request\"), n.g || null), n.f = t, n.v = e, n.g = a, n.b = n.a.Ea(n, r, u, a);\n        });\n      }).then(function (t) {\n        return u && Yn(u), t ? Pr(t) : null;\n      }).s(function (t) {\n        throw u && Yn(u), t;\n      }), qc(n, e, i);\n    }\n\n    function Fc(e, t, n, r, i) {\n      if (!pr()) return It(new Kr(\"operation-not-supported-in-this-environment\"));\n      if (e.i && !i) return It(e.i);\n      var o = null,\n          a = wr(e.uid + \":::\");\n      return r = r().then(function () {\n        if (Uc(e), !i) return e.F().then(function () {});\n      }).then(function () {\n        return e.aa = a, _c(e);\n      }).then(function (t) {\n        return e.ba && (t = (t = e.ba).b.set(jc, e.w(), t.a)), t;\n      }).then(function () {\n        return e.a.Ca(t, n, a);\n      }).s(function (t) {\n        if (o = t, e.ba) return Wc(e.ba);\n        throw o;\n      }).then(function () {\n        if (o) throw o;\n      }), qc(e, r, i);\n    }\n\n    function Uc(t) {\n      if (!t.a || !t.I) {\n        if (t.a && !t.I) throw new Kr(\"internal-error\");\n        throw new Kr(\"auth-domain-config-required\");\n      }\n    }\n\n    function qc(t, e, n) {\n      var r,\n          i,\n          o,\n          a = (i = e, o = n, (r = t).i && !o ? (i.cancel(), It(r.i)) : i.s(function (t) {\n        throw !t || \"auth/user-disabled\" != t.code && \"auth/user-token-expired\" != t.code || (r.i || r.dispatchEvent(new fc(\"userInvalidated\")), r.i = t), t;\n      }));\n      return t.G.push(a), a.ia(function () {\n        q(t.G, a);\n      }), a;\n    }\n\n    function Vc(t) {\n      if (!t.apiKey) return null;\n      var e = {\n        apiKey: t.apiKey,\n        authDomain: t.authDomain,\n        appName: t.appName\n      },\n          n = {};\n      if (!(t.stsTokenManager && t.stsTokenManager.accessToken && t.stsTokenManager.expirationTime)) return null;\n      n[ba] = t.stsTokenManager.accessToken, n.refreshToken = t.stsTokenManager.refreshToken || null, n.expiresIn = (t.stsTokenManager.expirationTime - T()) / 1e3;\n      var r = new pc(e, n, t);\n      return t.providerData && x(t.providerData, function (t) {\n        t && Nc(r, Pr(t));\n      }), t.redirectEventId && (r.aa = t.redirectEventId), r;\n    }\n\n    function Bc(t) {\n      this.a = t, this.b = hu();\n    }\n\n    Yu.prototype.reset = function () {\n      this.b = null, this.a && (this.a.cancel(), this.a = null);\n    }, Yu.prototype.h = function (t, e) {\n      if (t) {\n        this.reset(), this.g = !0;\n        var n = t.c,\n            r = t.b,\n            i = t.a && \"auth/web-storage-unsupported\" == t.a.code,\n            o = t.a && \"auth/operation-not-supported-in-this-environment\" == t.a.code;\n        this.i = !(!i && !o), \"unknown\" != n || i || o ? t.a ? ($u(this, !0, null, t.a), St()) : e.xa(n, r) ? function (e, t, n) {\n          n = n.xa(t.c, t.b);\n          var r = t.g,\n              i = t.f,\n              o = t.h,\n              a = !!t.c.match(/Redirect$/);\n          n(r, i, o).then(function (t) {\n            $u(e, a, t, null);\n          }).s(function (t) {\n            $u(e, a, null, t);\n          });\n        }(this, t, e) : It(new Kr(\"invalid-auth-event\")) : ($u(this, !1, null, null), St());\n      } else It(new Kr(\"invalid-auth-event\"));\n    }, Yu.prototype.Ya = function () {\n      this.g && !this.i && $u(this, !1, null, null);\n    }, Yu.prototype.fa = function () {\n      var i = this;\n      return new gt(function (t, e) {\n        var n, r;\n        i.b ? i.b().then(t, e) : (i.f.push(t), i.c.push(e), n = i, r = new Kr(\"timeout\"), n.a && n.a.cancel(), n.a = Fe(Ku.get()).then(function () {\n          n.b || (n.g = !0, $u(n, !0, null, r));\n        }));\n      });\n    }, Zu.prototype.h = function (t, e) {\n      if (t) {\n        var n = t.c,\n            r = t.b;\n        t.a ? (e.ha(t.c, null, t.a, t.b), St()) : e.xa(n, r) ? (o = e, a = (i = t).b, s = i.c, o.xa(s, a)(i.g, i.f, i.h).then(function (t) {\n          o.ha(s, t, null, a);\n        }).s(function (t) {\n          o.ha(s, null, t, a);\n        })) : It(new Kr(\"invalid-auth-event\"));\n      } else It(new Kr(\"invalid-auth-event\"));\n\n      var i, o, a, s;\n    }, ec.prototype.confirm = function (t) {\n      return t = ro(this.verificationId, t), this.a(t);\n    }, ic.prototype.start = function () {\n      this.a = this.c, function e(n, t) {\n        n.stop();\n        n.b = Fe(oc(n, t)).then(function () {\n          return e = l.document, n = null, Sr() || !e ? St() : new gt(function (t) {\n            n = function () {\n              Sr() && (e.removeEventListener(\"visibilitychange\", n, !1), t());\n            }, e.addEventListener(\"visibilitychange\", n, !1);\n          }).s(function (t) {\n            throw e.removeEventListener(\"visibilitychange\", n, !1), t;\n          });\n          var e, n;\n        }).then(function () {\n          return n.h();\n        }).then(function () {\n          e(n, !0);\n        }).s(function (t) {\n          n.i(t) && e(n, !1);\n        });\n      }(this, !0);\n    }, ic.prototype.stop = function () {\n      this.b && (this.b.cancel(), this.b = null);\n    }, ac.prototype.w = function () {\n      return {\n        apiKey: this.f.b,\n        refreshToken: this.a,\n        accessToken: this.b,\n        expirationTime: this.c\n      };\n    }, ac.prototype.getToken = function (t) {\n      return t = !!t, this.b && !this.a ? It(new Kr(\"user-token-expired\")) : t || !this.b || T() > this.c - 3e4 ? this.a ? cc(this, {\n        grant_type: \"refresh_token\",\n        refresh_token: this.a\n      }) : St(null) : St({\n        accessToken: this.b,\n        expirationTime: this.c,\n        refreshToken: this.a\n      });\n    }, hc.prototype.w = function () {\n      return {\n        lastLoginAt: this.b,\n        createdAt: this.a\n      };\n    }, S(fc, ue), S(pc, Oe), pc.prototype.pa = function (t) {\n      this.ka = t, Sa(this.c, t);\n    }, pc.prototype.ea = function () {\n      return this.ka;\n    }, pc.prototype.ya = function () {\n      return j(this.O);\n    }, pc.prototype.Ha = function () {\n      this.A.b && (this.A.stop(), this.A.start());\n    }, Rr(pc.prototype, \"providerId\", \"firebase\"), (t = pc.prototype).reload = function () {\n      var t = this;\n      return qc(this, Ic(this).then(function () {\n        return Rc(t).then(function () {\n          return _c(t);\n        }).then(Sc);\n      }));\n    }, t.bc = function (t) {\n      return this.F(t).then(function (t) {\n        return new rc(t);\n      });\n    }, t.F = function (t) {\n      var e = this;\n      return qc(this, Ic(this).then(function () {\n        return e.h.getToken(t);\n      }).then(function (t) {\n        if (!t) throw new Kr(\"internal-error\");\n        return t.accessToken != e.ra && (wc(e, t.accessToken), e.dispatchEvent(new fc(\"tokenChanged\"))), kc(e, \"refreshToken\", t.refreshToken), t.accessToken;\n      }));\n    }, t.xc = function (t) {\n      if (!(t = t.users) || !t.length) throw new Kr(\"internal-error\");\n      Tc(this, {\n        uid: (t = t[0]).localId,\n        displayName: t.displayName,\n        photoURL: t.photoUrl,\n        email: t.email,\n        emailVerified: !!t.emailVerified,\n        phoneNumber: t.phoneNumber,\n        lastLoginAt: t.lastLoginAt,\n        createdAt: t.createdAt\n      });\n\n      for (var e = (r = (r = t).providerUserInfo) && r.length ? L(r, function (t) {\n        return new lc(t.rawId, t.providerId, t.email, t.displayName, t.photoUrl, t.phoneNumber);\n      }) : [], n = 0; n < e.length; n++) Nc(this, e[n]);\n\n      var r;\n      kc(this, \"isAnonymous\", !(this.email && t.passwordHash || this.providerData && this.providerData.length));\n    }, t.yc = function (t) {\n      return kr(\"firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead.\"), this.gb(t);\n    }, t.gb = function (t) {\n      var e = this,\n          n = null;\n      return qc(this, t.f(this.c, this.uid).then(function (t) {\n        return Oc(e, t), n = Mc(e, t, \"reauthenticate\"), e.i = null, e.reload();\n      }).then(function () {\n        return n;\n      }), !0);\n    }, t.pc = function (t) {\n      return kr(\"firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead.\"), this.eb(t);\n    }, t.eb = function (e) {\n      var n = this,\n          r = null;\n      return qc(this, Pc(this, e.providerId).then(function () {\n        return n.F();\n      }).then(function (t) {\n        return e.b(n.c, t);\n      }).then(function (t) {\n        return r = Mc(n, t, \"link\"), xc(n, t);\n      }).then(function () {\n        return r;\n      }));\n    }, t.qc = function (t, e) {\n      var n = this;\n      return qc(this, Pc(this, \"phone\").then(function () {\n        return nc(gc(n), t, e, _(n.eb, n));\n      }));\n    }, t.zc = function (t, e) {\n      var n = this;\n      return qc(this, St().then(function () {\n        return nc(gc(n), t, e, _(n.gb, n));\n      }), !0);\n    }, t.rb = function (e) {\n      var n = this;\n      return qc(this, this.F().then(function (t) {\n        return n.c.rb(t, e);\n      }).then(function (t) {\n        return Oc(n, t), n.reload();\n      }));\n    }, t.Pc = function (e) {\n      var n = this;\n      return qc(this, this.F().then(function (t) {\n        return e.b(n.c, t);\n      }).then(function (t) {\n        return Oc(n, t), n.reload();\n      }));\n    }, t.sb = function (e) {\n      var n = this;\n      return qc(this, this.F().then(function (t) {\n        return n.c.sb(t, e);\n      }).then(function (t) {\n        return Oc(n, t), n.reload();\n      }));\n    }, t.tb = function (e) {\n      if (void 0 === e.displayName && void 0 === e.photoURL) return Ic(this);\n      var n = this;\n      return qc(this, this.F().then(function (t) {\n        return n.c.tb(t, {\n          displayName: e.displayName,\n          photoUrl: e.photoURL\n        });\n      }).then(function (t) {\n        return Oc(n, t), kc(n, \"displayName\", t.displayName || null), kc(n, \"photoURL\", t.photoUrl || null), x(n.providerData, function (t) {\n          \"password\" === t.providerId && (Rr(t, \"displayName\", n.displayName), Rr(t, \"photoURL\", n.photoURL));\n        }), _c(n);\n      }).then(Sc));\n    }, t.Nc = function (i) {\n      var o = this;\n      return qc(this, Rc(this).then(function (t) {\n        return U(Cc(o), i) ? (e = o.c, n = t, r = [i], ds(e, Ha, {\n          idToken: n,\n          deleteProvider: r\n        })).then(function (t) {\n          var e = {};\n          return x(t.providerUserInfo || [], function (t) {\n            e[t.providerId] = !0;\n          }), x(Cc(o), function (t) {\n            e[t] || Ac(o, t);\n          }), e[no.PROVIDER_ID] || Rr(o, \"phoneNumber\", null), _c(o);\n        }) : _c(o).then(function () {\n          throw new Kr(\"no-such-provider\");\n        });\n        var e, n, r;\n      }));\n    }, t.delete = function () {\n      var e = this;\n      return qc(this, this.F().then(function (t) {\n        return ds(e.c, Qa, {\n          idToken: t\n        });\n      }).then(function () {\n        e.dispatchEvent(new fc(\"userDeleted\"));\n      })).then(function () {\n        for (var t = 0; t < e.G.length; t++) e.G[t].cancel(\"app-deleted\");\n\n        dc(e, null), mc(e, null), e.G = [], e.D = !0, bc(e), Rr(e, \"refreshToken\", null), e.a && e.a.unsubscribe(e);\n      });\n    }, t.xb = function (t, e) {\n      return !!(\"linkViaPopup\" == t && (this.g || null) == e && this.f || \"reauthViaPopup\" == t && (this.g || null) == e && this.f || \"linkViaRedirect\" == t && (this.aa || null) == e || \"reauthViaRedirect\" == t && (this.aa || null) == e);\n    }, t.ha = function (t, e, n, r) {\n      \"linkViaPopup\" != t && \"reauthViaPopup\" != t || r != (this.g || null) || (n && this.v ? this.v(n) : e && !n && this.f && this.f(e), this.b && (this.b.cancel(), this.b = null), delete this.f, delete this.v);\n    }, t.xa = function (t, e) {\n      return \"linkViaPopup\" == t && e == (this.g || null) ? _(this.Bb, this) : \"reauthViaPopup\" == t && e == (this.g || null) ? _(this.Cb, this) : \"linkViaRedirect\" == t && (this.aa || null) == e ? _(this.Bb, this) : \"reauthViaRedirect\" == t && (this.aa || null) == e ? _(this.Cb, this) : null;\n    }, t.rc = function (t) {\n      var e = this;\n      return Lc(this, \"linkViaPopup\", t, function () {\n        return Pc(e, t.providerId).then(function () {\n          return _c(e);\n        });\n      }, !1);\n    }, t.Ac = function (t) {\n      return Lc(this, \"reauthViaPopup\", t, function () {\n        return St();\n      }, !0);\n    }, t.sc = function (t) {\n      var e = this;\n      return Fc(this, \"linkViaRedirect\", t, function () {\n        return Pc(e, t.providerId);\n      }, !1);\n    }, t.Bc = function (t) {\n      return Fc(this, \"reauthViaRedirect\", t, function () {\n        return St();\n      }, !0);\n    }, t.Bb = function (e, n, r) {\n      var i = this;\n      this.b && (this.b.cancel(), this.b = null);\n      var o = null;\n      return qc(this, this.F().then(function (t) {\n        return Ua(i.c, {\n          requestUri: e,\n          postBody: r,\n          sessionId: n,\n          idToken: t\n        });\n      }).then(function (t) {\n        return o = Mc(i, t, \"link\"), xc(i, t);\n      }).then(function () {\n        return o;\n      }));\n    }, t.Cb = function (t, e, n) {\n      var r = this;\n      this.b && (this.b.cancel(), this.b = null);\n      var i = null;\n      return qc(this, St().then(function () {\n        return Di(qa(r.c, {\n          requestUri: t,\n          sessionId: e,\n          postBody: n\n        }), r.uid);\n      }).then(function (t) {\n        return i = Mc(r, t, \"reauthenticate\"), Oc(r, t), r.i = null, r.reload();\n      }).then(function () {\n        return i;\n      }), !0);\n    }, t.jb = function (e) {\n      var n = this,\n          r = null;\n      return qc(this, this.F().then(function (t) {\n        return r = t, void 0 === e || it(e) ? {} : ii(new zr(e));\n      }).then(function (t) {\n        return n.c.jb(r, t);\n      }).then(function (t) {\n        if (n.email != t) return n.reload();\n      }).then(function () {}));\n    }, t.toJSON = function () {\n      return this.w();\n    }, t.w = function () {\n      var e = {\n        uid: this.uid,\n        displayName: this.displayName,\n        photoURL: this.photoURL,\n        email: this.email,\n        emailVerified: this.emailVerified,\n        phoneNumber: this.phoneNumber,\n        isAnonymous: this.isAnonymous,\n        providerData: [],\n        apiKey: this.l,\n        appName: this.o,\n        authDomain: this.u,\n        stsTokenManager: this.h.w(),\n        redirectEventId: this.aa || null\n      };\n      return this.metadata && ct(e, this.metadata.w()), x(this.providerData, function (t) {\n        e.providerData.push(function (t) {\n          var e,\n              n = {};\n\n          for (e in t) t.hasOwnProperty(e) && (n[e] = t[e]);\n\n          return n;\n        }(t));\n      }), e;\n    };\n    var jc = {\n      name: \"redirectUser\",\n      B: \"session\"\n    };\n\n    function Wc(t) {\n      return pu(t.b, jc, t.a);\n    }\n\n    function Kc(t) {\n      var e, n, r, i, o, a, s, u, c;\n      this.a = t, this.b = hu(), this.c = null, this.f = (e = this, n = Gc(\"local\"), r = Gc(\"session\"), i = Gc(\"none\"), (o = e.b, a = n, s = e.a, u = fu(a, s), c = lu(o, a.B), o.get(a, s).then(function (t) {\n        var e = null;\n\n        try {\n          e = br(l.localStorage.getItem(u));\n        } catch (t) {}\n\n        if (e && !t) return l.localStorage.removeItem(u), o.set(a, e, s);\n        e && t && \"localStorage\" != c.type && l.localStorage.removeItem(u);\n      })).then(function () {\n        return e.b.get(r, e.a);\n      }).then(function (t) {\n        return t ? r : e.b.get(i, e.a).then(function (t) {\n          return t ? i : e.b.get(n, e.a).then(function (t) {\n            return t ? n : e.b.get(Hc, e.a).then(function (t) {\n              return t ? Gc(t) : n;\n            });\n          });\n        });\n      }).then(function (t) {\n        return e.c = t, Qc(e, t.B);\n      }).s(function () {\n        e.c || (e.c = n);\n      })), this.b.addListener(Gc(\"local\"), this.a, _(this.g, this));\n    }\n\n    function Qc(t, e) {\n      var n,\n          s,\n          r = [];\n\n      for (n in uu) uu[n] !== e && r.push(pu(t.b, Gc(uu[n]), t.a));\n\n      return r.push(pu(t.b, Hc, t.a)), s = r, new gt(function (n, e) {\n        var r = s.length,\n            i = [];\n        if (r) for (var t = function (t, e) {\n          r--, i[t] = e, 0 == r && n(i);\n        }, o = function (t) {\n          e(t);\n        }, a = 0; a < s.length; a++) Ct(s[a], E(t, a), o);else n(i);\n      });\n    }\n\n    Kc.prototype.g = function () {\n      var e = this,\n          n = Gc(\"local\");\n      Jc(this, function () {\n        return St().then(function () {\n          return e.c && \"local\" != e.c.B ? e.b.get(n, e.a) : null;\n        }).then(function (t) {\n          if (t) return Qc(e, \"local\").then(function () {\n            e.c = n;\n          });\n        });\n      });\n    };\n\n    var Hc = {\n      name: \"persistence\",\n      B: \"session\"\n    };\n\n    function Gc(t) {\n      return {\n        name: \"authUser\",\n        B: t\n      };\n    }\n\n    function zc(t, e) {\n      return Jc(t, function () {\n        return t.b.set(t.c, e.w(), t.a);\n      });\n    }\n\n    function Yc(t) {\n      return Jc(t, function () {\n        return pu(t.b, t.c, t.a);\n      });\n    }\n\n    function Xc(t, e) {\n      return Jc(t, function () {\n        return t.b.get(t.c, t.a).then(function (t) {\n          return t && e && (t.authDomain = e), Vc(t || {});\n        });\n      });\n    }\n\n    function Jc(t, e) {\n      return t.f = t.f.then(e, e), t.f;\n    }\n\n    function $c(t) {\n      if (this.l = !1, Rr(this, \"settings\", new tc()), Rr(this, \"app\", t), !oh(this).options || !oh(this).options.apiKey) throw new Kr(\"invalid-api-key\");\n      var n, e, r, i, o, a, s, u, c, h, l, f;\n      t = Hh.SDK_VERSION ? cr(Hh.SDK_VERSION) : null, this.c = new ga(oh(this).options && oh(this).options.apiKey, pi(li), t), this.N = [], this.o = [], this.I = [], this.Sb = Hh.INTERNAL.createSubscribe(_(this.mc, this)), this.O = void 0, this.Tb = Hh.INTERNAL.createSubscribe(_(this.nc, this)), rh(this, null), this.h = new Kc(oh(this).options.apiKey + \":\" + oh(this).name), this.A = new Bc(oh(this).options.apiKey + \":\" + oh(this).name), this.V = ch(this, (e = oh(n = this).options.authDomain, r = (i = n, o = (a = i.A, s = oh(i).options.authDomain, a.b.get(jc, a.a).then(function (t) {\n        return t && s && (t.authDomain = s), Vc(t || {});\n      })).then(function (t) {\n        return (i.D = t) && (t.ba = i.A), Wc(i.A);\n      }), ch(i, o)).then(function () {\n        return Xc(n.h, e);\n      }).then(function (e) {\n        return e ? (e.ba = n.A, n.D && (n.D.aa || null) == (e.aa || null) ? e : e.reload().then(function () {\n          return zc(n.h, e).then(function () {\n            return e;\n          });\n        }).s(function (t) {\n          return \"auth/network-request-failed\" == t.code ? e : Yc(n.h);\n        })) : null;\n      }).then(function (t) {\n        rh(n, t || null);\n      }), ch(n, r))), this.i = ch(this, (u = this).V.then(function () {\n        return u.fa();\n      }).s(function () {}).then(function () {\n        if (!u.l) return u.ka();\n      }).s(function () {}).then(function () {\n        if (!u.l) {\n          u.X = !0;\n          var t = u.h;\n          t.b.addListener(Gc(\"local\"), t.a, u.ka);\n        }\n      })), this.X = !1, this.ka = _(this.Kc, this), this.Ha = _(this.Z, this), this.ra = _(this.$b, this), this.sa = _(this.jc, this), this.ta = _(this.kc, this), h = oh(c = this).options.authDomain, l = oh(c).options.apiKey, h && pr() && (c.Rb = c.V.then(function () {\n        if (!c.l) {\n          if (c.a = zu(h, l, oh(c).name), c.a.subscribe(c), ah(c) && Ec(ah(c)), c.D) {\n            Ec(c.D);\n            var t = c.D;\n            t.pa(c.ea()), dc(t, c), yc(t = c.D, c.G), mc(t, c), c.D = null;\n          }\n\n          return c.a;\n        }\n      })), this.INTERNAL = {}, this.INTERNAL.delete = _(this.delete, this), this.INTERNAL.logFramework = _(this.tc, this), this.u = 0, Oe.call(this), f = this, Object.defineProperty(f, \"lc\", {\n        get: function () {\n          return this.ea();\n        },\n        set: function (t) {\n          this.pa(t);\n        },\n        enumerable: !1\n      }), f.W = null, this.G = [];\n    }\n\n    function Zc(t) {\n      ue.call(this, \"languageCodeChanged\"), this.g = t;\n    }\n\n    function th(t) {\n      ue.call(this, \"frameworkChanged\"), this.c = t;\n    }\n\n    function eh(t) {\n      return t.Rb || It(new Kr(\"auth-domain-config-required\"));\n    }\n\n    function nh(o, a) {\n      var s = {};\n      return s.apiKey = oh(o).options.apiKey, s.authDomain = oh(o).options.authDomain, s.appName = oh(o).name, o.V.then(function () {\n        return t = s, e = a, n = o.A, r = o.ya(), i = new pc(t, e), n && (i.ba = n), r && yc(i, r), i.reload().then(function () {\n          return i;\n        });\n        var t, e, n, r, i;\n      }).then(function (t) {\n        return ah(o) && t.uid == ah(o).uid ? Dc(ah(o), t) : (rh(o, t), Ec(t)), o.Z(t);\n      }).then(function () {\n        uh(o);\n      });\n    }\n\n    function rh(t, e) {\n      var n, r;\n      ah(t) && (n = ah(t), r = t.Ha, V(n.N, function (t) {\n        return t == r;\n      }), Te(ah(t), \"tokenChanged\", t.ra), Te(ah(t), \"userDeleted\", t.sa), Te(ah(t), \"userInvalidated\", t.ta), bc(ah(t))), e && (e.N.push(t.Ha), we(e, \"tokenChanged\", t.ra), we(e, \"userDeleted\", t.sa), we(e, \"userInvalidated\", t.ta), 0 < t.u && vc(e)), Rr(t, \"currentUser\", e), e && (e.pa(t.ea()), dc(e, t), yc(e, t.G), mc(e, t));\n    }\n\n    function ih(e, t) {\n      var n = null,\n          r = null;\n      return ch(e, t.then(function (t) {\n        return n = io(t), r = vi(t), nh(e, t);\n      }).then(function () {\n        return Pr({\n          user: ah(e),\n          credential: n,\n          additionalUserInfo: r,\n          operationType: \"signIn\"\n        });\n      }));\n    }\n\n    function oh(t) {\n      return t.app;\n    }\n\n    function ah(t) {\n      return t.currentUser;\n    }\n\n    function sh(t) {\n      return ah(t) && ah(t)._lat || null;\n    }\n\n    function uh(t) {\n      if (t.X) {\n        for (var e = 0; e < t.o.length; e++) t.o[e] && t.o[e](sh(t));\n\n        if (t.O !== t.getUid() && t.I.length) for (t.O = t.getUid(), e = 0; e < t.I.length; e++) t.I[e] && t.I[e](sh(t));\n      }\n    }\n\n    function ch(t, e) {\n      return t.N.push(e), e.ia(function () {\n        q(t.N, e);\n      }), e;\n    }\n\n    function hh() {}\n\n    function lh() {\n      this.a = {}, this.b = 1e12;\n    }\n\n    Kc.prototype.mb = function (e) {\n      var n = null,\n          r = this;\n      return function (t) {\n        var e = new Kr(\"invalid-persistence-type\"),\n            n = new Kr(\"unsupported-persistence-type\");\n\n        t: {\n          for (r in uu) if (uu[r] == t) {\n            var r = !0;\n            break t;\n          }\n\n          r = !1;\n        }\n\n        if (!r || \"string\" != typeof t) throw e;\n\n        switch (rr()) {\n          case \"ReactNative\":\n            if (\"session\" === t) throw n;\n            break;\n\n          case \"Node\":\n            if (\"none\" !== t) throw n;\n            break;\n\n          default:\n            if (!fr() && \"none\" !== t) throw n;\n        }\n      }(e), Jc(this, function () {\n        return e != r.c.B ? r.b.get(r.c, r.a).then(function (t) {\n          return n = t, Qc(r, e);\n        }).then(function () {\n          if (r.c = Gc(e), n) return r.b.set(r.c, n, r.a);\n        }) : St();\n      });\n    }, S($c, Oe), S(Zc, ue), S(th, ue), (t = $c.prototype).mb = function (t) {\n      return ch(this, t = this.h.mb(t));\n    }, t.pa = function (t) {\n      this.W === t || this.l || (this.W = t, Sa(this.c, this.W), this.dispatchEvent(new Zc(this.ea())));\n    }, t.ea = function () {\n      return this.W;\n    }, t.Qc = function () {\n      var t = l.navigator;\n      this.pa(t && (t.languages && t.languages[0] || t.language || t.userLanguage) || null);\n    }, t.tc = function (t) {\n      this.G.push(t), Ia(this.c, Hh.SDK_VERSION ? cr(Hh.SDK_VERSION, this.G) : null), this.dispatchEvent(new th(this.G));\n    }, t.ya = function () {\n      return j(this.G);\n    }, t.toJSON = function () {\n      return {\n        apiKey: oh(this).options.apiKey,\n        authDomain: oh(this).options.authDomain,\n        appName: oh(this).name,\n        currentUser: ah(this) && ah(this).w()\n      };\n    }, t.xb = function (t, e) {\n      switch (t) {\n        case \"unknown\":\n        case \"signInViaRedirect\":\n          return !0;\n\n        case \"signInViaPopup\":\n          return this.g == e && !!this.f;\n\n        default:\n          return !1;\n      }\n    }, t.ha = function (t, e, n, r) {\n      \"signInViaPopup\" == t && this.g == r && (n && this.v ? this.v(n) : e && !n && this.f && this.f(e), this.b && (this.b.cancel(), this.b = null), delete this.f, delete this.v);\n    }, t.xa = function (t, e) {\n      return \"signInViaRedirect\" == t || \"signInViaPopup\" == t && this.g == e && this.f ? _(this.Zb, this) : null;\n    }, t.Zb = function (t, e, n) {\n      var r = this;\n      t = {\n        requestUri: t,\n        postBody: n,\n        sessionId: e\n      }, this.b && (this.b.cancel(), this.b = null);\n      var i = null,\n          o = null,\n          a = Fa(r.c, t).then(function (t) {\n        return i = io(t), o = vi(t), t;\n      });\n      return ch(this, t = r.V.then(function () {\n        return a;\n      }).then(function (t) {\n        return nh(r, t);\n      }).then(function () {\n        return Pr({\n          user: ah(r),\n          credential: i,\n          additionalUserInfo: o,\n          operationType: \"signIn\"\n        });\n      }));\n    }, t.Ic = function (e) {\n      if (!pr()) return It(new Kr(\"operation-not-supported-in-this-environment\"));\n      var n = this,\n          t = gi(e.providerId),\n          r = wr(),\n          i = null;\n      (!mr() || er()) && oh(this).options.authDomain && e.isOAuthProvider && (i = ks(oh(this).options.authDomain, oh(this).options.apiKey, oh(this).name, \"signInViaPopup\", e, null, r, Hh.SDK_VERSION || null));\n      var o = Xn(i, t && t.Ba, t && t.Aa);\n      return ch(this, t = eh(this).then(function (t) {\n        return Qu(t, o, \"signInViaPopup\", e, r, !!i);\n      }).then(function () {\n        return new gt(function (t, e) {\n          n.ha(\"signInViaPopup\", null, new Kr(\"cancelled-popup-request\"), n.g), n.f = t, n.v = e, n.g = r, n.b = n.a.Ea(n, \"signInViaPopup\", o, r);\n        });\n      }).then(function (t) {\n        return o && Yn(o), t ? Pr(t) : null;\n      }).s(function (t) {\n        throw o && Yn(o), t;\n      }));\n    }, t.Jc = function (t) {\n      if (!pr()) return It(new Kr(\"operation-not-supported-in-this-environment\"));\n      var e = this;\n      return ch(this, eh(this).then(function () {\n        return Jc(t = e.h, function () {\n          return t.b.set(Hc, t.c.B, t.a);\n        });\n        var t;\n      }).then(function () {\n        return e.a.Ca(\"signInViaRedirect\", t);\n      }));\n    }, t.fa = function () {\n      if (!pr()) return It(new Kr(\"operation-not-supported-in-this-environment\"));\n      var t = this;\n      return ch(this, eh(this).then(function () {\n        return t.a.fa();\n      }).then(function (t) {\n        return t ? Pr(t) : null;\n      }));\n    }, t.Oc = function (t) {\n      if (!t) return It(new Kr(\"null-user\"));\n      var e = this,\n          n = {};\n      n.apiKey = oh(this).options.apiKey, n.authDomain = oh(this).options.authDomain, n.appName = oh(this).name;\n\n      var r = function (t, e, n, r) {\n        e = e || {\n          apiKey: t.l,\n          authDomain: t.u,\n          appName: t.o\n        };\n        var i = t.h,\n            o = {};\n        return o[ba] = i.b, o.refreshToken = i.a, o.expiresIn = (i.c - T()) / 1e3, e = new pc(e, o), n && (e.ba = n), r && yc(e, r), Dc(e, t), e;\n      }(t, n, e.A, e.ya());\n\n      return ch(this, this.i.then(function () {\n        if (oh(e).options.apiKey != t.l) return r.reload();\n      }).then(function () {\n        return ah(e) && t.uid == ah(e).uid ? (Dc(ah(e), t), e.Z(t)) : (rh(e, r), Ec(r), e.Z(r));\n      }).then(function () {\n        uh(e);\n      }));\n    }, t.pb = function () {\n      var t = this;\n      return ch(this, this.i.then(function () {\n        return ah(t) ? (rh(t, null), Yc(t.h).then(function () {\n          uh(t);\n        })) : St();\n      }));\n    }, t.Kc = function () {\n      var r = this;\n      return Xc(this.h, oh(this).options.authDomain).then(function (t) {\n        if (!r.l) {\n          var e;\n\n          if (e = ah(r) && t) {\n            e = ah(r).uid;\n            var n = t.uid;\n            e = null != e && \"\" !== e && null != n && \"\" !== n && e == n;\n          }\n\n          if (e) return Dc(ah(r), t), ah(r).F();\n          (ah(r) || t) && (rh(r, t), t && (Ec(t), t.ba = r.A), r.a && r.a.subscribe(r), uh(r));\n        }\n      });\n    }, t.Z = function (t) {\n      return zc(this.h, t);\n    }, t.$b = function () {\n      uh(this), this.Z(ah(this));\n    }, t.jc = function () {\n      this.pb();\n    }, t.kc = function () {\n      this.pb();\n    }, t.mc = function (t) {\n      var e = this;\n      this.addAuthTokenListener(function () {\n        t.next(ah(e));\n      });\n    }, t.nc = function (t) {\n      var e,\n          n,\n          r = this;\n      n = function () {\n        t.next(ah(r));\n      }, (e = this).I.push(n), ch(e, e.i.then(function () {\n        !e.l && U(e.I, n) && e.O !== e.getUid() && (e.O = e.getUid(), n(sh(e)));\n      }));\n    }, t.vc = function (t, e, n) {\n      var r = this;\n      return this.X && Promise.resolve().then(function () {\n        g(t) ? t(ah(r)) : g(t.next) && t.next(ah(r));\n      }), this.Sb(t, e, n);\n    }, t.uc = function (t, e, n) {\n      var r = this;\n      return this.X && Promise.resolve().then(function () {\n        r.O = r.getUid(), g(t) ? t(ah(r)) : g(t.next) && t.next(ah(r));\n      }), this.Tb(t, e, n);\n    }, t.ac = function (t) {\n      var e = this;\n      return ch(this, this.i.then(function () {\n        return ah(e) ? ah(e).F(t).then(function (t) {\n          return {\n            accessToken: t\n          };\n        }) : null;\n      }));\n    }, t.Ec = function (t) {\n      var n = this;\n      return this.i.then(function () {\n        return ih(n, ds(n.c, cs, {\n          token: t\n        }));\n      }).then(function (t) {\n        var e = t.user;\n        return kc(e, \"isAnonymous\", !1), n.Z(e), t;\n      });\n    }, t.Fc = function (t, e) {\n      var n = this;\n      return this.i.then(function () {\n        return ih(n, ds(n.c, hs, {\n          email: t,\n          password: e\n        }));\n      });\n    }, t.Vb = function (t, e) {\n      var n = this;\n      return this.i.then(function () {\n        return ih(n, ds(n.c, Wa, {\n          email: t,\n          password: e\n        }));\n      });\n    }, t.Nb = function (t) {\n      var e = this;\n      return this.i.then(function () {\n        return ih(e, t.la(e.c));\n      });\n    }, t.nb = function (t) {\n      return kr(\"firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead.\"), this.Nb(t);\n    }, t.ob = function () {\n      var n = this;\n      return this.i.then(function () {\n        var t = ah(n);\n        return t && t.isAnonymous ? Pr({\n          user: t,\n          credential: null,\n          additionalUserInfo: Pr({\n            providerId: null,\n            isNewUser: !1\n          }),\n          operationType: \"signIn\"\n        }) : ih(n, n.c.ob()).then(function (t) {\n          var e = t.user;\n          return kc(e, \"isAnonymous\", !0), n.Z(e), t;\n        });\n      });\n    }, t.getUid = function () {\n      return ah(this) && ah(this).uid || null;\n    }, t.Ub = function (t) {\n      this.addAuthTokenListener(t), this.u++, 0 < this.u && ah(this) && vc(ah(this));\n    }, t.Cc = function (e) {\n      var n = this;\n      x(this.o, function (t) {\n        t == e && n.u--;\n      }), this.u < 0 && (this.u = 0), 0 == this.u && ah(this) && bc(ah(this)), this.removeAuthTokenListener(e);\n    }, t.addAuthTokenListener = function (t) {\n      var e = this;\n      this.o.push(t), ch(this, this.i.then(function () {\n        e.l || U(e.o, t) && t(sh(e));\n      }));\n    }, t.removeAuthTokenListener = function (e) {\n      V(this.o, function (t) {\n        return t == e;\n      });\n    }, t.delete = function () {\n      this.l = !0;\n\n      for (var t = 0; t < this.N.length; t++) this.N[t].cancel(\"app-deleted\");\n\n      return this.N = [], this.h && (t = this.h).b.removeListener(Gc(\"local\"), t.a, this.ka), this.a && (this.a.unsubscribe(this), this.a.Ya()), Promise.resolve();\n    }, t.Yb = function (t) {\n      return ch(this, ds(this.c, Ka, {\n        identifier: t,\n        continueUri: dr() ? Hn() : \"http://localhost\"\n      }).then(function (t) {\n        return t.signinMethods || [];\n      }));\n    }, t.oc = function (t) {\n      return !!$i(t);\n    }, t.lb = function (e, n) {\n      var r = this;\n      return ch(this, St().then(function () {\n        var t = new zr(n);\n        if (!t.c) throw new Kr(\"argument-error\", Jr + \" must be true when sending sign in link to email\");\n        return ii(t);\n      }).then(function (t) {\n        return r.c.lb(e, t);\n      }).then(function () {}));\n    }, t.Rc = function (t) {\n      return this.Ka(t).then(function (t) {\n        return t.data.email;\n      });\n    }, t.Za = function (t, e) {\n      return ch(this, this.c.Za(t, e).then(function () {}));\n    }, t.Ka = function (t) {\n      return ch(this, this.c.Ka(t).then(function (t) {\n        return new xr(t);\n      }));\n    }, t.Wa = function (t) {\n      return ch(this, this.c.Wa(t).then(function () {}));\n    }, t.kb = function (e, t) {\n      var n = this;\n      return ch(this, St().then(function () {\n        return void 0 === t || it(t) ? {} : ii(new zr(t));\n      }).then(function (t) {\n        return n.c.kb(e, t);\n      }).then(function () {}));\n    }, t.Hc = function (t, e) {\n      return ch(this, nc(this, t, e, _(this.nb, this)));\n    }, t.Gc = function (e, n) {\n      var r = this;\n      return ch(this, St().then(function () {\n        var t = Ji(e, n || Hn());\n        return r.nb(t);\n      }));\n    }, hh.prototype.render = function () {}, hh.prototype.reset = function () {}, hh.prototype.getResponse = function () {}, hh.prototype.execute = function () {};\n    var fh = null;\n\n    function ph(t, e) {\n      return (e = dh(e)) && t.a[e] || null;\n    }\n\n    function dh(t) {\n      return (t = void 0 === t ? 1e12 : t) ? t.toString() : null;\n    }\n\n    function yh(t, e) {\n      this.g = !1, this.c = e, this.a = this.b = null, this.h = \"invisible\" !== this.c.size, this.f = xn(t);\n      var n = this;\n      this.i = function () {\n        n.execute();\n      }, this.h ? this.execute() : we(this.f, \"click\", this.i);\n    }\n\n    function mh(t) {\n      if (t.g) throw Error(\"reCAPTCHA mock was already deleted!\");\n    }\n\n    function gh() {}\n\n    lh.prototype.render = function (t, e) {\n      return this.a[this.b.toString()] = new yh(t, e), this.b++;\n    }, lh.prototype.reset = function (t) {\n      var e = ph(this, t);\n      t = dh(t), e && t && (e.delete(), delete this.a[t]);\n    }, lh.prototype.getResponse = function (t) {\n      return (t = ph(this, t)) ? t.getResponse() : null;\n    }, lh.prototype.execute = function (t) {\n      (t = ph(this, t)) && t.execute();\n    }, yh.prototype.getResponse = function () {\n      return mh(this), this.b;\n    }, yh.prototype.execute = function () {\n      mh(this);\n      var n = this;\n      this.a || (this.a = setTimeout(function () {\n        n.b = function () {\n          for (var t = 50, e = []; 0 < t;) e.push(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".charAt(Math.floor(62 * Math.random()))), t--;\n\n          return e.join(\"\");\n        }();\n\n        var t = n.c.callback,\n            e = n.c[\"expired-callback\"];\n        if (t) try {\n          t(n.b);\n        } catch (t) {}\n        n.a = setTimeout(function () {\n          if (n.a = null, n.b = null, e) try {\n            e();\n          } catch (t) {}\n          n.h && n.execute();\n        }, 6e4);\n      }, 500));\n    }, yh.prototype.delete = function () {\n      mh(this), this.g = !0, clearTimeout(this.a), this.a = null, Te(this.f, \"click\", this.i);\n    }, gh.prototype.g = function () {\n      return fh || (fh = new lh()), St(fh);\n    }, gh.prototype.c = function () {};\n    var vh = null;\n\n    function bh() {\n      this.b = l.grecaptcha ? 1 / 0 : 0, this.f = null, this.a = \"__rcb\" + Math.floor(1e6 * Math.random()).toString();\n    }\n\n    var wh = new mn(bn, \"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}\"),\n        _h = new Tr(3e4, 6e4);\n\n    bh.prototype.g = function (i) {\n      var o = this;\n      return new gt(function (t, e) {\n        var r = setTimeout(function () {\n          e(new Kr(\"network-request-failed\"));\n        }, _h.get());\n        !l.grecaptcha || i !== o.f && !o.b ? (l[o.a] = function () {\n          if (l.grecaptcha) {\n            o.f = i;\n            var n = l.grecaptcha.render;\n            l.grecaptcha.render = function (t, e) {\n              return t = n(t, e), o.b++, t;\n            }, clearTimeout(r), t(l.grecaptcha);\n          } else clearTimeout(r), e(new Kr(\"internal-error\"));\n\n          delete l[o.a];\n        }, St(ha(En(wh, {\n          onload: o.a,\n          hl: i || \"\"\n        }))).s(function () {\n          clearTimeout(r), e(new Kr(\"internal-error\", \"Unable to load external reCAPTCHA dependencies!\"));\n        })) : (clearTimeout(r), t(l.grecaptcha));\n      });\n    }, bh.prototype.c = function () {\n      this.b--;\n    };\n    var Eh = null;\n\n    function Th(t, e, n, r, i, o, a) {\n      if (Rr(this, \"type\", \"recaptcha\"), this.c = this.f = null, this.D = !1, this.l = e, this.g = null, a = a ? (vh || (vh = new gh()), vh) : (Eh || (Eh = new bh()), Eh), this.o = a, this.a = n || {\n        theme: \"light\",\n        type: \"image\"\n      }, this.h = [], this.a[Ch]) throw new Kr(\"argument-error\", \"sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.\");\n      if (this.i = \"invisible\" === this.a[Nh], !l.document) throw new Kr(\"operation-not-supported-in-this-environment\", \"RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.\");\n      if (!xn(e) || !this.i && xn(e).hasChildNodes()) throw new Kr(\"argument-error\", \"reCAPTCHA container is either not found or already contains inner elements!\");\n      this.u = new ga(t, o || null, i || null), this.v = r || function () {\n        return null;\n      };\n      var s = this;\n      this.m = [];\n      var u = this.a[Sh];\n\n      this.a[Sh] = function (t) {\n        if (Ah(s, t), \"function\" == typeof u) u(t);else if (\"string\" == typeof u) {\n          var e = lr(u, l);\n          \"function\" == typeof e && e(t);\n        }\n      };\n\n      var c = this.a[Ih];\n\n      this.a[Ih] = function () {\n        if (Ah(s, null), \"function\" == typeof c) c();else if (\"string\" == typeof c) {\n          var t = lr(c, l);\n          \"function\" == typeof t && t();\n        }\n      };\n    }\n\n    var Sh = \"callback\",\n        Ih = \"expired-callback\",\n        Ch = \"sitekey\",\n        Nh = \"size\";\n\n    function Ah(t, e) {\n      for (var n = 0; n < t.m.length; n++) try {\n        t.m[n](e);\n      } catch (t) {}\n    }\n\n    function kh(t, e) {\n      return t.h.push(e), e.ia(function () {\n        q(t.h, e);\n      }), e;\n    }\n\n    function Dh(t) {\n      if (t.D) throw new Kr(\"internal-error\", \"RecaptchaVerifier instance has been destroyed.\");\n    }\n\n    function Rh(t, e, n) {\n      var r = !1;\n\n      try {\n        this.b = n || Hh.app();\n      } catch (t) {\n        throw new Kr(\"argument-error\", \"No firebase.app.App instance is currently initialized.\");\n      }\n\n      if (!this.b.options || !this.b.options.apiKey) throw new Kr(\"invalid-api-key\");\n      n = this.b.options.apiKey;\n      var i = this,\n          o = null;\n\n      try {\n        o = this.b.auth().ya();\n      } catch (t) {}\n\n      try {\n        r = this.b.auth().settings.appVerificationDisabledForTesting;\n      } catch (t) {}\n\n      o = Hh.SDK_VERSION ? cr(Hh.SDK_VERSION, o) : null, Th.call(this, n, t, e, function () {\n        try {\n          var e = i.b.auth().ea();\n        } catch (t) {\n          e = null;\n        }\n\n        return e;\n      }, o, pi(li), r);\n    }\n\n    function Oh(t, e, n, r) {\n      t: {\n        n = Array.prototype.slice.call(n);\n\n        for (var i = 0, o = !1, a = 0; a < e.length; a++) if (e[a].optional) o = !0;else {\n          if (o) throw new Kr(\"internal-error\", \"Argument validator encountered a required argument after an optional argument.\");\n          i++;\n        }\n\n        if (o = e.length, n.length < i || o < n.length) r = \"Expected \" + (i == o ? 1 == i ? \"1 argument\" : i + \" arguments\" : i + \"-\" + o + \" arguments\") + \" but got \" + n.length + \".\";else {\n          for (i = 0; i < n.length; i++) if (o = e[i].optional && void 0 === n[i], !e[i].M(n[i]) && !o) {\n            if (e = e[i], i < 0 || i >= Ph.length) throw new Kr(\"internal-error\", \"Argument validator received an unsupported number of arguments.\");\n            n = Ph[i], r = (r ? \"\" : n + \" argument \") + (e.name ? '\"' + e.name + '\" ' : \"\") + \"must be \" + e.K + \".\";\n            break t;\n          }\n\n          r = null;\n        }\n      }\n\n      if (r) throw new Kr(\"argument-error\", t + \" failed: \" + r);\n    }\n\n    (t = Th.prototype).za = function () {\n      var e = this;\n      return this.f ? this.f : this.f = kh(this, St().then(function () {\n        if (dr() && !nr()) return Zn();\n        throw new Kr(\"operation-not-supported-in-this-environment\", \"RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.\");\n      }).then(function () {\n        return e.o.g(e.v());\n      }).then(function (t) {\n        return e.g = t, ds(e.u, ts, {});\n      }).then(function (t) {\n        e.a[Ch] = t.recaptchaSiteKey;\n      }).s(function (t) {\n        throw e.f = null, t;\n      }));\n    }, t.render = function () {\n      Dh(this);\n      var n = this;\n      return kh(this, this.za().then(function () {\n        if (null === n.c) {\n          var t = n.l;\n\n          if (!n.i) {\n            var e = xn(t);\n            t = Un(\"DIV\"), e.appendChild(t);\n          }\n\n          n.c = n.g.render(t, n.a);\n        }\n\n        return n.c;\n      }));\n    }, t.verify = function () {\n      Dh(this);\n      var i = this;\n      return kh(this, this.render().then(function (e) {\n        return new gt(function (n) {\n          var t = i.g.getResponse(e);\n          if (t) n(t);else {\n            var r = function (t) {\n              var e;\n              t && (e = r, V(i.m, function (t) {\n                return t == e;\n              }), n(t));\n            };\n\n            i.m.push(r), i.i && i.g.execute(i.c);\n          }\n        });\n      }));\n    }, t.reset = function () {\n      Dh(this), null !== this.c && this.g.reset(this.c);\n    }, t.clear = function () {\n      Dh(this), this.D = !0, this.o.c();\n\n      for (var t = 0; t < this.h.length; t++) this.h[t].cancel(\"RecaptchaVerifier instance has been destroyed.\");\n\n      if (!this.i) {\n        t = xn(this.l);\n\n        for (var e; e = t.firstChild;) t.removeChild(e);\n      }\n    }, S(Rh, Th);\n    var Ph = \"First Second Third Fourth Fifth Sixth Seventh Eighth Ninth\".split(\" \");\n\n    function Mh(t, e) {\n      return {\n        name: t || \"\",\n        K: \"a valid string\",\n        optional: !!e,\n        M: h\n      };\n    }\n\n    function xh(t, e) {\n      return {\n        name: t || \"\",\n        K: \"a boolean\",\n        optional: !!e,\n        M: n\n      };\n    }\n\n    function Lh(t, e) {\n      return {\n        name: t || \"\",\n        K: \"a valid object\",\n        optional: !!e,\n        M: v\n      };\n    }\n\n    function Fh(t, e) {\n      return {\n        name: t || \"\",\n        K: \"a function\",\n        optional: !!e,\n        M: g\n      };\n    }\n\n    function Uh(t, e) {\n      return {\n        name: t || \"\",\n        K: \"null\",\n        optional: !!e,\n        M: r\n      };\n    }\n\n    function qh(n) {\n      return {\n        name: n ? n + \"Credential\" : \"credential\",\n        K: n ? \"a valid \" + n + \" credential\" : \"a valid credential\",\n        optional: !1,\n        M: function (t) {\n          if (!t) return !1;\n          var e = !n || t.providerId === n;\n          return !(!t.la || !e);\n        }\n      };\n    }\n\n    function Vh() {\n      return {\n        name: \"applicationVerifier\",\n        K: \"an implementation of firebase.auth.ApplicationVerifier\",\n        optional: !1,\n        M: function (t) {\n          return !!(t && h(t.type) && g(t.verify));\n        }\n      };\n    }\n\n    function Bh(e, n, t, r) {\n      return {\n        name: t || \"\",\n        K: e.K + \" or \" + n.K,\n        optional: !!r,\n        M: function (t) {\n          return e.M(t) || n.M(t);\n        }\n      };\n    }\n\n    function jh(t, e) {\n      for (var n in e) {\n        var r = e[n].name;\n        t[r] = Qh(r, t[n], e[n].j);\n      }\n    }\n\n    function Wh(t, e) {\n      for (var n in e) {\n        var r = e[n].name;\n        r !== n && Object.defineProperty(t, r, {\n          get: E(function (t) {\n            return this[t];\n          }, n),\n          set: E(function (t, e, n, r) {\n            Oh(t, [n], [r], !0), this[e] = r;\n          }, r, n, e[n].vb),\n          enumerable: !0\n        });\n      }\n    }\n\n    function Kh(t, e, n, r) {\n      t[e] = Qh(e, n, r);\n    }\n\n    function Qh(t, e, n) {\n      function r() {\n        var t = Array.prototype.slice.call(arguments);\n        return Oh(a, n, t), e.apply(this, t);\n      }\n\n      if (!n) return e;\n      var i,\n          o,\n          a = (o = (o = t).split(\".\"))[o.length - 1];\n\n      for (i in e) r[i] = e[i];\n\n      for (i in e.prototype) r.prototype[i] = e.prototype[i];\n\n      return r;\n    }\n\n    jh($c.prototype, {\n      Wa: {\n        name: \"applyActionCode\",\n        j: [Mh(\"code\")]\n      },\n      Ka: {\n        name: \"checkActionCode\",\n        j: [Mh(\"code\")]\n      },\n      Za: {\n        name: \"confirmPasswordReset\",\n        j: [Mh(\"code\"), Mh(\"newPassword\")]\n      },\n      Vb: {\n        name: \"createUserWithEmailAndPassword\",\n        j: [Mh(\"email\"), Mh(\"password\")]\n      },\n      Yb: {\n        name: \"fetchSignInMethodsForEmail\",\n        j: [Mh(\"email\")]\n      },\n      fa: {\n        name: \"getRedirectResult\",\n        j: []\n      },\n      oc: {\n        name: \"isSignInWithEmailLink\",\n        j: [Mh(\"emailLink\")]\n      },\n      uc: {\n        name: \"onAuthStateChanged\",\n        j: [Bh(Lh(), Fh(), \"nextOrObserver\"), Fh(\"opt_error\", !0), Fh(\"opt_completed\", !0)]\n      },\n      vc: {\n        name: \"onIdTokenChanged\",\n        j: [Bh(Lh(), Fh(), \"nextOrObserver\"), Fh(\"opt_error\", !0), Fh(\"opt_completed\", !0)]\n      },\n      kb: {\n        name: \"sendPasswordResetEmail\",\n        j: [Mh(\"email\"), Bh(Lh(\"opt_actionCodeSettings\", !0), Uh(null, !0), \"opt_actionCodeSettings\", !0)]\n      },\n      lb: {\n        name: \"sendSignInLinkToEmail\",\n        j: [Mh(\"email\"), Lh(\"actionCodeSettings\")]\n      },\n      mb: {\n        name: \"setPersistence\",\n        j: [Mh(\"persistence\")]\n      },\n      nb: {\n        name: \"signInAndRetrieveDataWithCredential\",\n        j: [qh()]\n      },\n      ob: {\n        name: \"signInAnonymously\",\n        j: []\n      },\n      Nb: {\n        name: \"signInWithCredential\",\n        j: [qh()]\n      },\n      Ec: {\n        name: \"signInWithCustomToken\",\n        j: [Mh(\"token\")]\n      },\n      Fc: {\n        name: \"signInWithEmailAndPassword\",\n        j: [Mh(\"email\"), Mh(\"password\")]\n      },\n      Gc: {\n        name: \"signInWithEmailLink\",\n        j: [Mh(\"email\"), Mh(\"emailLink\", !0)]\n      },\n      Hc: {\n        name: \"signInWithPhoneNumber\",\n        j: [Mh(\"phoneNumber\"), Vh()]\n      },\n      Ic: {\n        name: \"signInWithPopup\",\n        j: [{\n          name: \"authProvider\",\n          K: \"a valid Auth provider\",\n          optional: !1,\n          M: function (t) {\n            return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty(\"isOAuthProvider\"));\n          }\n        }]\n      },\n      Jc: {\n        name: \"signInWithRedirect\",\n        j: [{\n          name: \"authProvider\",\n          K: \"a valid Auth provider\",\n          optional: !1,\n          M: function (t) {\n            return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty(\"isOAuthProvider\"));\n          }\n        }]\n      },\n      Oc: {\n        name: \"updateCurrentUser\",\n        j: [Bh({\n          name: \"user\",\n          K: \"an instance of Firebase User\",\n          optional: !1,\n          M: function (t) {\n            return !!(t && t instanceof pc);\n          }\n        }, Uh(), \"user\")]\n      },\n      pb: {\n        name: \"signOut\",\n        j: []\n      },\n      toJSON: {\n        name: \"toJSON\",\n        j: [Mh(null, !0)]\n      },\n      Qc: {\n        name: \"useDeviceLanguage\",\n        j: []\n      },\n      Rc: {\n        name: \"verifyPasswordResetCode\",\n        j: [Mh(\"code\")]\n      }\n    }), Wh($c.prototype, {\n      lc: {\n        name: \"languageCode\",\n        vb: Bh(Mh(), Uh(), \"languageCode\")\n      }\n    }), ($c.Persistence = uu).LOCAL = \"local\", $c.Persistence.SESSION = \"session\", $c.Persistence.NONE = \"none\", jh(pc.prototype, {\n      delete: {\n        name: \"delete\",\n        j: []\n      },\n      bc: {\n        name: \"getIdTokenResult\",\n        j: [xh(\"opt_forceRefresh\", !0)]\n      },\n      F: {\n        name: \"getIdToken\",\n        j: [xh(\"opt_forceRefresh\", !0)]\n      },\n      pc: {\n        name: \"linkAndRetrieveDataWithCredential\",\n        j: [qh()]\n      },\n      eb: {\n        name: \"linkWithCredential\",\n        j: [qh()]\n      },\n      qc: {\n        name: \"linkWithPhoneNumber\",\n        j: [Mh(\"phoneNumber\"), Vh()]\n      },\n      rc: {\n        name: \"linkWithPopup\",\n        j: [{\n          name: \"authProvider\",\n          K: \"a valid Auth provider\",\n          optional: !1,\n          M: function (t) {\n            return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty(\"isOAuthProvider\"));\n          }\n        }]\n      },\n      sc: {\n        name: \"linkWithRedirect\",\n        j: [{\n          name: \"authProvider\",\n          K: \"a valid Auth provider\",\n          optional: !1,\n          M: function (t) {\n            return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty(\"isOAuthProvider\"));\n          }\n        }]\n      },\n      yc: {\n        name: \"reauthenticateAndRetrieveDataWithCredential\",\n        j: [qh()]\n      },\n      gb: {\n        name: \"reauthenticateWithCredential\",\n        j: [qh()]\n      },\n      zc: {\n        name: \"reauthenticateWithPhoneNumber\",\n        j: [Mh(\"phoneNumber\"), Vh()]\n      },\n      Ac: {\n        name: \"reauthenticateWithPopup\",\n        j: [{\n          name: \"authProvider\",\n          K: \"a valid Auth provider\",\n          optional: !1,\n          M: function (t) {\n            return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty(\"isOAuthProvider\"));\n          }\n        }]\n      },\n      Bc: {\n        name: \"reauthenticateWithRedirect\",\n        j: [{\n          name: \"authProvider\",\n          K: \"a valid Auth provider\",\n          optional: !1,\n          M: function (t) {\n            return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty(\"isOAuthProvider\"));\n          }\n        }]\n      },\n      reload: {\n        name: \"reload\",\n        j: []\n      },\n      jb: {\n        name: \"sendEmailVerification\",\n        j: [Bh(Lh(\"opt_actionCodeSettings\", !0), Uh(null, !0), \"opt_actionCodeSettings\", !0)]\n      },\n      toJSON: {\n        name: \"toJSON\",\n        j: [Mh(null, !0)]\n      },\n      Nc: {\n        name: \"unlink\",\n        j: [Mh(\"provider\")]\n      },\n      rb: {\n        name: \"updateEmail\",\n        j: [Mh(\"email\")]\n      },\n      sb: {\n        name: \"updatePassword\",\n        j: [Mh(\"password\")]\n      },\n      Pc: {\n        name: \"updatePhoneNumber\",\n        j: [qh(\"phone\")]\n      },\n      tb: {\n        name: \"updateProfile\",\n        j: [Lh(\"profile\")]\n      }\n    }), jh(lh.prototype, {\n      execute: {\n        name: \"execute\"\n      },\n      render: {\n        name: \"render\"\n      },\n      reset: {\n        name: \"reset\"\n      },\n      getResponse: {\n        name: \"getResponse\"\n      }\n    }), jh(hh.prototype, {\n      execute: {\n        name: \"execute\"\n      },\n      render: {\n        name: \"render\"\n      },\n      reset: {\n        name: \"reset\"\n      },\n      getResponse: {\n        name: \"getResponse\"\n      }\n    }), jh(gt.prototype, {\n      ia: {\n        name: \"finally\"\n      },\n      s: {\n        name: \"catch\"\n      },\n      then: {\n        name: \"then\"\n      }\n    }), Wh(tc.prototype, {\n      appVerificationDisabled: {\n        name: \"appVerificationDisabledForTesting\",\n        vb: xh(\"appVerificationDisabledForTesting\")\n      }\n    }), jh(ec.prototype, {\n      confirm: {\n        name: \"confirm\",\n        j: [Mh(\"verificationCode\")]\n      }\n    }), Kh(ki, \"fromJSON\", function (t) {\n      t = h(t) ? JSON.parse(t) : t;\n\n      for (var e, n = [Li, Yi, to, Pi], r = 0; r < n.length; r++) if (e = n[r](t)) return e;\n\n      return null;\n    }, [Bh(Mh(), Lh(), \"json\")]), Kh(Xi, \"credential\", function (t, e) {\n      return new zi(t, e);\n    }, [Mh(\"email\"), Mh(\"password\")]), jh(zi.prototype, {\n      w: {\n        name: \"toJSON\",\n        j: [Mh(null, !0)]\n      }\n    }), jh(Vi.prototype, {\n      ua: {\n        name: \"addScope\",\n        j: [Mh(\"scope\")]\n      },\n      Da: {\n        name: \"setCustomParameters\",\n        j: [Lh(\"customOAuthParameters\")]\n      }\n    }), Kh(Vi, \"credential\", Bi, [Bh(Mh(), Lh(), \"token\")]), Kh(Xi, \"credentialWithLink\", Ji, [Mh(\"email\"), Mh(\"emailLink\")]), jh(ji.prototype, {\n      ua: {\n        name: \"addScope\",\n        j: [Mh(\"scope\")]\n      },\n      Da: {\n        name: \"setCustomParameters\",\n        j: [Lh(\"customOAuthParameters\")]\n      }\n    }), Kh(ji, \"credential\", Wi, [Bh(Mh(), Lh(), \"token\")]), jh(Ki.prototype, {\n      ua: {\n        name: \"addScope\",\n        j: [Mh(\"scope\")]\n      },\n      Da: {\n        name: \"setCustomParameters\",\n        j: [Lh(\"customOAuthParameters\")]\n      }\n    }), Kh(Ki, \"credential\", Qi, [Bh(Mh(), Bh(Lh(), Uh()), \"idToken\"), Bh(Mh(), Uh(), \"accessToken\", !0)]), jh(Hi.prototype, {\n      Da: {\n        name: \"setCustomParameters\",\n        j: [Lh(\"customOAuthParameters\")]\n      }\n    }), Kh(Hi, \"credential\", Gi, [Bh(Mh(), Lh(), \"token\"), Mh(\"secret\", !0)]), jh(qi.prototype, {\n      ua: {\n        name: \"addScope\",\n        j: [Mh(\"scope\")]\n      },\n      credential: {\n        name: \"credential\",\n        j: [Bh(Mh(), Bh(Lh(), Uh()), \"optionsOrIdToken\"), Bh(Mh(), Uh(), \"accessToken\", !0)]\n      },\n      Da: {\n        name: \"setCustomParameters\",\n        j: [Lh(\"customOAuthParameters\")]\n      }\n    }), jh(Mi.prototype, {\n      w: {\n        name: \"toJSON\",\n        j: [Mh(null, !0)]\n      }\n    }), jh(Ri.prototype, {\n      w: {\n        name: \"toJSON\",\n        j: [Mh(null, !0)]\n      }\n    }), Kh(no, \"credential\", ro, [Mh(\"verificationId\"), Mh(\"verificationCode\")]), jh(no.prototype, {\n      Ua: {\n        name: \"verifyPhoneNumber\",\n        j: [Mh(\"phoneNumber\"), Vh()]\n      }\n    }), jh(Zi.prototype, {\n      w: {\n        name: \"toJSON\",\n        j: [Mh(null, !0)]\n      }\n    }), jh(Kr.prototype, {\n      toJSON: {\n        name: \"toJSON\",\n        j: [Mh(null, !0)]\n      }\n    }), jh(fo.prototype, {\n      toJSON: {\n        name: \"toJSON\",\n        j: [Mh(null, !0)]\n      }\n    }), jh(lo.prototype, {\n      toJSON: {\n        name: \"toJSON\",\n        j: [Mh(null, !0)]\n      }\n    }), jh(Rh.prototype, {\n      clear: {\n        name: \"clear\",\n        j: []\n      },\n      render: {\n        name: \"render\",\n        j: []\n      },\n      verify: {\n        name: \"verify\",\n        j: []\n      }\n    }), function () {\n      if (void 0 === Hh || !Hh.INTERNAL || !Hh.INTERNAL.registerService) throw Error(\"Cannot find the firebase namespace; be sure to include firebase-app.js before this library.\");\n      var t = {\n        Auth: $c,\n        AuthCredential: ki,\n        Error: Kr\n      };\n      Kh(t, \"EmailAuthProvider\", Xi, []), Kh(t, \"FacebookAuthProvider\", Vi, []), Kh(t, \"GithubAuthProvider\", ji, []), Kh(t, \"GoogleAuthProvider\", Ki, []), Kh(t, \"TwitterAuthProvider\", Hi, []), Kh(t, \"OAuthProvider\", qi, [Mh(\"providerId\")]), Kh(t, \"SAMLAuthProvider\", Ui, [Mh(\"providerId\")]), Kh(t, \"PhoneAuthProvider\", no, [{\n        name: \"auth\",\n        K: \"an instance of Firebase Auth\",\n        optional: !0,\n        M: function (t) {\n          return !!(t && t instanceof $c);\n        }\n      }]), Kh(t, \"RecaptchaVerifier\", Rh, [Bh(Mh(), {\n        name: \"\",\n        K: \"an HTML element\",\n        optional: !1,\n        M: function (t) {\n          return !!(t && t instanceof Element);\n        }\n      }, \"recaptchaContainer\"), Lh(\"recaptchaParameters\", !0), {\n        name: \"app\",\n        K: \"an instance of Firebase App\",\n        optional: !0,\n        M: function (t) {\n          return !!(t && t instanceof Hh.app.App);\n        }\n      }]), Hh.INTERNAL.registerService(\"auth\", function (t, e) {\n        return e({\n          INTERNAL: {\n            getUid: _((t = new $c(t)).getUid, t),\n            getToken: _(t.ac, t),\n            addAuthTokenListener: _(t.Ub, t),\n            removeAuthTokenListener: _(t.Cc, t)\n          }\n        }), t;\n      }, t, function (t, e) {\n        if (\"create\" === t) try {\n          e.auth();\n        } catch (t) {}\n      }), Hh.INTERNAL.extendNamespace({\n        User: pc\n      });\n    }();\n  }).apply(\"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : \"undefined\" != typeof window ? window : {});\n\n  var yi,\n      mi = function () {\n    function t(t) {\n      this.domStorage_ = t, this.prefix_ = \"firebase:\";\n    }\n\n    return t.prototype.set = function (t, e) {\n      null == e ? this.domStorage_.removeItem(this.prefixedName_(t)) : this.domStorage_.setItem(this.prefixedName_(t), Pr(e));\n    }, t.prototype.get = function (t) {\n      var e = this.domStorage_.getItem(this.prefixedName_(t));\n      return null == e ? null : Or(e);\n    }, t.prototype.remove = function (t) {\n      this.domStorage_.removeItem(this.prefixedName_(t));\n    }, t.prototype.prefixedName_ = function (t) {\n      return this.prefix_ + t;\n    }, t.prototype.toString = function () {\n      return this.domStorage_.toString();\n    }, t;\n  }(),\n      gi = function () {\n    function t() {\n      this.cache_ = {}, this.isInMemoryStorage = !0;\n    }\n\n    return t.prototype.set = function (t, e) {\n      null == e ? delete this.cache_[t] : this.cache_[t] = e;\n    }, t.prototype.get = function (t) {\n      return xr(this.cache_, t) ? this.cache_[t] : null;\n    }, t.prototype.remove = function (t) {\n      delete this.cache_[t];\n    }, t;\n  }(),\n      vi = function (t) {\n    try {\n      if (\"undefined\" != typeof window && void 0 !== window[t]) {\n        var e = window[t];\n        return e.setItem(\"firebase:sentinel\", \"cache\"), e.removeItem(\"firebase:sentinel\"), new mi(e);\n      }\n    } catch (t) {}\n\n    return new gi();\n  },\n      bi = vi(\"localStorage\"),\n      wi = vi(\"sessionStorage\"),\n      _i = new ii(\"@firebase/database\"),\n      Ei = (yi = 1, function () {\n    return yi++;\n  }),\n      Ti = function (t) {\n    var e = function (t) {\n      for (var e = [], n = 0, r = 0; r < t.length; r++) {\n        var i = t.charCodeAt(r);\n\n        if (55296 <= i && i <= 56319) {\n          var o = i - 55296;\n          gr(++r < t.length, \"Surrogate pair missing trail surrogate.\"), i = 65536 + (o << 10) + (t.charCodeAt(r) - 56320);\n        }\n\n        e[n++] = i < 128 ? i : (e[n++] = i < 2048 ? i >> 6 | 192 : (e[n++] = i < 65536 ? i >> 12 | 224 : (e[n++] = i >> 18 | 240, i >> 12 & 63 | 128), i >> 6 & 63 | 128), 63 & i | 128);\n      }\n\n      return e;\n    }(t),\n        n = new Kr();\n\n    n.update(e);\n    var r = n.digest();\n    return wr.encodeByteArray(r);\n  },\n      Si = function () {\n    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n    for (var n = \"\", r = 0; r < t.length; r++) Array.isArray(t[r]) || t[r] && \"object\" == typeof t[r] && \"number\" == typeof t[r].length ? n += Si.apply(null, t[r]) : \"object\" == typeof t[r] ? n += Pr(t[r]) : n += t[r], n += \" \";\n\n    return n;\n  },\n      Ii = null,\n      Ci = !0,\n      Ni = function (t, e) {\n    gr(!e || !0 === t || !1 === t, \"Can't turn on custom loggers persistently.\"), !0 === t ? (_i.logLevel = $r.VERBOSE, Ii = _i.log.bind(_i), e && wi.set(\"logging_enabled\", !0)) : \"function\" == typeof t ? Ii = t : (Ii = null, wi.remove(\"logging_enabled\"));\n  },\n      Ai = function () {\n    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n    if (!0 === Ci && (Ci = !1, null === Ii && !0 === wi.get(\"logging_enabled\") && Ni(!0)), Ii) {\n      var n = Si.apply(null, t);\n      Ii(n);\n    }\n  },\n      ki = function (n) {\n    return function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      Ai.apply(void 0, [n].concat(t));\n    };\n  },\n      Di = function () {\n    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n    var n = \"FIREBASE INTERNAL ERROR: \" + Si.apply(void 0, t);\n\n    _i.error(n);\n  },\n      Ri = function () {\n    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n    var n = \"FIREBASE FATAL ERROR: \" + Si.apply(void 0, t);\n    throw _i.error(n), new Error(n);\n  },\n      Oi = function () {\n    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n    var n = \"FIREBASE WARNING: \" + Si.apply(void 0, t);\n\n    _i.warn(n);\n  },\n      Pi = function (t) {\n    return \"number\" == typeof t && (t != t || t == Number.POSITIVE_INFINITY || t == Number.NEGATIVE_INFINITY);\n  },\n      Mi = \"[MIN_NAME]\",\n      xi = \"[MAX_NAME]\",\n      Li = function (t, e) {\n    if (t === e) return 0;\n    if (t === Mi || e === xi) return -1;\n    if (e === Mi || t === xi) return 1;\n    var n = Ki(t),\n        r = Ki(e);\n    return null !== n ? null !== r ? n - r == 0 ? t.length - e.length : n - r : -1 : null !== r ? 1 : t < e ? -1 : 1;\n  },\n      Fi = function (t, e) {\n    return t === e ? 0 : t < e ? -1 : 1;\n  },\n      Ui = function (t, e) {\n    if (e && t in e) return e[t];\n    throw new Error(\"Missing required key (\" + t + \") in object: \" + Pr(e));\n  },\n      qi = function (t) {\n    if (\"object\" != typeof t || null === t) return Pr(t);\n    var e = [];\n\n    for (var n in t) e.push(n);\n\n    e.sort();\n\n    for (var r = \"{\", i = 0; i < e.length; i++) 0 !== i && (r += \",\"), r += Pr(e[i]), r += \":\", r += qi(t[e[i]]);\n\n    return r += \"}\";\n  },\n      Vi = function (t, e) {\n    var n = t.length;\n    if (n <= e) return [t];\n\n    for (var r = [], i = 0; i < n; i += e) n < i + e ? r.push(t.substring(i, n)) : r.push(t.substring(i, i + e));\n\n    return r;\n  },\n      Bi = function (t, n) {\n    if (Array.isArray(t)) for (var e = 0; e < t.length; ++e) n(e, t[e]);else Fr(t, function (t, e) {\n      return n(e, t);\n    });\n  },\n      ji = function (t) {\n    gr(!Pi(t), \"Invalid JSON number\");\n    var e, n, r, i, o, a, s;\n\n    for (0 === t ? e = 1 / t == -1 / (r = n = 0) ? 1 : 0 : (e = t < 0, r = (t = Math.abs(t)) >= Math.pow(2, -1022) ? (n = (i = Math.min(Math.floor(Math.log(t) / Math.LN2), 1023)) + 1023, Math.round(t * Math.pow(2, 52 - i) - Math.pow(2, 52))) : (n = 0, Math.round(t / Math.pow(2, -1074)))), a = [], o = 52; o; o -= 1) a.push(r % 2 ? 1 : 0), r = Math.floor(r / 2);\n\n    for (o = 11; o; o -= 1) a.push(n % 2 ? 1 : 0), n = Math.floor(n / 2);\n\n    a.push(e ? 1 : 0), a.reverse(), s = a.join(\"\");\n    var u = \"\";\n\n    for (o = 0; o < 64; o += 8) {\n      var c = parseInt(s.substr(o, 8), 2).toString(16);\n      1 === c.length && (c = \"0\" + c), u += c;\n    }\n\n    return u.toLowerCase();\n  },\n      Wi = new RegExp(\"^-?\\\\d{1,10}$\"),\n      Ki = function (t) {\n    if (Wi.test(t)) {\n      var e = Number(t);\n      if (-2147483648 <= e && e <= 2147483647) return e;\n    }\n\n    return null;\n  },\n      Qi = function (t) {\n    try {\n      t();\n    } catch (e) {\n      setTimeout(function () {\n        var t = e.stack || \"\";\n        throw Oi(\"Exception was thrown by user callback.\", t), e;\n      }, Math.floor(0));\n    }\n  },\n      Hi = function (t, e) {\n    var n = setTimeout(t, e);\n    return \"object\" == typeof n && n.unref && n.unref(), n;\n  },\n      Gi = function () {\n    function i(t, e) {\n      if (void 0 === e) {\n        this.pieces_ = t.split(\"/\");\n\n        for (var n = 0, r = 0; r < this.pieces_.length; r++) 0 < this.pieces_[r].length && (this.pieces_[n] = this.pieces_[r], n++);\n\n        this.pieces_.length = n, this.pieceNum_ = 0;\n      } else this.pieces_ = t, this.pieceNum_ = e;\n    }\n\n    return Object.defineProperty(i, \"Empty\", {\n      get: function () {\n        return new i(\"\");\n      },\n      enumerable: !0,\n      configurable: !0\n    }), i.prototype.getFront = function () {\n      return this.pieceNum_ >= this.pieces_.length ? null : this.pieces_[this.pieceNum_];\n    }, i.prototype.getLength = function () {\n      return this.pieces_.length - this.pieceNum_;\n    }, i.prototype.popFront = function () {\n      var t = this.pieceNum_;\n      return t < this.pieces_.length && t++, new i(this.pieces_, t);\n    }, i.prototype.getBack = function () {\n      return this.pieceNum_ < this.pieces_.length ? this.pieces_[this.pieces_.length - 1] : null;\n    }, i.prototype.toString = function () {\n      for (var t = \"\", e = this.pieceNum_; e < this.pieces_.length; e++) \"\" !== this.pieces_[e] && (t += \"/\" + this.pieces_[e]);\n\n      return t || \"/\";\n    }, i.prototype.toUrlEncodedString = function () {\n      for (var t = \"\", e = this.pieceNum_; e < this.pieces_.length; e++) \"\" !== this.pieces_[e] && (t += \"/\" + encodeURIComponent(String(this.pieces_[e])));\n\n      return t || \"/\";\n    }, i.prototype.slice = function (t) {\n      return void 0 === t && (t = 0), this.pieces_.slice(this.pieceNum_ + t);\n    }, i.prototype.parent = function () {\n      if (this.pieceNum_ >= this.pieces_.length) return null;\n\n      for (var t = [], e = this.pieceNum_; e < this.pieces_.length - 1; e++) t.push(this.pieces_[e]);\n\n      return new i(t, 0);\n    }, i.prototype.child = function (t) {\n      for (var e = [], n = this.pieceNum_; n < this.pieces_.length; n++) e.push(this.pieces_[n]);\n\n      if (t instanceof i) for (n = t.pieceNum_; n < t.pieces_.length; n++) e.push(t.pieces_[n]);else {\n        var r = t.split(\"/\");\n\n        for (n = 0; n < r.length; n++) 0 < r[n].length && e.push(r[n]);\n      }\n      return new i(e, 0);\n    }, i.prototype.isEmpty = function () {\n      return this.pieceNum_ >= this.pieces_.length;\n    }, i.relativePath = function (t, e) {\n      var n = t.getFront(),\n          r = e.getFront();\n      if (null === n) return e;\n      if (n === r) return i.relativePath(t.popFront(), e.popFront());\n      throw new Error(\"INTERNAL ERROR: innerPath (\" + e + \") is not within outerPath (\" + t + \")\");\n    }, i.comparePaths = function (t, e) {\n      for (var n = t.slice(), r = e.slice(), i = 0; i < n.length && i < r.length; i++) {\n        var o = Li(n[i], r[i]);\n        if (0 !== o) return o;\n      }\n\n      return n.length === r.length ? 0 : n.length < r.length ? -1 : 1;\n    }, i.prototype.equals = function (t) {\n      if (this.getLength() !== t.getLength()) return !1;\n\n      for (var e = this.pieceNum_, n = t.pieceNum_; e <= this.pieces_.length; e++, n++) if (this.pieces_[e] !== t.pieces_[n]) return !1;\n\n      return !0;\n    }, i.prototype.contains = function (t) {\n      var e = this.pieceNum_,\n          n = t.pieceNum_;\n      if (this.getLength() > t.getLength()) return !1;\n\n      for (; e < this.pieces_.length;) {\n        if (this.pieces_[e] !== t.pieces_[n]) return !1;\n        ++e, ++n;\n      }\n\n      return !0;\n    }, i;\n  }(),\n      zi = function () {\n    function t(t, e) {\n      this.errorPrefix_ = e, this.parts_ = t.slice(), this.byteLength_ = Math.max(1, this.parts_.length);\n\n      for (var n = 0; n < this.parts_.length; n++) this.byteLength_ += ti(this.parts_[n]);\n\n      this.checkValid_();\n    }\n\n    return Object.defineProperty(t, \"MAX_PATH_DEPTH\", {\n      get: function () {\n        return 32;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t, \"MAX_PATH_LENGTH_BYTES\", {\n      get: function () {\n        return 768;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.push = function (t) {\n      0 < this.parts_.length && (this.byteLength_ += 1), this.parts_.push(t), this.byteLength_ += ti(t), this.checkValid_();\n    }, t.prototype.pop = function () {\n      var t = this.parts_.pop();\n      this.byteLength_ -= ti(t), 0 < this.parts_.length && (this.byteLength_ -= 1);\n    }, t.prototype.checkValid_ = function () {\n      if (this.byteLength_ > t.MAX_PATH_LENGTH_BYTES) throw new Error(this.errorPrefix_ + \"has a key path longer than \" + t.MAX_PATH_LENGTH_BYTES + \" bytes (\" + this.byteLength_ + \").\");\n      if (this.parts_.length > t.MAX_PATH_DEPTH) throw new Error(this.errorPrefix_ + \"path specified exceeds the maximum depth that can be written (\" + t.MAX_PATH_DEPTH + \") or object contains a cycle \" + this.toErrorString());\n    }, t.prototype.toErrorString = function () {\n      return 0 == this.parts_.length ? \"\" : \"in property '\" + this.parts_.join(\".\") + \"'\";\n    }, t;\n  }(),\n      Yi = \"firebaseio.com\",\n      Xi = \"websocket\",\n      Ji = \"long_polling\",\n      $i = function () {\n    function t(t, e, n, r, i) {\n      void 0 === i && (i = \"\"), this.secure = e, this.namespace = n, this.webSocketOnly = r, this.persistenceKey = i, this.host = t.toLowerCase(), this.domain = this.host.substr(this.host.indexOf(\".\") + 1), this.internalHost = bi.get(\"host:\" + t) || this.host;\n    }\n\n    return t.prototype.needsQueryParam = function () {\n      return this.host !== this.internalHost || this.isCustomHost();\n    }, t.prototype.isCacheableHost = function () {\n      return \"s-\" === this.internalHost.substr(0, 2);\n    }, t.prototype.isDemoHost = function () {\n      return \"firebaseio-demo.com\" === this.domain;\n    }, t.prototype.isCustomHost = function () {\n      return \"firebaseio.com\" !== this.domain && \"firebaseio-demo.com\" !== this.domain;\n    }, t.prototype.updateHost = function (t) {\n      t !== this.internalHost && (this.internalHost = t, this.isCacheableHost() && bi.set(\"host:\" + this.host, this.internalHost));\n    }, t.prototype.connectionURL = function (t, e) {\n      var n;\n      if (gr(\"string\" == typeof t, \"typeof type must == string\"), gr(\"object\" == typeof e, \"typeof params must == object\"), t === Xi) n = (this.secure ? \"wss://\" : \"ws://\") + this.internalHost + \"/.ws?\";else {\n        if (t !== Ji) throw new Error(\"Unknown connection type: \" + t);\n        n = (this.secure ? \"https://\" : \"http://\") + this.internalHost + \"/.lp?\";\n      }\n      this.needsQueryParam() && (e.ns = this.namespace);\n      var r = [];\n      return Fr(e, function (t, e) {\n        r.push(t + \"=\" + e);\n      }), n + r.join(\"&\");\n    }, t.prototype.toString = function () {\n      var t = this.toURLString();\n      return this.persistenceKey && (t += \"<\" + this.persistenceKey + \">\"), t;\n    }, t.prototype.toURLString = function () {\n      return (this.secure ? \"https://\" : \"http://\") + this.host;\n    }, t;\n  }();\n\n  var Zi,\n      to,\n      eo,\n      no,\n      ro,\n      io = function (t) {\n    var e = oo(t),\n        n = e.subdomain;\n    \"firebase\" === e.domain && Ri(e.host + \" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead\"), n && \"undefined\" != n || \"localhost\" === e.domain || Ri(\"Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com\"), e.secure || \"undefined\" != typeof window && window.location && window.location.protocol && -1 !== window.location.protocol.indexOf(\"https:\") && Oi(\"Insecure Firebase access from a secure page. Please use https in calls to new Firebase().\");\n    var r = \"ws\" === e.scheme || \"wss\" === e.scheme;\n    return {\n      repoInfo: new $i(e.host, e.secure, n, r),\n      path: new Gi(e.pathString)\n    };\n  },\n      oo = function (t) {\n    var e = \"\",\n        n = \"\",\n        r = \"\",\n        i = \"\",\n        o = !0,\n        a = \"https\",\n        s = 443;\n\n    if (\"string\" == typeof t) {\n      var u = t.indexOf(\"//\");\n      0 <= u && (a = t.substring(0, u - 1), t = t.substring(u + 2));\n      var c = t.indexOf(\"/\");\n      -1 === c && (c = t.length);\n      var h = t.indexOf(\"?\");\n      -1 === h && (h = t.length), e = t.substring(0, Math.min(c, h)), c < h && (i = function (t) {\n        for (var e = \"\", n = t.split(\"/\"), r = 0; r < n.length; r++) if (0 < n[r].length) {\n          var i = n[r];\n\n          try {\n            i = decodeURIComponent(i.replace(/\\+/g, \" \"));\n          } catch (t) {}\n\n          e += \"/\" + i;\n        }\n\n        return e;\n      }(t.substring(c, h)));\n\n      var l = function (t) {\n        var e = {};\n        \"?\" === t.charAt(0) && (t = t.substring(1));\n\n        for (var n = 0, r = t.split(\"&\"); n < r.length; n++) {\n          var i = r[n];\n\n          if (0 !== i.length) {\n            var o = i.split(\"=\");\n            2 === o.length ? e[decodeURIComponent(o[0])] = decodeURIComponent(o[1]) : Oi(\"Invalid query segment '\" + i + \"' in query '\" + t + \"'\");\n          }\n        }\n\n        return e;\n      }(t.substring(Math.min(t.length, h)));\n\n      0 <= (u = e.indexOf(\":\")) ? (o = \"https\" === a || \"wss\" === a, s = parseInt(e.substring(u + 1), 10)) : u = t.length;\n      var f = e.split(\".\");\n      3 === f.length ? (n = f[1], r = f[0].toLowerCase()) : 2 === f.length ? n = f[0] : \"localhost\" === f[0].slice(0, u).toLowerCase() && (n = \"localhost\"), \"\" === r && \"ns\" in l && (r = l.ns);\n    }\n\n    return {\n      host: e,\n      port: s,\n      domain: n,\n      subdomain: r,\n      secure: o,\n      scheme: a,\n      pathString: i\n    };\n  },\n      ao = /[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/,\n      so = /[\\[\\].#$\\u0000-\\u001F\\u007F]/,\n      uo = 10485760,\n      co = function (t) {\n    return \"string\" == typeof t && 0 !== t.length && !ao.test(t);\n  },\n      ho = function (t) {\n    return \"string\" == typeof t && 0 !== t.length && !so.test(t);\n  },\n      lo = function (t) {\n    return null === t || \"string\" == typeof t || \"number\" == typeof t && !Pi(t) || t && \"object\" == typeof t && xr(t, \".sv\");\n  },\n      fo = function (t, e, n, r, i) {\n    i && void 0 === n || po(Yr(t, e, i), n, r);\n  },\n      po = function (n, t, e) {\n    var r = e instanceof Gi ? new zi(e, n) : e;\n    if (void 0 === t) throw new Error(n + \"contains undefined \" + r.toErrorString());\n    if (\"function\" == typeof t) throw new Error(n + \"contains a function \" + r.toErrorString() + \" with contents = \" + t.toString());\n    if (Pi(t)) throw new Error(n + \"contains \" + t.toString() + \" \" + r.toErrorString());\n    if (\"string\" == typeof t && t.length > uo / 3 && ti(t) > uo) throw new Error(n + \"contains a string greater than \" + uo + \" utf8 bytes \" + r.toErrorString() + \" ('\" + t.substring(0, 50) + \"...')\");\n\n    if (t && \"object\" == typeof t) {\n      var i = !1,\n          o = !1;\n      if (Fr(t, function (t, e) {\n        if (\".value\" === t) i = !0;else if (\".priority\" !== t && \".sv\" !== t && (o = !0, !co(t))) throw new Error(n + \" contains an invalid key (\" + t + \") \" + r.toErrorString() + '.  Keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');\n        r.push(t), po(n, e, r), r.pop();\n      }), i && o) throw new Error(n + ' contains \".value\" child ' + r.toErrorString() + \" in addition to actual children.\");\n    }\n  },\n      yo = function (t, e, n, r, i) {\n    if (!i || void 0 !== n) {\n      var o = Yr(t, e, i);\n      if (!n || \"object\" != typeof n || Array.isArray(n)) throw new Error(o + \" must be an object containing the children to replace.\");\n      var a = [];\n      Fr(n, function (t, e) {\n        var n = new Gi(t);\n        if (po(o, e, r.child(n)), \".priority\" === n.getBack() && !lo(e)) throw new Error(o + \"contains an invalid value for '\" + n.toString() + \"', which must be a valid Firebase priority (a string, finite number, server value, or null).\");\n        a.push(n);\n      }), function (t, e) {\n        var n, r;\n\n        for (n = 0; n < e.length; n++) for (var i = (r = e[n]).slice(), o = 0; o < i.length; o++) if (\".priority\" === i[o] && o === i.length - 1) ;else if (!co(i[o])) throw new Error(t + \"contains an invalid key (\" + i[o] + \") in path \" + r.toString() + '. Keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');\n\n        e.sort(Gi.comparePaths);\n        var a = null;\n\n        for (n = 0; n < e.length; n++) {\n          if (r = e[n], null !== a && a.contains(r)) throw new Error(t + \"contains a path \" + a.toString() + \" that is ancestor of another path \" + r.toString());\n          a = r;\n        }\n      }(o, a);\n    }\n  },\n      mo = function (t, e, n, r) {\n    if (!r || void 0 !== n) {\n      if (Pi(n)) throw new Error(Yr(t, e, r) + \"is \" + n.toString() + \", but must be a valid Firebase priority (a string, finite number, server value, or null).\");\n      if (!lo(n)) throw new Error(Yr(t, e, r) + \"must be a valid Firebase priority (a string, finite number, server value, or null).\");\n    }\n  },\n      go = function (t, e, n, r) {\n    if (!r || void 0 !== n) switch (n) {\n      case \"value\":\n      case \"child_added\":\n      case \"child_removed\":\n      case \"child_changed\":\n      case \"child_moved\":\n        break;\n\n      default:\n        throw new Error(Yr(t, e, r) + 'must be a valid event type = \"value\", \"child_added\", \"child_removed\", \"child_changed\", or \"child_moved\".');\n    }\n  },\n      vo = function (t, e, n, r) {\n    if (!(r && void 0 === n || co(n))) throw new Error(Yr(t, e, r) + 'was an invalid key = \"' + n + '\".  Firebase keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").');\n  },\n      bo = function (t, e, n, r) {\n    if (!(r && void 0 === n || ho(n))) throw new Error(Yr(t, e, r) + 'was an invalid path = \"' + n + '\". Paths must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"');\n  },\n      wo = function (t, e) {\n    if (\".info\" === e.getFront()) throw new Error(t + \" failed = Can't modify data under /.info/\");\n  },\n      _o = function (t, e, n) {\n    var r,\n        i = n.path.toString();\n    if (\"string\" != typeof n.repoInfo.host || 0 === n.repoInfo.host.length || !co(n.repoInfo.namespace) && \"localhost\" !== n.repoInfo.host.split(\":\")[0] || 0 !== i.length && ((r = i) && (r = r.replace(/^\\/*\\.info(\\/|$)/, \"/\")), !ho(r))) throw new Error(Yr(t, e, !1) + 'must be a valid firebase URL and the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".');\n  },\n      Eo = function () {\n    function t(t, e) {\n      this.repo_ = t, this.path_ = e;\n    }\n\n    return t.prototype.cancel = function (t) {\n      zr(\"OnDisconnect.cancel\", 0, 1, arguments.length), Xr(\"OnDisconnect.cancel\", 1, t, !0);\n      var e = new Sr();\n      return this.repo_.onDisconnectCancel(this.path_, e.wrapCallback(t)), e.promise;\n    }, t.prototype.remove = function (t) {\n      zr(\"OnDisconnect.remove\", 0, 1, arguments.length), wo(\"OnDisconnect.remove\", this.path_), Xr(\"OnDisconnect.remove\", 1, t, !0);\n      var e = new Sr();\n      return this.repo_.onDisconnectSet(this.path_, null, e.wrapCallback(t)), e.promise;\n    }, t.prototype.set = function (t, e) {\n      zr(\"OnDisconnect.set\", 1, 2, arguments.length), wo(\"OnDisconnect.set\", this.path_), fo(\"OnDisconnect.set\", 1, t, this.path_, !1), Xr(\"OnDisconnect.set\", 2, e, !0);\n      var n = new Sr();\n      return this.repo_.onDisconnectSet(this.path_, t, n.wrapCallback(e)), n.promise;\n    }, t.prototype.setWithPriority = function (t, e, n) {\n      zr(\"OnDisconnect.setWithPriority\", 2, 3, arguments.length), wo(\"OnDisconnect.setWithPriority\", this.path_), fo(\"OnDisconnect.setWithPriority\", 1, t, this.path_, !1), mo(\"OnDisconnect.setWithPriority\", 2, e, !1), Xr(\"OnDisconnect.setWithPriority\", 3, n, !0);\n      var r = new Sr();\n      return this.repo_.onDisconnectSetWithPriority(this.path_, t, e, r.wrapCallback(n)), r.promise;\n    }, t.prototype.update = function (t, e) {\n      if (zr(\"OnDisconnect.update\", 1, 2, arguments.length), wo(\"OnDisconnect.update\", this.path_), Array.isArray(t)) {\n        for (var n = {}, r = 0; r < t.length; ++r) n[\"\" + r] = t[r];\n\n        t = n, Oi(\"Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.\");\n      }\n\n      yo(\"OnDisconnect.update\", 1, t, this.path_, !1), Xr(\"OnDisconnect.update\", 2, e, !0);\n      var i = new Sr();\n      return this.repo_.onDisconnectUpdate(this.path_, t, i.wrapCallback(e)), i.promise;\n    }, t;\n  }(),\n      To = function () {\n    function t(t, e) {\n      this.committed = t, this.snapshot = e;\n    }\n\n    return t.prototype.toJSON = function () {\n      return zr(\"TransactionResult.toJSON\", 0, 1, arguments.length), {\n        committed: this.committed,\n        snapshot: this.snapshot.toJSON()\n      };\n    }, t;\n  }(),\n      So = (Zi = \"-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz\", to = 0, eo = [], function (t) {\n    var e,\n        n = t === to;\n    to = t;\n    var r = new Array(8);\n\n    for (e = 7; 0 <= e; e--) r[e] = Zi.charAt(t % 64), t = Math.floor(t / 64);\n\n    gr(0 === t, \"Cannot push at time == 0\");\n    var i = r.join(\"\");\n\n    if (n) {\n      for (e = 11; 0 <= e && 63 === eo[e]; e--) eo[e] = 0;\n\n      eo[e]++;\n    } else for (e = 0; e < 12; e++) eo[e] = Math.floor(64 * Math.random());\n\n    for (e = 0; e < 12; e++) i += Zi.charAt(eo[e]);\n\n    return gr(20 === i.length, \"nextPushId: Length should be 20.\"), i;\n  }),\n      Io = function () {\n    function n(t, e) {\n      this.name = t, this.node = e;\n    }\n\n    return n.Wrap = function (t, e) {\n      return new n(t, e);\n    }, n;\n  }(),\n      Co = function () {\n    function t() {}\n\n    return t.prototype.getCompare = function () {\n      return this.compare.bind(this);\n    }, t.prototype.indexedValueChanged = function (t, e) {\n      var n = new Io(Mi, t),\n          r = new Io(Mi, e);\n      return 0 !== this.compare(n, r);\n    }, t.prototype.minPost = function () {\n      return Io.MIN;\n    }, t;\n  }(),\n      No = function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return hr(e, t), Object.defineProperty(e, \"__EMPTY_NODE\", {\n      get: function () {\n        return no;\n      },\n      set: function (t) {\n        no = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.compare = function (t, e) {\n      return Li(t.name, e.name);\n    }, e.prototype.isDefinedOn = function (t) {\n      throw vr(\"KeyIndex.isDefinedOn not expected to be called.\");\n    }, e.prototype.indexedValueChanged = function (t, e) {\n      return !1;\n    }, e.prototype.minPost = function () {\n      return Io.MIN;\n    }, e.prototype.maxPost = function () {\n      return new Io(xi, no);\n    }, e.prototype.makePost = function (t, e) {\n      return gr(\"string\" == typeof t, \"KeyIndex indexValue must always be a string.\"), new Io(t, no);\n    }, e.prototype.toString = function () {\n      return \".key\";\n    }, e;\n  }(Co),\n      Ao = new No();\n\n  var ko,\n      Do,\n      Ro,\n      Oo = function (t) {\n    return \"number\" == typeof t ? \"number:\" + ji(t) : \"string:\" + t;\n  },\n      Po = function (t) {\n    if (t.isLeafNode()) {\n      var e = t.val();\n      gr(\"string\" == typeof e || \"number\" == typeof e || \"object\" == typeof e && xr(e, \".sv\"), \"Priority must be a string or number.\");\n    } else gr(t === ro || t.isEmpty(), \"priority of unexpected type.\");\n\n    gr(t === ro || t.getPriority().isEmpty(), \"Priority nodes can't have a priority of their own.\");\n  },\n      Mo = function () {\n    function o(t, e) {\n      void 0 === e && (e = o.__childrenNodeConstructor.EMPTY_NODE), this.value_ = t, this.priorityNode_ = e, this.lazyHash_ = null, gr(void 0 !== this.value_ && null !== this.value_, \"LeafNode shouldn't be created with null/undefined value.\"), Po(this.priorityNode_);\n    }\n\n    return Object.defineProperty(o, \"__childrenNodeConstructor\", {\n      get: function () {\n        return ko;\n      },\n      set: function (t) {\n        ko = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), o.prototype.isLeafNode = function () {\n      return !0;\n    }, o.prototype.getPriority = function () {\n      return this.priorityNode_;\n    }, o.prototype.updatePriority = function (t) {\n      return new o(this.value_, t);\n    }, o.prototype.getImmediateChild = function (t) {\n      return \".priority\" === t ? this.priorityNode_ : o.__childrenNodeConstructor.EMPTY_NODE;\n    }, o.prototype.getChild = function (t) {\n      return t.isEmpty() ? this : \".priority\" === t.getFront() ? this.priorityNode_ : o.__childrenNodeConstructor.EMPTY_NODE;\n    }, o.prototype.hasChild = function () {\n      return !1;\n    }, o.prototype.getPredecessorChildName = function (t, e) {\n      return null;\n    }, o.prototype.updateImmediateChild = function (t, e) {\n      return \".priority\" === t ? this.updatePriority(e) : e.isEmpty() && \".priority\" !== t ? this : o.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t, e).updatePriority(this.priorityNode_);\n    }, o.prototype.updateChild = function (t, e) {\n      var n = t.getFront();\n      return null === n ? e : e.isEmpty() && \".priority\" !== n ? this : (gr(\".priority\" !== n || 1 === t.getLength(), \".priority must be the last token in a path\"), this.updateImmediateChild(n, o.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(), e)));\n    }, o.prototype.isEmpty = function () {\n      return !1;\n    }, o.prototype.numChildren = function () {\n      return 0;\n    }, o.prototype.forEachChild = function (t, e) {\n      return !1;\n    }, o.prototype.val = function (t) {\n      return t && !this.getPriority().isEmpty() ? {\n        \".value\": this.getValue(),\n        \".priority\": this.getPriority().val()\n      } : this.getValue();\n    }, o.prototype.hash = function () {\n      if (null === this.lazyHash_) {\n        var t = \"\";\n        this.priorityNode_.isEmpty() || (t += \"priority:\" + Oo(this.priorityNode_.val()) + \":\");\n        var e = typeof this.value_;\n        t += e + \":\", t += \"number\" === e ? ji(this.value_) : this.value_, this.lazyHash_ = Ti(t);\n      }\n\n      return this.lazyHash_;\n    }, o.prototype.getValue = function () {\n      return this.value_;\n    }, o.prototype.compareTo = function (t) {\n      return t === o.__childrenNodeConstructor.EMPTY_NODE ? 1 : t instanceof o.__childrenNodeConstructor ? -1 : (gr(t.isLeafNode(), \"Unknown node type\"), this.compareToLeafNode_(t));\n    }, o.prototype.compareToLeafNode_ = function (t) {\n      var e = typeof t.value_,\n          n = typeof this.value_,\n          r = o.VALUE_TYPE_ORDER.indexOf(e),\n          i = o.VALUE_TYPE_ORDER.indexOf(n);\n      return gr(0 <= r, \"Unknown leaf type: \" + e), gr(0 <= i, \"Unknown leaf type: \" + n), r === i ? \"object\" === n ? 0 : this.value_ < t.value_ ? -1 : this.value_ === t.value_ ? 0 : 1 : i - r;\n    }, o.prototype.withIndex = function () {\n      return this;\n    }, o.prototype.isIndexed = function () {\n      return !0;\n    }, o.prototype.equals = function (t) {\n      if (t === this) return !0;\n\n      if (t.isLeafNode()) {\n        var e = t;\n        return this.value_ === e.value_ && this.priorityNode_.equals(e.priorityNode_);\n      }\n\n      return !1;\n    }, o.VALUE_TYPE_ORDER = [\"object\", \"boolean\", \"number\", \"string\"], o;\n  }();\n\n  var xo,\n      Lo,\n      Fo = new (function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return hr(e, t), e.prototype.compare = function (t, e) {\n      var n = t.node.getPriority(),\n          r = e.node.getPriority(),\n          i = n.compareTo(r);\n      return 0 === i ? Li(t.name, e.name) : i;\n    }, e.prototype.isDefinedOn = function (t) {\n      return !t.getPriority().isEmpty();\n    }, e.prototype.indexedValueChanged = function (t, e) {\n      return !t.getPriority().equals(e.getPriority());\n    }, e.prototype.minPost = function () {\n      return Io.MIN;\n    }, e.prototype.maxPost = function () {\n      return new Io(xi, new Mo(\"[PRIORITY-POST]\", Ro));\n    }, e.prototype.makePost = function (t, e) {\n      var n = Do(t);\n      return new Io(e, new Mo(\"[PRIORITY-POST]\", n));\n    }, e.prototype.toString = function () {\n      return \".priority\";\n    }, e;\n  }(Co))(),\n      Uo = function () {\n    function t(t, e, n, r, i) {\n      void 0 === i && (i = null), this.isReverse_ = r, this.resultGenerator_ = i, this.nodeStack_ = [];\n\n      for (var o = 1; !t.isEmpty();) if (t = t, o = e ? n(t.key, e) : 1, r && (o *= -1), o < 0) t = this.isReverse_ ? t.left : t.right;else {\n        if (0 === o) {\n          this.nodeStack_.push(t);\n          break;\n        }\n\n        this.nodeStack_.push(t), t = this.isReverse_ ? t.right : t.left;\n      }\n    }\n\n    return t.prototype.getNext = function () {\n      if (0 === this.nodeStack_.length) return null;\n      var t,\n          e = this.nodeStack_.pop();\n      if (t = this.resultGenerator_ ? this.resultGenerator_(e.key, e.value) : {\n        key: e.key,\n        value: e.value\n      }, this.isReverse_) for (e = e.left; !e.isEmpty();) this.nodeStack_.push(e), e = e.right;else for (e = e.right; !e.isEmpty();) this.nodeStack_.push(e), e = e.left;\n      return t;\n    }, t.prototype.hasNext = function () {\n      return 0 < this.nodeStack_.length;\n    }, t.prototype.peek = function () {\n      if (0 === this.nodeStack_.length) return null;\n      var t = this.nodeStack_[this.nodeStack_.length - 1];\n      return this.resultGenerator_ ? this.resultGenerator_(t.key, t.value) : {\n        key: t.key,\n        value: t.value\n      };\n    }, t;\n  }(),\n      qo = function () {\n    function o(t, e, n, r, i) {\n      this.key = t, this.value = e, this.color = null != n ? n : o.RED, this.left = null != r ? r : Bo.EMPTY_NODE, this.right = null != i ? i : Bo.EMPTY_NODE;\n    }\n\n    return o.prototype.copy = function (t, e, n, r, i) {\n      return new o(null != t ? t : this.key, null != e ? e : this.value, null != n ? n : this.color, null != r ? r : this.left, null != i ? i : this.right);\n    }, o.prototype.count = function () {\n      return this.left.count() + 1 + this.right.count();\n    }, o.prototype.isEmpty = function () {\n      return !1;\n    }, o.prototype.inorderTraversal = function (t) {\n      return this.left.inorderTraversal(t) || t(this.key, this.value) || this.right.inorderTraversal(t);\n    }, o.prototype.reverseTraversal = function (t) {\n      return this.right.reverseTraversal(t) || t(this.key, this.value) || this.left.reverseTraversal(t);\n    }, o.prototype.min_ = function () {\n      return this.left.isEmpty() ? this : this.left.min_();\n    }, o.prototype.minKey = function () {\n      return this.min_().key;\n    }, o.prototype.maxKey = function () {\n      return this.right.isEmpty() ? this.key : this.right.maxKey();\n    }, o.prototype.insert = function (t, e, n) {\n      var r, i;\n      return (i = (r = n(t, (i = this).key)) < 0 ? i.copy(null, null, null, i.left.insert(t, e, n), null) : 0 === r ? i.copy(null, e, null, null, null) : i.copy(null, null, null, null, i.right.insert(t, e, n))).fixUp_();\n    }, o.prototype.removeMin_ = function () {\n      if (this.left.isEmpty()) return Bo.EMPTY_NODE;\n      var t = this;\n      return t.left.isRed_() || t.left.left.isRed_() || (t = t.moveRedLeft_()), (t = t.copy(null, null, null, t.left.removeMin_(), null)).fixUp_();\n    }, o.prototype.remove = function (t, e) {\n      var n, r;\n      if (e(t, (n = this).key) < 0) n.left.isEmpty() || n.left.isRed_() || n.left.left.isRed_() || (n = n.moveRedLeft_()), n = n.copy(null, null, null, n.left.remove(t, e), null);else {\n        if (n.left.isRed_() && (n = n.rotateRight_()), n.right.isEmpty() || n.right.isRed_() || n.right.left.isRed_() || (n = n.moveRedRight_()), 0 === e(t, n.key)) {\n          if (n.right.isEmpty()) return Bo.EMPTY_NODE;\n          r = n.right.min_(), n = n.copy(r.key, r.value, null, null, n.right.removeMin_());\n        }\n\n        n = n.copy(null, null, null, null, n.right.remove(t, e));\n      }\n      return n.fixUp_();\n    }, o.prototype.isRed_ = function () {\n      return this.color;\n    }, o.prototype.fixUp_ = function () {\n      var t = this;\n      return t.right.isRed_() && !t.left.isRed_() && (t = t.rotateLeft_()), t.left.isRed_() && t.left.left.isRed_() && (t = t.rotateRight_()), t.left.isRed_() && t.right.isRed_() && (t = t.colorFlip_()), t;\n    }, o.prototype.moveRedLeft_ = function () {\n      var t = this.colorFlip_();\n      return t.right.left.isRed_() && (t = (t = (t = t.copy(null, null, null, null, t.right.rotateRight_())).rotateLeft_()).colorFlip_()), t;\n    }, o.prototype.moveRedRight_ = function () {\n      var t = this.colorFlip_();\n      return t.left.left.isRed_() && (t = (t = t.rotateRight_()).colorFlip_()), t;\n    }, o.prototype.rotateLeft_ = function () {\n      var t = this.copy(null, null, o.RED, null, this.right.left);\n      return this.right.copy(null, null, this.color, t, null);\n    }, o.prototype.rotateRight_ = function () {\n      var t = this.copy(null, null, o.RED, this.left.right, null);\n      return this.left.copy(null, null, this.color, null, t);\n    }, o.prototype.colorFlip_ = function () {\n      var t = this.left.copy(null, null, !this.left.color, null, null),\n          e = this.right.copy(null, null, !this.right.color, null, null);\n      return this.copy(null, null, !this.color, t, e);\n    }, o.prototype.checkMaxDepth_ = function () {\n      var t = this.check_();\n      return Math.pow(2, t) <= this.count() + 1;\n    }, o.prototype.check_ = function () {\n      var t;\n      if (this.isRed_() && this.left.isRed_()) throw new Error(\"Red node has red child(\" + this.key + \",\" + this.value + \")\");\n      if (this.right.isRed_()) throw new Error(\"Right child of (\" + this.key + \",\" + this.value + \") is red\");\n      if ((t = this.left.check_()) !== this.right.check_()) throw new Error(\"Black depths differ\");\n      return t + (this.isRed_() ? 0 : 1);\n    }, o.RED = !0, o.BLACK = !1, o;\n  }(),\n      Vo = function () {\n    function t() {}\n\n    return t.prototype.copy = function (t, e, n, r, i) {\n      return this;\n    }, t.prototype.insert = function (t, e, n) {\n      return new qo(t, e, null);\n    }, t.prototype.remove = function (t, e) {\n      return this;\n    }, t.prototype.count = function () {\n      return 0;\n    }, t.prototype.isEmpty = function () {\n      return !0;\n    }, t.prototype.inorderTraversal = function (t) {\n      return !1;\n    }, t.prototype.reverseTraversal = function (t) {\n      return !1;\n    }, t.prototype.minKey = function () {\n      return null;\n    }, t.prototype.maxKey = function () {\n      return null;\n    }, t.prototype.check_ = function () {\n      return 0;\n    }, t.prototype.isRed_ = function () {\n      return !1;\n    }, t;\n  }(),\n      Bo = function () {\n    function n(t, e) {\n      void 0 === e && (e = n.EMPTY_NODE), this.comparator_ = t, this.root_ = e;\n    }\n\n    return n.prototype.insert = function (t, e) {\n      return new n(this.comparator_, this.root_.insert(t, e, this.comparator_).copy(null, null, qo.BLACK, null, null));\n    }, n.prototype.remove = function (t) {\n      return new n(this.comparator_, this.root_.remove(t, this.comparator_).copy(null, null, qo.BLACK, null, null));\n    }, n.prototype.get = function (t) {\n      for (var e, n = this.root_; !n.isEmpty();) {\n        if (0 === (e = this.comparator_(t, n.key))) return n.value;\n        e < 0 ? n = n.left : 0 < e && (n = n.right);\n      }\n\n      return null;\n    }, n.prototype.getPredecessorKey = function (t) {\n      for (var e, n = this.root_, r = null; !n.isEmpty();) {\n        if (0 === (e = this.comparator_(t, n.key))) {\n          if (n.left.isEmpty()) return r ? r.key : null;\n\n          for (n = n.left; !n.right.isEmpty();) n = n.right;\n\n          return n.key;\n        }\n\n        e < 0 ? n = n.left : 0 < e && (n = (r = n).right);\n      }\n\n      throw new Error(\"Attempted to find predecessor key for a nonexistent key.  What gives?\");\n    }, n.prototype.isEmpty = function () {\n      return this.root_.isEmpty();\n    }, n.prototype.count = function () {\n      return this.root_.count();\n    }, n.prototype.minKey = function () {\n      return this.root_.minKey();\n    }, n.prototype.maxKey = function () {\n      return this.root_.maxKey();\n    }, n.prototype.inorderTraversal = function (t) {\n      return this.root_.inorderTraversal(t);\n    }, n.prototype.reverseTraversal = function (t) {\n      return this.root_.reverseTraversal(t);\n    }, n.prototype.getIterator = function (t) {\n      return new Uo(this.root_, null, this.comparator_, !1, t);\n    }, n.prototype.getIteratorFrom = function (t, e) {\n      return new Uo(this.root_, t, this.comparator_, !1, e);\n    }, n.prototype.getReverseIteratorFrom = function (t, e) {\n      return new Uo(this.root_, t, this.comparator_, !0, e);\n    }, n.prototype.getReverseIterator = function (t) {\n      return new Uo(this.root_, null, this.comparator_, !0, t);\n    }, n.EMPTY_NODE = new Vo(), n;\n  }(),\n      jo = Math.log(2),\n      Wo = function () {\n    function t(t) {\n      var e;\n      this.count = (e = t + 1, parseInt(Math.log(e) / jo, 10)), this.current_ = this.count - 1;\n      var n,\n          r = (n = this.count, parseInt(Array(n + 1).join(\"1\"), 2));\n      this.bits_ = t + 1 & r;\n    }\n\n    return t.prototype.nextBitIsOne = function () {\n      var t = !(this.bits_ & 1 << this.current_);\n      return this.current_--, t;\n    }, t;\n  }(),\n      Ko = function (c, t, h, e) {\n    c.sort(t);\n\n    var l = function (t, e) {\n      var n,\n          r,\n          i = e - t;\n      if (0 == i) return null;\n      if (1 == i) return n = c[t], r = h ? h(n) : n, new qo(r, n.node, qo.BLACK, null, null);\n      var o = parseInt(i / 2, 10) + t,\n          a = l(t, o),\n          s = l(o + 1, e);\n      return n = c[o], r = h ? h(n) : n, new qo(r, n.node, qo.BLACK, a, s);\n    },\n        n = function (t) {\n      for (var e = null, n = null, s = c.length, r = function (t, e) {\n        var n = s - t,\n            r = s;\n        s -= t;\n        var i = l(n + 1, r),\n            o = c[n],\n            a = h ? h(o) : o;\n        u(new qo(a, o.node, e, null, i));\n      }, u = function (t) {\n        e = e ? e.left = t : n = t;\n      }, i = 0; i < t.count; ++i) {\n        var o = t.nextBitIsOne(),\n            a = Math.pow(2, t.count - (i + 1));\n        o ? r(a, qo.BLACK) : (r(a, qo.BLACK), r(a, qo.RED));\n      }\n\n      return n;\n    }(new Wo(c.length));\n\n    return new Bo(e || t, n);\n  },\n      Qo = {},\n      Ho = function () {\n    function l(t, e) {\n      this.indexes_ = t, this.indexSet_ = e;\n    }\n\n    return Object.defineProperty(l, \"Default\", {\n      get: function () {\n        return gr(Fo, \"ChildrenNode.ts has not been loaded\"), xo = xo || new l({\n          \".priority\": Qo\n        }, {\n          \".priority\": Fo\n        });\n      },\n      enumerable: !0,\n      configurable: !0\n    }), l.prototype.get = function (t) {\n      var e = Lr(this.indexes_, t);\n      if (!e) throw new Error(\"No index defined for \" + t);\n      return e === Qo ? null : e;\n    }, l.prototype.hasIndex = function (t) {\n      return xr(this.indexSet_, t.toString());\n    }, l.prototype.addIndex = function (t, e) {\n      gr(t !== Ao, \"KeyIndex always exists and isn't meant to be added to the IndexMap.\");\n\n      for (var n, r = [], i = !1, o = e.getIterator(Io.Wrap), a = o.getNext(); a;) i = i || t.isDefinedOn(a.node), r.push(a), a = o.getNext();\n\n      n = i ? Ko(r, t.getCompare()) : Qo;\n      var s = t.toString(),\n          u = Ur(this.indexSet_);\n      u[s] = t;\n      var c = Ur(this.indexes_);\n      return c[s] = n, new l(c, u);\n    }, l.prototype.addToIndexes = function (u, c) {\n      var h = this;\n      return new l(Br(this.indexes_, function (t, e) {\n        var n = Lr(h.indexSet_, e);\n\n        if (gr(n, \"Missing index implementation for \" + e), t === Qo) {\n          if (n.isDefinedOn(u.node)) {\n            for (var r = [], i = c.getIterator(Io.Wrap), o = i.getNext(); o;) o.name != u.name && r.push(o), o = i.getNext();\n\n            return r.push(u), Ko(r, n.getCompare());\n          }\n\n          return Qo;\n        }\n\n        var a = c.get(u.name),\n            s = t;\n        return a && (s = s.remove(new Io(u.name, a))), s.insert(u, u.node);\n      }), this.indexSet_);\n    }, l.prototype.removeFromIndexes = function (n, r) {\n      return new l(Br(this.indexes_, function (t) {\n        if (t === Qo) return t;\n        var e = r.get(n.name);\n        return e ? t.remove(new Io(n.name, e)) : t;\n      }), this.indexSet_);\n    }, l;\n  }();\n\n  function Go(t, e) {\n    return Li(t.name, e.name);\n  }\n\n  function zo(t, e) {\n    return Li(t, e);\n  }\n\n  var Yo = function () {\n    function s(t, e, n) {\n      this.children_ = t, this.priorityNode_ = e, this.indexMap_ = n, this.lazyHash_ = null, this.priorityNode_ && Po(this.priorityNode_), this.children_.isEmpty() && gr(!this.priorityNode_ || this.priorityNode_.isEmpty(), \"An empty node cannot have a priority\");\n    }\n\n    return Object.defineProperty(s, \"EMPTY_NODE\", {\n      get: function () {\n        return Lo || (Lo = new s(new Bo(zo), null, Ho.Default));\n      },\n      enumerable: !0,\n      configurable: !0\n    }), s.prototype.isLeafNode = function () {\n      return !1;\n    }, s.prototype.getPriority = function () {\n      return this.priorityNode_ || Lo;\n    }, s.prototype.updatePriority = function (t) {\n      return this.children_.isEmpty() ? this : new s(this.children_, t, this.indexMap_);\n    }, s.prototype.getImmediateChild = function (t) {\n      if (\".priority\" === t) return this.getPriority();\n      var e = this.children_.get(t);\n      return null === e ? Lo : e;\n    }, s.prototype.getChild = function (t) {\n      var e = t.getFront();\n      return null === e ? this : this.getImmediateChild(e).getChild(t.popFront());\n    }, s.prototype.hasChild = function (t) {\n      return null !== this.children_.get(t);\n    }, s.prototype.updateImmediateChild = function (t, e) {\n      if (gr(e, \"We should always be passing snapshot nodes\"), \".priority\" === t) return this.updatePriority(e);\n      var n = new Io(t, e),\n          r = void 0,\n          i = void 0;\n      return i = e.isEmpty() ? (r = this.children_.remove(t), this.indexMap_.removeFromIndexes(n, this.children_)) : (r = this.children_.insert(t, e), this.indexMap_.addToIndexes(n, this.children_)), new s(r, r.isEmpty() ? Lo : this.priorityNode_, i);\n    }, s.prototype.updateChild = function (t, e) {\n      var n = t.getFront();\n      if (null === n) return e;\n      gr(\".priority\" !== t.getFront() || 1 === t.getLength(), \".priority must be the last token in a path\");\n      var r = this.getImmediateChild(n).updateChild(t.popFront(), e);\n      return this.updateImmediateChild(n, r);\n    }, s.prototype.isEmpty = function () {\n      return this.children_.isEmpty();\n    }, s.prototype.numChildren = function () {\n      return this.children_.count();\n    }, s.prototype.val = function (n) {\n      if (this.isEmpty()) return null;\n      var r = {},\n          i = 0,\n          o = 0,\n          a = !0;\n\n      if (this.forEachChild(Fo, function (t, e) {\n        r[t] = e.val(n), i++, a && s.INTEGER_REGEXP_.test(t) ? o = Math.max(o, Number(t)) : a = !1;\n      }), !n && a && o < 2 * i) {\n        var t = [];\n\n        for (var e in r) t[e] = r[e];\n\n        return t;\n      }\n\n      return n && !this.getPriority().isEmpty() && (r[\".priority\"] = this.getPriority().val()), r;\n    }, s.prototype.hash = function () {\n      if (null === this.lazyHash_) {\n        var r = \"\";\n        this.getPriority().isEmpty() || (r += \"priority:\" + Oo(this.getPriority().val()) + \":\"), this.forEachChild(Fo, function (t, e) {\n          var n = e.hash();\n          \"\" !== n && (r += \":\" + t + \":\" + n);\n        }), this.lazyHash_ = \"\" === r ? \"\" : Ti(r);\n      }\n\n      return this.lazyHash_;\n    }, s.prototype.getPredecessorChildName = function (t, e, n) {\n      var r = this.resolveIndex_(n);\n\n      if (r) {\n        var i = r.getPredecessorKey(new Io(t, e));\n        return i ? i.name : null;\n      }\n\n      return this.children_.getPredecessorKey(t);\n    }, s.prototype.getFirstChildName = function (t) {\n      var e = this.resolveIndex_(t);\n\n      if (e) {\n        var n = e.minKey();\n        return n && n.name;\n      }\n\n      return this.children_.minKey();\n    }, s.prototype.getFirstChild = function (t) {\n      var e = this.getFirstChildName(t);\n      return e ? new Io(e, this.children_.get(e)) : null;\n    }, s.prototype.getLastChildName = function (t) {\n      var e = this.resolveIndex_(t);\n\n      if (e) {\n        var n = e.maxKey();\n        return n && n.name;\n      }\n\n      return this.children_.maxKey();\n    }, s.prototype.getLastChild = function (t) {\n      var e = this.getLastChildName(t);\n      return e ? new Io(e, this.children_.get(e)) : null;\n    }, s.prototype.forEachChild = function (t, e) {\n      var n = this.resolveIndex_(t);\n      return n ? n.inorderTraversal(function (t) {\n        return e(t.name, t.node);\n      }) : this.children_.inorderTraversal(e);\n    }, s.prototype.getIterator = function (t) {\n      return this.getIteratorFrom(t.minPost(), t);\n    }, s.prototype.getIteratorFrom = function (t, e) {\n      var n = this.resolveIndex_(e);\n      if (n) return n.getIteratorFrom(t, function (t) {\n        return t;\n      });\n\n      for (var r = this.children_.getIteratorFrom(t.name, Io.Wrap), i = r.peek(); null != i && e.compare(i, t) < 0;) r.getNext(), i = r.peek();\n\n      return r;\n    }, s.prototype.getReverseIterator = function (t) {\n      return this.getReverseIteratorFrom(t.maxPost(), t);\n    }, s.prototype.getReverseIteratorFrom = function (t, e) {\n      var n = this.resolveIndex_(e);\n      if (n) return n.getReverseIteratorFrom(t, function (t) {\n        return t;\n      });\n\n      for (var r = this.children_.getReverseIteratorFrom(t.name, Io.Wrap), i = r.peek(); null != i && 0 < e.compare(i, t);) r.getNext(), i = r.peek();\n\n      return r;\n    }, s.prototype.compareTo = function (t) {\n      return this.isEmpty() ? t.isEmpty() ? 0 : -1 : t.isLeafNode() || t.isEmpty() ? 1 : t === Xo ? -1 : 0;\n    }, s.prototype.withIndex = function (t) {\n      if (t === Ao || this.indexMap_.hasIndex(t)) return this;\n      var e = this.indexMap_.addIndex(t, this.children_);\n      return new s(this.children_, this.priorityNode_, e);\n    }, s.prototype.isIndexed = function (t) {\n      return t === Ao || this.indexMap_.hasIndex(t);\n    }, s.prototype.equals = function (t) {\n      if (t === this) return !0;\n      if (t.isLeafNode()) return !1;\n      var e = t;\n\n      if (this.getPriority().equals(e.getPriority())) {\n        if (this.children_.count() !== e.children_.count()) return !1;\n\n        for (var n = this.getIterator(Fo), r = e.getIterator(Fo), i = n.getNext(), o = r.getNext(); i && o;) {\n          if (i.name !== o.name || !i.node.equals(o.node)) return !1;\n          i = n.getNext(), o = r.getNext();\n        }\n\n        return null === i && null === o;\n      }\n\n      return !1;\n    }, s.prototype.resolveIndex_ = function (t) {\n      return t === Ao ? null : this.indexMap_.get(t.toString());\n    }, s.INTEGER_REGEXP_ = /^(0|[1-9]\\d*)$/, s;\n  }(),\n      Xo = new (function (t) {\n    function e() {\n      return t.call(this, new Bo(zo), Yo.EMPTY_NODE, Ho.Default) || this;\n    }\n\n    return hr(e, t), e.prototype.compareTo = function (t) {\n      return t === this ? 0 : 1;\n    }, e.prototype.equals = function (t) {\n      return t === this;\n    }, e.prototype.getPriority = function () {\n      return this;\n    }, e.prototype.getImmediateChild = function (t) {\n      return Yo.EMPTY_NODE;\n    }, e.prototype.isEmpty = function () {\n      return !1;\n    }, e;\n  }(Yo))();\n\n  Object.defineProperties(Io, {\n    MIN: {\n      value: new Io(Mi, Yo.EMPTY_NODE)\n    },\n    MAX: {\n      value: new Io(xi, Xo)\n    }\n  }), No.__EMPTY_NODE = Yo.EMPTY_NODE, Mo.__childrenNodeConstructor = Yo, ro = Xo, Ro = Xo;\n  var Jo = !0;\n\n  function $o(t, e) {\n    if (void 0 === e && (e = null), null === t) return Yo.EMPTY_NODE;\n    if (\"object\" == typeof t && \".priority\" in t && (e = t[\".priority\"]), gr(null === e || \"string\" == typeof e || \"number\" == typeof e || \"object\" == typeof e && \".sv\" in e, \"Invalid priority type found: \" + typeof e), \"object\" == typeof t && \".value\" in t && null !== t[\".value\"] && (t = t[\".value\"]), \"object\" != typeof t || \".sv\" in t) return new Mo(t, $o(e));\n\n    if (t instanceof Array || !Jo) {\n      var r = Yo.EMPTY_NODE,\n          i = t;\n      return Fr(i, function (t, e) {\n        if (xr(i, t) && \".\" !== t.substring(0, 1)) {\n          var n = $o(e);\n          !n.isLeafNode() && n.isEmpty() || (r = r.updateImmediateChild(t, n));\n        }\n      }), r.updatePriority($o(e));\n    }\n\n    var o = [],\n        a = !1,\n        s = t;\n    if (Fr(s, function (t, e) {\n      if (\"string\" != typeof t || \".\" !== t.substring(0, 1)) {\n        var n = $o(s[t]);\n        n.isEmpty() || (a = a || !n.getPriority().isEmpty(), o.push(new Io(t, n)));\n      }\n    }), 0 == o.length) return Yo.EMPTY_NODE;\n    var n = Ko(o, Go, function (t) {\n      return t.name;\n    }, zo);\n\n    if (a) {\n      var u = Ko(o, Fo.getCompare());\n      return new Yo(n, $o(e), new Ho({\n        \".priority\": u\n      }, {\n        \".priority\": Fo\n      }));\n    }\n\n    return new Yo(n, $o(e), Ho.Default);\n  }\n\n  Do = $o;\n\n  var Zo,\n      ta,\n      ea,\n      na = new (function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return hr(e, t), e.prototype.compare = function (t, e) {\n      var n = t.node.compareTo(e.node);\n      return 0 === n ? Li(t.name, e.name) : n;\n    }, e.prototype.isDefinedOn = function (t) {\n      return !0;\n    }, e.prototype.indexedValueChanged = function (t, e) {\n      return !t.equals(e);\n    }, e.prototype.minPost = function () {\n      return Io.MIN;\n    }, e.prototype.maxPost = function () {\n      return Io.MAX;\n    }, e.prototype.makePost = function (t, e) {\n      var n = $o(t);\n      return new Io(e, n);\n    }, e.prototype.toString = function () {\n      return \".value\";\n    }, e;\n  }(Co))(),\n      ra = function (n) {\n    function t(t) {\n      var e = n.call(this) || this;\n      return e.indexPath_ = t, gr(!t.isEmpty() && \".priority\" !== t.getFront(), \"Can't create PathIndex with empty path or .priority key\"), e;\n    }\n\n    return hr(t, n), t.prototype.extractChild = function (t) {\n      return t.getChild(this.indexPath_);\n    }, t.prototype.isDefinedOn = function (t) {\n      return !t.getChild(this.indexPath_).isEmpty();\n    }, t.prototype.compare = function (t, e) {\n      var n = this.extractChild(t.node),\n          r = this.extractChild(e.node),\n          i = n.compareTo(r);\n      return 0 === i ? Li(t.name, e.name) : i;\n    }, t.prototype.makePost = function (t, e) {\n      var n = $o(t),\n          r = Yo.EMPTY_NODE.updateChild(this.indexPath_, n);\n      return new Io(e, r);\n    }, t.prototype.maxPost = function () {\n      var t = Yo.EMPTY_NODE.updateChild(this.indexPath_, Xo);\n      return new Io(xi, t);\n    }, t.prototype.toString = function () {\n      return this.indexPath_.slice().join(\"/\");\n    }, t;\n  }(Co),\n      ia = function () {\n    function i(t, e, n) {\n      this.node_ = t, this.ref_ = e, this.index_ = n;\n    }\n\n    return i.prototype.val = function () {\n      return zr(\"DataSnapshot.val\", 0, 0, arguments.length), this.node_.val();\n    }, i.prototype.exportVal = function () {\n      return zr(\"DataSnapshot.exportVal\", 0, 0, arguments.length), this.node_.val(!0);\n    }, i.prototype.toJSON = function () {\n      return zr(\"DataSnapshot.toJSON\", 0, 1, arguments.length), this.exportVal();\n    }, i.prototype.exists = function () {\n      return zr(\"DataSnapshot.exists\", 0, 0, arguments.length), !this.node_.isEmpty();\n    }, i.prototype.child = function (t) {\n      zr(\"DataSnapshot.child\", 0, 1, arguments.length), t = String(t), bo(\"DataSnapshot.child\", 1, t, !1);\n      var e = new Gi(t),\n          n = this.ref_.child(e);\n      return new i(this.node_.getChild(e), n, Fo);\n    }, i.prototype.hasChild = function (t) {\n      zr(\"DataSnapshot.hasChild\", 1, 1, arguments.length), bo(\"DataSnapshot.hasChild\", 1, t, !1);\n      var e = new Gi(t);\n      return !this.node_.getChild(e).isEmpty();\n    }, i.prototype.getPriority = function () {\n      return zr(\"DataSnapshot.getPriority\", 0, 0, arguments.length), this.node_.getPriority().val();\n    }, i.prototype.forEach = function (n) {\n      var r = this;\n      return zr(\"DataSnapshot.forEach\", 1, 1, arguments.length), Xr(\"DataSnapshot.forEach\", 1, n, !1), !this.node_.isLeafNode() && !!this.node_.forEachChild(this.index_, function (t, e) {\n        return n(new i(e, r.ref_.child(t), Fo));\n      });\n    }, i.prototype.hasChildren = function () {\n      return zr(\"DataSnapshot.hasChildren\", 0, 0, arguments.length), !this.node_.isLeafNode() && !this.node_.isEmpty();\n    }, Object.defineProperty(i.prototype, \"key\", {\n      get: function () {\n        return this.ref_.getKey();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), i.prototype.numChildren = function () {\n      return zr(\"DataSnapshot.numChildren\", 0, 0, arguments.length), this.node_.numChildren();\n    }, i.prototype.getRef = function () {\n      return zr(\"DataSnapshot.ref\", 0, 0, arguments.length), this.ref_;\n    }, Object.defineProperty(i.prototype, \"ref\", {\n      get: function () {\n        return this.getRef();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), i;\n  }(),\n      oa = function () {\n    function t(t, e, n, r) {\n      this.eventType = t, this.eventRegistration = e, this.snapshot = n, this.prevName = r;\n    }\n\n    return t.prototype.getPath = function () {\n      var t = this.snapshot.getRef();\n      return \"value\" === this.eventType ? t.path : t.getParent().path;\n    }, t.prototype.getEventType = function () {\n      return this.eventType;\n    }, t.prototype.getEventRunner = function () {\n      return this.eventRegistration.getEventRunner(this);\n    }, t.prototype.toString = function () {\n      return this.getPath().toString() + \":\" + this.eventType + \":\" + Pr(this.snapshot.exportVal());\n    }, t;\n  }(),\n      aa = function () {\n    function t(t, e, n) {\n      this.eventRegistration = t, this.error = e, this.path = n;\n    }\n\n    return t.prototype.getPath = function () {\n      return this.path;\n    }, t.prototype.getEventType = function () {\n      return \"cancel\";\n    }, t.prototype.getEventRunner = function () {\n      return this.eventRegistration.getEventRunner(this);\n    }, t.prototype.toString = function () {\n      return this.path.toString() + \":cancel\";\n    }, t;\n  }(),\n      sa = function () {\n    function e(t, e, n) {\n      this.callback_ = t, this.cancelCallback_ = e, this.context_ = n;\n    }\n\n    return e.prototype.respondsTo = function (t) {\n      return \"value\" === t;\n    }, e.prototype.createEvent = function (t, e) {\n      var n = e.getQueryParams().getIndex();\n      return new oa(\"value\", this, new ia(t.snapshotNode, e.getRef(), n));\n    }, e.prototype.getEventRunner = function (t) {\n      var e = this.context_;\n\n      if (\"cancel\" === t.getEventType()) {\n        gr(this.cancelCallback_, \"Raising a cancel event on a listener with no cancel callback\");\n        var n = this.cancelCallback_;\n        return function () {\n          n.call(e, t.error);\n        };\n      }\n\n      var r = this.callback_;\n      return function () {\n        r.call(e, t.snapshot);\n      };\n    }, e.prototype.createCancelEvent = function (t, e) {\n      return this.cancelCallback_ ? new aa(this, t, e) : null;\n    }, e.prototype.matches = function (t) {\n      return t instanceof e && (!t.callback_ || !this.callback_ || t.callback_ === this.callback_ && t.context_ === this.context_);\n    }, e.prototype.hasAnyCallback = function () {\n      return null !== this.callback_;\n    }, e;\n  }(),\n      ua = function () {\n    function i(t, e, n) {\n      this.callbacks_ = t, this.cancelCallback_ = e, this.context_ = n;\n    }\n\n    return i.prototype.respondsTo = function (t) {\n      var e = \"children_added\" === t ? \"child_added\" : t;\n      return e = \"children_removed\" === e ? \"child_removed\" : e, xr(this.callbacks_, e);\n    }, i.prototype.createCancelEvent = function (t, e) {\n      return this.cancelCallback_ ? new aa(this, t, e) : null;\n    }, i.prototype.createEvent = function (t, e) {\n      gr(null != t.childName, \"Child events should have a childName.\");\n      var n = e.getRef().child(t.childName),\n          r = e.getQueryParams().getIndex();\n      return new oa(t.type, this, new ia(t.snapshotNode, n, r), t.prevName);\n    }, i.prototype.getEventRunner = function (t) {\n      var e = this.context_;\n\n      if (\"cancel\" === t.getEventType()) {\n        gr(this.cancelCallback_, \"Raising a cancel event on a listener with no cancel callback\");\n        var n = this.cancelCallback_;\n        return function () {\n          n.call(e, t.error);\n        };\n      }\n\n      var r = this.callbacks_[t.eventType];\n      return function () {\n        r.call(e, t.snapshot, t.prevName);\n      };\n    }, i.prototype.matches = function (n) {\n      if (n instanceof i) {\n        if (!this.callbacks_ || !n.callbacks_) return !0;\n\n        if (this.context_ === n.context_) {\n          var t = Vr(n.callbacks_);\n\n          if (t === Vr(this.callbacks_)) {\n            if (1 !== t) return function (t, e) {\n              for (var n in t) if (Object.prototype.hasOwnProperty.call(t, n) && !e(n, t[n])) return !1;\n\n              return !0;\n            }(this.callbacks_, function (t, e) {\n              return n.callbacks_[t] === e;\n            });\n            var e = Wr(n.callbacks_),\n                r = Wr(this.callbacks_);\n            return !(r !== e || n.callbacks_[e] && this.callbacks_[r] && n.callbacks_[e] !== this.callbacks_[r]);\n          }\n        }\n      }\n\n      return !1;\n    }, i.prototype.hasAnyCallback = function () {\n      return null !== this.callbacks_;\n    }, i;\n  }(),\n      ca = function () {\n    function c(t, e, n, r) {\n      this.repo = t, this.path = e, this.queryParams_ = n, this.orderByCalled_ = r;\n    }\n\n    return Object.defineProperty(c, \"__referenceConstructor\", {\n      get: function () {\n        return gr(Zo, \"Reference.ts has not been loaded\"), Zo;\n      },\n      set: function (t) {\n        Zo = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), c.validateQueryEndpoints_ = function (t) {\n      var e = null,\n          n = null;\n\n      if (t.hasStart() && (e = t.getIndexStartValue()), t.hasEnd() && (n = t.getIndexEndValue()), t.getIndex() === Ao) {\n        var r = \"Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().\",\n            i = \"Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.\";\n\n        if (t.hasStart()) {\n          if (t.getIndexStartName() != Mi) throw new Error(r);\n          if (\"string\" != typeof e) throw new Error(i);\n        }\n\n        if (t.hasEnd()) {\n          if (t.getIndexEndName() != xi) throw new Error(r);\n          if (\"string\" != typeof n) throw new Error(i);\n        }\n      } else if (t.getIndex() === Fo) {\n        if (null != e && !lo(e) || null != n && !lo(n)) throw new Error(\"Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).\");\n      } else if (gr(t.getIndex() instanceof ra || t.getIndex() === na, \"unknown index type.\"), null != e && \"object\" == typeof e || null != n && \"object\" == typeof n) throw new Error(\"Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.\");\n    }, c.validateLimit_ = function (t) {\n      if (t.hasStart() && t.hasEnd() && t.hasLimit() && !t.hasAnchoredLimit()) throw new Error(\"Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.\");\n    }, c.prototype.validateNoPreviousOrderByCall_ = function (t) {\n      if (!0 === this.orderByCalled_) throw new Error(t + \": You can't combine multiple orderBy calls.\");\n    }, c.prototype.getQueryParams = function () {\n      return this.queryParams_;\n    }, c.prototype.getRef = function () {\n      return zr(\"Query.ref\", 0, 0, arguments.length), new c.__referenceConstructor(this.repo, this.path);\n    }, c.prototype.on = function (t, e, n, r) {\n      zr(\"Query.on\", 2, 4, arguments.length), go(\"Query.on\", 1, t, !1), Xr(\"Query.on\", 2, e, !1);\n      var i = c.getCancelAndContextArgs_(\"Query.on\", n, r);\n      if (\"value\" === t) this.onValueEvent(e, i.cancel, i.context);else {\n        var o = {};\n        o[t] = e, this.onChildEvent(o, i.cancel, i.context);\n      }\n      return e;\n    }, c.prototype.onValueEvent = function (t, e, n) {\n      var r = new sa(t, e || null, n || null);\n      this.repo.addEventCallbackForQuery(this, r);\n    }, c.prototype.onChildEvent = function (t, e, n) {\n      var r = new ua(t, e, n);\n      this.repo.addEventCallbackForQuery(this, r);\n    }, c.prototype.off = function (t, e, n) {\n      zr(\"Query.off\", 0, 3, arguments.length), go(\"Query.off\", 1, t, !0), Xr(\"Query.off\", 2, e, !0), Jr(\"Query.off\", 3, n, !0);\n      var r = null,\n          i = null;\n      \"value\" === t ? r = new sa(e || null, null, n || null) : t && (e && ((i = {})[t] = e), r = new ua(i, null, n || null));\n      this.repo.removeEventCallbackForQuery(this, r);\n    }, c.prototype.once = function (e, n, t, r) {\n      var i = this;\n      zr(\"Query.once\", 1, 4, arguments.length), go(\"Query.once\", 1, e, !1), Xr(\"Query.once\", 2, n, !0);\n      var o = c.getCancelAndContextArgs_(\"Query.once\", t, r),\n          a = !0,\n          s = new Sr();\n      s.promise.catch(function () {});\n\n      var u = function (t) {\n        a && (a = !1, i.off(e, u), n && n.bind(o.context)(t), s.resolve(t));\n      };\n\n      return this.on(e, u, function (t) {\n        i.off(e, u), o.cancel && o.cancel.bind(o.context)(t), s.reject(t);\n      }), s.promise;\n    }, c.prototype.limitToFirst = function (t) {\n      if (zr(\"Query.limitToFirst\", 1, 1, arguments.length), \"number\" != typeof t || Math.floor(t) !== t || t <= 0) throw new Error(\"Query.limitToFirst: First argument must be a positive integer.\");\n      if (this.queryParams_.hasLimit()) throw new Error(\"Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).\");\n      return new c(this.repo, this.path, this.queryParams_.limitToFirst(t), this.orderByCalled_);\n    }, c.prototype.limitToLast = function (t) {\n      if (zr(\"Query.limitToLast\", 1, 1, arguments.length), \"number\" != typeof t || Math.floor(t) !== t || t <= 0) throw new Error(\"Query.limitToLast: First argument must be a positive integer.\");\n      if (this.queryParams_.hasLimit()) throw new Error(\"Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).\");\n      return new c(this.repo, this.path, this.queryParams_.limitToLast(t), this.orderByCalled_);\n    }, c.prototype.orderByChild = function (t) {\n      if (zr(\"Query.orderByChild\", 1, 1, arguments.length), \"$key\" === t) throw new Error('Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.');\n      if (\"$priority\" === t) throw new Error('Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.');\n      if (\"$value\" === t) throw new Error('Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.');\n      bo(\"Query.orderByChild\", 1, t, !1), this.validateNoPreviousOrderByCall_(\"Query.orderByChild\");\n      var e = new Gi(t);\n      if (e.isEmpty()) throw new Error(\"Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.\");\n      var n = new ra(e),\n          r = this.queryParams_.orderBy(n);\n      return c.validateQueryEndpoints_(r), new c(this.repo, this.path, r, !0);\n    }, c.prototype.orderByKey = function () {\n      zr(\"Query.orderByKey\", 0, 0, arguments.length), this.validateNoPreviousOrderByCall_(\"Query.orderByKey\");\n      var t = this.queryParams_.orderBy(Ao);\n      return c.validateQueryEndpoints_(t), new c(this.repo, this.path, t, !0);\n    }, c.prototype.orderByPriority = function () {\n      zr(\"Query.orderByPriority\", 0, 0, arguments.length), this.validateNoPreviousOrderByCall_(\"Query.orderByPriority\");\n      var t = this.queryParams_.orderBy(Fo);\n      return c.validateQueryEndpoints_(t), new c(this.repo, this.path, t, !0);\n    }, c.prototype.orderByValue = function () {\n      zr(\"Query.orderByValue\", 0, 0, arguments.length), this.validateNoPreviousOrderByCall_(\"Query.orderByValue\");\n      var t = this.queryParams_.orderBy(na);\n      return c.validateQueryEndpoints_(t), new c(this.repo, this.path, t, !0);\n    }, c.prototype.startAt = function (t, e) {\n      void 0 === t && (t = null), zr(\"Query.startAt\", 0, 2, arguments.length), fo(\"Query.startAt\", 1, t, this.path, !0), vo(\"Query.startAt\", 2, e, !0);\n      var n = this.queryParams_.startAt(t, e);\n      if (c.validateLimit_(n), c.validateQueryEndpoints_(n), this.queryParams_.hasStart()) throw new Error(\"Query.startAt: Starting point was already set (by another call to startAt or equalTo).\");\n      return void 0 === t && (e = t = null), new c(this.repo, this.path, n, this.orderByCalled_);\n    }, c.prototype.endAt = function (t, e) {\n      void 0 === t && (t = null), zr(\"Query.endAt\", 0, 2, arguments.length), fo(\"Query.endAt\", 1, t, this.path, !0), vo(\"Query.endAt\", 2, e, !0);\n      var n = this.queryParams_.endAt(t, e);\n      if (c.validateLimit_(n), c.validateQueryEndpoints_(n), this.queryParams_.hasEnd()) throw new Error(\"Query.endAt: Ending point was already set (by another call to endAt or equalTo).\");\n      return new c(this.repo, this.path, n, this.orderByCalled_);\n    }, c.prototype.equalTo = function (t, e) {\n      if (zr(\"Query.equalTo\", 1, 2, arguments.length), fo(\"Query.equalTo\", 1, t, this.path, !1), vo(\"Query.equalTo\", 2, e, !0), this.queryParams_.hasStart()) throw new Error(\"Query.equalTo: Starting point was already set (by another call to startAt or equalTo).\");\n      if (this.queryParams_.hasEnd()) throw new Error(\"Query.equalTo: Ending point was already set (by another call to endAt or equalTo).\");\n      return this.startAt(t, e).endAt(t, e);\n    }, c.prototype.toString = function () {\n      return zr(\"Query.toString\", 0, 0, arguments.length), this.repo.toString() + this.path.toUrlEncodedString();\n    }, c.prototype.toJSON = function () {\n      return zr(\"Query.toJSON\", 0, 1, arguments.length), this.toString();\n    }, c.prototype.queryObject = function () {\n      return this.queryParams_.getQueryObject();\n    }, c.prototype.queryIdentifier = function () {\n      var t = this.queryObject(),\n          e = qi(t);\n      return \"{}\" === e ? \"default\" : e;\n    }, c.prototype.isEqual = function (t) {\n      if (zr(\"Query.isEqual\", 1, 1, arguments.length), !(t instanceof c)) {\n        throw new Error(\"Query.isEqual failed: First argument must be an instance of firebase.database.Query.\");\n      }\n\n      var e = this.repo === t.repo,\n          n = this.path.equals(t.path),\n          r = this.queryIdentifier() === t.queryIdentifier();\n      return e && n && r;\n    }, c.getCancelAndContextArgs_ = function (t, e, n) {\n      var r = {\n        cancel: null,\n        context: null\n      };\n      if (e && n) r.cancel = e, Xr(t, 3, r.cancel, !0), r.context = n, Jr(t, 4, r.context, !0);else if (e) if (\"object\" == typeof e && null !== e) r.context = e;else {\n        if (\"function\" != typeof e) throw new Error(Yr(t, 3, !0) + \" must either be a cancel callback or a context object.\");\n        r.cancel = e;\n      }\n      return r;\n    }, Object.defineProperty(c.prototype, \"ref\", {\n      get: function () {\n        return this.getRef();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), c;\n  }(),\n      ha = function () {\n    function t() {\n      this.set = {};\n    }\n\n    return t.prototype.add = function (t, e) {\n      this.set[t] = null === e || e;\n    }, t.prototype.contains = function (t) {\n      return xr(this.set, t);\n    }, t.prototype.get = function (t) {\n      return this.contains(t) ? this.set[t] : void 0;\n    }, t.prototype.remove = function (t) {\n      delete this.set[t];\n    }, t.prototype.clear = function () {\n      this.set = {};\n    }, t.prototype.isEmpty = function () {\n      return qr(this.set);\n    }, t.prototype.count = function () {\n      return Vr(this.set);\n    }, t.prototype.each = function (n) {\n      Fr(this.set, function (t, e) {\n        return n(t, e);\n      });\n    }, t.prototype.keys = function () {\n      var e = [];\n      return Fr(this.set, function (t) {\n        e.push(t);\n      }), e;\n    }, t;\n  }(),\n      la = function () {\n    function i() {\n      this.value_ = null, this.children_ = null;\n    }\n\n    return i.prototype.find = function (t) {\n      if (null != this.value_) return this.value_.getChild(t);\n      if (t.isEmpty() || null == this.children_) return null;\n      var e = t.getFront();\n      return t = t.popFront(), this.children_.contains(e) ? this.children_.get(e).find(t) : null;\n    }, i.prototype.remember = function (t, e) {\n      if (t.isEmpty()) this.value_ = e, this.children_ = null;else if (null !== this.value_) this.value_ = this.value_.updateChild(t, e);else {\n        null == this.children_ && (this.children_ = new ha());\n        var n = t.getFront();\n        this.children_.contains(n) || this.children_.add(n, new i());\n        var r = this.children_.get(n);\n        t = t.popFront(), r.remember(t, e);\n      }\n    }, i.prototype.forget = function (t) {\n      if (t.isEmpty()) return this.value_ = null, !(this.children_ = null);\n\n      if (null !== this.value_) {\n        if (this.value_.isLeafNode()) return !1;\n        var e = this.value_;\n        this.value_ = null;\n        var n = this;\n        return e.forEachChild(Fo, function (t, e) {\n          n.remember(new Gi(t), e);\n        }), this.forget(t);\n      }\n\n      if (null === this.children_) return !0;\n      var r = t.getFront();\n      return t = t.popFront(), this.children_.contains(r) && this.children_.get(r).forget(t) && this.children_.remove(r), !!this.children_.isEmpty() && !(this.children_ = null);\n    }, i.prototype.forEachTree = function (r, i) {\n      null !== this.value_ ? i(r, this.value_) : this.forEachChild(function (t, e) {\n        var n = new Gi(r.toString() + \"/\" + t);\n        e.forEachTree(n, i);\n      });\n    }, i.prototype.forEachChild = function (n) {\n      null !== this.children_ && this.children_.each(function (t, e) {\n        n(t, e);\n      });\n    }, i;\n  }(),\n      fa = function (t, e) {\n    return t && \"object\" == typeof t ? (gr(\".sv\" in t, \"Unexpected leaf node or priority contents\"), e[t[\".sv\"]]) : t;\n  },\n      pa = function (t, r) {\n    var i,\n        e = t.getPriority().val(),\n        n = fa(e, r);\n\n    if (t.isLeafNode()) {\n      var o = t,\n          a = fa(o.getValue(), r);\n      return a !== o.getValue() || n !== o.getPriority().val() ? new Mo(a, $o(n)) : t;\n    }\n\n    var s = t;\n    return n !== (i = s).getPriority().val() && (i = i.updatePriority(new Mo(n))), s.forEachChild(Fo, function (t, e) {\n      var n = pa(e, r);\n      n !== e && (i = i.updateImmediateChild(t, n));\n    }), i;\n  };\n\n  (ea = ta || (ta = {}))[ea.OVERWRITE = 0] = \"OVERWRITE\", ea[ea.MERGE = 1] = \"MERGE\", ea[ea.ACK_USER_WRITE = 2] = \"ACK_USER_WRITE\", ea[ea.LISTEN_COMPLETE = 3] = \"LISTEN_COMPLETE\";\n\n  var da,\n      ya,\n      ma = function () {\n    function e(t, e, n, r) {\n      this.fromUser = t, this.fromServer = e, this.queryId = n, this.tagged = r, gr(!r || e, \"Tagged queries must be from server.\");\n    }\n\n    return e.User = new e(!0, !1, null, !1), e.Server = new e(!1, !0, null, !1), e.forServerTaggedQuery = function (t) {\n      return new e(!1, !0, t, !0);\n    }, e;\n  }(),\n      ga = function () {\n    function n(t, e, n) {\n      this.path = t, this.affectedTree = e, this.revert = n, this.type = ta.ACK_USER_WRITE, this.source = ma.User;\n    }\n\n    return n.prototype.operationForChild = function (t) {\n      if (this.path.isEmpty()) {\n        if (null != this.affectedTree.value) return gr(this.affectedTree.children.isEmpty(), \"affectedTree should not have overlapping affected paths.\"), this;\n        var e = this.affectedTree.subtree(new Gi(t));\n        return new n(Gi.Empty, e, this.revert);\n      }\n\n      return gr(this.path.getFront() === t, \"operationForChild called for unrelated child.\"), new n(this.path.popFront(), this.affectedTree, this.revert);\n    }, n;\n  }(),\n      va = function () {\n    function o(t, e) {\n      void 0 === e && (da || (da = new Bo(Fi)), e = da), this.value = t, this.children = e;\n    }\n\n    return o.fromObject = function (t) {\n      var n = o.Empty;\n      return Fr(t, function (t, e) {\n        n = n.set(new Gi(t), e);\n      }), n;\n    }, o.prototype.isEmpty = function () {\n      return null === this.value && this.children.isEmpty();\n    }, o.prototype.findRootMostMatchingPathAndValue = function (t, e) {\n      if (null != this.value && e(this.value)) return {\n        path: Gi.Empty,\n        value: this.value\n      };\n      if (t.isEmpty()) return null;\n      var n = t.getFront(),\n          r = this.children.get(n);\n      if (null === r) return null;\n      var i = r.findRootMostMatchingPathAndValue(t.popFront(), e);\n      return null == i ? null : {\n        path: new Gi(n).child(i.path),\n        value: i.value\n      };\n    }, o.prototype.findRootMostValueAndPath = function (t) {\n      return this.findRootMostMatchingPathAndValue(t, function () {\n        return !0;\n      });\n    }, o.prototype.subtree = function (t) {\n      if (t.isEmpty()) return this;\n      var e = t.getFront(),\n          n = this.children.get(e);\n      return null !== n ? n.subtree(t.popFront()) : o.Empty;\n    }, o.prototype.set = function (t, e) {\n      if (t.isEmpty()) return new o(e, this.children);\n      var n = t.getFront(),\n          r = (this.children.get(n) || o.Empty).set(t.popFront(), e),\n          i = this.children.insert(n, r);\n      return new o(this.value, i);\n    }, o.prototype.remove = function (t) {\n      if (t.isEmpty()) return this.children.isEmpty() ? o.Empty : new o(null, this.children);\n      var e = t.getFront(),\n          n = this.children.get(e);\n\n      if (n) {\n        var r = n.remove(t.popFront()),\n            i = void 0;\n        return i = r.isEmpty() ? this.children.remove(e) : this.children.insert(e, r), null === this.value && i.isEmpty() ? o.Empty : new o(this.value, i);\n      }\n\n      return this;\n    }, o.prototype.get = function (t) {\n      if (t.isEmpty()) return this.value;\n      var e = t.getFront(),\n          n = this.children.get(e);\n      return n ? n.get(t.popFront()) : null;\n    }, o.prototype.setTree = function (t, e) {\n      if (t.isEmpty()) return e;\n      var n = t.getFront(),\n          r = (this.children.get(n) || o.Empty).setTree(t.popFront(), e),\n          i = void 0;\n      return i = r.isEmpty() ? this.children.remove(n) : this.children.insert(n, r), new o(this.value, i);\n    }, o.prototype.fold = function (t) {\n      return this.fold_(Gi.Empty, t);\n    }, o.prototype.fold_ = function (n, r) {\n      var i = {};\n      return this.children.inorderTraversal(function (t, e) {\n        i[t] = e.fold_(n.child(t), r);\n      }), r(n, this.value, i);\n    }, o.prototype.findOnPath = function (t, e) {\n      return this.findOnPath_(t, Gi.Empty, e);\n    }, o.prototype.findOnPath_ = function (t, e, n) {\n      var r = !!this.value && n(e, this.value);\n      if (r) return r;\n      if (t.isEmpty()) return null;\n      var i = t.getFront(),\n          o = this.children.get(i);\n      return o ? o.findOnPath_(t.popFront(), e.child(i), n) : null;\n    }, o.prototype.foreachOnPath = function (t, e) {\n      return this.foreachOnPath_(t, Gi.Empty, e);\n    }, o.prototype.foreachOnPath_ = function (t, e, n) {\n      if (t.isEmpty()) return this;\n      this.value && n(e, this.value);\n      var r = t.getFront(),\n          i = this.children.get(r);\n      return i ? i.foreachOnPath_(t.popFront(), e.child(r), n) : o.Empty;\n    }, o.prototype.foreach = function (t) {\n      this.foreach_(Gi.Empty, t);\n    }, o.prototype.foreach_ = function (n, r) {\n      this.children.inorderTraversal(function (t, e) {\n        e.foreach_(n.child(t), r);\n      }), this.value && r(n, this.value);\n    }, o.prototype.foreachChild = function (n) {\n      this.children.inorderTraversal(function (t, e) {\n        e.value && n(t, e.value);\n      });\n    }, o.Empty = new o(null), o;\n  }(),\n      ba = function () {\n    function e(t, e) {\n      this.source = t, this.path = e, this.type = ta.LISTEN_COMPLETE;\n    }\n\n    return e.prototype.operationForChild = function (t) {\n      return this.path.isEmpty() ? new e(this.source, Gi.Empty) : new e(this.source, this.path.popFront());\n    }, e;\n  }(),\n      wa = function () {\n    function e(t, e, n) {\n      this.source = t, this.path = e, this.snap = n, this.type = ta.OVERWRITE;\n    }\n\n    return e.prototype.operationForChild = function (t) {\n      return this.path.isEmpty() ? new e(this.source, Gi.Empty, this.snap.getImmediateChild(t)) : new e(this.source, this.path.popFront(), this.snap);\n    }, e;\n  }(),\n      _a = function () {\n    function n(t, e, n) {\n      this.source = t, this.path = e, this.children = n, this.type = ta.MERGE;\n    }\n\n    return n.prototype.operationForChild = function (t) {\n      if (this.path.isEmpty()) {\n        var e = this.children.subtree(new Gi(t));\n        return e.isEmpty() ? null : e.value ? new wa(this.source, Gi.Empty, e.value) : new n(this.source, Gi.Empty, e);\n      }\n\n      return gr(this.path.getFront() === t, \"Can't get a merge for a child not on the path of the operation\"), new n(this.source, this.path.popFront(), this.children);\n    }, n.prototype.toString = function () {\n      return \"Operation(\" + this.path + \": \" + this.source.toString() + \" merge: \" + this.children.toString() + \")\";\n    }, n;\n  }(),\n      Ea = function () {\n    function t(t, e, n) {\n      this.node_ = t, this.fullyInitialized_ = e, this.filtered_ = n;\n    }\n\n    return t.prototype.isFullyInitialized = function () {\n      return this.fullyInitialized_;\n    }, t.prototype.isFiltered = function () {\n      return this.filtered_;\n    }, t.prototype.isCompleteForPath = function (t) {\n      if (t.isEmpty()) return this.isFullyInitialized() && !this.filtered_;\n      var e = t.getFront();\n      return this.isCompleteForChild(e);\n    }, t.prototype.isCompleteForChild = function (t) {\n      return this.isFullyInitialized() && !this.filtered_ || this.node_.hasChild(t);\n    }, t.prototype.getNode = function () {\n      return this.node_;\n    }, t;\n  }(),\n      Ta = function () {\n    function r(t, e) {\n      this.eventCache_ = t, this.serverCache_ = e;\n    }\n\n    return r.prototype.updateEventSnap = function (t, e, n) {\n      return new r(new Ea(t, e, n), this.serverCache_);\n    }, r.prototype.updateServerSnap = function (t, e, n) {\n      return new r(this.eventCache_, new Ea(t, e, n));\n    }, r.prototype.getEventCache = function () {\n      return this.eventCache_;\n    }, r.prototype.getCompleteEventSnap = function () {\n      return this.eventCache_.isFullyInitialized() ? this.eventCache_.getNode() : null;\n    }, r.prototype.getServerCache = function () {\n      return this.serverCache_;\n    }, r.prototype.getCompleteServerSnap = function () {\n      return this.serverCache_.isFullyInitialized() ? this.serverCache_.getNode() : null;\n    }, r.Empty = new r(new Ea(Yo.EMPTY_NODE, !1, !1), new Ea(Yo.EMPTY_NODE, !1, !1)), r;\n  }(),\n      Sa = function () {\n    function r(t, e, n, r, i) {\n      this.type = t, this.snapshotNode = e, this.childName = n, this.oldSnap = r, this.prevName = i;\n    }\n\n    return r.valueChange = function (t) {\n      return new r(r.VALUE, t);\n    }, r.childAddedChange = function (t, e) {\n      return new r(r.CHILD_ADDED, e, t);\n    }, r.childRemovedChange = function (t, e) {\n      return new r(r.CHILD_REMOVED, e, t);\n    }, r.childChangedChange = function (t, e, n) {\n      return new r(r.CHILD_CHANGED, e, t, n);\n    }, r.childMovedChange = function (t, e) {\n      return new r(r.CHILD_MOVED, e, t);\n    }, r.CHILD_ADDED = \"child_added\", r.CHILD_REMOVED = \"child_removed\", r.CHILD_CHANGED = \"child_changed\", r.CHILD_MOVED = \"child_moved\", r.VALUE = \"value\", r;\n  }(),\n      Ia = function () {\n    function t(t) {\n      this.index_ = t;\n    }\n\n    return t.prototype.updateChild = function (t, e, n, r, i, o) {\n      gr(t.isIndexed(this.index_), \"A node must be indexed if only a child is updated\");\n      var a = t.getImmediateChild(e);\n      return a.getChild(r).equals(n.getChild(r)) && a.isEmpty() == n.isEmpty() ? t : (null != o && (n.isEmpty() ? t.hasChild(e) ? o.trackChildChange(Sa.childRemovedChange(e, a)) : gr(t.isLeafNode(), \"A child remove without an old child only makes sense on a leaf node\") : a.isEmpty() ? o.trackChildChange(Sa.childAddedChange(e, n)) : o.trackChildChange(Sa.childChangedChange(e, n, a))), t.isLeafNode() && n.isEmpty() ? t : t.updateImmediateChild(e, n).withIndex(this.index_));\n    }, t.prototype.updateFullNode = function (r, n, i) {\n      return null != i && (r.isLeafNode() || r.forEachChild(Fo, function (t, e) {\n        n.hasChild(t) || i.trackChildChange(Sa.childRemovedChange(t, e));\n      }), n.isLeafNode() || n.forEachChild(Fo, function (t, e) {\n        if (r.hasChild(t)) {\n          var n = r.getImmediateChild(t);\n          n.equals(e) || i.trackChildChange(Sa.childChangedChange(t, e, n));\n        } else i.trackChildChange(Sa.childAddedChange(t, e));\n      })), n.withIndex(this.index_);\n    }, t.prototype.updatePriority = function (t, e) {\n      return t.isEmpty() ? Yo.EMPTY_NODE : t.updatePriority(e);\n    }, t.prototype.filtersNodes = function () {\n      return !1;\n    }, t.prototype.getIndexedFilter = function () {\n      return this;\n    }, t.prototype.getIndex = function () {\n      return this.index_;\n    }, t;\n  }(),\n      Ca = function () {\n    function t() {\n      this.changeMap_ = {};\n    }\n\n    return t.prototype.trackChildChange = function (t) {\n      var e = t.type,\n          n = t.childName;\n      gr(e == Sa.CHILD_ADDED || e == Sa.CHILD_CHANGED || e == Sa.CHILD_REMOVED, \"Only child changes supported for tracking\"), gr(\".priority\" !== n, \"Only non-priority child changes can be tracked.\");\n      var r = Lr(this.changeMap_, n);\n\n      if (r) {\n        var i = r.type;\n        if (e == Sa.CHILD_ADDED && i == Sa.CHILD_REMOVED) this.changeMap_[n] = Sa.childChangedChange(n, t.snapshotNode, r.snapshotNode);else if (e == Sa.CHILD_REMOVED && i == Sa.CHILD_ADDED) delete this.changeMap_[n];else if (e == Sa.CHILD_REMOVED && i == Sa.CHILD_CHANGED) this.changeMap_[n] = Sa.childRemovedChange(n, r.oldSnap);else if (e == Sa.CHILD_CHANGED && i == Sa.CHILD_ADDED) this.changeMap_[n] = Sa.childAddedChange(n, t.snapshotNode);else {\n          if (e != Sa.CHILD_CHANGED || i != Sa.CHILD_CHANGED) throw vr(\"Illegal combination of changes: \" + t + \" occurred after \" + r);\n          this.changeMap_[n] = Sa.childChangedChange(n, t.snapshotNode, r.oldSnap);\n        }\n      } else this.changeMap_[n] = t;\n    }, t.prototype.getChanges = function () {\n      return function (t) {\n        var e = [],\n            n = 0;\n\n        for (var r in t) e[n++] = t[r];\n\n        return e;\n      }(this.changeMap_);\n    }, t;\n  }(),\n      Na = new (function () {\n    function t() {}\n\n    return t.prototype.getCompleteChild = function (t) {\n      return null;\n    }, t.prototype.getChildAfterChild = function (t, e, n) {\n      return null;\n    }, t;\n  }())(),\n      Aa = function () {\n    function t(t, e, n) {\n      void 0 === n && (n = null), this.writes_ = t, this.viewCache_ = e, this.optCompleteServerCache_ = n;\n    }\n\n    return t.prototype.getCompleteChild = function (t) {\n      var e = this.viewCache_.getEventCache();\n      if (e.isCompleteForChild(t)) return e.getNode().getImmediateChild(t);\n      var n = null != this.optCompleteServerCache_ ? new Ea(this.optCompleteServerCache_, !0, !1) : this.viewCache_.getServerCache();\n      return this.writes_.calcCompleteChild(t, n);\n    }, t.prototype.getChildAfterChild = function (t, e, n) {\n      var r = null != this.optCompleteServerCache_ ? this.optCompleteServerCache_ : this.viewCache_.getCompleteServerSnap(),\n          i = this.writes_.calcIndexedSlice(r, e, 1, n, t);\n      return 0 === i.length ? null : i[0];\n    }, t;\n  }(),\n      ka = function (t, e) {\n    this.viewCache = t, this.changes = e;\n  },\n      Da = function () {\n    function l(t) {\n      this.filter_ = t;\n    }\n\n    return l.prototype.assertIndexed = function (t) {\n      gr(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()), \"Event snap not indexed\"), gr(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()), \"Server snap not indexed\");\n    }, l.prototype.applyOperation = function (t, e, n, r) {\n      var i,\n          o,\n          a = new Ca();\n\n      if (e.type === ta.OVERWRITE) {\n        var s = e;\n        i = s.source.fromUser ? this.applyUserOverwrite_(t, s.path, s.snap, n, r, a) : (gr(s.source.fromServer, \"Unknown source.\"), o = s.source.tagged || t.getServerCache().isFiltered() && !s.path.isEmpty(), this.applyServerOverwrite_(t, s.path, s.snap, n, r, o, a));\n      } else if (e.type === ta.MERGE) {\n        var u = e;\n        i = u.source.fromUser ? this.applyUserMerge_(t, u.path, u.children, n, r, a) : (gr(u.source.fromServer, \"Unknown source.\"), o = u.source.tagged || t.getServerCache().isFiltered(), this.applyServerMerge_(t, u.path, u.children, n, r, o, a));\n      } else if (e.type === ta.ACK_USER_WRITE) {\n        var c = e;\n        i = c.revert ? this.revertUserWrite_(t, c.path, n, r, a) : this.ackUserWrite_(t, c.path, c.affectedTree, n, r, a);\n      } else {\n        if (e.type !== ta.LISTEN_COMPLETE) throw vr(\"Unknown operation type: \" + e.type);\n        i = this.listenComplete_(t, e.path, n, a);\n      }\n\n      var h = a.getChanges();\n      return l.maybeAddValueEvent_(t, i, h), new ka(i, h);\n    }, l.maybeAddValueEvent_ = function (t, e, n) {\n      var r = e.getEventCache();\n\n      if (r.isFullyInitialized()) {\n        var i = r.getNode().isLeafNode() || r.getNode().isEmpty(),\n            o = t.getCompleteEventSnap();\n        (0 < n.length || !t.getEventCache().isFullyInitialized() || i && !r.getNode().equals(o) || !r.getNode().getPriority().equals(o.getPriority())) && n.push(Sa.valueChange(e.getCompleteEventSnap()));\n      }\n    }, l.prototype.generateEventCacheAfterServerEvent_ = function (t, e, n, r, i) {\n      var o = t.getEventCache();\n      if (null != n.shadowingWrite(e)) return t;\n      var a = void 0,\n          s = void 0;\n      if (e.isEmpty()) {\n        if (gr(t.getServerCache().isFullyInitialized(), \"If change path is empty, we must have complete server data\"), t.getServerCache().isFiltered()) {\n          var u = t.getCompleteServerSnap(),\n              c = u instanceof Yo ? u : Yo.EMPTY_NODE,\n              h = n.calcCompleteEventChildren(c);\n          a = this.filter_.updateFullNode(t.getEventCache().getNode(), h, i);\n        } else {\n          var l = n.calcCompleteEventCache(t.getCompleteServerSnap());\n          a = this.filter_.updateFullNode(t.getEventCache().getNode(), l, i);\n        }\n      } else {\n        var f = e.getFront();\n\n        if (\".priority\" == f) {\n          gr(1 == e.getLength(), \"Can't have a priority with additional path components\");\n          var p = o.getNode();\n          s = t.getServerCache().getNode();\n          var d = n.calcEventCacheAfterServerOverwrite(e, p, s);\n          a = null != d ? this.filter_.updatePriority(p, d) : o.getNode();\n        } else {\n          var y = e.popFront(),\n              m = void 0;\n\n          if (o.isCompleteForChild(f)) {\n            s = t.getServerCache().getNode();\n            var g = n.calcEventCacheAfterServerOverwrite(e, o.getNode(), s);\n            m = null != g ? o.getNode().getImmediateChild(f).updateChild(y, g) : o.getNode().getImmediateChild(f);\n          } else m = n.calcCompleteChild(f, t.getServerCache());\n\n          a = null != m ? this.filter_.updateChild(o.getNode(), f, m, y, r, i) : o.getNode();\n        }\n      }\n      return t.updateEventSnap(a, o.isFullyInitialized() || e.isEmpty(), this.filter_.filtersNodes());\n    }, l.prototype.applyServerOverwrite_ = function (t, e, n, r, i, o, a) {\n      var s,\n          u = t.getServerCache(),\n          c = o ? this.filter_ : this.filter_.getIndexedFilter();\n      if (e.isEmpty()) s = c.updateFullNode(u.getNode(), n, null);else if (c.filtersNodes() && !u.isFiltered()) {\n        var h = u.getNode().updateChild(e, n);\n        s = c.updateFullNode(u.getNode(), h, null);\n      } else {\n        var l = e.getFront();\n        if (!u.isCompleteForPath(e) && 1 < e.getLength()) return t;\n        var f = e.popFront(),\n            p = u.getNode().getImmediateChild(l).updateChild(f, n);\n        s = \".priority\" == l ? c.updatePriority(u.getNode(), p) : c.updateChild(u.getNode(), l, p, f, Na, null);\n      }\n      var d = t.updateServerSnap(s, u.isFullyInitialized() || e.isEmpty(), c.filtersNodes()),\n          y = new Aa(r, d, i);\n      return this.generateEventCacheAfterServerEvent_(d, e, r, y, a);\n    }, l.prototype.applyUserOverwrite_ = function (t, e, n, r, i, o) {\n      var a,\n          s,\n          u = t.getEventCache(),\n          c = new Aa(r, t, i);\n      if (e.isEmpty()) s = this.filter_.updateFullNode(t.getEventCache().getNode(), n, o), a = t.updateEventSnap(s, !0, this.filter_.filtersNodes());else {\n        var h = e.getFront();\n        if (\".priority\" === h) s = this.filter_.updatePriority(t.getEventCache().getNode(), n), a = t.updateEventSnap(s, u.isFullyInitialized(), u.isFiltered());else {\n          var l = e.popFront(),\n              f = u.getNode().getImmediateChild(h),\n              p = void 0;\n          if (l.isEmpty()) p = n;else {\n            var d = c.getCompleteChild(h);\n            p = null != d ? \".priority\" === l.getBack() && d.getChild(l.parent()).isEmpty() ? d : d.updateChild(l, n) : Yo.EMPTY_NODE;\n          }\n          if (f.equals(p)) a = t;else {\n            var y = this.filter_.updateChild(u.getNode(), h, p, l, c, o);\n            a = t.updateEventSnap(y, u.isFullyInitialized(), this.filter_.filtersNodes());\n          }\n        }\n      }\n      return a;\n    }, l.cacheHasChild_ = function (t, e) {\n      return t.getEventCache().isCompleteForChild(e);\n    }, l.prototype.applyUserMerge_ = function (r, i, t, o, a, s) {\n      var u = this,\n          c = r;\n      return t.foreach(function (t, e) {\n        var n = i.child(t);\n        l.cacheHasChild_(r, n.getFront()) && (c = u.applyUserOverwrite_(c, n, e, o, a, s));\n      }), t.foreach(function (t, e) {\n        var n = i.child(t);\n        l.cacheHasChild_(r, n.getFront()) || (c = u.applyUserOverwrite_(c, n, e, o, a, s));\n      }), c;\n    }, l.prototype.applyMerge_ = function (n, t) {\n      return t.foreach(function (t, e) {\n        n = n.updateChild(t, e);\n      }), n;\n    }, l.prototype.applyServerMerge_ = function (o, t, e, a, s, u, c) {\n      var h = this;\n      if (o.getServerCache().getNode().isEmpty() && !o.getServerCache().isFullyInitialized()) return o;\n      var n,\n          l = o;\n      n = t.isEmpty() ? e : va.Empty.setTree(t, e);\n      var f = o.getServerCache().getNode();\n      return n.children.inorderTraversal(function (t, e) {\n        if (f.hasChild(t)) {\n          var n = o.getServerCache().getNode().getImmediateChild(t),\n              r = h.applyMerge_(n, e);\n          l = h.applyServerOverwrite_(l, new Gi(t), r, a, s, u, c);\n        }\n      }), n.children.inorderTraversal(function (t, e) {\n        var n = !o.getServerCache().isCompleteForChild(t) && null == e.value;\n\n        if (!f.hasChild(t) && !n) {\n          var r = o.getServerCache().getNode().getImmediateChild(t),\n              i = h.applyMerge_(r, e);\n          l = h.applyServerOverwrite_(l, new Gi(t), i, a, s, u, c);\n        }\n      }), l;\n    }, l.prototype.ackUserWrite_ = function (t, r, e, n, i, o) {\n      if (null != n.shadowingWrite(r)) return t;\n      var a = t.getServerCache().isFiltered(),\n          s = t.getServerCache();\n\n      if (null != e.value) {\n        if (r.isEmpty() && s.isFullyInitialized() || s.isCompleteForPath(r)) return this.applyServerOverwrite_(t, r, s.getNode().getChild(r), n, i, a, o);\n\n        if (r.isEmpty()) {\n          var u = va.Empty;\n          return s.getNode().forEachChild(Ao, function (t, e) {\n            u = u.set(new Gi(t), e);\n          }), this.applyServerMerge_(t, r, u, n, i, a, o);\n        }\n\n        return t;\n      }\n\n      var c = va.Empty;\n      return e.foreach(function (t, e) {\n        var n = r.child(t);\n        s.isCompleteForPath(n) && (c = c.set(t, s.getNode().getChild(n)));\n      }), this.applyServerMerge_(t, r, c, n, i, a, o);\n    }, l.prototype.listenComplete_ = function (t, e, n, r) {\n      var i = t.getServerCache(),\n          o = t.updateServerSnap(i.getNode(), i.isFullyInitialized() || e.isEmpty(), i.isFiltered());\n      return this.generateEventCacheAfterServerEvent_(o, e, n, Na, r);\n    }, l.prototype.revertUserWrite_ = function (t, e, n, r, i) {\n      var o;\n      if (null != n.shadowingWrite(e)) return t;\n      var a = new Aa(n, t, r),\n          s = t.getEventCache().getNode(),\n          u = void 0;\n\n      if (e.isEmpty() || \".priority\" === e.getFront()) {\n        var c = void 0;\n        if (t.getServerCache().isFullyInitialized()) c = n.calcCompleteEventCache(t.getCompleteServerSnap());else {\n          var h = t.getServerCache().getNode();\n          gr(h instanceof Yo, \"serverChildren would be complete if leaf node\"), c = n.calcCompleteEventChildren(h);\n        }\n        c = c, u = this.filter_.updateFullNode(s, c, i);\n      } else {\n        var l = e.getFront(),\n            f = n.calcCompleteChild(l, t.getServerCache());\n        null == f && t.getServerCache().isCompleteForChild(l) && (f = s.getImmediateChild(l)), (u = null != f ? this.filter_.updateChild(s, l, f, e.popFront(), a, i) : t.getEventCache().getNode().hasChild(l) ? this.filter_.updateChild(s, l, Yo.EMPTY_NODE, e.popFront(), a, i) : s).isEmpty() && t.getServerCache().isFullyInitialized() && (o = n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode() && (u = this.filter_.updateFullNode(u, o, i));\n      }\n\n      return o = t.getServerCache().isFullyInitialized() || null != n.shadowingWrite(Gi.Empty), t.updateEventSnap(u, o, this.filter_.filtersNodes());\n    }, l;\n  }(),\n      Ra = function () {\n    function t(t) {\n      this.query_ = t, this.index_ = this.query_.getQueryParams().getIndex();\n    }\n\n    return t.prototype.generateEventsForChanges = function (t, e, n) {\n      var r = this,\n          i = [],\n          o = [];\n      return t.forEach(function (t) {\n        t.type === Sa.CHILD_CHANGED && r.index_.indexedValueChanged(t.oldSnap, t.snapshotNode) && o.push(Sa.childMovedChange(t.childName, t.snapshotNode));\n      }), this.generateEventsForType_(i, Sa.CHILD_REMOVED, t, n, e), this.generateEventsForType_(i, Sa.CHILD_ADDED, t, n, e), this.generateEventsForType_(i, Sa.CHILD_MOVED, o, n, e), this.generateEventsForType_(i, Sa.CHILD_CHANGED, t, n, e), this.generateEventsForType_(i, Sa.VALUE, t, n, e), i;\n    }, t.prototype.generateEventsForType_ = function (r, e, t, i, o) {\n      var a = this,\n          n = t.filter(function (t) {\n        return t.type === e;\n      });\n      n.sort(this.compareChanges_.bind(this)), n.forEach(function (e) {\n        var n = a.materializeSingleChange_(e, o);\n        i.forEach(function (t) {\n          t.respondsTo(e.type) && r.push(t.createEvent(n, a.query_));\n        });\n      });\n    }, t.prototype.materializeSingleChange_ = function (t, e) {\n      return \"value\" === t.type || \"child_removed\" === t.type || (t.prevName = e.getPredecessorChildName(t.childName, t.snapshotNode, this.index_)), t;\n    }, t.prototype.compareChanges_ = function (t, e) {\n      if (null == t.childName || null == e.childName) throw vr(\"Should only compare child_ events.\");\n      var n = new Io(t.childName, t.snapshotNode),\n          r = new Io(e.childName, e.snapshotNode);\n      return this.index_.compare(n, r);\n    }, t;\n  }(),\n      Oa = function () {\n    function t(t, e) {\n      this.query_ = t, this.eventRegistrations_ = [];\n      var n = this.query_.getQueryParams(),\n          r = new Ia(n.getIndex()),\n          i = n.getNodeFilter();\n      this.processor_ = new Da(i);\n      var o = e.getServerCache(),\n          a = e.getEventCache(),\n          s = r.updateFullNode(Yo.EMPTY_NODE, o.getNode(), null),\n          u = i.updateFullNode(Yo.EMPTY_NODE, a.getNode(), null),\n          c = new Ea(s, o.isFullyInitialized(), r.filtersNodes()),\n          h = new Ea(u, a.isFullyInitialized(), i.filtersNodes());\n      this.viewCache_ = new Ta(h, c), this.eventGenerator_ = new Ra(this.query_);\n    }\n\n    return t.prototype.getQuery = function () {\n      return this.query_;\n    }, t.prototype.getServerCache = function () {\n      return this.viewCache_.getServerCache().getNode();\n    }, t.prototype.getCompleteServerCache = function (t) {\n      var e = this.viewCache_.getCompleteServerSnap();\n      return e && (this.query_.getQueryParams().loadsAllData() || !t.isEmpty() && !e.getImmediateChild(t.getFront()).isEmpty()) ? e.getChild(t) : null;\n    }, t.prototype.isEmpty = function () {\n      return 0 === this.eventRegistrations_.length;\n    }, t.prototype.addEventRegistration = function (t) {\n      this.eventRegistrations_.push(t);\n    }, t.prototype.removeEventRegistration = function (t, n) {\n      var r = [];\n\n      if (n) {\n        gr(null == t, \"A cancel should cancel all event registrations.\");\n        var i = this.query_.path;\n        this.eventRegistrations_.forEach(function (t) {\n          n = n;\n          var e = t.createCancelEvent(n, i);\n          e && r.push(e);\n        });\n      }\n\n      if (t) {\n        for (var e = [], o = 0; o < this.eventRegistrations_.length; ++o) {\n          var a = this.eventRegistrations_[o];\n\n          if (a.matches(t)) {\n            if (t.hasAnyCallback()) {\n              e = e.concat(this.eventRegistrations_.slice(o + 1));\n              break;\n            }\n          } else e.push(a);\n        }\n\n        this.eventRegistrations_ = e;\n      } else this.eventRegistrations_ = [];\n\n      return r;\n    }, t.prototype.applyOperation = function (t, e, n) {\n      t.type === ta.MERGE && null !== t.source.queryId && (gr(this.viewCache_.getCompleteServerSnap(), \"We should always have a full cache before handling merges\"), gr(this.viewCache_.getCompleteEventSnap(), \"Missing event cache, even though we have a server cache\"));\n      var r = this.viewCache_,\n          i = this.processor_.applyOperation(r, t, e, n);\n      return this.processor_.assertIndexed(i.viewCache), gr(i.viewCache.getServerCache().isFullyInitialized() || !r.getServerCache().isFullyInitialized(), \"Once a server snap is complete, it should never go back\"), this.viewCache_ = i.viewCache, this.generateEventsForChanges_(i.changes, i.viewCache.getEventCache().getNode(), null);\n    }, t.prototype.getInitialEvents = function (t) {\n      var e = this.viewCache_.getEventCache(),\n          n = [];\n      e.getNode().isLeafNode() || e.getNode().forEachChild(Fo, function (t, e) {\n        n.push(Sa.childAddedChange(t, e));\n      });\n      return e.isFullyInitialized() && n.push(Sa.valueChange(e.getNode())), this.generateEventsForChanges_(n, e.getNode(), t);\n    }, t.prototype.generateEventsForChanges_ = function (t, e, n) {\n      var r = n ? [n] : this.eventRegistrations_;\n      return this.eventGenerator_.generateEventsForChanges(t, e, r);\n    }, t;\n  }(),\n      Pa = function () {\n    function c() {\n      this.views_ = {};\n    }\n\n    return Object.defineProperty(c, \"__referenceConstructor\", {\n      get: function () {\n        return gr(ya, \"Reference.ts has not been loaded\"), ya;\n      },\n      set: function (t) {\n        gr(!ya, \"__referenceConstructor has already been defined\"), ya = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), c.prototype.isEmpty = function () {\n      return qr(this.views_);\n    }, c.prototype.applyOperation = function (n, r, i) {\n      var t = n.source.queryId;\n\n      if (null !== t) {\n        var e = Lr(this.views_, t);\n        return gr(null != e, \"SyncTree gave us an op for an invalid query.\"), e.applyOperation(n, r, i);\n      }\n\n      var o = [];\n      return Fr(this.views_, function (t, e) {\n        o = o.concat(e.applyOperation(n, r, i));\n      }), o;\n    }, c.prototype.addEventRegistration = function (t, e, n, r, i) {\n      var o = t.queryIdentifier(),\n          a = Lr(this.views_, o);\n\n      if (!a) {\n        var s = n.calcCompleteEventCache(i ? r : null),\n            u = !1;\n        u = !!s || (s = r instanceof Yo ? n.calcCompleteEventChildren(r) : Yo.EMPTY_NODE, !1);\n        var c = new Ta(new Ea(s, u, !1), new Ea(r, i, !1));\n        a = new Oa(t, c), this.views_[o] = a;\n      }\n\n      return a.addEventRegistration(e), a.getInitialEvents(e);\n    }, c.prototype.removeEventRegistration = function (t, n, r) {\n      var e = t.queryIdentifier(),\n          i = [],\n          o = [],\n          a = this.hasCompleteView();\n\n      if (\"default\" === e) {\n        var s = this;\n        Fr(this.views_, function (t, e) {\n          o = o.concat(e.removeEventRegistration(n, r)), e.isEmpty() && (delete s.views_[t], e.getQuery().getQueryParams().loadsAllData() || i.push(e.getQuery()));\n        });\n      } else {\n        var u = Lr(this.views_, e);\n        u && (o = o.concat(u.removeEventRegistration(n, r)), u.isEmpty() && (delete this.views_[e], u.getQuery().getQueryParams().loadsAllData() || i.push(u.getQuery())));\n      }\n\n      return a && !this.hasCompleteView() && i.push(new c.__referenceConstructor(t.repo, t.path)), {\n        removed: i,\n        events: o\n      };\n    }, c.prototype.getQueryViews = function () {\n      var e = this;\n      return Object.keys(this.views_).map(function (t) {\n        return e.views_[t];\n      }).filter(function (t) {\n        return !t.getQuery().getQueryParams().loadsAllData();\n      });\n    }, c.prototype.getCompleteServerCache = function (n) {\n      var r = null;\n      return Fr(this.views_, function (t, e) {\n        r = r || e.getCompleteServerCache(n);\n      }), r;\n    }, c.prototype.viewForQuery = function (t) {\n      if (t.getQueryParams().loadsAllData()) return this.getCompleteView();\n      var e = t.queryIdentifier();\n      return Lr(this.views_, e);\n    }, c.prototype.viewExistsForQuery = function (t) {\n      return null != this.viewForQuery(t);\n    }, c.prototype.hasCompleteView = function () {\n      return null != this.getCompleteView();\n    }, c.prototype.getCompleteView = function () {\n      var t, e, n;\n      return (t = this.views_, (n = jr(t, function (t) {\n        return t.getQuery().getQueryParams().loadsAllData();\n      }, e)) && t[n]) || null;\n    }, c;\n  }(),\n      Ma = function () {\n    function s(t) {\n      this.writeTree_ = t;\n    }\n\n    return s.prototype.addWrite = function (t, e) {\n      if (t.isEmpty()) return new s(new va(e));\n      var n = this.writeTree_.findRootMostValueAndPath(t);\n\n      if (null != n) {\n        var r = n.path,\n            i = n.value,\n            o = Gi.relativePath(r, t);\n        return i = i.updateChild(o, e), new s(this.writeTree_.set(r, i));\n      }\n\n      var a = new va(e);\n      return new s(this.writeTree_.setTree(t, a));\n    }, s.prototype.addWrites = function (n, t) {\n      var r = this;\n      return Fr(t, function (t, e) {\n        r = r.addWrite(n.child(t), e);\n      }), r;\n    }, s.prototype.removeWrite = function (t) {\n      return t.isEmpty() ? s.Empty : new s(this.writeTree_.setTree(t, va.Empty));\n    }, s.prototype.hasCompleteWrite = function (t) {\n      return null != this.getCompleteNode(t);\n    }, s.prototype.getCompleteNode = function (t) {\n      var e = this.writeTree_.findRootMostValueAndPath(t);\n      return null != e ? this.writeTree_.get(e.path).getChild(Gi.relativePath(e.path, t)) : null;\n    }, s.prototype.getCompleteChildren = function () {\n      var n = [],\n          t = this.writeTree_.value;\n      return null != t ? t.isLeafNode() || t.forEachChild(Fo, function (t, e) {\n        n.push(new Io(t, e));\n      }) : this.writeTree_.children.inorderTraversal(function (t, e) {\n        null != e.value && n.push(new Io(t, e.value));\n      }), n;\n    }, s.prototype.childCompoundWrite = function (t) {\n      if (t.isEmpty()) return this;\n      var e = this.getCompleteNode(t);\n      return new s(null != e ? new va(e) : this.writeTree_.subtree(t));\n    }, s.prototype.isEmpty = function () {\n      return this.writeTree_.isEmpty();\n    }, s.prototype.apply = function (t) {\n      return s.applySubtreeWrite_(Gi.Empty, this.writeTree_, t);\n    }, s.Empty = new s(new va(null)), s.applySubtreeWrite_ = function (n, t, r) {\n      if (null != t.value) return r.updateChild(n, t.value);\n      var i = null;\n      return t.children.inorderTraversal(function (t, e) {\n        \".priority\" === t ? (gr(null !== e.value, \"Priority writes must always be leaf nodes\"), i = e.value) : r = s.applySubtreeWrite_(n.child(t), e, r);\n      }), r.getChild(n).isEmpty() || null === i || (r = r.updateChild(n.child(\".priority\"), i)), r;\n    }, s;\n  }(),\n      xa = function () {\n    function c() {\n      this.visibleWrites_ = Ma.Empty, this.allWrites_ = [], this.lastWriteId_ = -1;\n    }\n\n    return c.prototype.childWrites = function (t) {\n      return new La(t, this);\n    }, c.prototype.addOverwrite = function (t, e, n, r) {\n      gr(n > this.lastWriteId_, \"Stacking an older write on top of newer ones\"), void 0 === r && (r = !0), this.allWrites_.push({\n        path: t,\n        snap: e,\n        writeId: n,\n        visible: r\n      }), r && (this.visibleWrites_ = this.visibleWrites_.addWrite(t, e)), this.lastWriteId_ = n;\n    }, c.prototype.addMerge = function (t, e, n) {\n      gr(n > this.lastWriteId_, \"Stacking an older merge on top of newer ones\"), this.allWrites_.push({\n        path: t,\n        children: e,\n        writeId: n,\n        visible: !0\n      }), this.visibleWrites_ = this.visibleWrites_.addWrites(t, e), this.lastWriteId_ = n;\n    }, c.prototype.getWrite = function (t) {\n      for (var e = 0; e < this.allWrites_.length; e++) {\n        var n = this.allWrites_[e];\n        if (n.writeId === t) return n;\n      }\n\n      return null;\n    }, c.prototype.removeWrite = function (e) {\n      var n = this,\n          t = this.allWrites_.findIndex(function (t) {\n        return t.writeId === e;\n      });\n      gr(0 <= t, \"removeWrite called with nonexistent writeId.\");\n      var r = this.allWrites_[t];\n      this.allWrites_.splice(t, 1);\n\n      for (var i = r.visible, o = !1, a = this.allWrites_.length - 1; i && 0 <= a;) {\n        var s = this.allWrites_[a];\n        s.visible && (t <= a && this.recordContainsPath_(s, r.path) ? i = !1 : r.path.contains(s.path) && (o = !0)), a--;\n      }\n\n      if (i) {\n        if (o) return this.resetTree_(), !0;\n        if (r.snap) this.visibleWrites_ = this.visibleWrites_.removeWrite(r.path);else {\n          var u = r.children;\n          Fr(u, function (t) {\n            n.visibleWrites_ = n.visibleWrites_.removeWrite(r.path.child(t));\n          });\n        }\n        return !0;\n      }\n\n      return !1;\n    }, c.prototype.getCompleteWriteData = function (t) {\n      return this.visibleWrites_.getCompleteNode(t);\n    }, c.prototype.calcCompleteEventCache = function (e, t, n, r) {\n      if (n || r) {\n        var i = this.visibleWrites_.childCompoundWrite(e);\n        if (!r && i.isEmpty()) return t;\n\n        if (r || null != t || i.hasCompleteWrite(Gi.Empty)) {\n          var o = c.layerTree_(this.allWrites_, function (t) {\n            return (t.visible || r) && (!n || !~n.indexOf(t.writeId)) && (t.path.contains(e) || e.contains(t.path));\n          }, e);\n          u = t || Yo.EMPTY_NODE;\n          return o.apply(u);\n        }\n\n        return null;\n      }\n\n      var a = this.visibleWrites_.getCompleteNode(e);\n      if (null != a) return a;\n      var s = this.visibleWrites_.childCompoundWrite(e);\n      if (s.isEmpty()) return t;\n\n      if (null != t || s.hasCompleteWrite(Gi.Empty)) {\n        var u = t || Yo.EMPTY_NODE;\n        return s.apply(u);\n      }\n\n      return null;\n    }, c.prototype.calcCompleteEventChildren = function (t, e) {\n      var r = Yo.EMPTY_NODE,\n          n = this.visibleWrites_.getCompleteNode(t);\n      if (n) return n.isLeafNode() || n.forEachChild(Fo, function (t, e) {\n        r = r.updateImmediateChild(t, e);\n      }), r;\n\n      if (e) {\n        var i = this.visibleWrites_.childCompoundWrite(t);\n        return e.forEachChild(Fo, function (t, e) {\n          var n = i.childCompoundWrite(new Gi(t)).apply(e);\n          r = r.updateImmediateChild(t, n);\n        }), i.getCompleteChildren().forEach(function (t) {\n          r = r.updateImmediateChild(t.name, t.node);\n        }), r;\n      }\n\n      return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function (t) {\n        r = r.updateImmediateChild(t.name, t.node);\n      }), r;\n    }, c.prototype.calcEventCacheAfterServerOverwrite = function (t, e, n, r) {\n      gr(n || r, \"Either existingEventSnap or existingServerSnap must exist\");\n      var i = t.child(e);\n      if (this.visibleWrites_.hasCompleteWrite(i)) return null;\n      var o = this.visibleWrites_.childCompoundWrite(i);\n      return o.isEmpty() ? r.getChild(e) : o.apply(r.getChild(e));\n    }, c.prototype.calcCompleteChild = function (t, e, n) {\n      var r = t.child(e),\n          i = this.visibleWrites_.getCompleteNode(r);\n      return null != i ? i : n.isCompleteForChild(e) ? this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)) : null;\n    }, c.prototype.shadowingWrite = function (t) {\n      return this.visibleWrites_.getCompleteNode(t);\n    }, c.prototype.calcIndexedSlice = function (t, e, n, r, i, o) {\n      var a,\n          s = this.visibleWrites_.childCompoundWrite(t),\n          u = s.getCompleteNode(Gi.Empty);\n      if (null != u) a = u;else {\n        if (null == e) return [];\n        a = s.apply(e);\n      }\n      if ((a = a.withIndex(o)).isEmpty() || a.isLeafNode()) return [];\n\n      for (var c = [], h = o.getCompare(), l = i ? a.getReverseIteratorFrom(n, o) : a.getIteratorFrom(n, o), f = l.getNext(); f && c.length < r;) 0 !== h(f, n) && c.push(f), f = l.getNext();\n\n      return c;\n    }, c.prototype.recordContainsPath_ = function (n, r) {\n      return n.snap ? n.path.contains(r) : !!jr(n.children, function (t, e) {\n        return n.path.child(e).contains(r);\n      });\n    }, c.prototype.resetTree_ = function () {\n      this.visibleWrites_ = c.layerTree_(this.allWrites_, c.DefaultFilter_, Gi.Empty), 0 < this.allWrites_.length ? this.lastWriteId_ = this.allWrites_[this.allWrites_.length - 1].writeId : this.lastWriteId_ = -1;\n    }, c.DefaultFilter_ = function (t) {\n      return t.visible;\n    }, c.layerTree_ = function (t, e, n) {\n      for (var r = Ma.Empty, i = 0; i < t.length; ++i) {\n        var o = t[i];\n\n        if (e(o)) {\n          var a = o.path,\n              s = void 0;\n          if (o.snap) n.contains(a) ? (s = Gi.relativePath(n, a), r = r.addWrite(s, o.snap)) : a.contains(n) && (s = Gi.relativePath(a, n), r = r.addWrite(Gi.Empty, o.snap.getChild(s)));else {\n            if (!o.children) throw vr(\"WriteRecord should have .snap or .children\");\n            if (n.contains(a)) s = Gi.relativePath(n, a), r = r.addWrites(s, o.children);else if (a.contains(n)) if ((s = Gi.relativePath(a, n)).isEmpty()) r = r.addWrites(Gi.Empty, o.children);else {\n              var u = Lr(o.children, s.getFront());\n\n              if (u) {\n                var c = u.getChild(s.popFront());\n                r = r.addWrite(Gi.Empty, c);\n              }\n            }\n          }\n        }\n      }\n\n      return r;\n    }, c;\n  }(),\n      La = function () {\n    function e(t, e) {\n      this.treePath_ = t, this.writeTree_ = e;\n    }\n\n    return e.prototype.calcCompleteEventCache = function (t, e, n) {\n      return this.writeTree_.calcCompleteEventCache(this.treePath_, t, e, n);\n    }, e.prototype.calcCompleteEventChildren = function (t) {\n      return this.writeTree_.calcCompleteEventChildren(this.treePath_, t);\n    }, e.prototype.calcEventCacheAfterServerOverwrite = function (t, e, n) {\n      return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_, t, e, n);\n    }, e.prototype.shadowingWrite = function (t) {\n      return this.writeTree_.shadowingWrite(this.treePath_.child(t));\n    }, e.prototype.calcIndexedSlice = function (t, e, n, r, i) {\n      return this.writeTree_.calcIndexedSlice(this.treePath_, t, e, n, r, i);\n    }, e.prototype.calcCompleteChild = function (t, e) {\n      return this.writeTree_.calcCompleteChild(this.treePath_, t, e);\n    }, e.prototype.child = function (t) {\n      return new e(this.treePath_.child(t), this.writeTree_);\n    }, e;\n  }(),\n      Fa = function () {\n    function g(t) {\n      this.listenProvider_ = t, this.syncPointTree_ = va.Empty, this.pendingWriteTree_ = new xa(), this.tagToQueryMap_ = {}, this.queryToTagMap_ = {};\n    }\n\n    return g.prototype.applyUserOverwrite = function (t, e, n, r) {\n      return this.pendingWriteTree_.addOverwrite(t, e, n, r), r ? this.applyOperationToSyncPoints_(new wa(ma.User, t, e)) : [];\n    }, g.prototype.applyUserMerge = function (t, e, n) {\n      this.pendingWriteTree_.addMerge(t, e, n);\n      var r = va.fromObject(e);\n      return this.applyOperationToSyncPoints_(new _a(ma.User, t, r));\n    }, g.prototype.ackUserWrite = function (t, e) {\n      void 0 === e && (e = !1);\n      var n = this.pendingWriteTree_.getWrite(t);\n\n      if (this.pendingWriteTree_.removeWrite(t)) {\n        var r = va.Empty;\n        return null != n.snap ? r = r.set(Gi.Empty, !0) : Fr(n.children, function (t, e) {\n          r = r.set(new Gi(t), e);\n        }), this.applyOperationToSyncPoints_(new ga(n.path, r, e));\n      }\n\n      return [];\n    }, g.prototype.applyServerOverwrite = function (t, e) {\n      return this.applyOperationToSyncPoints_(new wa(ma.Server, t, e));\n    }, g.prototype.applyServerMerge = function (t, e) {\n      var n = va.fromObject(e);\n      return this.applyOperationToSyncPoints_(new _a(ma.Server, t, n));\n    }, g.prototype.applyListenComplete = function (t) {\n      return this.applyOperationToSyncPoints_(new ba(ma.Server, t));\n    }, g.prototype.applyTaggedQueryOverwrite = function (t, e, n) {\n      var r = this.queryKeyForTag_(n);\n      if (null == r) return [];\n      var i = g.parseQueryKey_(r),\n          o = i.path,\n          a = i.queryId,\n          s = Gi.relativePath(o, t),\n          u = new wa(ma.forServerTaggedQuery(a), s, e);\n      return this.applyTaggedOperation_(o, u);\n    }, g.prototype.applyTaggedQueryMerge = function (t, e, n) {\n      var r = this.queryKeyForTag_(n);\n\n      if (r) {\n        var i = g.parseQueryKey_(r),\n            o = i.path,\n            a = i.queryId,\n            s = Gi.relativePath(o, t),\n            u = va.fromObject(e),\n            c = new _a(ma.forServerTaggedQuery(a), s, u);\n        return this.applyTaggedOperation_(o, c);\n      }\n\n      return [];\n    }, g.prototype.applyTaggedListenComplete = function (t, e) {\n      var n = this.queryKeyForTag_(e);\n\n      if (n) {\n        var r = g.parseQueryKey_(n),\n            i = r.path,\n            o = r.queryId,\n            a = Gi.relativePath(i, t),\n            s = new ba(ma.forServerTaggedQuery(o), a);\n        return this.applyTaggedOperation_(i, s);\n      }\n\n      return [];\n    }, g.prototype.addEventRegistration = function (t, e) {\n      var r = t.path,\n          i = null,\n          o = !1;\n      this.syncPointTree_.foreachOnPath(r, function (t, e) {\n        var n = Gi.relativePath(t, r);\n        i = i || e.getCompleteServerCache(n), o = o || e.hasCompleteView();\n      });\n      var n,\n          a = this.syncPointTree_.get(r);\n      (a ? (o = o || a.hasCompleteView(), i = i || a.getCompleteServerCache(Gi.Empty)) : (a = new Pa(), this.syncPointTree_ = this.syncPointTree_.set(r, a)), null != i) ? n = !0 : (n = !1, i = Yo.EMPTY_NODE, this.syncPointTree_.subtree(r).foreachChild(function (t, e) {\n        var n = e.getCompleteServerCache(Gi.Empty);\n        n && (i = i.updateImmediateChild(t, n));\n      }));\n      var s = a.viewExistsForQuery(t);\n\n      if (!s && !t.getQueryParams().loadsAllData()) {\n        var u = g.makeQueryKey_(t);\n        gr(!(u in this.queryToTagMap_), \"View does not exist, but we have a tag\");\n        var c = g.getNextQueryTag_();\n        this.queryToTagMap_[u] = c, this.tagToQueryMap_[\"_\" + c] = u;\n      }\n\n      var h = this.pendingWriteTree_.childWrites(r),\n          l = a.addEventRegistration(t, e, h, i, n);\n\n      if (!s && !o) {\n        var f = a.viewForQuery(t);\n        l = l.concat(this.setupListener_(t, f));\n      }\n\n      return l;\n    }, g.prototype.removeEventRegistration = function (t, e, n) {\n      var r = this,\n          i = t.path,\n          o = this.syncPointTree_.get(i),\n          a = [];\n\n      if (o && (\"default\" === t.queryIdentifier() || o.viewExistsForQuery(t))) {\n        var s = o.removeEventRegistration(t, e, n);\n        o.isEmpty() && (this.syncPointTree_ = this.syncPointTree_.remove(i));\n        var u = s.removed;\n        a = s.events;\n        var c = -1 !== u.findIndex(function (t) {\n          return t.getQueryParams().loadsAllData();\n        }),\n            h = this.syncPointTree_.findOnPath(i, function (t, e) {\n          return e.hasCompleteView();\n        });\n\n        if (c && !h) {\n          var l = this.syncPointTree_.subtree(i);\n          if (!l.isEmpty()) for (var f = this.collectDistinctViewsForSubTree_(l), p = 0; p < f.length; ++p) {\n            var d = f[p],\n                y = d.getQuery(),\n                m = this.createListenerForView_(d);\n            this.listenProvider_.startListening(g.queryForListening_(y), this.tagForQuery_(y), m.hashFn, m.onComplete);\n          }\n        }\n\n        if (!h && 0 < u.length && !n) if (c) {\n          this.listenProvider_.stopListening(g.queryForListening_(t), null);\n        } else u.forEach(function (t) {\n          var e = r.queryToTagMap_[g.makeQueryKey_(t)];\n          r.listenProvider_.stopListening(g.queryForListening_(t), e);\n        });\n        this.removeTags_(u);\n      }\n\n      return a;\n    }, g.prototype.calcCompleteEventCache = function (i, t) {\n      var e = this.pendingWriteTree_,\n          n = this.syncPointTree_.findOnPath(i, function (t, e) {\n        var n = Gi.relativePath(t, i),\n            r = e.getCompleteServerCache(n);\n        if (r) return r;\n      });\n      return e.calcCompleteEventCache(i, n, t, !0);\n    }, g.prototype.collectDistinctViewsForSubTree_ = function (t) {\n      return t.fold(function (t, e, n) {\n        if (e && e.hasCompleteView()) return [e.getCompleteView()];\n        var r = [];\n        return e && (r = e.getQueryViews()), Fr(n, function (t, e) {\n          r = r.concat(e);\n        }), r;\n      });\n    }, g.prototype.removeTags_ = function (t) {\n      for (var e = 0; e < t.length; ++e) {\n        var n = t[e];\n\n        if (!n.getQueryParams().loadsAllData()) {\n          var r = g.makeQueryKey_(n),\n              i = this.queryToTagMap_[r];\n          delete this.queryToTagMap_[r], delete this.tagToQueryMap_[\"_\" + i];\n        }\n      }\n    }, g.queryForListening_ = function (t) {\n      return t.getQueryParams().loadsAllData() && !t.getQueryParams().isDefault() ? t.getRef() : t;\n    }, g.prototype.setupListener_ = function (t, e) {\n      var n = t.path,\n          r = this.tagForQuery_(t),\n          i = this.createListenerForView_(e),\n          o = this.listenProvider_.startListening(g.queryForListening_(t), r, i.hashFn, i.onComplete),\n          a = this.syncPointTree_.subtree(n);\n      if (r) gr(!a.value.hasCompleteView(), \"If we're adding a query, it shouldn't be shadowed\");else for (var s = a.fold(function (t, e, n) {\n        if (!t.isEmpty() && e && e.hasCompleteView()) return [e.getCompleteView().getQuery()];\n        var r = [];\n        return e && (r = r.concat(e.getQueryViews().map(function (t) {\n          return t.getQuery();\n        }))), Fr(n, function (t, e) {\n          r = r.concat(e);\n        }), r;\n      }), u = 0; u < s.length; ++u) {\n        var c = s[u];\n        this.listenProvider_.stopListening(g.queryForListening_(c), this.tagForQuery_(c));\n      }\n      return o;\n    }, g.prototype.createListenerForView_ = function (t) {\n      var n = this,\n          r = t.getQuery(),\n          i = this.tagForQuery_(r);\n      return {\n        hashFn: function () {\n          return (t.getServerCache() || Yo.EMPTY_NODE).hash();\n        },\n        onComplete: function (t) {\n          if (\"ok\" === t) return i ? n.applyTaggedListenComplete(r.path, i) : n.applyListenComplete(r.path);\n\n          var e = function (t, e) {\n            var n = \"Unknown Error\";\n            \"too_big\" === t ? n = \"The data requested exceeds the maximum size that can be accessed with a single request.\" : \"permission_denied\" == t ? n = \"Client doesn't have permission to access the desired data.\" : \"unavailable\" == t && (n = \"The service is unavailable\");\n            var r = new Error(t + \" at \" + e.path.toString() + \": \" + n);\n            return r.code = t.toUpperCase(), r;\n          }(t, r);\n\n          return n.removeEventRegistration(r, null, e);\n        }\n      };\n    }, g.makeQueryKey_ = function (t) {\n      return t.path.toString() + \"$\" + t.queryIdentifier();\n    }, g.parseQueryKey_ = function (t) {\n      var e = t.indexOf(\"$\");\n      return gr(-1 !== e && e < t.length - 1, \"Bad queryKey.\"), {\n        queryId: t.substr(e + 1),\n        path: new Gi(t.substr(0, e))\n      };\n    }, g.prototype.queryKeyForTag_ = function (t) {\n      return this.tagToQueryMap_[\"_\" + t];\n    }, g.prototype.tagForQuery_ = function (t) {\n      var e = g.makeQueryKey_(t);\n      return Lr(this.queryToTagMap_, e);\n    }, g.getNextQueryTag_ = function () {\n      return g.nextQueryTag_++;\n    }, g.prototype.applyTaggedOperation_ = function (t, e) {\n      var n = this.syncPointTree_.get(t);\n      gr(n, \"Missing sync point for query tag that we're tracking\");\n      var r = this.pendingWriteTree_.childWrites(t);\n      return n.applyOperation(e, r, null);\n    }, g.prototype.applyOperationToSyncPoints_ = function (t) {\n      return this.applyOperationHelper_(t, this.syncPointTree_, null, this.pendingWriteTree_.childWrites(Gi.Empty));\n    }, g.prototype.applyOperationHelper_ = function (t, e, n, r) {\n      if (t.path.isEmpty()) return this.applyOperationDescendantsHelper_(t, e, n, r);\n      var i = e.get(Gi.Empty);\n      null == n && null != i && (n = i.getCompleteServerCache(Gi.Empty));\n      var o = [],\n          a = t.path.getFront(),\n          s = t.operationForChild(a),\n          u = e.children.get(a);\n\n      if (u && s) {\n        var c = n ? n.getImmediateChild(a) : null,\n            h = r.child(a);\n        o = o.concat(this.applyOperationHelper_(s, u, c, h));\n      }\n\n      return i && (o = o.concat(i.applyOperation(t, r, n))), o;\n    }, g.prototype.applyOperationDescendantsHelper_ = function (o, t, a, s) {\n      var u = this,\n          e = t.get(Gi.Empty);\n      null == a && null != e && (a = e.getCompleteServerCache(Gi.Empty));\n      var c = [];\n      return t.children.inorderTraversal(function (t, e) {\n        var n = a ? a.getImmediateChild(t) : null,\n            r = s.child(t),\n            i = o.operationForChild(t);\n        i && (c = c.concat(u.applyOperationDescendantsHelper_(i, e, n, r)));\n      }), e && (c = c.concat(e.applyOperation(o, s, a))), c;\n    }, g.nextQueryTag_ = 1, g;\n  }(),\n      Ua = function () {\n    function t() {\n      this.rootNode_ = Yo.EMPTY_NODE;\n    }\n\n    return t.prototype.getNode = function (t) {\n      return this.rootNode_.getChild(t);\n    }, t.prototype.updateSnapshot = function (t, e) {\n      this.rootNode_ = this.rootNode_.updateChild(t, e);\n    }, t;\n  }(),\n      qa = function () {\n    function t(t) {\n      this.app_ = t;\n    }\n\n    return t.prototype.getToken = function (t) {\n      return this.app_.INTERNAL.getToken(t).then(null, function (t) {\n        return t && \"auth/token-not-initialized\" === t.code ? (Ai(\"Got auth/token-not-initialized error.  Treating as null token.\"), null) : Promise.reject(t);\n      });\n    }, t.prototype.addTokenChangeListener = function (t) {\n      this.app_.INTERNAL.addAuthTokenListener(t);\n    }, t.prototype.removeTokenChangeListener = function (t) {\n      this.app_.INTERNAL.removeAuthTokenListener(t);\n    }, t.prototype.notifyForInvalidToken = function () {\n      var t = 'Provided authentication credentials for the app named \"' + this.app_.name + '\" are invalid. This usually indicates your app was not initialized correctly. ';\n      \"credential\" in this.app_.options ? t += 'Make sure the \"credential\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.' : \"serviceAccount\" in this.app_.options ? t += 'Make sure the \"serviceAccount\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.' : t += 'Make sure the \"apiKey\" and \"databaseURL\" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.', Oi(t);\n    }, t;\n  }(),\n      Va = function () {\n    function t() {\n      this.counters_ = {};\n    }\n\n    return t.prototype.incrementCounter = function (t, e) {\n      void 0 === e && (e = 1), xr(this.counters_, t) || (this.counters_[t] = 0), this.counters_[t] += e;\n    }, t.prototype.get = function () {\n      return Er(this.counters_);\n    }, t;\n  }(),\n      Ba = function () {\n    function t() {}\n\n    return t.getCollection = function (t) {\n      var e = t.toString();\n      return this.collections_[e] || (this.collections_[e] = new Va()), this.collections_[e];\n    }, t.getOrCreateReporter = function (t, e) {\n      var n = t.toString();\n      return this.reporters_[n] || (this.reporters_[n] = e()), this.reporters_[n];\n    }, t.collections_ = {}, t.reporters_ = {}, t;\n  }(),\n      ja = function () {\n    function t(t) {\n      this.collection_ = t, this.last_ = null;\n    }\n\n    return t.prototype.get = function () {\n      var t = this.collection_.get(),\n          n = Ur(t);\n      return this.last_ && Fr(this.last_, function (t, e) {\n        n[t] = n[t] - e;\n      }), this.last_ = t, n;\n    }, t;\n  }(),\n      Wa = function () {\n    function t(t, e) {\n      this.server_ = e, this.statsToReport_ = {}, this.statsListener_ = new ja(t);\n      var n = 1e4 + 2e4 * Math.random();\n      Hi(this.reportStats_.bind(this), Math.floor(n));\n    }\n\n    return t.prototype.includeStat = function (t) {\n      this.statsToReport_[t] = !0;\n    }, t.prototype.reportStats_ = function () {\n      var n = this,\n          t = this.statsListener_.get(),\n          r = {},\n          i = !1;\n      Fr(t, function (t, e) {\n        0 < e && xr(n.statsToReport_, t) && (r[t] = e, i = !0);\n      }), i && this.server_.reportStats(r), Hi(this.reportStats_.bind(this), Math.floor(2 * Math.random() * 3e5));\n    }, t;\n  }(),\n      Ka = function () {\n    function t() {\n      this.eventLists_ = [], this.recursionDepth_ = 0;\n    }\n\n    return t.prototype.queueEvents = function (t) {\n      for (var e = null, n = 0; n < t.length; n++) {\n        var r = t[n],\n            i = r.getPath();\n        null === e || i.equals(e.getPath()) || (this.eventLists_.push(e), e = null), null === e && (e = new Qa(i)), e.add(r);\n      }\n\n      e && this.eventLists_.push(e);\n    }, t.prototype.raiseEventsAtPath = function (e, t) {\n      this.queueEvents(t), this.raiseQueuedEventsMatchingPredicate_(function (t) {\n        return t.equals(e);\n      });\n    }, t.prototype.raiseEventsForChangedPath = function (e, t) {\n      this.queueEvents(t), this.raiseQueuedEventsMatchingPredicate_(function (t) {\n        return t.contains(e) || e.contains(t);\n      });\n    }, t.prototype.raiseQueuedEventsMatchingPredicate_ = function (t) {\n      this.recursionDepth_++;\n\n      for (var e = !0, n = 0; n < this.eventLists_.length; n++) {\n        var r = this.eventLists_[n];\n        if (r) t(r.getPath()) ? (this.eventLists_[n].raise(), this.eventLists_[n] = null) : e = !1;\n      }\n\n      e && (this.eventLists_ = []), this.recursionDepth_--;\n    }, t;\n  }(),\n      Qa = function () {\n    function t(t) {\n      this.path_ = t, this.events_ = [];\n    }\n\n    return t.prototype.add = function (t) {\n      this.events_.push(t);\n    }, t.prototype.raise = function () {\n      for (var t = 0; t < this.events_.length; t++) {\n        var e = this.events_[t];\n\n        if (null !== e) {\n          this.events_[t] = null;\n          var n = e.getEventRunner();\n          Ii && Ai(\"event: \" + e.toString()), Qi(n);\n        }\n      }\n    }, t.prototype.getPath = function () {\n      return this.path_;\n    }, t;\n  }(),\n      Ha = function () {\n    function t(t) {\n      this.allowedEvents_ = t, this.listeners_ = {}, gr(Array.isArray(t) && 0 < t.length, \"Requires a non-empty array\");\n    }\n\n    return t.prototype.trigger = function (t) {\n      for (var e = [], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];\n\n      if (Array.isArray(this.listeners_[t])) for (var r = this.listeners_[t].slice(), i = 0; i < r.length; i++) r[i].callback.apply(r[i].context, e);\n    }, t.prototype.on = function (t, e, n) {\n      this.validateEventType_(t), this.listeners_[t] = this.listeners_[t] || [], this.listeners_[t].push({\n        callback: e,\n        context: n\n      });\n      var r = this.getInitialEvent(t);\n      r && e.apply(n, r);\n    }, t.prototype.off = function (t, e, n) {\n      this.validateEventType_(t);\n\n      for (var r = this.listeners_[t] || [], i = 0; i < r.length; i++) if (r[i].callback === e && (!n || n === r[i].context)) return void r.splice(i, 1);\n    }, t.prototype.validateEventType_ = function (e) {\n      gr(this.allowedEvents_.find(function (t) {\n        return t === e;\n      }), \"Unknown event: \" + e);\n    }, t;\n  }(),\n      Ga = function (r) {\n    function t() {\n      var e,\n          t,\n          n = r.call(this, [\"visible\"]) || this;\n      return \"undefined\" != typeof document && void 0 !== document.addEventListener && (void 0 !== document.hidden ? (t = \"visibilitychange\", e = \"hidden\") : void 0 !== document.mozHidden ? (t = \"mozvisibilitychange\", e = \"mozHidden\") : void 0 !== document.msHidden ? (t = \"msvisibilitychange\", e = \"msHidden\") : void 0 !== document.webkitHidden && (t = \"webkitvisibilitychange\", e = \"webkitHidden\")), n.visible_ = !0, t && document.addEventListener(t, function () {\n        var t = !document[e];\n        t !== n.visible_ && (n.visible_ = t, n.trigger(\"visible\", t));\n      }, !1), n;\n    }\n\n    return hr(t, r), t.getInstance = function () {\n      return new t();\n    }, t.prototype.getInitialEvent = function (t) {\n      return gr(\"visible\" === t, \"Unknown event type: \" + t), [this.visible_];\n    }, t;\n  }(Ha),\n      za = function (e) {\n    function t() {\n      var t = e.call(this, [\"online\"]) || this;\n      return t.online_ = !0, \"undefined\" == typeof window || void 0 === window.addEventListener || Cr() || (window.addEventListener(\"online\", function () {\n        t.online_ || (t.online_ = !0, t.trigger(\"online\", !0));\n      }, !1), window.addEventListener(\"offline\", function () {\n        t.online_ && (t.online_ = !1, t.trigger(\"online\", !1));\n      }, !1)), t;\n    }\n\n    return hr(t, e), t.getInstance = function () {\n      return new t();\n    }, t.prototype.getInitialEvent = function (t) {\n      return gr(\"online\" === t, \"Unknown event type: \" + t), [this.online_];\n    }, t.prototype.currentlyOnline = function () {\n      return this.online_;\n    }, t;\n  }(Ha),\n      Ya = function () {\n    function t(t) {\n      this.onMessage_ = t, this.pendingResponses = [], this.currentResponseNum = 0, this.closeAfterResponse = -1, this.onClose = null;\n    }\n\n    return t.prototype.closeAfter = function (t, e) {\n      this.closeAfterResponse = t, this.onClose = e, this.closeAfterResponse < this.currentResponseNum && (this.onClose(), this.onClose = null);\n    }, t.prototype.handleResponse = function (t, e) {\n      var r = this;\n      this.pendingResponses[t] = e;\n\n      for (var n = function () {\n        var e = i.pendingResponses[i.currentResponseNum];\n        delete i.pendingResponses[i.currentResponseNum];\n\n        for (var t = function (t) {\n          e[t] && Qi(function () {\n            r.onMessage_(e[t]);\n          });\n        }, n = 0; n < e.length; ++n) t(n);\n\n        if (i.currentResponseNum === i.closeAfterResponse) return i.onClose && (i.onClose(), i.onClose = null), \"break\";\n        i.currentResponseNum++;\n      }, i = this; this.pendingResponses[this.currentResponseNum];) {\n        if (\"break\" === n()) break;\n      }\n    }, t;\n  }(),\n      Xa = function () {\n    function t(t, e, n, r) {\n      this.connId = t, this.repoInfo = e, this.transportSessionId = n, this.lastSessionId = r, this.bytesSent = 0, this.bytesReceived = 0, this.everConnected_ = !1, this.log_ = ki(t), this.stats_ = Ba.getCollection(e), this.urlFn = function (t) {\n        return e.connectionURL(Ji, t);\n      };\n    }\n\n    return t.prototype.open = function (t, e) {\n      var o = this;\n      this.curSegmentNum = 0, this.onDisconnect_ = e, this.myPacketOrderer = new Ya(t), this.isClosed_ = !1, this.connectTimeoutTimer_ = setTimeout(function () {\n        o.log_(\"Timed out trying to connect.\"), o.onClosed_(), o.connectTimeoutTimer_ = null;\n      }, Math.floor(3e4)), function (t) {\n        if (\"complete\" === document.readyState) t();else {\n          var e = !1,\n              n = function () {\n            document.body ? e || (e = !0, t()) : setTimeout(n, Math.floor(10));\n          };\n\n          document.addEventListener ? (document.addEventListener(\"DOMContentLoaded\", n, !1), window.addEventListener(\"load\", n, !1)) : document.attachEvent && (document.attachEvent(\"onreadystatechange\", function () {\n            \"complete\" === document.readyState && n();\n          }), window.attachEvent(\"onload\", n));\n        }\n      }(function () {\n        if (!o.isClosed_) {\n          o.scriptTagHolder = new Ja(function () {\n            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n            var n = t[0],\n                r = t[1],\n                i = t[2];\n            if (o.incrementIncomingBytes_(t), o.scriptTagHolder) if (o.connectTimeoutTimer_ && (clearTimeout(o.connectTimeoutTimer_), o.connectTimeoutTimer_ = null), o.everConnected_ = !0, \"start\" == n) o.id = r, o.password = i;else {\n              if (\"close\" !== n) throw new Error(\"Unrecognized command received: \" + n);\n              r ? (o.scriptTagHolder.sendNewPolls = !1, o.myPacketOrderer.closeAfter(r, function () {\n                o.onClosed_();\n              })) : o.onClosed_();\n            }\n          }, function () {\n            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n            var n = t[0],\n                r = t[1];\n            o.incrementIncomingBytes_(t), o.myPacketOrderer.handleResponse(n, r);\n          }, function () {\n            o.onClosed_();\n          }, o.urlFn);\n          var t = {\n            start: \"t\"\n          };\n          t.ser = Math.floor(1e8 * Math.random()), o.scriptTagHolder.uniqueCallbackIdentifier && (t.cb = o.scriptTagHolder.uniqueCallbackIdentifier), t.v = \"5\", o.transportSessionId && (t.s = o.transportSessionId), o.lastSessionId && (t.ls = o.lastSessionId), \"undefined\" != typeof location && location.href && -1 !== location.href.indexOf(Yi) && (t.r = \"f\");\n          var e = o.urlFn(t);\n          o.log_(\"Connecting via long-poll to \" + e), o.scriptTagHolder.addTag(e, function () {});\n        }\n      });\n    }, t.prototype.start = function () {\n      this.scriptTagHolder.startLongPoll(this.id, this.password), this.addDisconnectPingFrame(this.id, this.password);\n    }, t.forceAllow = function () {\n      t.forceAllow_ = !0;\n    }, t.forceDisallow = function () {\n      t.forceDisallow_ = !0;\n    }, t.isAvailable = function () {\n      return t.forceAllow_ || !t.forceDisallow_ && \"undefined\" != typeof document && null != document.createElement && !(\"object\" == typeof window && window.chrome && window.chrome.extension && !/^chrome/.test(window.location.href)) && !(\"object\" == typeof Windows && \"object\" == typeof Windows.UI) && !Ar();\n    }, t.prototype.markConnectionHealthy = function () {}, t.prototype.shutdown_ = function () {\n      this.isClosed_ = !0, this.scriptTagHolder && (this.scriptTagHolder.close(), this.scriptTagHolder = null), this.myDisconnFrame && (document.body.removeChild(this.myDisconnFrame), this.myDisconnFrame = null), this.connectTimeoutTimer_ && (clearTimeout(this.connectTimeoutTimer_), this.connectTimeoutTimer_ = null);\n    }, t.prototype.onClosed_ = function () {\n      this.isClosed_ || (this.log_(\"Longpoll is closing itself\"), this.shutdown_(), this.onDisconnect_ && (this.onDisconnect_(this.everConnected_), this.onDisconnect_ = null));\n    }, t.prototype.close = function () {\n      this.isClosed_ || (this.log_(\"Longpoll is being closed.\"), this.shutdown_());\n    }, t.prototype.send = function (t) {\n      var e = Pr(t);\n      this.bytesSent += e.length, this.stats_.incrementCounter(\"bytes_sent\", e.length);\n\n      for (var n, r = (n = br(e), wr.encodeByteArray(n, !0)), i = Vi(r, 1840), o = 0; o < i.length; o++) this.scriptTagHolder.enqueueSegment(this.curSegmentNum, i.length, i[o]), this.curSegmentNum++;\n    }, t.prototype.addDisconnectPingFrame = function (t, e) {\n      this.myDisconnFrame = document.createElement(\"iframe\");\n      var n = {\n        dframe: \"t\"\n      };\n      n.id = t, n.pw = e, this.myDisconnFrame.src = this.urlFn(n), this.myDisconnFrame.style.display = \"none\", document.body.appendChild(this.myDisconnFrame);\n    }, t.prototype.incrementIncomingBytes_ = function (t) {\n      var e = Pr(t).length;\n      this.bytesReceived += e, this.stats_.incrementCounter(\"bytes_received\", e);\n    }, t;\n  }(),\n      Ja = function () {\n    function a(t, e, n, r) {\n      this.onDisconnect = n, this.urlFn = r, this.outstandingRequests = new ha(), this.pendingSegs = [], this.currentSerial = Math.floor(1e8 * Math.random()), this.sendNewPolls = !0, this.uniqueCallbackIdentifier = Ei(), window[\"pLPCommand\" + this.uniqueCallbackIdentifier] = t, window[\"pRTLPCB\" + this.uniqueCallbackIdentifier] = e, this.myIFrame = a.createIFrame_();\n      var i = \"\";\n      this.myIFrame.src && \"javascript:\" === this.myIFrame.src.substr(0, \"javascript:\".length) && (i = '<script>document.domain=\"' + document.domain + '\";<\\/script>');\n      var o = \"<html><body>\" + i + \"</body></html>\";\n\n      try {\n        this.myIFrame.doc.open(), this.myIFrame.doc.write(o), this.myIFrame.doc.close();\n      } catch (t) {\n        Ai(\"frame writing exception\"), t.stack && Ai(t.stack), Ai(t);\n      }\n    }\n\n    return a.createIFrame_ = function () {\n      var e = document.createElement(\"iframe\");\n      if (e.style.display = \"none\", !document.body) throw \"Document body has not initialized. Wait to initialize Firebase until after the document is ready.\";\n      document.body.appendChild(e);\n\n      try {\n        e.contentWindow.document || Ai(\"No IE domain setting required\");\n      } catch (t) {\n        var n = document.domain;\n        e.src = \"javascript:void((function(){document.open();document.domain='\" + n + \"';document.close();})())\";\n      }\n\n      return e.contentDocument ? e.doc = e.contentDocument : e.contentWindow ? e.doc = e.contentWindow.document : e.document && (e.doc = e.document), e;\n    }, a.prototype.close = function () {\n      var t = this;\n      this.alive = !1, this.myIFrame && (this.myIFrame.doc.body.innerHTML = \"\", setTimeout(function () {\n        null !== t.myIFrame && (document.body.removeChild(t.myIFrame), t.myIFrame = null);\n      }, Math.floor(0)));\n      var e = this.onDisconnect;\n      e && (this.onDisconnect = null, e());\n    }, a.prototype.startLongPoll = function (t, e) {\n      for (this.myID = t, this.myPW = e, this.alive = !0; this.newRequest_(););\n    }, a.prototype.newRequest_ = function () {\n      if (this.alive && this.sendNewPolls && this.outstandingRequests.count() < (0 < this.pendingSegs.length ? 2 : 1)) {\n        this.currentSerial++;\n        var t = {};\n        t.id = this.myID, t.pw = this.myPW, t.ser = this.currentSerial;\n\n        for (var e = this.urlFn(t), n = \"\", r = 0; 0 < this.pendingSegs.length;) {\n          if (!(this.pendingSegs[0].d.length + 30 + n.length <= 1870)) break;\n          var i = this.pendingSegs.shift();\n          n = n + \"&seg\" + r + \"=\" + i.seg + \"&ts\" + r + \"=\" + i.ts + \"&d\" + r + \"=\" + i.d, r++;\n        }\n\n        return e += n, this.addLongPollTag_(e, this.currentSerial), !0;\n      }\n\n      return !1;\n    }, a.prototype.enqueueSegment = function (t, e, n) {\n      this.pendingSegs.push({\n        seg: t,\n        ts: e,\n        d: n\n      }), this.alive && this.newRequest_();\n    }, a.prototype.addLongPollTag_ = function (t, e) {\n      var n = this;\n      this.outstandingRequests.add(e, 1);\n\n      var r = function () {\n        n.outstandingRequests.remove(e), n.newRequest_();\n      },\n          i = setTimeout(r, Math.floor(25e3));\n\n      this.addTag(t, function () {\n        clearTimeout(i), r();\n      });\n    }, a.prototype.addTag = function (t, n) {\n      var r = this;\n      setTimeout(function () {\n        try {\n          if (!r.sendNewPolls) return;\n          var e = r.myIFrame.doc.createElement(\"script\");\n          e.type = \"text/javascript\", e.async = !0, e.src = t, e.onload = e.onreadystatechange = function () {\n            var t = e.readyState;\n            t && \"loaded\" !== t && \"complete\" !== t || (e.onload = e.onreadystatechange = null, e.parentNode && e.parentNode.removeChild(e), n());\n          }, e.onerror = function () {\n            Ai(\"Long-poll script failed to load: \" + t), r.sendNewPolls = !1, r.close();\n          }, r.myIFrame.doc.body.appendChild(e);\n        } catch (t) {}\n      }, Math.floor(1));\n    }, a;\n  }(),\n      $a = null;\n\n  \"undefined\" != typeof MozWebSocket ? $a = MozWebSocket : \"undefined\" != typeof WebSocket && ($a = WebSocket);\n\n  var Za = function () {\n    function i(t, e, n, r) {\n      this.connId = t, this.keepaliveTimer = null, this.frames = null, this.totalFrames = 0, this.bytesSent = 0, this.bytesReceived = 0, this.log_ = ki(this.connId), this.stats_ = Ba.getCollection(e), this.connURL = i.connectionURL_(e, n, r);\n    }\n\n    return i.connectionURL_ = function (t, e, n) {\n      var r = {\n        v: \"5\"\n      };\n      return \"undefined\" != typeof location && location.href && -1 !== location.href.indexOf(Yi) && (r.r = \"f\"), e && (r.s = e), n && (r.ls = n), t.connectionURL(Xi, r);\n    }, i.prototype.open = function (t, e) {\n      var n = this;\n      this.onDisconnect = e, this.onMessage = t, this.log_(\"Websocket connecting to \" + this.connURL), this.everConnected_ = !1, bi.set(\"previous_websocket_failure\", !0);\n\n      try {\n        this.mySock = new $a(this.connURL);\n      } catch (t) {\n        this.log_(\"Error instantiating WebSocket.\");\n        var r = t.message || t.data;\n        return r && this.log_(r), void this.onClosed_();\n      }\n\n      this.mySock.onopen = function () {\n        n.log_(\"Websocket connected.\"), n.everConnected_ = !0;\n      }, this.mySock.onclose = function () {\n        n.log_(\"Websocket connection was disconnected.\"), n.mySock = null, n.onClosed_();\n      }, this.mySock.onmessage = function (t) {\n        n.handleIncomingFrame(t);\n      }, this.mySock.onerror = function (t) {\n        n.log_(\"WebSocket error.  Closing connection.\");\n        var e = t.message || t.data;\n        e && n.log_(e), n.onClosed_();\n      };\n    }, i.prototype.start = function () {}, i.forceDisallow = function () {\n      i.forceDisallow_ = !0;\n    }, i.isAvailable = function () {\n      var t = !1;\n\n      if (\"undefined\" != typeof navigator && navigator.userAgent) {\n        var e = navigator.userAgent.match(/Android ([0-9]{0,}\\.[0-9]{0,})/);\n        e && 1 < e.length && parseFloat(e[1]) < 4.4 && (t = !0);\n      }\n\n      return !t && null !== $a && !i.forceDisallow_;\n    }, i.previouslyFailed = function () {\n      return bi.isInMemoryStorage || !0 === bi.get(\"previous_websocket_failure\");\n    }, i.prototype.markConnectionHealthy = function () {\n      bi.remove(\"previous_websocket_failure\");\n    }, i.prototype.appendFrame_ = function (t) {\n      if (this.frames.push(t), this.frames.length == this.totalFrames) {\n        var e = this.frames.join(\"\");\n        this.frames = null;\n        var n = Or(e);\n        this.onMessage(n);\n      }\n    }, i.prototype.handleNewFrameCount_ = function (t) {\n      this.totalFrames = t, this.frames = [];\n    }, i.prototype.extractFrameCount_ = function (t) {\n      if (gr(null === this.frames, \"We already have a frame buffer\"), t.length <= 6) {\n        var e = Number(t);\n        if (!isNaN(e)) return this.handleNewFrameCount_(e), null;\n      }\n\n      return this.handleNewFrameCount_(1), t;\n    }, i.prototype.handleIncomingFrame = function (t) {\n      if (null !== this.mySock) {\n        var e = t.data;\n        if (this.bytesReceived += e.length, this.stats_.incrementCounter(\"bytes_received\", e.length), this.resetKeepAlive(), null !== this.frames) this.appendFrame_(e);else {\n          var n = this.extractFrameCount_(e);\n          null !== n && this.appendFrame_(n);\n        }\n      }\n    }, i.prototype.send = function (t) {\n      this.resetKeepAlive();\n      var e = Pr(t);\n      this.bytesSent += e.length, this.stats_.incrementCounter(\"bytes_sent\", e.length);\n      var n = Vi(e, 16384);\n      1 < n.length && this.sendString_(String(n.length));\n\n      for (var r = 0; r < n.length; r++) this.sendString_(n[r]);\n    }, i.prototype.shutdown_ = function () {\n      this.isClosed_ = !0, this.keepaliveTimer && (clearInterval(this.keepaliveTimer), this.keepaliveTimer = null), this.mySock && (this.mySock.close(), this.mySock = null);\n    }, i.prototype.onClosed_ = function () {\n      this.isClosed_ || (this.log_(\"WebSocket is closing itself\"), this.shutdown_(), this.onDisconnect && (this.onDisconnect(this.everConnected_), this.onDisconnect = null));\n    }, i.prototype.close = function () {\n      this.isClosed_ || (this.log_(\"WebSocket is being closed\"), this.shutdown_());\n    }, i.prototype.resetKeepAlive = function () {\n      var t = this;\n      clearInterval(this.keepaliveTimer), this.keepaliveTimer = setInterval(function () {\n        t.mySock && t.sendString_(\"0\"), t.resetKeepAlive();\n      }, Math.floor(45e3));\n    }, i.prototype.sendString_ = function (t) {\n      try {\n        this.mySock.send(t);\n      } catch (t) {\n        this.log_(\"Exception thrown from WebSocket.send():\", t.message || t.data, \"Closing connection.\"), setTimeout(this.onClosed_.bind(this), 0);\n      }\n    }, i.responsesRequiredToBeHealthy = 2, i.healthyTimeout = 3e4, i;\n  }(),\n      ts = function () {\n    function i(t) {\n      this.initTransports_(t);\n    }\n\n    return Object.defineProperty(i, \"ALL_TRANSPORTS\", {\n      get: function () {\n        return [Xa, Za];\n      },\n      enumerable: !0,\n      configurable: !0\n    }), i.prototype.initTransports_ = function (t) {\n      var e = Za && Za.isAvailable(),\n          n = e && !Za.previouslyFailed();\n      if (t.webSocketOnly && (e || Oi(\"wss:// URL used, but browser isn't known to support websockets.  Trying anyway.\"), n = !0), n) this.transports_ = [Za];else {\n        var r = this.transports_ = [];\n        Bi(i.ALL_TRANSPORTS, function (t, e) {\n          e && e.isAvailable() && r.push(e);\n        });\n      }\n    }, i.prototype.initialTransport = function () {\n      if (0 < this.transports_.length) return this.transports_[0];\n      throw new Error(\"No transports available\");\n    }, i.prototype.upgradeTransport = function () {\n      return 1 < this.transports_.length ? this.transports_[1] : null;\n    }, i;\n  }(),\n      es = function () {\n    function t(t, e, n, r, i, o, a) {\n      this.id = t, this.repoInfo_ = e, this.onMessage_ = n, this.onReady_ = r, this.onDisconnect_ = i, this.onKill_ = o, this.lastSessionId = a, this.connectionCount = 0, this.pendingDataMessages = [], this.state_ = 0, this.log_ = ki(\"c:\" + this.id + \":\"), this.transportManager_ = new ts(e), this.log_(\"Connection created\"), this.start_();\n    }\n\n    return t.prototype.start_ = function () {\n      var t = this,\n          e = this.transportManager_.initialTransport();\n      this.conn_ = new e(this.nextTransportId_(), this.repoInfo_, void 0, this.lastSessionId), this.primaryResponsesRequired_ = e.responsesRequiredToBeHealthy || 0;\n      var n = this.connReceiver_(this.conn_),\n          r = this.disconnReceiver_(this.conn_);\n      this.tx_ = this.conn_, this.rx_ = this.conn_, this.secondaryConn_ = null, this.isHealthy_ = !1, setTimeout(function () {\n        t.conn_ && t.conn_.open(n, r);\n      }, Math.floor(0));\n      var i = e.healthyTimeout || 0;\n      0 < i && (this.healthyTimeout_ = Hi(function () {\n        t.healthyTimeout_ = null, t.isHealthy_ || (t.conn_ && 102400 < t.conn_.bytesReceived ? (t.log_(\"Connection exceeded healthy timeout but has received \" + t.conn_.bytesReceived + \" bytes.  Marking connection healthy.\"), t.isHealthy_ = !0, t.conn_.markConnectionHealthy()) : t.conn_ && 10240 < t.conn_.bytesSent ? t.log_(\"Connection exceeded healthy timeout but has sent \" + t.conn_.bytesSent + \" bytes.  Leaving connection alive.\") : (t.log_(\"Closing unhealthy connection after timeout.\"), t.close()));\n      }, Math.floor(i)));\n    }, t.prototype.nextTransportId_ = function () {\n      return \"c:\" + this.id + \":\" + this.connectionCount++;\n    }, t.prototype.disconnReceiver_ = function (e) {\n      var n = this;\n      return function (t) {\n        e === n.conn_ ? n.onConnectionLost_(t) : e === n.secondaryConn_ ? (n.log_(\"Secondary connection lost.\"), n.onSecondaryConnectionLost_()) : n.log_(\"closing an old connection\");\n      };\n    }, t.prototype.connReceiver_ = function (e) {\n      var n = this;\n      return function (t) {\n        2 != n.state_ && (e === n.rx_ ? n.onPrimaryMessageReceived_(t) : e === n.secondaryConn_ ? n.onSecondaryMessageReceived_(t) : n.log_(\"message on old connection\"));\n      };\n    }, t.prototype.sendRequest = function (t) {\n      var e = {\n        t: \"d\",\n        d: t\n      };\n      this.sendData_(e);\n    }, t.prototype.tryCleanupConnection = function () {\n      this.tx_ === this.secondaryConn_ && this.rx_ === this.secondaryConn_ && (this.log_(\"cleaning up and promoting a connection: \" + this.secondaryConn_.connId), this.conn_ = this.secondaryConn_, this.secondaryConn_ = null);\n    }, t.prototype.onSecondaryControl_ = function (t) {\n      if (\"t\" in t) {\n        var e = t.t;\n        \"a\" === e ? this.upgradeIfSecondaryHealthy_() : \"r\" === e ? (this.log_(\"Got a reset on secondary, closing it\"), this.secondaryConn_.close(), this.tx_ !== this.secondaryConn_ && this.rx_ !== this.secondaryConn_ || this.close()) : \"o\" === e && (this.log_(\"got pong on secondary.\"), this.secondaryResponsesRequired_--, this.upgradeIfSecondaryHealthy_());\n      }\n    }, t.prototype.onSecondaryMessageReceived_ = function (t) {\n      var e = Ui(\"t\", t),\n          n = Ui(\"d\", t);\n      if (\"c\" == e) this.onSecondaryControl_(n);else {\n        if (\"d\" != e) throw new Error(\"Unknown protocol layer: \" + e);\n        this.pendingDataMessages.push(n);\n      }\n    }, t.prototype.upgradeIfSecondaryHealthy_ = function () {\n      this.secondaryResponsesRequired_ <= 0 ? (this.log_(\"Secondary connection is healthy.\"), this.isHealthy_ = !0, this.secondaryConn_.markConnectionHealthy(), this.proceedWithUpgrade_()) : (this.log_(\"sending ping on secondary.\"), this.secondaryConn_.send({\n        t: \"c\",\n        d: {\n          t: \"p\",\n          d: {}\n        }\n      }));\n    }, t.prototype.proceedWithUpgrade_ = function () {\n      this.secondaryConn_.start(), this.log_(\"sending client ack on secondary\"), this.secondaryConn_.send({\n        t: \"c\",\n        d: {\n          t: \"a\",\n          d: {}\n        }\n      }), this.log_(\"Ending transmission on primary\"), this.conn_.send({\n        t: \"c\",\n        d: {\n          t: \"n\",\n          d: {}\n        }\n      }), this.tx_ = this.secondaryConn_, this.tryCleanupConnection();\n    }, t.prototype.onPrimaryMessageReceived_ = function (t) {\n      var e = Ui(\"t\", t),\n          n = Ui(\"d\", t);\n      \"c\" == e ? this.onControl_(n) : \"d\" == e && this.onDataMessage_(n);\n    }, t.prototype.onDataMessage_ = function (t) {\n      this.onPrimaryResponse_(), this.onMessage_(t);\n    }, t.prototype.onPrimaryResponse_ = function () {\n      this.isHealthy_ || (this.primaryResponsesRequired_--, this.primaryResponsesRequired_ <= 0 && (this.log_(\"Primary connection is healthy.\"), this.isHealthy_ = !0, this.conn_.markConnectionHealthy()));\n    }, t.prototype.onControl_ = function (t) {\n      var e = Ui(\"t\", t);\n\n      if (\"d\" in t) {\n        var n = t.d;\n        if (\"h\" === e) this.onHandshake_(n);else if (\"n\" === e) {\n          this.log_(\"recvd end transmission on primary\"), this.rx_ = this.secondaryConn_;\n\n          for (var r = 0; r < this.pendingDataMessages.length; ++r) this.onDataMessage_(this.pendingDataMessages[r]);\n\n          this.pendingDataMessages = [], this.tryCleanupConnection();\n        } else \"s\" === e ? this.onConnectionShutdown_(n) : \"r\" === e ? this.onReset_(n) : \"e\" === e ? Di(\"Server Error: \" + n) : \"o\" === e ? (this.log_(\"got pong on primary.\"), this.onPrimaryResponse_(), this.sendPingOnPrimaryIfNecessary_()) : Di(\"Unknown control packet command: \" + e);\n      }\n    }, t.prototype.onHandshake_ = function (t) {\n      var e = t.ts,\n          n = t.v,\n          r = t.h;\n      this.sessionId = t.s, this.repoInfo_.updateHost(r), 0 == this.state_ && (this.conn_.start(), this.onConnectionEstablished_(this.conn_, e), \"5\" !== n && Oi(\"Protocol version mismatch detected\"), this.tryStartUpgrade_());\n    }, t.prototype.tryStartUpgrade_ = function () {\n      var t = this.transportManager_.upgradeTransport();\n      t && this.startUpgrade_(t);\n    }, t.prototype.startUpgrade_ = function (t) {\n      var e = this;\n      this.secondaryConn_ = new t(this.nextTransportId_(), this.repoInfo_, this.sessionId), this.secondaryResponsesRequired_ = t.responsesRequiredToBeHealthy || 0;\n      var n = this.connReceiver_(this.secondaryConn_),\n          r = this.disconnReceiver_(this.secondaryConn_);\n      this.secondaryConn_.open(n, r), Hi(function () {\n        e.secondaryConn_ && (e.log_(\"Timed out trying to upgrade.\"), e.secondaryConn_.close());\n      }, Math.floor(6e4));\n    }, t.prototype.onReset_ = function (t) {\n      this.log_(\"Reset packet received.  New host: \" + t), this.repoInfo_.updateHost(t), 1 === this.state_ ? this.close() : (this.closeConnections_(), this.start_());\n    }, t.prototype.onConnectionEstablished_ = function (t, e) {\n      var n = this;\n      this.log_(\"Realtime connection established.\"), this.conn_ = t, this.state_ = 1, this.onReady_ && (this.onReady_(e, this.sessionId), this.onReady_ = null), 0 === this.primaryResponsesRequired_ ? (this.log_(\"Primary connection is healthy.\"), this.isHealthy_ = !0) : Hi(function () {\n        n.sendPingOnPrimaryIfNecessary_();\n      }, Math.floor(5e3));\n    }, t.prototype.sendPingOnPrimaryIfNecessary_ = function () {\n      this.isHealthy_ || 1 !== this.state_ || (this.log_(\"sending ping on primary.\"), this.sendData_({\n        t: \"c\",\n        d: {\n          t: \"p\",\n          d: {}\n        }\n      }));\n    }, t.prototype.onSecondaryConnectionLost_ = function () {\n      var t = this.secondaryConn_;\n      this.secondaryConn_ = null, this.tx_ !== t && this.rx_ !== t || this.close();\n    }, t.prototype.onConnectionLost_ = function (t) {\n      this.conn_ = null, t || 0 !== this.state_ ? 1 === this.state_ && this.log_(\"Realtime connection lost.\") : (this.log_(\"Realtime connection failed.\"), this.repoInfo_.isCacheableHost() && (bi.remove(\"host:\" + this.repoInfo_.host), this.repoInfo_.internalHost = this.repoInfo_.host)), this.close();\n    }, t.prototype.onConnectionShutdown_ = function (t) {\n      this.log_(\"Connection shutdown command received. Shutting down...\"), this.onKill_ && (this.onKill_(t), this.onKill_ = null), this.onDisconnect_ = null, this.close();\n    }, t.prototype.sendData_ = function (t) {\n      if (1 !== this.state_) throw \"Connection is not connected\";\n      this.tx_.send(t);\n    }, t.prototype.close = function () {\n      2 !== this.state_ && (this.log_(\"Closing realtime connection.\"), this.state_ = 2, this.closeConnections_(), this.onDisconnect_ && (this.onDisconnect_(), this.onDisconnect_ = null));\n    }, t.prototype.closeConnections_ = function () {\n      this.log_(\"Shutting down all connections\"), this.conn_ && (this.conn_.close(), this.conn_ = null), this.secondaryConn_ && (this.secondaryConn_.close(), this.secondaryConn_ = null), this.healthyTimeout_ && (clearTimeout(this.healthyTimeout_), this.healthyTimeout_ = null);\n    }, t;\n  }(),\n      ns = function () {\n    function t() {}\n\n    return t.prototype.put = function (t, e, n, r) {}, t.prototype.merge = function (t, e, n, r) {}, t.prototype.refreshAuthToken = function (t) {}, t.prototype.onDisconnectPut = function (t, e, n) {}, t.prototype.onDisconnectMerge = function (t, e, n) {}, t.prototype.onDisconnectCancel = function (t, e) {}, t.prototype.reportStats = function (t) {}, t;\n  }(),\n      rs = function (s) {\n    function h(t, e, n, r, i, o) {\n      var a = s.call(this) || this;\n      if (a.repoInfo_ = t, a.onDataUpdate_ = e, a.onConnectStatus_ = n, a.onServerInfoUpdate_ = r, a.authTokenProvider_ = i, a.authOverride_ = o, a.id = h.nextPersistentConnectionId_++, a.log_ = ki(\"p:\" + a.id + \":\"), a.interruptReasons_ = {}, a.listens_ = {}, a.outstandingPuts_ = [], a.outstandingPutCount_ = 0, a.onDisconnectRequestQueue_ = [], a.connected_ = !1, a.reconnectDelay_ = 1e3, a.maxReconnectDelay_ = 3e5, a.securityDebugCallback_ = null, a.lastSessionId = null, a.establishConnectionTimer_ = null, a.visible_ = !1, a.requestCBHash_ = {}, a.requestNumber_ = 0, a.realtime_ = null, a.authToken_ = null, a.forceTokenRefresh_ = !1, a.invalidAuthTokenCount_ = 0, a.firstConnection_ = !0, a.lastConnectionAttemptTime_ = null, a.lastConnectionEstablishedTime_ = null, o && !Ar()) throw new Error(\"Auth override specified in options, but not supported on non Node.js platforms\");\n      return a.scheduleConnect_(0), Ga.getInstance().on(\"visible\", a.onVisible_, a), -1 === t.host.indexOf(\"fblocal\") && za.getInstance().on(\"online\", a.onOnline_, a), a;\n    }\n\n    return hr(h, s), h.prototype.sendRequest = function (t, e, n) {\n      var r = ++this.requestNumber_,\n          i = {\n        r: r,\n        a: t,\n        b: e\n      };\n      this.log_(Pr(i)), gr(this.connected_, \"sendRequest call when we're not connected not allowed.\"), this.realtime_.sendRequest(i), n && (this.requestCBHash_[r] = n);\n    }, h.prototype.listen = function (t, e, n, r) {\n      var i = t.queryIdentifier(),\n          o = t.path.toString();\n      this.log_(\"Listen called for \" + o + \" \" + i), this.listens_[o] = this.listens_[o] || {}, gr(t.getQueryParams().isDefault() || !t.getQueryParams().loadsAllData(), \"listen() called for non-default but complete query\"), gr(!this.listens_[o][i], \"listen() called twice for same path/queryId.\");\n      var a = {\n        onComplete: r,\n        hashFn: e,\n        query: t,\n        tag: n\n      };\n      this.listens_[o][i] = a, this.connected_ && this.sendListen_(a);\n    }, h.prototype.sendListen_ = function (r) {\n      var i = this,\n          o = r.query,\n          a = o.path.toString(),\n          s = o.queryIdentifier();\n      this.log_(\"Listen on \" + a + \" for \" + s);\n      var t = {\n        p: a\n      };\n      r.tag && (t.q = o.queryObject(), t.t = r.tag), t.h = r.hashFn(), this.sendRequest(\"q\", t, function (t) {\n        var e = t.d,\n            n = t.s;\n        h.warnOnListenWarnings_(e, o), (i.listens_[a] && i.listens_[a][s]) === r && (i.log_(\"listen response\", t), \"ok\" !== n && i.removeListen_(a, s), r.onComplete && r.onComplete(n, e));\n      });\n    }, h.warnOnListenWarnings_ = function (t, e) {\n      if (t && \"object\" == typeof t && xr(t, \"w\")) {\n        var n = Lr(t, \"w\");\n\n        if (Array.isArray(n) && ~n.indexOf(\"no_index\")) {\n          var r = '\".indexOn\": \"' + e.getQueryParams().getIndex().toString() + '\"',\n              i = e.path.toString();\n          Oi(\"Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding \" + r + \" at \" + i + \" to your security rules for better performance.\");\n        }\n      }\n    }, h.prototype.refreshAuthToken = function (t) {\n      this.authToken_ = t, this.log_(\"Auth token refreshed\"), this.authToken_ ? this.tryAuth() : this.connected_ && this.sendRequest(\"unauth\", {}, function () {}), this.reduceReconnectDelayIfAdminCredential_(t);\n    }, h.prototype.reduceReconnectDelayIfAdminCredential_ = function (t) {\n      var e;\n      (t && 40 === t.length || \"object\" == typeof (e = Mr(t).claims) && !0 === e.admin) && (this.log_(\"Admin auth credential detected.  Reducing max reconnect time.\"), this.maxReconnectDelay_ = 3e4);\n    }, h.prototype.tryAuth = function () {\n      var t,\n          r = this;\n\n      if (this.connected_ && this.authToken_) {\n        var i = this.authToken_,\n            e = (t = Mr(i).claims) && \"object\" == typeof t && t.hasOwnProperty(\"iat\") ? \"auth\" : \"gauth\",\n            n = {\n          cred: i\n        };\n        null === this.authOverride_ ? n.noauth = !0 : \"object\" == typeof this.authOverride_ && (n.authvar = this.authOverride_), this.sendRequest(e, n, function (t) {\n          var e = t.s,\n              n = t.d || \"error\";\n          r.authToken_ === i && (\"ok\" === e ? r.invalidAuthTokenCount_ = 0 : r.onAuthRevoked_(e, n));\n        });\n      }\n    }, h.prototype.unlisten = function (t, e) {\n      var n = t.path.toString(),\n          r = t.queryIdentifier();\n      this.log_(\"Unlisten called for \" + n + \" \" + r), gr(t.getQueryParams().isDefault() || !t.getQueryParams().loadsAllData(), \"unlisten() called for non-default but complete query\"), this.removeListen_(n, r) && this.connected_ && this.sendUnlisten_(n, r, t.queryObject(), e);\n    }, h.prototype.sendUnlisten_ = function (t, e, n, r) {\n      this.log_(\"Unlisten on \" + t + \" for \" + e);\n      var i = {\n        p: t\n      };\n      r && (i.q = n, i.t = r), this.sendRequest(\"n\", i);\n    }, h.prototype.onDisconnectPut = function (t, e, n) {\n      this.connected_ ? this.sendOnDisconnect_(\"o\", t, e, n) : this.onDisconnectRequestQueue_.push({\n        pathString: t,\n        action: \"o\",\n        data: e,\n        onComplete: n\n      });\n    }, h.prototype.onDisconnectMerge = function (t, e, n) {\n      this.connected_ ? this.sendOnDisconnect_(\"om\", t, e, n) : this.onDisconnectRequestQueue_.push({\n        pathString: t,\n        action: \"om\",\n        data: e,\n        onComplete: n\n      });\n    }, h.prototype.onDisconnectCancel = function (t, e) {\n      this.connected_ ? this.sendOnDisconnect_(\"oc\", t, null, e) : this.onDisconnectRequestQueue_.push({\n        pathString: t,\n        action: \"oc\",\n        data: null,\n        onComplete: e\n      });\n    }, h.prototype.sendOnDisconnect_ = function (t, e, n, r) {\n      var i = {\n        p: e,\n        d: n\n      };\n      this.log_(\"onDisconnect \" + t, i), this.sendRequest(t, i, function (t) {\n        r && setTimeout(function () {\n          r(t.s, t.d);\n        }, Math.floor(0));\n      });\n    }, h.prototype.put = function (t, e, n, r) {\n      this.putInternal(\"p\", t, e, n, r);\n    }, h.prototype.merge = function (t, e, n, r) {\n      this.putInternal(\"m\", t, e, n, r);\n    }, h.prototype.putInternal = function (t, e, n, r, i) {\n      var o = {\n        p: e,\n        d: n\n      };\n      void 0 !== i && (o.h = i), this.outstandingPuts_.push({\n        action: t,\n        request: o,\n        onComplete: r\n      }), this.outstandingPutCount_++;\n      var a = this.outstandingPuts_.length - 1;\n      this.connected_ ? this.sendPut_(a) : this.log_(\"Buffering put: \" + e);\n    }, h.prototype.sendPut_ = function (e) {\n      var n = this,\n          r = this.outstandingPuts_[e].action,\n          t = this.outstandingPuts_[e].request,\n          i = this.outstandingPuts_[e].onComplete;\n      this.outstandingPuts_[e].queued = this.connected_, this.sendRequest(r, t, function (t) {\n        n.log_(r + \" response\", t), delete n.outstandingPuts_[e], n.outstandingPutCount_--, 0 === n.outstandingPutCount_ && (n.outstandingPuts_ = []), i && i(t.s, t.d);\n      });\n    }, h.prototype.reportStats = function (t) {\n      var n = this;\n\n      if (this.connected_) {\n        var e = {\n          c: t\n        };\n        this.log_(\"reportStats\", e), this.sendRequest(\"s\", e, function (t) {\n          if (\"ok\" !== t.s) {\n            var e = t.d;\n            n.log_(\"reportStats\", \"Error sending stats: \" + e);\n          }\n        });\n      }\n    }, h.prototype.onDataMessage_ = function (t) {\n      if (\"r\" in t) {\n        this.log_(\"from server: \" + Pr(t));\n        var e = t.r,\n            n = this.requestCBHash_[e];\n        n && (delete this.requestCBHash_[e], n(t.b));\n      } else {\n        if (\"error\" in t) throw \"A server-side error has occurred: \" + t.error;\n        \"a\" in t && this.onDataPush_(t.a, t.b);\n      }\n    }, h.prototype.onDataPush_ = function (t, e) {\n      this.log_(\"handleServerMessage\", t, e), \"d\" === t ? this.onDataUpdate_(e.p, e.d, !1, e.t) : \"m\" === t ? this.onDataUpdate_(e.p, e.d, !0, e.t) : \"c\" === t ? this.onListenRevoked_(e.p, e.q) : \"ac\" === t ? this.onAuthRevoked_(e.s, e.d) : \"sd\" === t ? this.onSecurityDebugPacket_(e) : Di(\"Unrecognized action received from server: \" + Pr(t) + \"\\nAre you using the latest client?\");\n    }, h.prototype.onReady_ = function (t, e) {\n      this.log_(\"connection ready\"), this.connected_ = !0, this.lastConnectionEstablishedTime_ = new Date().getTime(), this.handleTimestamp_(t), this.lastSessionId = e, this.firstConnection_ && this.sendConnectStats_(), this.restoreState_(), this.firstConnection_ = !1, this.onConnectStatus_(!0);\n    }, h.prototype.scheduleConnect_ = function (t) {\n      var e = this;\n      gr(!this.realtime_, \"Scheduling a connect when we're already connected/ing?\"), this.establishConnectionTimer_ && clearTimeout(this.establishConnectionTimer_), this.establishConnectionTimer_ = setTimeout(function () {\n        e.establishConnectionTimer_ = null, e.establishConnection_();\n      }, Math.floor(t));\n    }, h.prototype.onVisible_ = function (t) {\n      t && !this.visible_ && this.reconnectDelay_ === this.maxReconnectDelay_ && (this.log_(\"Window became visible.  Reducing delay.\"), this.reconnectDelay_ = 1e3, this.realtime_ || this.scheduleConnect_(0)), this.visible_ = t;\n    }, h.prototype.onOnline_ = function (t) {\n      t ? (this.log_(\"Browser went online.\"), this.reconnectDelay_ = 1e3, this.realtime_ || this.scheduleConnect_(0)) : (this.log_(\"Browser went offline.  Killing connection.\"), this.realtime_ && this.realtime_.close());\n    }, h.prototype.onRealtimeDisconnect_ = function () {\n      if (this.log_(\"data client disconnected\"), this.connected_ = !1, this.realtime_ = null, this.cancelSentTransactions_(), this.requestCBHash_ = {}, this.shouldReconnect_()) {\n        if (this.visible_) {\n          if (this.lastConnectionEstablishedTime_) {\n            3e4 < new Date().getTime() - this.lastConnectionEstablishedTime_ && (this.reconnectDelay_ = 1e3), this.lastConnectionEstablishedTime_ = null;\n          }\n        } else this.log_(\"Window isn't visible.  Delaying reconnect.\"), this.reconnectDelay_ = this.maxReconnectDelay_, this.lastConnectionAttemptTime_ = new Date().getTime();\n\n        var t = new Date().getTime() - this.lastConnectionAttemptTime_,\n            e = Math.max(0, this.reconnectDelay_ - t);\n        e = Math.random() * e, this.log_(\"Trying to reconnect in \" + e + \"ms\"), this.scheduleConnect_(e), this.reconnectDelay_ = Math.min(this.maxReconnectDelay_, 1.3 * this.reconnectDelay_);\n      }\n\n      this.onConnectStatus_(!1);\n    }, h.prototype.establishConnection_ = function () {\n      if (this.shouldReconnect_()) {\n        this.log_(\"Making a connection attempt\"), this.lastConnectionAttemptTime_ = new Date().getTime(), this.lastConnectionEstablishedTime_ = null;\n\n        var e = this.onDataMessage_.bind(this),\n            n = this.onReady_.bind(this),\n            r = this.onRealtimeDisconnect_.bind(this),\n            i = this.id + \":\" + h.nextConnectionId_++,\n            o = this,\n            a = this.lastSessionId,\n            s = !1,\n            u = null,\n            c = function () {\n          u ? u.close() : (s = !0, r());\n        };\n\n        this.realtime_ = {\n          close: c,\n          sendRequest: function (t) {\n            gr(u, \"sendRequest call when we're not connected not allowed.\"), u.sendRequest(t);\n          }\n        };\n        var t = this.forceTokenRefresh_;\n        this.forceTokenRefresh_ = !1, this.authTokenProvider_.getToken(t).then(function (t) {\n          s ? Ai(\"getToken() completed but was canceled\") : (Ai(\"getToken() completed. Creating connection.\"), o.authToken_ = t && t.accessToken, u = new es(i, o.repoInfo_, e, n, r, function (t) {\n            Oi(t + \" (\" + o.repoInfo_.toString() + \")\"), o.interrupt(\"server_kill\");\n          }, a));\n        }).then(null, function (t) {\n          o.log_(\"Failed to get token: \" + t), s || c();\n        });\n      }\n    }, h.prototype.interrupt = function (t) {\n      Ai(\"Interrupting connection for reason: \" + t), this.interruptReasons_[t] = !0, this.realtime_ ? this.realtime_.close() : (this.establishConnectionTimer_ && (clearTimeout(this.establishConnectionTimer_), this.establishConnectionTimer_ = null), this.connected_ && this.onRealtimeDisconnect_());\n    }, h.prototype.resume = function (t) {\n      Ai(\"Resuming connection for reason: \" + t), delete this.interruptReasons_[t], qr(this.interruptReasons_) && (this.reconnectDelay_ = 1e3, this.realtime_ || this.scheduleConnect_(0));\n    }, h.prototype.handleTimestamp_ = function (t) {\n      var e = t - new Date().getTime();\n      this.onServerInfoUpdate_({\n        serverTimeOffset: e\n      });\n    }, h.prototype.cancelSentTransactions_ = function () {\n      for (var t = 0; t < this.outstandingPuts_.length; t++) {\n        var e = this.outstandingPuts_[t];\n        e && \"h\" in e.request && e.queued && (e.onComplete && e.onComplete(\"disconnect\"), delete this.outstandingPuts_[t], this.outstandingPutCount_--);\n      }\n\n      0 === this.outstandingPutCount_ && (this.outstandingPuts_ = []);\n    }, h.prototype.onListenRevoked_ = function (t, e) {\n      var n;\n      n = e ? e.map(function (t) {\n        return qi(t);\n      }).join(\"$\") : \"default\";\n      var r = this.removeListen_(t, n);\n      r && r.onComplete && r.onComplete(\"permission_denied\");\n    }, h.prototype.removeListen_ = function (t, e) {\n      var n,\n          r = new Gi(t).toString();\n      return void 0 !== this.listens_[r] ? (n = this.listens_[r][e], delete this.listens_[r][e], 0 === Vr(this.listens_[r]) && delete this.listens_[r]) : n = void 0, n;\n    }, h.prototype.onAuthRevoked_ = function (t, e) {\n      Ai(\"Auth token revoked: \" + t + \"/\" + e), this.authToken_ = null, this.forceTokenRefresh_ = !0, this.realtime_.close(), \"invalid_token\" !== t && \"permission_denied\" !== t || (this.invalidAuthTokenCount_++, 3 <= this.invalidAuthTokenCount_ && (this.reconnectDelay_ = 3e4, this.authTokenProvider_.notifyForInvalidToken()));\n    }, h.prototype.onSecurityDebugPacket_ = function (t) {\n      this.securityDebugCallback_ ? this.securityDebugCallback_(t) : \"msg\" in t && console.log(\"FIREBASE: \" + t.msg.replace(\"\\n\", \"\\nFIREBASE: \"));\n    }, h.prototype.restoreState_ = function () {\n      var n = this;\n      this.tryAuth(), Fr(this.listens_, function (t, e) {\n        Fr(e, function (t, e) {\n          n.sendListen_(e);\n        });\n      });\n\n      for (var t = 0; t < this.outstandingPuts_.length; t++) this.outstandingPuts_[t] && this.sendPut_(t);\n\n      for (; this.onDisconnectRequestQueue_.length;) {\n        var e = this.onDisconnectRequestQueue_.shift();\n        this.sendOnDisconnect_(e.action, e.pathString, e.data, e.onComplete);\n      }\n    }, h.prototype.sendConnectStats_ = function () {\n      var t = {};\n      t[\"sdk.js.\" + Hh.SDK_VERSION.replace(/\\./g, \"-\")] = 1, Cr() ? t[\"framework.cordova\"] = 1 : Nr() && (t[\"framework.reactnative\"] = 1), this.reportStats(t);\n    }, h.prototype.shouldReconnect_ = function () {\n      var t = za.getInstance().currentlyOnline();\n      return qr(this.interruptReasons_) && t;\n    }, h.nextPersistentConnectionId_ = 0, h.nextConnectionId_ = 0, h;\n  }(ns),\n      is = function (i) {\n    function c(t, e, n) {\n      var r = i.call(this) || this;\n      return r.repoInfo_ = t, r.onDataUpdate_ = e, r.authTokenProvider_ = n, r.log_ = ki(\"p:rest:\"), r.listens_ = {}, r;\n    }\n\n    return hr(c, i), c.prototype.reportStats = function (t) {\n      throw new Error(\"Method not implemented.\");\n    }, c.getListenId_ = function (t, e) {\n      return void 0 !== e ? \"tag$\" + e : (gr(t.getQueryParams().isDefault(), \"should have a tag if it's not a default query.\"), t.path.toString());\n    }, c.prototype.listen = function (t, e, r, i) {\n      var o = this,\n          a = t.path.toString();\n      this.log_(\"Listen called for \" + a + \" \" + t.queryIdentifier());\n      var s = c.getListenId_(t, r),\n          u = {};\n      this.listens_[s] = u;\n      var n = t.getQueryParams().toRestQueryStringParameters();\n      this.restRequest_(a + \".json\", n, function (t, e) {\n        var n = e;\n        (404 === t && (t = n = null), null === t && o.onDataUpdate_(a, n, !1, r), Lr(o.listens_, s) === u) && i(t ? 401 == t ? \"permission_denied\" : \"rest_error:\" + t : \"ok\", null);\n      });\n    }, c.prototype.unlisten = function (t, e) {\n      var n = c.getListenId_(t, e);\n      delete this.listens_[n];\n    }, c.prototype.refreshAuthToken = function (t) {}, c.prototype.restRequest_ = function (o, a, s) {\n      var u = this;\n      void 0 === a && (a = {}), a.format = \"export\", this.authTokenProvider_.getToken(!1).then(function (t) {\n        var e = t && t.accessToken;\n        e && (a.auth = e);\n        var n,\n            r = (u.repoInfo_.secure ? \"https://\" : \"http://\") + u.repoInfo_.host + o + \"?ns=\" + u.repoInfo_.namespace + (n = [], Fr(a, function (e, t) {\n          Array.isArray(t) ? t.forEach(function (t) {\n            n.push(encodeURIComponent(e) + \"=\" + encodeURIComponent(t));\n          }) : n.push(encodeURIComponent(e) + \"=\" + encodeURIComponent(t));\n        }), n.length ? \"&\" + n.join(\"&\") : \"\");\n        u.log_(\"Sending REST request for \" + r);\n        var i = new XMLHttpRequest();\n        i.onreadystatechange = function () {\n          if (s && 4 === i.readyState) {\n            u.log_(\"REST Response for \" + r + \" received. status:\", i.status, \"response:\", i.responseText);\n            var t = null;\n\n            if (200 <= i.status && i.status < 300) {\n              try {\n                t = Or(i.responseText);\n              } catch (t) {\n                Oi(\"Failed to parse JSON response for \" + r + \": \" + i.responseText);\n              }\n\n              s(null, t);\n            } else 401 !== i.status && 404 !== i.status && Oi(\"Got unsuccessful REST response for \" + r + \" Status: \" + i.status), s(i.status);\n\n            s = null;\n          }\n        }, i.open(\"GET\", r, !0), i.send();\n      });\n    }, c;\n  }(ns),\n      os = \"repo_interrupt\",\n      as = function () {\n    function t(t, e, n) {\n      var a = this;\n      this.repoInfo_ = t, this.app = n, this.dataUpdateCount = 0, this.statsListener_ = null, this.eventQueue_ = new Ka(), this.nextWriteId_ = 1, this.interceptServerDataCallback_ = null, this.onDisconnect_ = new la(), this.persistentConnection_ = null;\n      var r = new qa(n);\n      if (this.stats_ = Ba.getCollection(t), e || 0 <= (\"object\" == typeof window && window.navigator && window.navigator.userAgent || \"\").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)) this.server_ = new is(this.repoInfo_, this.onDataUpdate_.bind(this), r), setTimeout(this.onConnectStatus_.bind(this, !0), 0);else {\n        var i = n.options.databaseAuthVariableOverride;\n\n        if (null != i) {\n          if (\"object\" != typeof i) throw new Error(\"Only objects are supported for option databaseAuthVariableOverride\");\n\n          try {\n            Pr(i);\n          } catch (t) {\n            throw new Error(\"Invalid authOverride provided: \" + t);\n          }\n        }\n\n        this.persistentConnection_ = new rs(this.repoInfo_, this.onDataUpdate_.bind(this), this.onConnectStatus_.bind(this), this.onServerInfoUpdate_.bind(this), r, i), this.server_ = this.persistentConnection_;\n      }\n      r.addTokenChangeListener(function (t) {\n        a.server_.refreshAuthToken(t);\n      }), this.statsReporter_ = Ba.getOrCreateReporter(t, function () {\n        return new Wa(a.stats_, a.server_);\n      }), this.transactions_init_(), this.infoData_ = new Ua(), this.infoSyncTree_ = new Fa({\n        startListening: function (t, e, n, r) {\n          var i = [],\n              o = a.infoData_.getNode(t.path);\n          return o.isEmpty() || (i = a.infoSyncTree_.applyServerOverwrite(t.path, o), setTimeout(function () {\n            r(\"ok\");\n          }, 0)), i;\n        },\n        stopListening: function () {}\n      }), this.updateInfo_(\"connected\", !1), this.serverSyncTree_ = new Fa({\n        startListening: function (r, t, e, i) {\n          return a.server_.listen(r, e, t, function (t, e) {\n            var n = i(t, e);\n            a.eventQueue_.raiseEventsForChangedPath(r.path, n);\n          }), [];\n        },\n        stopListening: function (t, e) {\n          a.server_.unlisten(t, e);\n        }\n      });\n    }\n\n    return t.prototype.toString = function () {\n      return (this.repoInfo_.secure ? \"https://\" : \"http://\") + this.repoInfo_.host;\n    }, t.prototype.name = function () {\n      return this.repoInfo_.namespace;\n    }, t.prototype.serverTime = function () {\n      var t = this.infoData_.getNode(new Gi(\".info/serverTimeOffset\")).val() || 0;\n      return new Date().getTime() + t;\n    }, t.prototype.generateServerValues = function () {\n      return (t = (t = {\n        timestamp: this.serverTime()\n      }) || {}).timestamp = t.timestamp || new Date().getTime(), t;\n      var t;\n    }, t.prototype.onDataUpdate_ = function (t, e, n, r) {\n      this.dataUpdateCount++;\n      var i = new Gi(t);\n      e = this.interceptServerDataCallback_ ? this.interceptServerDataCallback_(t, e) : e;\n      var o = [];\n      if (r) {\n        if (n) {\n          var a = Br(e, function (t) {\n            return $o(t);\n          });\n          o = this.serverSyncTree_.applyTaggedQueryMerge(i, a, r);\n        } else {\n          var s = $o(e);\n          o = this.serverSyncTree_.applyTaggedQueryOverwrite(i, s, r);\n        }\n      } else if (n) {\n        var u = Br(e, function (t) {\n          return $o(t);\n        });\n        o = this.serverSyncTree_.applyServerMerge(i, u);\n      } else {\n        var c = $o(e);\n        o = this.serverSyncTree_.applyServerOverwrite(i, c);\n      }\n      var h = i;\n      0 < o.length && (h = this.rerunTransactions_(i)), this.eventQueue_.raiseEventsForChangedPath(h, o);\n    }, t.prototype.interceptServerData_ = function (t) {\n      this.interceptServerDataCallback_ = t;\n    }, t.prototype.onConnectStatus_ = function (t) {\n      this.updateInfo_(\"connected\", t), !1 === t && this.runOnDisconnectEvents_();\n    }, t.prototype.onServerInfoUpdate_ = function (t) {\n      var n = this;\n      Bi(t, function (t, e) {\n        n.updateInfo_(e, t);\n      });\n    }, t.prototype.updateInfo_ = function (t, e) {\n      var n = new Gi(\"/.info/\" + t),\n          r = $o(e);\n      this.infoData_.updateSnapshot(n, r);\n      var i = this.infoSyncTree_.applyServerOverwrite(n, r);\n      this.eventQueue_.raiseEventsForChangedPath(n, i);\n    }, t.prototype.getNextWriteId_ = function () {\n      return this.nextWriteId_++;\n    }, t.prototype.setWithPriority = function (i, t, e, o) {\n      var a = this;\n      this.log_(\"set\", {\n        path: i.toString(),\n        value: t,\n        priority: e\n      });\n      var n = this.generateServerValues(),\n          r = $o(t, e),\n          s = pa(r, n),\n          u = this.getNextWriteId_(),\n          c = this.serverSyncTree_.applyUserOverwrite(i, s, u, !0);\n      this.eventQueue_.queueEvents(c), this.server_.put(i.toString(), r.val(!0), function (t, e) {\n        var n = \"ok\" === t;\n        n || Oi(\"set at \" + i + \" failed: \" + t);\n        var r = a.serverSyncTree_.ackUserWrite(u, !n);\n        a.eventQueue_.raiseEventsForChangedPath(i, r), a.callOnCompleteCallback(o, t, e);\n      });\n      var h = this.abortTransactions_(i);\n      this.rerunTransactions_(h), this.eventQueue_.raiseEventsForChangedPath(h, []);\n    }, t.prototype.update = function (o, t, a) {\n      var s = this;\n      this.log_(\"update\", {\n        path: o.toString(),\n        value: t\n      });\n      var r = !0,\n          i = this.generateServerValues(),\n          u = {};\n      if (Fr(t, function (t, e) {\n        r = !1;\n        var n = $o(e);\n        u[t] = pa(n, i);\n      }), r) Ai(\"update() called with empty data.  Don't do anything.\"), this.callOnCompleteCallback(a, \"ok\");else {\n        var c = this.getNextWriteId_(),\n            e = this.serverSyncTree_.applyUserMerge(o, u, c);\n        this.eventQueue_.queueEvents(e), this.server_.merge(o.toString(), t, function (t, e) {\n          var n = \"ok\" === t;\n          n || Oi(\"update at \" + o + \" failed: \" + t);\n          var r = s.serverSyncTree_.ackUserWrite(c, !n),\n              i = 0 < r.length ? s.rerunTransactions_(o) : o;\n          s.eventQueue_.raiseEventsForChangedPath(i, r), s.callOnCompleteCallback(a, t, e);\n        }), Fr(t, function (t) {\n          var e = s.abortTransactions_(o.child(t));\n          s.rerunTransactions_(e);\n        }), this.eventQueue_.raiseEventsForChangedPath(o, []);\n      }\n    }, t.prototype.runOnDisconnectEvents_ = function () {\n      var r = this;\n      this.log_(\"onDisconnectEvents\");\n      var t,\n          n,\n          i,\n          e = this.generateServerValues(),\n          o = (t = this.onDisconnect_, n = e, i = new la(), t.forEachTree(new Gi(\"\"), function (t, e) {\n        i.remember(t, pa(e, n));\n      }), i),\n          a = [];\n      o.forEachTree(Gi.Empty, function (t, e) {\n        a = a.concat(r.serverSyncTree_.applyServerOverwrite(t, e));\n        var n = r.abortTransactions_(t);\n        r.rerunTransactions_(n);\n      }), this.onDisconnect_ = new la(), this.eventQueue_.raiseEventsForChangedPath(Gi.Empty, a);\n    }, t.prototype.onDisconnectCancel = function (n, r) {\n      var i = this;\n      this.server_.onDisconnectCancel(n.toString(), function (t, e) {\n        \"ok\" === t && i.onDisconnect_.forget(n), i.callOnCompleteCallback(r, t, e);\n      });\n    }, t.prototype.onDisconnectSet = function (n, t, r) {\n      var i = this,\n          o = $o(t);\n      this.server_.onDisconnectPut(n.toString(), o.val(!0), function (t, e) {\n        \"ok\" === t && i.onDisconnect_.remember(n, o), i.callOnCompleteCallback(r, t, e);\n      });\n    }, t.prototype.onDisconnectSetWithPriority = function (n, t, e, r) {\n      var i = this,\n          o = $o(t, e);\n      this.server_.onDisconnectPut(n.toString(), o.val(!0), function (t, e) {\n        \"ok\" === t && i.onDisconnect_.remember(n, o), i.callOnCompleteCallback(r, t, e);\n      });\n    }, t.prototype.onDisconnectUpdate = function (r, n, i) {\n      var o = this;\n      if (qr(n)) return Ai(\"onDisconnect().update() called with empty data.  Don't do anything.\"), void this.callOnCompleteCallback(i, \"ok\");\n      this.server_.onDisconnectMerge(r.toString(), n, function (t, e) {\n        \"ok\" === t && Fr(n, function (t, e) {\n          var n = $o(e);\n          o.onDisconnect_.remember(r.child(t), n);\n        }), o.callOnCompleteCallback(i, t, e);\n      });\n    }, t.prototype.addEventCallbackForQuery = function (t, e) {\n      var n;\n      n = \".info\" === t.path.getFront() ? this.infoSyncTree_.addEventRegistration(t, e) : this.serverSyncTree_.addEventRegistration(t, e), this.eventQueue_.raiseEventsAtPath(t.path, n);\n    }, t.prototype.removeEventCallbackForQuery = function (t, e) {\n      var n;\n      n = \".info\" === t.path.getFront() ? this.infoSyncTree_.removeEventRegistration(t, e) : this.serverSyncTree_.removeEventRegistration(t, e), this.eventQueue_.raiseEventsAtPath(t.path, n);\n    }, t.prototype.interrupt = function () {\n      this.persistentConnection_ && this.persistentConnection_.interrupt(os);\n    }, t.prototype.resume = function () {\n      this.persistentConnection_ && this.persistentConnection_.resume(os);\n    }, t.prototype.stats = function (t) {\n      if (void 0 === t && (t = !1), \"undefined\" != typeof console) {\n        var e;\n        e = t ? (this.statsListener_ || (this.statsListener_ = new ja(this.stats_)), this.statsListener_.get()) : this.stats_.get();\n        var r = Object.keys(e).reduce(function (t, e) {\n          return Math.max(e.length, t);\n        }, 0);\n        Fr(e, function (t, e) {\n          for (var n = t.length; n < r + 2; n++) t += \" \";\n\n          console.log(t + e);\n        });\n      }\n    }, t.prototype.statsIncrementCounter = function (t) {\n      this.stats_.incrementCounter(t), this.statsReporter_.includeStat(t);\n    }, t.prototype.log_ = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      var n = \"\";\n      this.persistentConnection_ && (n = this.persistentConnection_.id + \":\"), Ai.apply(void 0, [n].concat(t));\n    }, t.prototype.callOnCompleteCallback = function (r, i, o) {\n      r && Qi(function () {\n        if (\"ok\" == i) r(null);else {\n          var t = (i || \"error\").toUpperCase(),\n              e = t;\n          o && (e += \": \" + o);\n          var n = new Error(e);\n          n.code = t, r(n);\n        }\n      });\n    }, Object.defineProperty(t.prototype, \"database\", {\n      get: function () {\n        return this.__database || (this.__database = new vs(this));\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t;\n  }(),\n      ss = function () {\n    function e(t) {\n      this.indexedFilter_ = new Ia(t.getIndex()), this.index_ = t.getIndex(), this.startPost_ = e.getStartPost_(t), this.endPost_ = e.getEndPost_(t);\n    }\n\n    return e.prototype.getStartPost = function () {\n      return this.startPost_;\n    }, e.prototype.getEndPost = function () {\n      return this.endPost_;\n    }, e.prototype.matches = function (t) {\n      return this.index_.compare(this.getStartPost(), t) <= 0 && this.index_.compare(t, this.getEndPost()) <= 0;\n    }, e.prototype.updateChild = function (t, e, n, r, i, o) {\n      return this.matches(new Io(e, n)) || (n = Yo.EMPTY_NODE), this.indexedFilter_.updateChild(t, e, n, r, i, o);\n    }, e.prototype.updateFullNode = function (t, e, n) {\n      e.isLeafNode() && (e = Yo.EMPTY_NODE);\n      var r = e.withIndex(this.index_);\n      r = r.updatePriority(Yo.EMPTY_NODE);\n      var i = this;\n      return e.forEachChild(Fo, function (t, e) {\n        i.matches(new Io(t, e)) || (r = r.updateImmediateChild(t, Yo.EMPTY_NODE));\n      }), this.indexedFilter_.updateFullNode(t, r, n);\n    }, e.prototype.updatePriority = function (t, e) {\n      return t;\n    }, e.prototype.filtersNodes = function () {\n      return !0;\n    }, e.prototype.getIndexedFilter = function () {\n      return this.indexedFilter_;\n    }, e.prototype.getIndex = function () {\n      return this.index_;\n    }, e.getStartPost_ = function (t) {\n      if (t.hasStart()) {\n        var e = t.getIndexStartName();\n        return t.getIndex().makePost(t.getIndexStartValue(), e);\n      }\n\n      return t.getIndex().minPost();\n    }, e.getEndPost_ = function (t) {\n      if (t.hasEnd()) {\n        var e = t.getIndexEndName();\n        return t.getIndex().makePost(t.getIndexEndValue(), e);\n      }\n\n      return t.getIndex().maxPost();\n    }, e;\n  }(),\n      us = function () {\n    function t(t) {\n      this.rangedFilter_ = new ss(t), this.index_ = t.getIndex(), this.limit_ = t.getLimit(), this.reverse_ = !t.isViewFromLeft();\n    }\n\n    return t.prototype.updateChild = function (t, e, n, r, i, o) {\n      return this.rangedFilter_.matches(new Io(e, n)) || (n = Yo.EMPTY_NODE), t.getImmediateChild(e).equals(n) ? t : t.numChildren() < this.limit_ ? this.rangedFilter_.getIndexedFilter().updateChild(t, e, n, r, i, o) : this.fullLimitUpdateChild_(t, e, n, i, o);\n    }, t.prototype.updateFullNode = function (t, e, n) {\n      var r;\n      if (e.isLeafNode() || e.isEmpty()) r = Yo.EMPTY_NODE.withIndex(this.index_);else if (2 * this.limit_ < e.numChildren() && e.isIndexed(this.index_)) {\n        r = Yo.EMPTY_NODE.withIndex(this.index_);\n        var i = void 0;\n        i = this.reverse_ ? e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(), this.index_) : e.getIteratorFrom(this.rangedFilter_.getStartPost(), this.index_);\n\n        for (var o = 0; i.hasNext() && o < this.limit_;) {\n          var a = i.getNext();\n          if (!(this.reverse_ ? this.index_.compare(this.rangedFilter_.getStartPost(), a) <= 0 : this.index_.compare(a, this.rangedFilter_.getEndPost()) <= 0)) break;\n          r = r.updateImmediateChild(a.name, a.node), o++;\n        }\n      } else {\n        r = (r = e.withIndex(this.index_)).updatePriority(Yo.EMPTY_NODE);\n        var s = void 0,\n            u = void 0,\n            c = void 0;\n        i = void 0;\n\n        if (this.reverse_) {\n          i = r.getReverseIterator(this.index_), s = this.rangedFilter_.getEndPost(), u = this.rangedFilter_.getStartPost();\n          var h = this.index_.getCompare();\n\n          c = function (t, e) {\n            return h(e, t);\n          };\n        } else i = r.getIterator(this.index_), s = this.rangedFilter_.getStartPost(), u = this.rangedFilter_.getEndPost(), c = this.index_.getCompare();\n\n        o = 0;\n\n        for (var l = !1; i.hasNext();) {\n          a = i.getNext();\n          !l && c(s, a) <= 0 && (l = !0), l && o < this.limit_ && c(a, u) <= 0 ? o++ : r = r.updateImmediateChild(a.name, Yo.EMPTY_NODE);\n        }\n      }\n      return this.rangedFilter_.getIndexedFilter().updateFullNode(t, r, n);\n    }, t.prototype.updatePriority = function (t, e) {\n      return t;\n    }, t.prototype.filtersNodes = function () {\n      return !0;\n    }, t.prototype.getIndexedFilter = function () {\n      return this.rangedFilter_.getIndexedFilter();\n    }, t.prototype.getIndex = function () {\n      return this.index_;\n    }, t.prototype.fullLimitUpdateChild_ = function (t, e, n, r, i) {\n      var o;\n\n      if (this.reverse_) {\n        var a = this.index_.getCompare();\n\n        o = function (t, e) {\n          return a(e, t);\n        };\n      } else o = this.index_.getCompare();\n\n      var s = t;\n      gr(s.numChildren() == this.limit_, \"\");\n      var u = new Io(e, n),\n          c = this.reverse_ ? s.getFirstChild(this.index_) : s.getLastChild(this.index_),\n          h = this.rangedFilter_.matches(u);\n\n      if (s.hasChild(e)) {\n        for (var l = s.getImmediateChild(e), f = r.getChildAfterChild(this.index_, c, this.reverse_); null != f && (f.name == e || s.hasChild(f.name));) f = r.getChildAfterChild(this.index_, f, this.reverse_);\n\n        var p = null == f ? 1 : o(f, u);\n        if (h && !n.isEmpty() && 0 <= p) return null != i && i.trackChildChange(Sa.childChangedChange(e, n, l)), s.updateImmediateChild(e, n);\n        null != i && i.trackChildChange(Sa.childRemovedChange(e, l));\n        var d = s.updateImmediateChild(e, Yo.EMPTY_NODE);\n        return null != f && this.rangedFilter_.matches(f) ? (null != i && i.trackChildChange(Sa.childAddedChange(f.name, f.node)), d.updateImmediateChild(f.name, f.node)) : d;\n      }\n\n      return n.isEmpty() ? t : h && 0 <= o(c, u) ? (null != i && (i.trackChildChange(Sa.childRemovedChange(c.name, c.node)), i.trackChildChange(Sa.childAddedChange(e, n))), s.updateImmediateChild(e, n).updateImmediateChild(c.name, Yo.EMPTY_NODE)) : t;\n    }, t;\n  }(),\n      cs = function () {\n    function r() {\n      this.limitSet_ = !1, this.startSet_ = !1, this.startNameSet_ = !1, this.endSet_ = !1, this.endNameSet_ = !1, this.limit_ = 0, this.viewFrom_ = \"\", this.indexStartValue_ = null, this.indexStartName_ = \"\", this.indexEndValue_ = null, this.indexEndName_ = \"\", this.index_ = Fo;\n    }\n\n    return r.prototype.hasStart = function () {\n      return this.startSet_;\n    }, r.prototype.isViewFromLeft = function () {\n      return \"\" === this.viewFrom_ ? this.startSet_ : this.viewFrom_ === r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT;\n    }, r.prototype.getIndexStartValue = function () {\n      return gr(this.startSet_, \"Only valid if start has been set\"), this.indexStartValue_;\n    }, r.prototype.getIndexStartName = function () {\n      return gr(this.startSet_, \"Only valid if start has been set\"), this.startNameSet_ ? this.indexStartName_ : Mi;\n    }, r.prototype.hasEnd = function () {\n      return this.endSet_;\n    }, r.prototype.getIndexEndValue = function () {\n      return gr(this.endSet_, \"Only valid if end has been set\"), this.indexEndValue_;\n    }, r.prototype.getIndexEndName = function () {\n      return gr(this.endSet_, \"Only valid if end has been set\"), this.endNameSet_ ? this.indexEndName_ : xi;\n    }, r.prototype.hasLimit = function () {\n      return this.limitSet_;\n    }, r.prototype.hasAnchoredLimit = function () {\n      return this.limitSet_ && \"\" !== this.viewFrom_;\n    }, r.prototype.getLimit = function () {\n      return gr(this.limitSet_, \"Only valid if limit has been set\"), this.limit_;\n    }, r.prototype.getIndex = function () {\n      return this.index_;\n    }, r.prototype.copy_ = function () {\n      var t = new r();\n      return t.limitSet_ = this.limitSet_, t.limit_ = this.limit_, t.startSet_ = this.startSet_, t.indexStartValue_ = this.indexStartValue_, t.startNameSet_ = this.startNameSet_, t.indexStartName_ = this.indexStartName_, t.endSet_ = this.endSet_, t.indexEndValue_ = this.indexEndValue_, t.endNameSet_ = this.endNameSet_, t.indexEndName_ = this.indexEndName_, t.index_ = this.index_, t.viewFrom_ = this.viewFrom_, t;\n    }, r.prototype.limit = function (t) {\n      var e = this.copy_();\n      return e.limitSet_ = !0, e.limit_ = t, e.viewFrom_ = \"\", e;\n    }, r.prototype.limitToFirst = function (t) {\n      var e = this.copy_();\n      return e.limitSet_ = !0, e.limit_ = t, e.viewFrom_ = r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT, e;\n    }, r.prototype.limitToLast = function (t) {\n      var e = this.copy_();\n      return e.limitSet_ = !0, e.limit_ = t, e.viewFrom_ = r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT, e;\n    }, r.prototype.startAt = function (t, e) {\n      var n = this.copy_();\n      return n.startSet_ = !0, void 0 === t && (t = null), n.indexStartValue_ = t, n.indexStartName_ = null != e ? (n.startNameSet_ = !0, e) : (n.startNameSet_ = !1, \"\"), n;\n    }, r.prototype.endAt = function (t, e) {\n      var n = this.copy_();\n      return n.endSet_ = !0, void 0 === t && (t = null), n.indexEndValue_ = t, n.indexEndName_ = void 0 !== e ? (n.endNameSet_ = !0, e) : (n.endNameSet_ = !1, \"\"), n;\n    }, r.prototype.orderBy = function (t) {\n      var e = this.copy_();\n      return e.index_ = t, e;\n    }, r.prototype.getQueryObject = function () {\n      var t = r.WIRE_PROTOCOL_CONSTANTS_,\n          e = {};\n\n      if (this.startSet_ && (e[t.INDEX_START_VALUE] = this.indexStartValue_, this.startNameSet_ && (e[t.INDEX_START_NAME] = this.indexStartName_)), this.endSet_ && (e[t.INDEX_END_VALUE] = this.indexEndValue_, this.endNameSet_ && (e[t.INDEX_END_NAME] = this.indexEndName_)), this.limitSet_) {\n        e[t.LIMIT] = this.limit_;\n        var n = this.viewFrom_;\n        \"\" === n && (n = this.isViewFromLeft() ? t.VIEW_FROM_LEFT : t.VIEW_FROM_RIGHT), e[t.VIEW_FROM] = n;\n      }\n\n      return this.index_ !== Fo && (e[t.INDEX] = this.index_.toString()), e;\n    }, r.prototype.loadsAllData = function () {\n      return !(this.startSet_ || this.endSet_ || this.limitSet_);\n    }, r.prototype.isDefault = function () {\n      return this.loadsAllData() && this.index_ == Fo;\n    }, r.prototype.getNodeFilter = function () {\n      return this.loadsAllData() ? new Ia(this.getIndex()) : this.hasLimit() ? new us(this) : new ss(this);\n    }, r.prototype.toRestQueryStringParameters = function () {\n      var t,\n          e = r.REST_QUERY_CONSTANTS_,\n          n = {};\n      return this.isDefault() || (t = this.index_ === Fo ? e.PRIORITY_INDEX : this.index_ === na ? e.VALUE_INDEX : this.index_ === Ao ? e.KEY_INDEX : (gr(this.index_ instanceof ra, \"Unrecognized index type!\"), this.index_.toString()), n[e.ORDER_BY] = Pr(t), this.startSet_ && (n[e.START_AT] = Pr(this.indexStartValue_), this.startNameSet_ && (n[e.START_AT] += \",\" + Pr(this.indexStartName_))), this.endSet_ && (n[e.END_AT] = Pr(this.indexEndValue_), this.endNameSet_ && (n[e.END_AT] += \",\" + Pr(this.indexEndName_))), this.limitSet_ && (this.isViewFromLeft() ? n[e.LIMIT_TO_FIRST] = this.limit_ : n[e.LIMIT_TO_LAST] = this.limit_)), n;\n    }, r.WIRE_PROTOCOL_CONSTANTS_ = {\n      INDEX_START_VALUE: \"sp\",\n      INDEX_START_NAME: \"sn\",\n      INDEX_END_VALUE: \"ep\",\n      INDEX_END_NAME: \"en\",\n      LIMIT: \"l\",\n      VIEW_FROM: \"vf\",\n      VIEW_FROM_LEFT: \"l\",\n      VIEW_FROM_RIGHT: \"r\",\n      INDEX: \"i\"\n    }, r.REST_QUERY_CONSTANTS_ = {\n      ORDER_BY: \"orderBy\",\n      PRIORITY_INDEX: \"$priority\",\n      VALUE_INDEX: \"$value\",\n      KEY_INDEX: \"$key\",\n      START_AT: \"startAt\",\n      END_AT: \"endAt\",\n      LIMIT_TO_FIRST: \"limitToFirst\",\n      LIMIT_TO_LAST: \"limitToLast\"\n    }, r.DEFAULT = new r(), r;\n  }(),\n      hs = function (n) {\n    function o(t, e) {\n      if (!(t instanceof as)) throw new Error(\"new Reference() no longer supported - use app.database().\");\n      return n.call(this, t, e, cs.DEFAULT, !1) || this;\n    }\n\n    return hr(o, n), o.prototype.getKey = function () {\n      return zr(\"Reference.key\", 0, 0, arguments.length), this.path.isEmpty() ? null : this.path.getBack();\n    }, o.prototype.child = function (t) {\n      var e, n, r, i;\n      return zr(\"Reference.child\", 1, 1, arguments.length), \"number\" == typeof t ? t = String(t) : t instanceof Gi || (null === this.path.getFront() ? (e = \"Reference.child\", i = !(n = 1), (r = t) && (r = r.replace(/^\\/*\\.info(\\/|$)/, \"/\")), bo(e, n, r, i)) : bo(\"Reference.child\", 1, t, !1)), new o(this.repo, this.path.child(t));\n    }, o.prototype.getParent = function () {\n      zr(\"Reference.parent\", 0, 0, arguments.length);\n      var t = this.path.parent();\n      return null === t ? null : new o(this.repo, t);\n    }, o.prototype.getRoot = function () {\n      zr(\"Reference.root\", 0, 0, arguments.length);\n\n      for (var t = this; null !== t.getParent();) t = t.getParent();\n\n      return t;\n    }, o.prototype.databaseProp = function () {\n      return this.repo.database;\n    }, o.prototype.set = function (t, e) {\n      zr(\"Reference.set\", 1, 2, arguments.length), wo(\"Reference.set\", this.path), fo(\"Reference.set\", 1, t, this.path, !1), Xr(\"Reference.set\", 2, e, !0);\n      var n = new Sr();\n      return this.repo.setWithPriority(this.path, t, null, n.wrapCallback(e)), n.promise;\n    }, o.prototype.update = function (t, e) {\n      if (zr(\"Reference.update\", 1, 2, arguments.length), wo(\"Reference.update\", this.path), Array.isArray(t)) {\n        for (var n = {}, r = 0; r < t.length; ++r) n[\"\" + r] = t[r];\n\n        t = n, Oi(\"Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.\");\n      }\n\n      yo(\"Reference.update\", 1, t, this.path, !1), Xr(\"Reference.update\", 2, e, !0);\n      var i = new Sr();\n      return this.repo.update(this.path, t, i.wrapCallback(e)), i.promise;\n    }, o.prototype.setWithPriority = function (t, e, n) {\n      if (zr(\"Reference.setWithPriority\", 2, 3, arguments.length), wo(\"Reference.setWithPriority\", this.path), fo(\"Reference.setWithPriority\", 1, t, this.path, !1), mo(\"Reference.setWithPriority\", 2, e, !1), Xr(\"Reference.setWithPriority\", 3, n, !0), \".length\" === this.getKey() || \".keys\" === this.getKey()) throw \"Reference.setWithPriority failed: \" + this.getKey() + \" is a read-only object.\";\n      var r = new Sr();\n      return this.repo.setWithPriority(this.path, t, e, r.wrapCallback(n)), r.promise;\n    }, o.prototype.remove = function (t) {\n      return zr(\"Reference.remove\", 0, 1, arguments.length), wo(\"Reference.remove\", this.path), Xr(\"Reference.remove\", 1, t, !0), this.set(null, t);\n    }, o.prototype.transaction = function (t, r, e) {\n      if (zr(\"Reference.transaction\", 1, 3, arguments.length), wo(\"Reference.transaction\", this.path), Xr(\"Reference.transaction\", 1, t, !1), Xr(\"Reference.transaction\", 2, r, !0), function (t, e, n, r) {\n        if ((!r || void 0 !== n) && \"boolean\" != typeof n) throw new Error(Yr(t, e, r) + \"must be a boolean.\");\n      }(\"Reference.transaction\", 3, e, !0), \".length\" === this.getKey() || \".keys\" === this.getKey()) throw \"Reference.transaction failed: \" + this.getKey() + \" is a read-only object.\";\n      void 0 === e && (e = !0);\n      var i = new Sr();\n      \"function\" == typeof r && i.promise.catch(function () {});\n      return this.repo.startTransaction(this.path, t, function (t, e, n) {\n        t ? i.reject(t) : i.resolve(new To(e, n)), \"function\" == typeof r && r(t, e, n);\n      }, e), i.promise;\n    }, o.prototype.setPriority = function (t, e) {\n      zr(\"Reference.setPriority\", 1, 2, arguments.length), wo(\"Reference.setPriority\", this.path), mo(\"Reference.setPriority\", 1, t, !1), Xr(\"Reference.setPriority\", 2, e, !0);\n      var n = new Sr();\n      return this.repo.setWithPriority(this.path.child(\".priority\"), t, null, n.wrapCallback(e)), n.promise;\n    }, o.prototype.push = function (t, e) {\n      zr(\"Reference.push\", 0, 2, arguments.length), wo(\"Reference.push\", this.path), fo(\"Reference.push\", 1, t, this.path, !0), Xr(\"Reference.push\", 2, e, !0);\n      var n,\n          r = this.repo.serverTime(),\n          i = So(r),\n          o = this.child(i),\n          a = this.child(i);\n      return n = null != t ? o.set(t, e).then(function () {\n        return a;\n      }) : Promise.resolve(a), o.then = n.then.bind(n), o.catch = n.then.bind(n, void 0), \"function\" == typeof e && n.catch(function () {}), o;\n    }, o.prototype.onDisconnect = function () {\n      return wo(\"Reference.onDisconnect\", this.path), new Eo(this.repo, this.path);\n    }, Object.defineProperty(o.prototype, \"database\", {\n      get: function () {\n        return this.databaseProp();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(o.prototype, \"key\", {\n      get: function () {\n        return this.getKey();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(o.prototype, \"parent\", {\n      get: function () {\n        return this.getParent();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(o.prototype, \"root\", {\n      get: function () {\n        return this.getRoot();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), o;\n  }(ca);\n\n  ca.__referenceConstructor = hs, Pa.__referenceConstructor = hs;\n\n  var ls,\n      fs,\n      ps = function () {\n    this.children = {}, this.childCount = 0, this.value = null;\n  },\n      ds = function () {\n    function i(t, e, n) {\n      void 0 === t && (t = \"\"), void 0 === e && (e = null), void 0 === n && (n = new ps()), this.name_ = t, this.parent_ = e, this.node_ = n;\n    }\n\n    return i.prototype.subTree = function (t) {\n      for (var e, n = t instanceof Gi ? t : new Gi(t), r = this; null !== (e = n.getFront());) {\n        r = new i(e, r, Lr(r.node_.children, e) || new ps()), n = n.popFront();\n      }\n\n      return r;\n    }, i.prototype.getValue = function () {\n      return this.node_.value;\n    }, i.prototype.setValue = function (t) {\n      gr(void 0 !== t, \"Cannot set value to undefined\"), this.node_.value = t, this.updateParents_();\n    }, i.prototype.clear = function () {\n      this.node_.value = null, this.node_.children = {}, this.node_.childCount = 0, this.updateParents_();\n    }, i.prototype.hasChildren = function () {\n      return 0 < this.node_.childCount;\n    }, i.prototype.isEmpty = function () {\n      return null === this.getValue() && !this.hasChildren();\n    }, i.prototype.forEachChild = function (n) {\n      var r = this;\n      Fr(this.node_.children, function (t, e) {\n        n(new i(t, r, e));\n      });\n    }, i.prototype.forEachDescendant = function (e, t, n) {\n      t && !n && e(this), this.forEachChild(function (t) {\n        t.forEachDescendant(e, !0, n);\n      }), t && n && e(this);\n    }, i.prototype.forEachAncestor = function (t, e) {\n      for (var n = e ? this : this.parent(); null !== n;) {\n        if (t(n)) return !0;\n        n = n.parent();\n      }\n\n      return !1;\n    }, i.prototype.forEachImmediateDescendantWithValue = function (e) {\n      this.forEachChild(function (t) {\n        null !== t.getValue() ? e(t) : t.forEachImmediateDescendantWithValue(e);\n      });\n    }, i.prototype.path = function () {\n      return new Gi(null === this.parent_ ? this.name_ : this.parent_.path() + \"/\" + this.name_);\n    }, i.prototype.name = function () {\n      return this.name_;\n    }, i.prototype.parent = function () {\n      return this.parent_;\n    }, i.prototype.updateParents_ = function () {\n      null !== this.parent_ && this.parent_.updateChild_(this.name_, this);\n    }, i.prototype.updateChild_ = function (t, e) {\n      var n = e.isEmpty(),\n          r = xr(this.node_.children, t);\n      n && r ? (delete this.node_.children[t], this.node_.childCount--, this.updateParents_()) : n || r || (this.node_.children[t] = e.node_, this.node_.childCount++, this.updateParents_());\n    }, i;\n  }();\n\n  (fs = ls || (ls = {}))[fs.RUN = 0] = \"RUN\", fs[fs.SENT = 1] = \"SENT\", fs[fs.COMPLETED = 2] = \"COMPLETED\", fs[fs.SENT_NEEDS_ABORT = 3] = \"SENT_NEEDS_ABORT\", fs[fs.NEEDS_ABORT = 4] = \"NEEDS_ABORT\", as.MAX_TRANSACTION_RETRIES_ = 25, as.prototype.transactions_init_ = function () {\n    this.transactionQueueTree_ = new ds();\n  }, as.prototype.startTransaction = function (t, e, n, r) {\n    this.log_(\"transaction on \" + t);\n\n    var i = function () {},\n        o = new hs(this, t);\n\n    o.on(\"value\", i);\n    var a = {\n      path: t,\n      update: e,\n      onComplete: n,\n      status: null,\n      order: Ei(),\n      applyLocally: r,\n      retryCount: 0,\n      unwatcher: function () {\n        o.off(\"value\", i);\n      },\n      abortReason: null,\n      currentWriteId: null,\n      currentInputSnapshot: null,\n      currentOutputSnapshotRaw: null,\n      currentOutputSnapshotResolved: null\n    },\n        s = this.getLatestState_(t);\n    a.currentInputSnapshot = s;\n    var u = a.update(s.val());\n\n    if (void 0 === u) {\n      if (a.unwatcher(), a.currentOutputSnapshotRaw = null, a.currentOutputSnapshotResolved = null, a.onComplete) {\n        var c = new ia(a.currentInputSnapshot, new hs(this, a.path), Fo);\n        a.onComplete(null, !1, c);\n      }\n    } else {\n      po(\"transaction failed: Data returned \", u, a.path), a.status = ls.RUN;\n      var h = this.transactionQueueTree_.subTree(t),\n          l = h.getValue() || [];\n      l.push(a), h.setValue(l);\n      var f = void 0;\n      if (\"object\" == typeof u && null !== u && xr(u, \".priority\")) f = Lr(u, \".priority\"), gr(lo(f), \"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.\");else f = (this.serverSyncTree_.calcCompleteEventCache(t) || Yo.EMPTY_NODE).getPriority().val();\n      f = f;\n      var p = this.generateServerValues(),\n          d = $o(u, f),\n          y = pa(d, p);\n      a.currentOutputSnapshotRaw = d, a.currentOutputSnapshotResolved = y, a.currentWriteId = this.getNextWriteId_();\n      var m = this.serverSyncTree_.applyUserOverwrite(t, y, a.currentWriteId, a.applyLocally);\n      this.eventQueue_.raiseEventsForChangedPath(t, m), this.sendReadyTransactions_();\n    }\n  }, as.prototype.getLatestState_ = function (t, e) {\n    return this.serverSyncTree_.calcCompleteEventCache(t, e) || Yo.EMPTY_NODE;\n  }, as.prototype.sendReadyTransactions_ = function (t) {\n    var e = this;\n\n    if (void 0 === t && (t = this.transactionQueueTree_), t || this.pruneCompletedTransactionsBelowNode_(t), null !== t.getValue()) {\n      var n = this.buildTransactionQueue_(t);\n      gr(0 < n.length, \"Sending zero length transaction queue\"), n.every(function (t) {\n        return t.status === ls.RUN;\n      }) && this.sendTransactionQueue_(t.path(), n);\n    } else t.hasChildren() && t.forEachChild(function (t) {\n      e.sendReadyTransactions_(t);\n    });\n  }, as.prototype.sendTransactionQueue_ = function (s, u) {\n    for (var c = this, t = u.map(function (t) {\n      return t.currentWriteId;\n    }), e = this.getLatestState_(s, t), n = e, r = e.hash(), i = 0; i < u.length; i++) {\n      var o = u[i];\n      gr(o.status === ls.RUN, \"tryToSendTransactionQueue_: items in queue should all be run.\"), o.status = ls.SENT, o.retryCount++;\n      var a = Gi.relativePath(s, o.path);\n      n = n.updateChild(a, o.currentOutputSnapshotRaw);\n    }\n\n    var h = n.val(!0),\n        l = s;\n    this.server_.put(l.toString(), h, function (t) {\n      c.log_(\"transaction put response\", {\n        path: l.toString(),\n        status: t\n      });\n      var e = [];\n\n      if (\"ok\" === t) {\n        for (var n = [], r = 0; r < u.length; r++) {\n          if (u[r].status = ls.COMPLETED, e = e.concat(c.serverSyncTree_.ackUserWrite(u[r].currentWriteId)), u[r].onComplete) {\n            var i = u[r].currentOutputSnapshotResolved,\n                o = new hs(c, u[r].path),\n                a = new ia(i, o, Fo);\n            n.push(u[r].onComplete.bind(null, null, !0, a));\n          }\n\n          u[r].unwatcher();\n        }\n\n        c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(s)), c.sendReadyTransactions_(), c.eventQueue_.raiseEventsForChangedPath(s, e);\n\n        for (r = 0; r < n.length; r++) Qi(n[r]);\n      } else {\n        if (\"datastale\" === t) for (r = 0; r < u.length; r++) u[r].status === ls.SENT_NEEDS_ABORT ? u[r].status = ls.NEEDS_ABORT : u[r].status = ls.RUN;else {\n          Oi(\"transaction at \" + l.toString() + \" failed: \" + t);\n\n          for (r = 0; r < u.length; r++) u[r].status = ls.NEEDS_ABORT, u[r].abortReason = t;\n        }\n        c.rerunTransactions_(s);\n      }\n    }, r);\n  }, as.prototype.rerunTransactions_ = function (t) {\n    var e = this.getAncestorTransactionNode_(t),\n        n = e.path(),\n        r = this.buildTransactionQueue_(e);\n    return this.rerunTransactionQueue_(r, n), n;\n  }, as.prototype.rerunTransactionQueue_ = function (t, e) {\n    if (0 !== t.length) {\n      for (var n, r = [], i = [], o = t.filter(function (t) {\n        return t.status === ls.RUN;\n      }).map(function (t) {\n        return t.currentWriteId;\n      }), a = 0; a < t.length; a++) {\n        var s = t[a],\n            u = Gi.relativePath(e, s.path),\n            c = !1,\n            h = void 0;\n        if (gr(null !== u, \"rerunTransactionsUnderNode_: relativePath should not be null.\"), s.status === ls.NEEDS_ABORT) c = !0, h = s.abortReason, i = i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId, !0));else if (s.status === ls.RUN) if (s.retryCount >= as.MAX_TRANSACTION_RETRIES_) c = !0, h = \"maxretry\", i = i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId, !0));else {\n          var l = this.getLatestState_(s.path, o);\n          s.currentInputSnapshot = l;\n          var f = t[a].update(l.val());\n\n          if (void 0 !== f) {\n            po(\"transaction failed: Data returned \", f, s.path);\n            var p = $o(f);\n            \"object\" == typeof f && null != f && xr(f, \".priority\") || (p = p.updatePriority(l.getPriority()));\n            var d = s.currentWriteId,\n                y = this.generateServerValues(),\n                m = pa(p, y);\n            s.currentOutputSnapshotRaw = p, s.currentOutputSnapshotResolved = m, s.currentWriteId = this.getNextWriteId_(), o.splice(o.indexOf(d), 1), i = (i = i.concat(this.serverSyncTree_.applyUserOverwrite(s.path, m, s.currentWriteId, s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d, !0));\n          } else c = !0, h = \"nodata\", i = i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId, !0));\n        }\n        if (this.eventQueue_.raiseEventsForChangedPath(e, i), i = [], c && (t[a].status = ls.COMPLETED, n = t[a].unwatcher, setTimeout(n, Math.floor(0)), t[a].onComplete)) if (\"nodata\" === h) {\n          var g = new hs(this, t[a].path),\n              v = t[a].currentInputSnapshot,\n              b = new ia(v, g, Fo);\n          r.push(t[a].onComplete.bind(null, null, !1, b));\n        } else r.push(t[a].onComplete.bind(null, new Error(h), !1, null));\n      }\n\n      this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);\n\n      for (a = 0; a < r.length; a++) Qi(r[a]);\n\n      this.sendReadyTransactions_();\n    }\n  }, as.prototype.getAncestorTransactionNode_ = function (t) {\n    for (var e, n = this.transactionQueueTree_; null !== (e = t.getFront()) && null === n.getValue();) n = n.subTree(e), t = t.popFront();\n\n    return n;\n  }, as.prototype.buildTransactionQueue_ = function (t) {\n    var e = [];\n    return this.aggregateTransactionQueuesForNode_(t, e), e.sort(function (t, e) {\n      return t.order - e.order;\n    }), e;\n  }, as.prototype.aggregateTransactionQueuesForNode_ = function (t, e) {\n    var n = this,\n        r = t.getValue();\n    if (null !== r) for (var i = 0; i < r.length; i++) e.push(r[i]);\n    t.forEachChild(function (t) {\n      n.aggregateTransactionQueuesForNode_(t, e);\n    });\n  }, as.prototype.pruneCompletedTransactionsBelowNode_ = function (t) {\n    var e = this,\n        n = t.getValue();\n\n    if (n) {\n      for (var r = 0, i = 0; i < n.length; i++) n[i].status !== ls.COMPLETED && (n[r] = n[i], r++);\n\n      n.length = r, t.setValue(0 < n.length ? n : null);\n    }\n\n    t.forEachChild(function (t) {\n      e.pruneCompletedTransactionsBelowNode_(t);\n    });\n  }, as.prototype.abortTransactions_ = function (t) {\n    var e = this,\n        n = this.getAncestorTransactionNode_(t).path(),\n        r = this.transactionQueueTree_.subTree(t);\n    return r.forEachAncestor(function (t) {\n      e.abortTransactionsOnNode_(t);\n    }), this.abortTransactionsOnNode_(r), r.forEachDescendant(function (t) {\n      e.abortTransactionsOnNode_(t);\n    }), n;\n  }, as.prototype.abortTransactionsOnNode_ = function (t) {\n    var e = t.getValue();\n\n    if (null !== e) {\n      for (var n = [], r = [], i = -1, o = 0; o < e.length; o++) if (e[o].status === ls.SENT_NEEDS_ABORT) ;else if (e[o].status === ls.SENT) gr(i === o - 1, \"All SENT items should be at beginning of queue.\"), e[i = o].status = ls.SENT_NEEDS_ABORT, e[o].abortReason = \"set\";else if (gr(e[o].status === ls.RUN, \"Unexpected transaction status in abort\"), e[o].unwatcher(), r = r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId, !0)), e[o].onComplete) {\n        n.push(e[o].onComplete.bind(null, new Error(\"set\"), !1, null));\n      }\n\n      -1 === i ? t.setValue(null) : e.length = i + 1, this.eventQueue_.raiseEventsForChangedPath(t.path(), r);\n\n      for (o = 0; o < n.length; o++) Qi(n[o]);\n    }\n  };\n\n  var ys,\n      ms = \"databaseURL\",\n      gs = function () {\n    function t() {\n      this.repos_ = {}, this.useRestClient_ = !1;\n    }\n\n    return t.getInstance = function () {\n      return ys || (ys = new t()), ys;\n    }, t.prototype.interrupt = function () {\n      for (var t in this.repos_) for (var e in this.repos_[t]) this.repos_[t][e].interrupt();\n    }, t.prototype.resume = function () {\n      for (var t in this.repos_) for (var e in this.repos_[t]) this.repos_[t][e].resume();\n    }, t.prototype.databaseFromApp = function (t, e) {\n      var n = e || t.options[ms];\n      void 0 === n && Ri(\"Can't determine Firebase Database URL.  Be sure to include \" + ms + \" option when calling firebase.initializeApp().\");\n      var r = io(n),\n          i = r.repoInfo;\n      return _o(\"Invalid Firebase Database URL\", 1, r), r.path.isEmpty() || Ri(\"Database URL must point to the root of a Firebase Database (not including a child path).\"), this.createRepo(i, t).database;\n    }, t.prototype.deleteRepo = function (t) {\n      var e = Lr(this.repos_, t.app.name);\n      e && Lr(e, t.repoInfo_.toURLString()) === t || Ri(\"Database \" + t.app.name + \"(\" + t.repoInfo_ + \") has already been deleted.\"), t.interrupt(), delete e[t.repoInfo_.toURLString()];\n    }, t.prototype.createRepo = function (t, e) {\n      var n = Lr(this.repos_, e.name);\n      n || (n = {}, this.repos_[e.name] = n);\n      var r = Lr(n, t.toURLString());\n      return r && Ri(\"Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.\"), r = new as(t, this.useRestClient_, e), n[t.toURLString()] = r;\n    }, t.prototype.forceRestClient = function (t) {\n      this.useRestClient_ = t;\n    }, t;\n  }(),\n      vs = function () {\n    function t(t) {\n      (this.repo_ = t) instanceof as || Ri(\"Don't call new Database() directly - please use firebase.database().\"), this.root_ = new hs(t, Gi.Empty), this.INTERNAL = new bs(this);\n    }\n\n    return Object.defineProperty(t.prototype, \"app\", {\n      get: function () {\n        return this.repo_.app;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.ref = function (t) {\n      return this.checkDeleted_(\"ref\"), zr(\"database.ref\", 0, 1, arguments.length), t instanceof hs ? this.refFromURL(t.toString()) : void 0 !== t ? this.root_.child(t) : this.root_;\n    }, t.prototype.refFromURL = function (t) {\n      var e = \"database.refFromURL\";\n      this.checkDeleted_(e), zr(e, 1, 1, arguments.length);\n      var n = io(t);\n\n      _o(e, 1, n);\n\n      var r = n.repoInfo;\n      return r.host !== this.repo_.repoInfo_.host && Ri(e + \": Host name does not match the current database: (found \" + r.host + \" but expected \" + this.repo_.repoInfo_.host + \")\"), this.ref(n.path.toString());\n    }, t.prototype.checkDeleted_ = function (t) {\n      null === this.repo_ && Ri(\"Cannot call \" + t + \" on a deleted database.\");\n    }, t.prototype.goOffline = function () {\n      zr(\"database.goOffline\", 0, 0, arguments.length), this.checkDeleted_(\"goOffline\"), this.repo_.interrupt();\n    }, t.prototype.goOnline = function () {\n      zr(\"database.goOnline\", 0, 0, arguments.length), this.checkDeleted_(\"goOnline\"), this.repo_.resume();\n    }, t.ServerValue = {\n      TIMESTAMP: {\n        \".sv\": \"timestamp\"\n      }\n    }, t;\n  }(),\n      bs = function () {\n    function t(t) {\n      this.database = t;\n    }\n\n    return t.prototype.delete = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          return this.database.checkDeleted_(\"delete\"), gs.getInstance().deleteRepo(this.database.repo_), this.database.repo_ = null, this.database.root_ = null, this.database.INTERNAL = null, this.database = null, [2];\n        });\n      });\n    }, t;\n  }(),\n      ws = Object.freeze({\n    forceLongPolling: function () {\n      Za.forceDisallow(), Xa.forceAllow();\n    },\n    forceWebSockets: function () {\n      Xa.forceDisallow();\n    },\n    isWebSocketsAvailable: function () {\n      return Za.isAvailable();\n    },\n    setSecurityDebugCallback: function (t, e) {\n      t.repo.persistentConnection_.securityDebugCallback_ = e;\n    },\n    stats: function (t, e) {\n      t.repo.stats(e);\n    },\n    statsIncrementCounter: function (t, e) {\n      t.repo.statsIncrementCounter(e);\n    },\n    dataUpdateCount: function (t) {\n      return t.repo.dataUpdateCount;\n    },\n    interceptServerData: function (t, e) {\n      return t.repo.interceptServerData_(e);\n    }\n  }),\n      _s = rs;\n\n  rs.prototype.simpleListen = function (t, e) {\n    this.sendRequest(\"q\", {\n      p: t\n    }, e);\n  }, rs.prototype.echo = function (t, e) {\n    this.sendRequest(\"echo\", {\n      d: t\n    }, e);\n  };\n  var Es = es,\n      Ts = $i,\n      Ss = Object.freeze({\n    DataConnection: _s,\n    RealTimeConnection: Es,\n    hijackHash: function (i) {\n      var o = rs.prototype.put;\n      return rs.prototype.put = function (t, e, n, r) {\n        void 0 !== r && (r = i()), o.call(this, t, e, n, r);\n      }, function () {\n        rs.prototype.put = o;\n      };\n    },\n    ConnectionTarget: Ts,\n    queryIdentifier: function (t) {\n      return t.queryIdentifier();\n    },\n    listens: function (t) {\n      return t.repo.persistentConnection_.listens_;\n    },\n    forceRestClient: function (t) {\n      gs.getInstance().forceRestClient(t);\n    }\n  }),\n      Is = vs.ServerValue;\n  Hh.INTERNAL.registerService(\"database\", function (t, e, n) {\n    return gs.getInstance().databaseFromApp(t, n);\n  }, {\n    Reference: hs,\n    Query: ca,\n    Database: vs,\n    DataSnapshot: ia,\n    enableLogging: Ni,\n    INTERNAL: ws,\n    ServerValue: Is,\n    TEST_ACCESS: Ss\n  }, null, !0);\n  var Cs,\n      Ns = \"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {},\n      As = As || {},\n      ks = Ns;\n\n  function Ds(t) {\n    return \"string\" == typeof t;\n  }\n\n  function Rs(t) {\n    return \"number\" == typeof t;\n  }\n\n  function Os(t, e) {\n    t = t.split(\".\"), e = e || ks;\n\n    for (var n = 0; n < t.length; n++) if (null == (e = e[t[n]])) return null;\n\n    return e;\n  }\n\n  function Ps() {}\n\n  function Ms(t) {\n    var e = typeof t;\n\n    if (\"object\" == e) {\n      if (!t) return \"null\";\n      if (t instanceof Array) return \"array\";\n      if (t instanceof Object) return e;\n      var n = Object.prototype.toString.call(t);\n      if (\"[object Window]\" == n) return \"object\";\n      if (\"[object Array]\" == n || \"number\" == typeof t.length && void 0 !== t.splice && void 0 !== t.propertyIsEnumerable && !t.propertyIsEnumerable(\"splice\")) return \"array\";\n      if (\"[object Function]\" == n || void 0 !== t.call && void 0 !== t.propertyIsEnumerable && !t.propertyIsEnumerable(\"call\")) return \"function\";\n    } else if (\"function\" == e && void 0 === t.call) return \"object\";\n\n    return e;\n  }\n\n  function xs(t) {\n    return \"array\" == Ms(t);\n  }\n\n  function Ls(t) {\n    var e = Ms(t);\n    return \"array\" == e || \"object\" == e && \"number\" == typeof t.length;\n  }\n\n  function Fs(t) {\n    var e = typeof t;\n    return \"object\" == e && null != t || \"function\" == e;\n  }\n\n  var Us = \"closure_uid_\" + (1e9 * Math.random() >>> 0),\n      qs = 0;\n\n  function Vs(t, e, n) {\n    return t.call.apply(t.bind, arguments);\n  }\n\n  function Bs(e, n, t) {\n    if (!e) throw Error();\n\n    if (2 < arguments.length) {\n      var r = Array.prototype.slice.call(arguments, 2);\n      return function () {\n        var t = Array.prototype.slice.call(arguments);\n        return Array.prototype.unshift.apply(t, r), e.apply(n, t);\n      };\n    }\n\n    return function () {\n      return e.apply(n, arguments);\n    };\n  }\n\n  function js(t, e, n) {\n    return (js = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf(\"native code\") ? Vs : Bs).apply(null, arguments);\n  }\n\n  function Ws(e, t) {\n    var n = Array.prototype.slice.call(arguments, 1);\n    return function () {\n      var t = n.slice();\n      return t.push.apply(t, arguments), e.apply(this, t);\n    };\n  }\n\n  var Ks = Date.now || function () {\n    return +new Date();\n  };\n\n  function Qs(t, o) {\n    function e() {}\n\n    e.prototype = o.prototype, t.N = o.prototype, t.prototype = new e(), (t.prototype.constructor = t).yb = function (t, e, n) {\n      for (var r = Array(arguments.length - 2), i = 2; i < arguments.length; i++) r[i - 2] = arguments[i];\n\n      return o.prototype[e].apply(t, r);\n    };\n  }\n\n  function Hs() {\n    this.j = this.j, this.i = this.i;\n  }\n\n  Hs.prototype.j = !1, Hs.prototype.la = function () {\n    if (!this.j && (this.j = !0, this.G(), 0)) this[Us] || (this[Us] = ++qs);\n  }, Hs.prototype.G = function () {\n    if (this.i) for (; this.i.length;) this.i.shift()();\n  };\n  var Gs = Array.prototype.indexOf ? function (t, e) {\n    return Array.prototype.indexOf.call(t, e, void 0);\n  } : function (t, e) {\n    if (Ds(t)) return Ds(e) && 1 == e.length ? t.indexOf(e, 0) : -1;\n\n    for (var n = 0; n < t.length; n++) if (n in t && t[n] === e) return n;\n\n    return -1;\n  },\n      zs = Array.prototype.forEach ? function (t, e, n) {\n    Array.prototype.forEach.call(t, e, n);\n  } : function (t, e, n) {\n    for (var r = t.length, i = Ds(t) ? t.split(\"\") : t, o = 0; o < r; o++) o in i && e.call(n, i[o], o, t);\n  };\n\n  function Ys(t) {\n    return Array.prototype.concat.apply([], arguments);\n  }\n\n  function Xs(t) {\n    var e = t.length;\n\n    if (0 < e) {\n      for (var n = Array(e), r = 0; r < e; r++) n[r] = t[r];\n\n      return n;\n    }\n\n    return [];\n  }\n\n  function Js(t) {\n    return /^[\\s\\xa0]*$/.test(t);\n  }\n\n  var $s,\n      Zs = String.prototype.trim ? function (t) {\n    return t.trim();\n  } : function (t) {\n    return /^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(t)[1];\n  };\n\n  function tu(t, e) {\n    return -1 != t.indexOf(e);\n  }\n\n  function eu(t, e) {\n    return t < e ? -1 : e < t ? 1 : 0;\n  }\n\n  t: {\n    var nu = ks.navigator;\n\n    if (nu) {\n      var ru = nu.userAgent;\n\n      if (ru) {\n        $s = ru;\n        break t;\n      }\n    }\n\n    $s = \"\";\n  }\n\n  function iu(t, e, n) {\n    for (var r in t) e.call(n, t[r], r, t);\n  }\n\n  function ou(t) {\n    var e,\n        n = {};\n\n    for (e in t) n[e] = t[e];\n\n    return n;\n  }\n\n  var au = \"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");\n\n  function su(t, e) {\n    for (var n, r, i = 1; i < arguments.length; i++) {\n      for (n in r = arguments[i]) t[n] = r[n];\n\n      for (var o = 0; o < au.length; o++) n = au[o], Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n    }\n  }\n\n  function uu(t) {\n    return uu[\" \"](t), t;\n  }\n\n  uu[\" \"] = Ps;\n  var cu,\n      hu,\n      lu = tu($s, \"Opera\"),\n      fu = tu($s, \"Trident\") || tu($s, \"MSIE\"),\n      pu = tu($s, \"Edge\"),\n      du = pu || fu,\n      yu = tu($s, \"Gecko\") && !(tu($s.toLowerCase(), \"webkit\") && !tu($s, \"Edge\")) && !(tu($s, \"Trident\") || tu($s, \"MSIE\")) && !tu($s, \"Edge\"),\n      mu = tu($s.toLowerCase(), \"webkit\") && !tu($s, \"Edge\");\n\n  function gu() {\n    var t = ks.document;\n    return t ? t.documentMode : void 0;\n  }\n\n  t: {\n    var vu = \"\",\n        bu = (hu = $s, yu ? /rv:([^\\);]+)(\\)|;)/.exec(hu) : pu ? /Edge\\/([\\d\\.]+)/.exec(hu) : fu ? /\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(hu) : mu ? /WebKit\\/(\\S+)/.exec(hu) : lu ? /(?:Version)[ \\/]?(\\S+)/.exec(hu) : void 0);\n\n    if (bu && (vu = bu ? bu[1] : \"\"), fu) {\n      var wu = gu();\n\n      if (null != wu && wu > parseFloat(vu)) {\n        cu = String(wu);\n        break t;\n      }\n    }\n\n    cu = vu;\n  }\n\n  var _u,\n      Eu = {};\n\n  function Tu(s) {\n    return t = s, e = function () {\n      for (var t = 0, e = Zs(String(cu)).split(\".\"), n = Zs(String(s)).split(\".\"), r = Math.max(e.length, n.length), i = 0; 0 == t && i < r; i++) {\n        var o = e[i] || \"\",\n            a = n[i] || \"\";\n\n        do {\n          if (o = /(\\d*)(\\D*)(.*)/.exec(o) || [\"\", \"\", \"\", \"\"], a = /(\\d*)(\\D*)(.*)/.exec(a) || [\"\", \"\", \"\", \"\"], 0 == o[0].length && 0 == a[0].length) break;\n          t = eu(0 == o[1].length ? 0 : parseInt(o[1], 10), 0 == a[1].length ? 0 : parseInt(a[1], 10)) || eu(0 == o[2].length, 0 == a[2].length) || eu(o[2], a[2]), o = o[3], a = a[3];\n        } while (0 == t);\n      }\n\n      return 0 <= t;\n    }, n = Eu, Object.prototype.hasOwnProperty.call(n, t) ? n[t] : n[t] = e(t);\n    var t, e, n;\n  }\n\n  var Su = ks.document;\n  _u = Su && fu ? gu() || (\"CSS1Compat\" == Su.compatMode ? parseInt(cu, 10) : 5) : void 0;\n\n  var Iu = !fu || 9 <= Number(_u),\n      Cu = fu && !Tu(\"9\"),\n      Nu = function () {\n    if (!ks.addEventListener || !Object.defineProperty) return !1;\n    var t = !1,\n        e = Object.defineProperty({}, \"passive\", {\n      get: function () {\n        t = !0;\n      }\n    });\n\n    try {\n      ks.addEventListener(\"test\", Ps, e), ks.removeEventListener(\"test\", Ps, e);\n    } catch (t) {}\n\n    return t;\n  }();\n\n  function Au(t, e) {\n    this.type = t, this.a = this.target = e, this.Ja = !0;\n  }\n\n  function ku(t, e) {\n    if (Au.call(this, t ? t.type : \"\"), this.relatedTarget = this.a = this.target = null, this.button = this.screenY = this.screenX = this.clientY = this.clientX = 0, this.key = \"\", this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1, this.pointerId = 0, this.pointerType = \"\", this.c = null, t) {\n      var n = this.type = t.type,\n          r = t.changedTouches && t.changedTouches.length ? t.changedTouches[0] : null;\n\n      if (this.target = t.target || t.srcElement, this.a = e, e = t.relatedTarget) {\n        if (yu) {\n          t: {\n            try {\n              uu(e.nodeName);\n              var i = !0;\n              break t;\n            } catch (t) {}\n\n            i = !1;\n          }\n\n          i || (e = null);\n        }\n      } else \"mouseover\" == n ? e = t.fromElement : \"mouseout\" == n && (e = t.toElement);\n\n      this.relatedTarget = e, this.screenY = r ? (this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX, this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY, this.screenX = r.screenX || 0, r.screenY || 0) : (this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX, this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY, this.screenX = t.screenX || 0, t.screenY || 0), this.button = t.button, this.key = t.key || \"\", this.ctrlKey = t.ctrlKey, this.altKey = t.altKey, this.shiftKey = t.shiftKey, this.metaKey = t.metaKey, this.pointerId = t.pointerId || 0, this.pointerType = Ds(t.pointerType) ? t.pointerType : Du[t.pointerType] || \"\", (this.c = t).defaultPrevented && this.b();\n    }\n  }\n\n  Au.prototype.b = function () {\n    this.Ja = !1;\n  }, Qs(ku, Au);\n  var Du = {\n    2: \"touch\",\n    3: \"pen\",\n    4: \"mouse\"\n  };\n\n  ku.prototype.b = function () {\n    ku.N.b.call(this);\n    var t = this.c;\n    if (t.preventDefault) t.preventDefault();else if (t.returnValue = !1, Cu) try {\n      (t.ctrlKey || 112 <= t.keyCode && t.keyCode <= 123) && (t.keyCode = -1);\n    } catch (t) {}\n  };\n\n  var Ru = \"closure_listenable_\" + (1e6 * Math.random() | 0),\n      Ou = 0;\n\n  function Pu(t, e, n, r, i) {\n    this.listener = t, this.proxy = null, this.src = e, this.type = n, this.capture = !!r, this.da = i, this.key = ++Ou, this.X = this.Z = !1;\n  }\n\n  function Mu(t) {\n    t.X = !0, t.listener = null, t.proxy = null, t.src = null, t.da = null;\n  }\n\n  function xu(t) {\n    this.src = t, this.a = {}, this.b = 0;\n  }\n\n  function Lu(t, e) {\n    var n = e.type;\n\n    if (n in t.a) {\n      var r,\n          i = t.a[n],\n          o = Gs(i, e);\n      (r = 0 <= o) && Array.prototype.splice.call(i, o, 1), r && (Mu(e), 0 == t.a[n].length && (delete t.a[n], t.b--));\n    }\n  }\n\n  function Fu(t, e, n, r) {\n    for (var i = 0; i < t.length; ++i) {\n      var o = t[i];\n      if (!o.X && o.listener == e && o.capture == !!n && o.da == r) return i;\n    }\n\n    return -1;\n  }\n\n  xu.prototype.add = function (t, e, n, r, i) {\n    var o = t.toString();\n    (t = this.a[o]) || (t = this.a[o] = [], this.b++);\n    var a = Fu(t, e, r, i);\n    return -1 < a ? (e = t[a], n || (e.Z = !1)) : ((e = new Pu(e, this.src, o, !!r, i)).Z = n, t.push(e)), e;\n  };\n\n  var Uu = \"closure_lm_\" + (1e6 * Math.random() | 0),\n      qu = {};\n\n  function Vu(t, e, n, r, i) {\n    if (r && r.once) return function t(e, n, r, i, o) {\n      if (xs(n)) {\n        for (var a = 0; a < n.length; a++) t(e, n[a], r, i, o);\n\n        return null;\n      }\n\n      r = zu(r);\n      return e && e[Ru] ? e.Ba(n, r, Fs(i) ? !!i.capture : !!i, o) : Bu(e, n, r, !0, i, o);\n    }(t, e, n, r, i);\n\n    if (xs(e)) {\n      for (var o = 0; o < e.length; o++) Vu(t, e[o], n, r, i);\n\n      return null;\n    }\n\n    return n = zu(n), t && t[Ru] ? t.Aa(e, n, Fs(r) ? !!r.capture : !!r, i) : Bu(t, e, n, !1, r, i);\n  }\n\n  function Bu(t, e, n, r, i, o) {\n    if (!e) throw Error(\"Invalid event type\");\n    var a = Fs(i) ? !!i.capture : !!i;\n    if (a && !Iu) return null;\n    var s,\n        u,\n        c = Hu(t);\n    if (c || (t[Uu] = c = new xu(t)), (n = c.add(e, n, r, a, o)).proxy) return n;\n    if (s = Qu, r = u = Iu ? function (t) {\n      return s.call(u.src, u.listener, t);\n    } : function (t) {\n      if (!(t = s.call(u.src, u.listener, t))) return t;\n    }, (n.proxy = r).src = t, r.listener = n, t.addEventListener) Nu || (i = a), void 0 === i && (i = !1), t.addEventListener(e.toString(), r, i);else if (t.attachEvent) t.attachEvent(Wu(e.toString()), r);else {\n      if (!t.addListener || !t.removeListener) throw Error(\"addEventListener and attachEvent are unavailable.\");\n      t.addListener(r);\n    }\n    return n;\n  }\n\n  function ju(t) {\n    if (!Rs(t) && t && !t.X) {\n      var e = t.src;\n      if (e && e[Ru]) Lu(e.c, t);else {\n        var n = t.type,\n            r = t.proxy;\n        e.removeEventListener ? e.removeEventListener(n, r, t.capture) : e.detachEvent ? e.detachEvent(Wu(n), r) : e.addListener && e.removeListener && e.removeListener(r), (n = Hu(e)) ? (Lu(n, t), 0 == n.b && (n.src = null, e[Uu] = null)) : Mu(t);\n      }\n    }\n  }\n\n  function Wu(t) {\n    return t in qu ? qu[t] : qu[t] = \"on\" + t;\n  }\n\n  function Ku(t, e) {\n    var n = t.listener,\n        r = t.da || t.src;\n    return t.Z && ju(t), n.call(r, e);\n  }\n\n  function Qu(t, e) {\n    return !!t.X || (Iu ? Ku(t, new ku(e, this)) : Ku(t, e = new ku(e || Os(\"window.event\"), this)));\n  }\n\n  function Hu(t) {\n    return (t = t[Uu]) instanceof xu ? t : null;\n  }\n\n  var Gu = \"__closure_events_fn_\" + (1e9 * Math.random() >>> 0);\n\n  function zu(e) {\n    return \"function\" == Ms(e) ? e : (e[Gu] || (e[Gu] = function (t) {\n      return e.handleEvent(t);\n    }), e[Gu]);\n  }\n\n  function Yu() {\n    Hs.call(this), this.c = new xu(this), (this.J = this).B = null;\n  }\n\n  function Xu(t, e, n, r) {\n    if (!(e = t.c.a[String(e)])) return !0;\n    e = e.concat();\n\n    for (var i = !0, o = 0; o < e.length; ++o) {\n      var a = e[o];\n\n      if (a && !a.X && a.capture == n) {\n        var s = a.listener,\n            u = a.da || a.src;\n        a.Z && Lu(t.c, a), i = !1 !== s.call(u, r) && i;\n      }\n    }\n\n    return i && 0 != r.Ja;\n  }\n\n  Qs(Yu, Hs), Yu.prototype[Ru] = !0, (Cs = Yu.prototype).addEventListener = function (t, e, n, r) {\n    Vu(this, t, e, n, r);\n  }, Cs.removeEventListener = function (t, e, n, r) {\n    !function t(e, n, r, i, o) {\n      if (xs(n)) for (var a = 0; a < n.length; a++) t(e, n[a], r, i, o);else i = Fs(i) ? !!i.capture : !!i, r = zu(r), e && e[Ru] ? (e = e.c, (n = String(n).toString()) in e.a && -1 < (r = Fu(a = e.a[n], r, i, o)) && (Mu(a[r]), Array.prototype.splice.call(a, r, 1), 0 == a.length && (delete e.a[n], e.b--))) : e && (e = Hu(e)) && (n = e.a[n.toString()], e = -1, n && (e = Fu(n, r, i, o)), (r = -1 < e ? n[e] : null) && ju(r));\n    }(this, t, e, n, r);\n  }, Cs.dispatchEvent = function (t) {\n    var e,\n        n = this.B;\n    if (n) for (e = []; n; n = n.B) e.push(n);\n    n = this.J;\n    var r = t.type || t;\n    if (Ds(t)) t = new Au(t, n);else if (t instanceof Au) t.target = t.target || n;else {\n      var i = t;\n      su(t = new Au(r, n), i);\n    }\n    if (i = !0, e) for (var o = e.length - 1; 0 <= o; o--) {\n      var a = t.a = e[o];\n      i = Xu(a, r, !0, t) && i;\n    }\n    if (i = Xu(a = t.a = n, r, !0, t) && i, i = Xu(a, r, !1, t) && i, e) for (o = 0; o < e.length; o++) i = Xu(a = t.a = e[o], r, !1, t) && i;\n    return i;\n  }, Cs.G = function () {\n    if (Yu.N.G.call(this), this.c) {\n      var t,\n          e = this.c;\n\n      for (t in e.a) {\n        for (var n = e.a[t], r = 0; r < n.length; r++) Mu(n[r]);\n\n        delete e.a[t], e.b--;\n      }\n    }\n\n    this.B = null;\n  }, Cs.Aa = function (t, e, n, r) {\n    return this.c.add(String(t), e, !1, n, r);\n  }, Cs.Ba = function (t, e, n, r) {\n    return this.c.add(String(t), e, !0, n, r);\n  };\n  var Ju = ks.JSON.stringify;\n\n  function $u(t, e) {\n    this.c = t, this.f = e, this.b = 0, this.a = null;\n  }\n\n  function Zu() {\n    this.b = this.a = null;\n  }\n\n  $u.prototype.get = function () {\n    if (0 < this.b) {\n      this.b--;\n      var t = this.a;\n      this.a = t.next, t.next = null;\n    } else t = this.c();\n\n    return t;\n  };\n\n  var tc,\n      ec = new $u(function () {\n    return new nc();\n  }, function (t) {\n    t.reset();\n  });\n\n  function nc() {\n    this.next = this.b = this.a = null;\n  }\n\n  function rc(t) {\n    ks.setTimeout(function () {\n      throw t;\n    }, 0);\n  }\n\n  function ic(t, e) {\n    var n;\n    tc || (n = ks.Promise.resolve(void 0), tc = function () {\n      n.then(sc);\n    }), oc || (tc(), oc = !0), ac.add(t, e);\n  }\n\n  Zu.prototype.add = function (t, e) {\n    var n = ec.get();\n    n.set(t, e), this.b ? this.b.next = n : this.a = n, this.b = n;\n  }, nc.prototype.set = function (t, e) {\n    this.a = t, this.b = e, this.next = null;\n  };\n  var oc = !(nc.prototype.reset = function () {\n    this.next = this.b = this.a = null;\n  }),\n      ac = new Zu();\n\n  function sc() {\n    for (var t; r = n = void 0, r = null, (n = ac).a && (r = n.a, n.a = n.a.next, n.a || (n.b = null), r.next = null), t = r;) {\n      try {\n        t.a.call(t.b);\n      } catch (t) {\n        rc(t);\n      }\n\n      var e = ec;\n      e.f(t), e.b < 100 && (e.b++, t.next = e.a, e.a = t);\n    }\n\n    var n, r;\n    oc = !1;\n  }\n\n  function uc(t, e) {\n    Yu.call(this), this.b = t || 1, this.a = e || ks, this.f = js(this.gb, this), this.g = Ks();\n  }\n\n  function cc(t) {\n    t.ba = !1, t.L && (t.a.clearTimeout(t.L), t.L = null);\n  }\n\n  function hc(t, e, n) {\n    if (\"function\" == Ms(t)) n && (t = js(t, n));else {\n      if (!t || \"function\" != typeof t.handleEvent) throw Error(\"Invalid listener argument\");\n      t = js(t.handleEvent, t);\n    }\n    return 2147483647 < Number(e) ? -1 : ks.setTimeout(t, e || 0);\n  }\n\n  function lc(t, e, n) {\n    Hs.call(this), this.f = null != n ? js(t, n) : t, this.c = e, this.b = js(this.ab, this), this.a = [];\n  }\n\n  function fc(t) {\n    t.U = hc(t.b, t.c), t.f.apply(null, t.a);\n  }\n\n  function pc(t) {\n    Hs.call(this), this.b = t, this.a = {};\n  }\n\n  Qs(uc, Yu), (Cs = uc.prototype).ba = !1, Cs.L = null, Cs.gb = function () {\n    if (this.ba) {\n      var t = Ks() - this.g;\n      0 < t && t < .8 * this.b ? this.L = this.a.setTimeout(this.f, this.b - t) : (this.L && (this.a.clearTimeout(this.L), this.L = null), this.dispatchEvent(\"tick\"), this.ba && (cc(this), this.start()));\n    }\n  }, Cs.start = function () {\n    this.ba = !0, this.L || (this.L = this.a.setTimeout(this.f, this.b), this.g = Ks());\n  }, Cs.G = function () {\n    uc.N.G.call(this), cc(this), delete this.a;\n  }, Qs(lc, Hs), (Cs = lc.prototype).ea = !1, Cs.U = null, Cs.Ua = function (t) {\n    this.a = arguments, this.U ? this.ea = !0 : fc(this);\n  }, Cs.G = function () {\n    lc.N.G.call(this), this.U && (ks.clearTimeout(this.U), this.U = null, this.ea = !1, this.a = []);\n  }, Cs.ab = function () {\n    this.U = null, this.ea && (this.ea = !1, fc(this));\n  }, Qs(pc, Hs);\n  var dc = [];\n\n  function yc(t, e, n, r) {\n    xs(n) || (n && (dc[0] = n.toString()), n = dc);\n\n    for (var i = 0; i < n.length; i++) {\n      var o = Vu(e, n[i], r || t.handleEvent, !1, t.b || t);\n      if (!o) break;\n      t.a[o.key] = o;\n    }\n  }\n\n  function mc(t) {\n    iu(t.a, function (t, e) {\n      this.a.hasOwnProperty(e) && ju(t);\n    }, t), t.a = {};\n  }\n\n  function gc() {}\n\n  pc.prototype.G = function () {\n    pc.N.G.call(this), mc(this);\n  }, pc.prototype.handleEvent = function () {\n    throw Error(\"EventHandler.handleEvent not implemented\");\n  };\n  var vc = new Yu();\n\n  function bc(t) {\n    Au.call(this, \"serverreachability\", t);\n  }\n\n  function wc(t) {\n    vc.dispatchEvent(new bc(vc, t));\n  }\n\n  function _c(t) {\n    Au.call(this, \"statevent\", t);\n  }\n\n  function Ec(t) {\n    vc.dispatchEvent(new _c(vc, t));\n  }\n\n  function Tc(t) {\n    Au.call(this, \"timingevent\", t);\n  }\n\n  function Sc(t, e) {\n    if (\"function\" != Ms(t)) throw Error(\"Fn must not be null and must be a function\");\n    return ks.setTimeout(function () {\n      t();\n    }, e);\n  }\n\n  Qs(bc, Au), Qs(_c, Au), Qs(Tc, Au);\n  var Ic = {\n    NO_ERROR: 0,\n    hb: 1,\n    ob: 2,\n    nb: 3,\n    kb: 4,\n    mb: 5,\n    pb: 6,\n    Ma: 7,\n    TIMEOUT: 8,\n    sb: 9\n  },\n      Cc = {\n    jb: \"complete\",\n    wb: \"success\",\n    Na: \"error\",\n    Ma: \"abort\",\n    ub: \"ready\",\n    vb: \"readystatechange\",\n    TIMEOUT: \"timeout\",\n    qb: \"incrementaldata\",\n    tb: \"progress\",\n    lb: \"downloadprogress\",\n    xb: \"uploadprogress\"\n  };\n\n  function Nc() {}\n\n  function Ac(t) {\n    var e;\n    return (e = t.a) || (e = t.a = {}), e;\n  }\n\n  function kc() {}\n\n  Nc.prototype.a = null;\n  var Dc,\n      Rc = {\n    OPEN: \"a\",\n    ib: \"b\",\n    Na: \"c\",\n    rb: \"d\"\n  };\n\n  function Oc() {\n    Au.call(this, \"d\");\n  }\n\n  function Pc() {\n    Au.call(this, \"c\");\n  }\n\n  function Mc() {}\n\n  function xc(t, e, n) {\n    this.g = t, this.W = e, this.V = n || 1, this.I = new pc(this), this.O = Lc, t = du ? 125 : void 0, this.P = new uc(t), this.h = null, this.b = !1, this.l = this.D = this.f = this.F = this.v = this.R = this.i = null, this.j = [], this.a = null, this.A = 0, this.c = this.w = null, this.o = -1, this.m = !1, this.J = 0, this.B = null, this.s = this.S = this.H = !1;\n  }\n\n  Qs(Oc, Au), Qs(Pc, Au), Qs(Mc, Nc), Dc = new Mc();\n  var Lc = 45e3,\n      Fc = {},\n      Uc = {};\n\n  function qc(t, e, n) {\n    t.F = 1, t.f = hh(rh(e)), t.l = n, t.H = !0, Bc(t, null);\n  }\n\n  function Vc(t, e, n, r) {\n    t.F = 1, t.f = hh(rh(e)), t.l = null, t.H = n, Bc(t, r);\n  }\n\n  function Bc(t, e) {\n    t.v = Ks(), Kc(t), t.D = rh(t.f), ch(t.D, \"t\", t.V), t.A = 0, t.a = t.g.$(t.g.Y() ? e : null), 0 < t.J && (t.B = new lc(js(t.Ka, t, t.a), t.J)), yc(t.I, t.a, \"readystatechange\", t.eb), e = t.h ? ou(t.h) : {}, t.l ? (t.w || (t.w = \"POST\"), e[\"Content-Type\"] = \"application/x-www-form-urlencoded\", t.a.ca(t.D, t.w, t.l, e)) : (t.w = \"GET\", t.a.ca(t.D, t.w, null, e)), wc(1);\n  }\n\n  function jc(t, e, n) {\n    for (var r = !0; !t.m && t.A < n.length;) {\n      var i = Wc(t, n);\n\n      if (i == Uc) {\n        4 == e && (t.c = 4, Ec(14), r = !1);\n        break;\n      }\n\n      if (i == Fc) {\n        t.c = 4, Ec(15), r = !1;\n        break;\n      }\n\n      Yc(t, i);\n    }\n\n    4 == e && 0 == n.length && (t.c = 1, Ec(16), r = !1), t.b = t.b && r, r || (zc(t), Gc(t));\n  }\n\n  function Wc(t, e) {\n    var n = t.A,\n        r = e.indexOf(\"\\n\", n);\n    return -1 == r ? Uc : (n = Number(e.substring(n, r)), isNaN(n) ? Fc : (r += 1) + n > e.length ? Uc : (e = e.substr(r, n), t.A = r + n, e));\n  }\n\n  function Kc(t) {\n    t.R = Ks() + t.O, Qc(t, t.O);\n  }\n\n  function Qc(t, e) {\n    if (null != t.i) throw Error(\"WatchDog timer not null\");\n    t.i = Sc(js(t.bb, t), e);\n  }\n\n  function Hc(t) {\n    t.i && (ks.clearTimeout(t.i), t.i = null);\n  }\n\n  function Gc(t) {\n    t.g.Da() || t.m || t.g.na(t);\n  }\n\n  function zc(t) {\n    Hc(t);\n    var e = t.B;\n    e && \"function\" == typeof e.la && e.la(), t.B = null, cc(t.P), mc(t.I), t.a && (e = t.a, t.a = null, e.abort(), e.la());\n  }\n\n  function Yc(t, e) {\n    try {\n      t.g.Ga(t, e), wc(4);\n    } catch (t) {}\n  }\n\n  function Xc(t, e) {\n    if (t.forEach && \"function\" == typeof t.forEach) t.forEach(e, void 0);else if (Ls(t) || Ds(t)) zs(t, e, void 0);else {\n      if (t.K && \"function\" == typeof t.K) var n = t.K();else if (t.C && \"function\" == typeof t.C) n = void 0;else if (Ls(t) || Ds(t)) {\n        n = [];\n\n        for (var r = t.length, i = 0; i < r; i++) n.push(i);\n      } else for (i in n = [], r = 0, t) n[r++] = i;\n\n      i = (r = function (t) {\n        if (t.C && \"function\" == typeof t.C) return t.C();\n        if (Ds(t)) return t.split(\"\");\n\n        if (Ls(t)) {\n          for (var e = [], n = t.length, r = 0; r < n; r++) e.push(t[r]);\n\n          return e;\n        }\n\n        for (r in e = [], n = 0, t) e[n++] = t[r];\n\n        return e;\n      }(t)).length;\n\n      for (var o = 0; o < i; o++) e.call(void 0, r[o], n && n[o], t);\n    }\n  }\n\n  function Jc(t, e) {\n    this.b = {}, this.a = [], this.c = 0;\n    var n = arguments.length;\n\n    if (1 < n) {\n      if (n % 2) throw Error(\"Uneven number of arguments\");\n\n      for (var r = 0; r < n; r += 2) this.set(arguments[r], arguments[r + 1]);\n    } else if (t) if (t instanceof Jc) for (n = t.K(), r = 0; r < n.length; r++) this.set(n[r], t.get(n[r]));else for (r in t) this.set(r, t[r]);\n  }\n\n  function $c(t, e) {\n    th(t.b, e) && (delete t.b[e], t.c--, t.a.length > 2 * t.c && Zc(t));\n  }\n\n  function Zc(t) {\n    if (t.c != t.a.length) {\n      for (var e = 0, n = 0; e < t.a.length;) {\n        var r = t.a[e];\n        th(t.b, r) && (t.a[n++] = r), e++;\n      }\n\n      t.a.length = n;\n    }\n\n    if (t.c != t.a.length) {\n      var i = {};\n\n      for (n = e = 0; e < t.a.length;) th(i, r = t.a[e]) || (i[t.a[n++] = r] = 1), e++;\n\n      t.a.length = n;\n    }\n  }\n\n  function th(t, e) {\n    return Object.prototype.hasOwnProperty.call(t, e);\n  }\n\n  (Cs = xc.prototype).setTimeout = function (t) {\n    this.O = t;\n  }, Cs.eb = function (t) {\n    t = t.target;\n    var e = this.B;\n    e && 3 == rl(t) ? e.Ua() : this.Ka(t);\n  }, Cs.Ka = function (t) {\n    try {\n      if (t == this.a) t: {\n        var e = rl(this.a),\n            n = this.a.ya(),\n            r = this.a.T();\n\n        if (!(e < 3 || 3 == e && !du && !this.a.aa())) {\n          this.m || 4 != e || 7 == n || wc(8 == n || r <= 0 ? 3 : 2), Hc(this);\n          var i = this.a.T();\n          this.o = i;\n          var o = this.a.aa();\n\n          if (this.b = 200 == i) {\n            if (this.S && !this.s) {\n              e: {\n                if (this.a) {\n                  var a = il(this.a, \"X-HTTP-Initial-Response\");\n\n                  if (a && !Js(a)) {\n                    var s = a;\n                    break e;\n                  }\n                }\n\n                s = null;\n              }\n\n              if (!s) {\n                this.b = !1, this.c = 3, Ec(12), zc(this), Gc(this);\n                break t;\n              }\n\n              this.s = !0, Yc(this, s);\n            }\n\n            this.H ? (jc(this, e, o), du && this.b && 3 == e && (yc(this.I, this.P, \"tick\", this.cb), this.P.start())) : Yc(this, o), 4 == e && zc(this), this.b && !this.m && (4 == e ? this.g.na(this) : (this.b = !1, Kc(this)));\n          } else 400 == i && 0 < o.indexOf(\"Unknown SID\") ? (this.c = 3, Ec(12)) : (this.c = 0, Ec(13)), zc(this), Gc(this);\n        }\n      }\n    } catch (t) {}\n  }, Cs.cb = function () {\n    if (this.a) {\n      var t = rl(this.a),\n          e = this.a.aa();\n      this.A < e.length && (Hc(this), jc(this, t, e), this.b && 4 != t && Kc(this));\n    }\n  }, Cs.cancel = function () {\n    this.m = !0, zc(this);\n  }, Cs.bb = function () {\n    this.i = null;\n    var t = Ks();\n    0 <= t - this.R ? (2 != this.F && (wc(3), Ec(17)), zc(this), this.c = 2, Gc(this)) : Qc(this, this.R - t);\n  }, (Cs = Jc.prototype).C = function () {\n    Zc(this);\n\n    for (var t = [], e = 0; e < this.a.length; e++) t.push(this.b[this.a[e]]);\n\n    return t;\n  }, Cs.K = function () {\n    return Zc(this), this.a.concat();\n  }, Cs.get = function (t, e) {\n    return th(this.b, t) ? this.b[t] : e;\n  }, Cs.set = function (t, e) {\n    th(this.b, t) || (this.c++, this.a.push(t)), this.b[t] = e;\n  }, Cs.forEach = function (t, e) {\n    for (var n = this.K(), r = 0; r < n.length; r++) {\n      var i = n[r],\n          o = this.get(i);\n      t.call(e, o, i, this);\n    }\n  };\n  var eh = /^(?:([^:/?#.]+):)?(?:\\/\\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$/;\n\n  function nh(t, e) {\n    var n;\n    this.b = this.j = this.f = \"\", this.i = null, this.g = this.a = \"\", this.h = !1, t instanceof nh ? (this.h = void 0 !== e ? e : t.h, ih(this, t.f), this.j = t.j, oh(this, t.b), ah(this, t.i), this.a = t.a, sh(this, Sh(t.c)), this.g = t.g) : t && (n = String(t).match(eh)) ? (this.h = !!e, ih(this, n[1] || \"\", !0), this.j = lh(n[2] || \"\"), oh(this, n[3] || \"\", !0), ah(this, n[4]), this.a = lh(n[5] || \"\", !0), sh(this, n[6] || \"\", !0), this.g = lh(n[7] || \"\")) : (this.h = !!e, this.c = new bh(null, this.h));\n  }\n\n  function rh(t) {\n    return new nh(t);\n  }\n\n  function ih(t, e, n) {\n    t.f = n ? lh(e, !0) : e, t.f && (t.f = t.f.replace(/:$/, \"\"));\n  }\n\n  function oh(t, e, n) {\n    t.b = n ? lh(e, !0) : e;\n  }\n\n  function ah(t, e) {\n    if (e) {\n      if (e = Number(e), isNaN(e) || e < 0) throw Error(\"Bad port number \" + e);\n      t.i = e;\n    } else t.i = null;\n  }\n\n  function sh(t, e, n) {\n    var r, i;\n    e instanceof bh ? (t.c = e, r = t.c, (i = t.h) && !r.f && (wh(r), r.c = null, r.a.forEach(function (t, e) {\n      var n = e.toLowerCase();\n      e != n && (_h(this, e), Th(this, n, t));\n    }, r)), r.f = i) : (n || (e = fh(e, gh)), t.c = new bh(e, t.h));\n  }\n\n  function uh(t, e, n) {\n    t.c.set(e, n);\n  }\n\n  function ch(t, e, n) {\n    xs(n) || (n = [String(n)]), Th(t.c, e, n);\n  }\n\n  function hh(t) {\n    return uh(t, \"zx\", Math.floor(2147483648 * Math.random()).toString(36) + Math.abs(Math.floor(2147483648 * Math.random()) ^ Ks()).toString(36)), t;\n  }\n\n  function lh(t, e) {\n    return t ? e ? decodeURI(t.replace(/%25/g, \"%2525\")) : decodeURIComponent(t) : \"\";\n  }\n\n  function fh(t, e, n) {\n    return Ds(t) ? (t = encodeURI(t).replace(e, ph), n && (t = t.replace(/%25([0-9a-fA-F]{2})/g, \"%$1\")), t) : null;\n  }\n\n  function ph(t) {\n    return \"%\" + ((t = t.charCodeAt(0)) >> 4 & 15).toString(16) + (15 & t).toString(16);\n  }\n\n  nh.prototype.toString = function () {\n    var t = [],\n        e = this.f;\n    e && t.push(fh(e, dh, !0), \":\");\n    var n = this.b;\n    return (n || \"file\" == e) && (t.push(\"//\"), (e = this.j) && t.push(fh(e, dh, !0), \"@\"), t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g, \"%$1\")), null != (n = this.i) && t.push(\":\", String(n))), (n = this.a) && (this.b && \"/\" != n.charAt(0) && t.push(\"/\"), t.push(fh(n, \"/\" == n.charAt(0) ? mh : yh, !0))), (n = this.c.toString()) && t.push(\"?\", n), (n = this.g) && t.push(\"#\", fh(n, vh)), t.join(\"\");\n  }, nh.prototype.resolve = function (t) {\n    var e = rh(this),\n        n = !!t.f;\n    n ? ih(e, t.f) : n = !!t.j, n ? e.j = t.j : n = !!t.b, n ? oh(e, t.b) : n = null != t.i;\n    var r = t.a;\n    if (n) ah(e, t.i);else if (n = !!t.a) {\n      if (\"/\" != r.charAt(0)) if (this.b && !this.a) r = \"/\" + r;else {\n        var i = e.a.lastIndexOf(\"/\");\n        -1 != i && (r = e.a.substr(0, i + 1) + r);\n      }\n      if (\"..\" == (i = r) || \".\" == i) r = \"\";else if (tu(i, \"./\") || tu(i, \"/.\")) {\n        r = 0 == i.lastIndexOf(\"/\", 0), i = i.split(\"/\");\n\n        for (var o = [], a = 0; a < i.length;) {\n          var s = i[a++];\n          \".\" == s ? r && a == i.length && o.push(\"\") : \"..\" == s ? ((1 < o.length || 1 == o.length && \"\" != o[0]) && o.pop(), r && a == i.length && o.push(\"\")) : (o.push(s), r = !0);\n        }\n\n        r = o.join(\"/\");\n      } else r = i;\n    }\n    return n ? e.a = r : n = \"\" !== t.c.toString(), n ? sh(e, Sh(t.c)) : n = !!t.g, n && (e.g = t.g), e;\n  };\n  var dh = /[#\\/\\?@]/g,\n      yh = /[#\\?:]/g,\n      mh = /[#\\?]/g,\n      gh = /[#\\?@]/g,\n      vh = /#/g;\n\n  function bh(t, e) {\n    this.b = this.a = null, this.c = t || null, this.f = !!e;\n  }\n\n  function wh(n) {\n    n.a || (n.a = new Jc(), n.b = 0, n.c && function (t, e) {\n      if (t) {\n        t = t.split(\"&\");\n\n        for (var n = 0; n < t.length; n++) {\n          var r = t[n].indexOf(\"=\"),\n              i = null;\n\n          if (0 <= r) {\n            var o = t[n].substring(0, r);\n            i = t[n].substring(r + 1);\n          } else o = t[n];\n\n          e(o, i ? decodeURIComponent(i.replace(/\\+/g, \" \")) : \"\");\n        }\n      }\n    }(n.c, function (t, e) {\n      n.add(decodeURIComponent(t.replace(/\\+/g, \" \")), e);\n    }));\n  }\n\n  function _h(t, e) {\n    wh(t), e = Ih(t, e), th(t.a.b, e) && (t.c = null, t.b -= t.a.get(e).length, $c(t.a, e));\n  }\n\n  function Eh(t, e) {\n    return wh(t), e = Ih(t, e), th(t.a.b, e);\n  }\n\n  function Th(t, e, n) {\n    _h(t, e), 0 < n.length && (t.c = null, t.a.set(Ih(t, e), Xs(n)), t.b += n.length);\n  }\n\n  function Sh(t) {\n    var e = new bh();\n    return e.c = t.c, t.a && (e.a = new Jc(t.a), e.b = t.b), e;\n  }\n\n  function Ih(t, e) {\n    return e = String(e), t.f && (e = e.toLowerCase()), e;\n  }\n\n  function Ch(t) {\n    this.a = t, this.b = this.h = null, this.g = !1, this.i = null, this.c = -1, this.l = this.f = null;\n  }\n\n  function Nh(t) {\n    var e = t.a.F.a;\n    if (null != e) Ec(4), e ? (Ec(10), ml(t.a, t, !1)) : (Ec(11), ml(t.a, t, !0));else {\n      t.b = new xc(t, void 0, void 0), t.b.h = t.h, e = _l(e = t.a, e.Y() ? t.f : null, t.i), Ec(4), ch(e, \"TYPE\", \"xmlhttp\");\n      var n = t.a.j,\n          r = t.a.I;\n      n && r && uh(e, n, r), Vc(t.b, e, !1, t.f);\n    }\n  }\n\n  function Ah() {\n    this.a = this.b = null;\n  }\n\n  function kh() {\n    this.a = new Jc();\n  }\n\n  function Dh(t) {\n    var e = typeof t;\n    return \"object\" == e && t || \"function\" == e ? \"o\" + (t[Us] || (t[Us] = ++qs)) : e.charAt(0) + t;\n  }\n\n  function Rh(t, e) {\n    this.b = t, this.a = e;\n  }\n\n  function Oh(t) {\n    this.g = t || Ph, t = ks.PerformanceNavigationTiming ? 0 < (t = ks.performance.getEntriesByType(\"navigation\")).length && (\"hq\" == t[0].nextHopProtocol || \"h2\" == t[0].nextHopProtocol) : !!(ks.ka && ks.ka.Ea && ks.ka.Ea() && ks.ka.Ea().zb), this.f = t ? this.g : 1, this.a = null, 1 < this.f && (this.a = new kh()), this.b = null, this.c = [];\n  }\n\n  (Cs = bh.prototype).add = function (t, e) {\n    wh(this), this.c = null, t = Ih(this, t);\n    var n = this.a.get(t);\n    return n || this.a.set(t, n = []), n.push(e), this.b += 1, this;\n  }, Cs.forEach = function (n, r) {\n    wh(this), this.a.forEach(function (t, e) {\n      zs(t, function (t) {\n        n.call(r, t, e, this);\n      }, this);\n    }, this);\n  }, Cs.K = function () {\n    wh(this);\n\n    for (var t = this.a.C(), e = this.a.K(), n = [], r = 0; r < e.length; r++) for (var i = t[r], o = 0; o < i.length; o++) n.push(e[r]);\n\n    return n;\n  }, Cs.C = function (t) {\n    wh(this);\n    var e = [];\n    if (Ds(t)) Eh(this, t) && (e = Ys(e, this.a.get(Ih(this, t))));else {\n      t = this.a.C();\n\n      for (var n = 0; n < t.length; n++) e = Ys(e, t[n]);\n    }\n    return e;\n  }, Cs.set = function (t, e) {\n    return wh(this), this.c = null, Eh(this, t = Ih(this, t)) && (this.b -= this.a.get(t).length), this.a.set(t, [e]), this.b += 1, this;\n  }, Cs.get = function (t, e) {\n    return t && 0 < (t = this.C(t)).length ? String(t[0]) : e;\n  }, Cs.toString = function () {\n    if (this.c) return this.c;\n    if (!this.a) return \"\";\n\n    for (var t = [], e = this.a.K(), n = 0; n < e.length; n++) {\n      var r = e[n],\n          i = encodeURIComponent(String(r));\n      r = this.C(r);\n\n      for (var o = 0; o < r.length; o++) {\n        var a = i;\n        \"\" !== r[o] && (a += \"=\" + encodeURIComponent(String(r[o]))), t.push(a);\n      }\n    }\n\n    return this.c = t.join(\"&\");\n  }, Qs(function () {}, function () {}), (Cs = Ch.prototype).M = null, Cs.$ = function (t) {\n    return this.a.$(t);\n  }, Cs.abort = function () {\n    this.b && (this.b.cancel(), this.b = null), this.c = -1;\n  }, Cs.Da = function () {\n    return !1;\n  }, Cs.Ga = function (t, e) {\n    if (this.c = t.o, 0 == this.M) {\n      if (!this.a.o && (t = t.a)) {\n        var n = il(t, \"X-Client-Wire-Protocol\");\n        this.l = n || null, this.a.j && (t = il(t, \"X-HTTP-Session-Id\")) && (this.a.I = t);\n      }\n\n      if (e) {\n        try {\n          var r = this.a.ja.a.parse(e);\n        } catch (t) {\n          return (e = this.a).m = this.c, void bl(e, 2);\n        }\n\n        this.f = r[0];\n      } else (e = this.a).m = this.c, bl(e, 2);\n    } else 1 == this.M && (this.g ? Ec(6) : \"11111\" == e ? (Ec(5), this.g = !0, (!fu || 10 <= Number(_u)) && (this.c = 200, this.b.cancel(), Ec(11), ml(this.a, this, !0))) : (Ec(7), this.g = !1));\n  }, Cs.na = function () {\n    if (this.c = this.b.o, this.b.b) 0 == this.M ? (this.M = 1, Nh(this)) : 1 == this.M && (this.g ? (Ec(11), ml(this.a, this, !0)) : (Ec(10), ml(this.a, this, !1)));else {\n      0 == this.M ? Ec(8) : 1 == this.M && Ec(9);\n      var t = this.a;\n      t.m = this.c, bl(t, 2);\n    }\n  }, Cs.Y = function () {\n    return this.a.Y();\n  }, Cs.ma = function () {\n    return this.a.ma();\n  }, kh.prototype.add = function (t) {\n    this.a.set(Dh(t), t);\n  }, kh.prototype.C = function () {\n    return this.a.C();\n  };\n  var Ph = 10;\n\n  function Mh(t, e) {\n    !t.a && (tu(e, \"spdy\") || tu(e, \"quic\") || tu(e, \"h2\")) && (t.f = t.g, t.a = new kh(), t.b && (Uh(t, t.b), t.b = null));\n  }\n\n  function xh(t) {\n    return !!t.b || !!t.a && t.a.a.c >= t.f;\n  }\n\n  function Lh(t) {\n    return t.b ? 1 : t.a ? t.a.a.c : 0;\n  }\n\n  function Fh(t, e) {\n    return t = t.b ? t.b == e : !!t.a && (e = Dh(e), th(t.a.a.b, e));\n  }\n\n  function Uh(t, e) {\n    t.a ? t.a.add(e) : t.b = e;\n  }\n\n  function qh(t, e) {\n    var n;\n    t.b && t.b == e ? t.b = null : ((n = t.a) && (n = Dh(e), n = th(t.a.a.b, n)), n && $c(t.a.a, Dh(e)));\n  }\n\n  function Vh(t) {\n    if (null != t.b) return t.c.concat(t.b.j);\n    if (null == t.a || 0 == t.a.a.c) return Xs(t.c);\n    var e = t.c;\n    return zs(t.a.C(), function (t) {\n      e = e.concat(t.j);\n    }), e;\n  }\n\n  function Bh() {}\n\n  function jh() {\n    this.a = new Bh();\n  }\n\n  function Wh(t, r, e) {\n    var i = e || \"\";\n\n    try {\n      Xc(t, function (t, e) {\n        var n = t;\n        Fs(t) && (n = Ju(t)), r.push(i + e + \"=\" + encodeURIComponent(n));\n      });\n    } catch (t) {\n      throw r.push(i + \"type=\" + encodeURIComponent(\"_badmap\")), t;\n    }\n  }\n\n  function Kh(t, e, n, r, i) {\n    try {\n      e.onload = null, e.onerror = null, e.onabort = null, e.ontimeout = null, i(r);\n    } catch (t) {}\n  }\n\n  Oh.prototype.cancel = function () {\n    var t;\n    this.c = Vh(this), this.b ? (this.b.cancel(), this.b = null) : this.a && 0 != this.a.a.c && (zs(this.a.C(), function (t) {\n      t.cancel();\n    }), (t = this.a.a).b = {}, t.a.length = 0, t.c = 0);\n  }, Bh.prototype.stringify = function (t) {\n    return ks.JSON.stringify(t, void 0);\n  }, Bh.prototype.parse = function (t) {\n    return ks.JSON.parse(t, void 0);\n  };\n  var Qh = ks.JSON.parse;\n\n  function Gh(t) {\n    Yu.call(this), this.headers = new Jc(), this.H = t || null, this.b = !1, this.s = this.a = null, this.A = \"\", this.h = 0, this.f = \"\", this.g = this.w = this.l = this.v = !1, this.o = 0, this.m = null, this.I = zh, this.D = this.F = !1;\n  }\n\n  Qs(Gh, Yu);\n  var zh = \"\",\n      Yh = /^https?$/i,\n      Xh = [\"POST\", \"PUT\"];\n\n  function Jh(t) {\n    return \"content-type\" == t.toLowerCase();\n  }\n\n  function $h(t, e) {\n    t.b = !1, t.a && (t.g = !0, t.a.abort(), t.g = !1), t.f = e, t.h = 5, Zh(t), el(t);\n  }\n\n  function Zh(t) {\n    t.v || (t.v = !0, t.dispatchEvent(\"complete\"), t.dispatchEvent(\"error\"));\n  }\n\n  function tl(t) {\n    if (t.b && void 0 !== As && (!t.s[1] || 4 != rl(t) || 2 != t.T())) if (t.l && 4 == rl(t)) hc(t.Fa, 0, t);else if (t.dispatchEvent(\"readystatechange\"), 4 == rl(t)) {\n      t.b = !1;\n\n      try {\n        var e,\n            n = t.T();\n\n        t: switch (n) {\n          case 200:\n          case 201:\n          case 202:\n          case 204:\n          case 206:\n          case 304:\n          case 1223:\n            var r = !0;\n            break t;\n\n          default:\n            r = !1;\n        }\n\n        if (!(e = r)) {\n          var i;\n\n          if (i = 0 === n) {\n            var o = String(t.A).match(eh)[1] || null;\n\n            if (!o && ks.self && ks.self.location) {\n              var a = ks.self.location.protocol;\n              o = a.substr(0, a.length - 1);\n            }\n\n            i = !Yh.test(o ? o.toLowerCase() : \"\");\n          }\n\n          e = i;\n        }\n\n        e ? (t.dispatchEvent(\"complete\"), t.dispatchEvent(\"success\")) : (t.h = 6, t.f = t.za() + \" [\" + t.T() + \"]\", Zh(t));\n      } finally {\n        el(t);\n      }\n    }\n  }\n\n  function el(t, e) {\n    if (t.a) {\n      nl(t);\n      var n = t.a,\n          r = t.s[0] ? Ps : null;\n      t.a = null, t.s = null, e || t.dispatchEvent(\"ready\");\n\n      try {\n        n.onreadystatechange = r;\n      } catch (t) {}\n    }\n  }\n\n  function nl(t) {\n    t.a && t.D && (t.a.ontimeout = null), t.m && (ks.clearTimeout(t.m), t.m = null);\n  }\n\n  function rl(t) {\n    return t.a ? t.a.readyState : 0;\n  }\n\n  function il(t, e) {\n    return t.a ? t.a.getResponseHeader(e) : null;\n  }\n\n  function ol(t, e, n) {\n    t: {\n      for (r in n) {\n        var r = !1;\n        break t;\n      }\n\n      r = !0;\n    }\n\n    if (r) return t;\n    var i;\n\n    if (i = \"\", iu(n, function (t, e) {\n      i += e, i += \":\", i += t, i += \"\\r\\n\";\n    }), n = i, Ds(t)) {\n      if (e = encodeURIComponent(String(e)), e += n = null != n ? \"=\" + encodeURIComponent(String(n)) : \"\") {\n        if ((n = t.indexOf(\"#\")) < 0 && (n = t.length), (r = t.indexOf(\"?\")) < 0 || n < r) {\n          r = n;\n          var o = \"\";\n        } else o = t.substring(r + 1, n);\n\n        n = (t = [t.substr(0, r), o, t.substr(n)])[1], t[1] = e ? n ? n + \"&\" + e : e : n, t = t[0] + (t[1] ? \"?\" + t[1] : \"\") + t[2];\n      }\n\n      return t;\n    }\n\n    return uh(t, e, n), t;\n  }\n\n  function al(t) {\n    this.f = [], this.F = new Ah(), this.ga = this.pa = this.B = this.ha = this.a = this.I = this.j = this.V = this.g = this.J = this.i = null, this.Ra = this.P = 0, this.Pa = !!Os(\"internalChannelParams.failFast\", t), this.ia = this.w = this.s = this.l = this.h = this.c = null, this.oa = !0, this.m = this.ra = this.O = -1, this.S = this.v = this.A = 0, this.Oa = Os(\"internalChannelParams.baseRetryDelayMs\", t) || 5e3, this.Sa = Os(\"internalChannelParams.retryDelaySeedMs\", t) || 1e4, this.Qa = Os(\"internalChannelParams.forwardChannelMaxRetries\", t) || 2, this.qa = Os(\"internalChannelParams.forwardChannelRequestTimeoutMs\", t) || 2e4, this.La = t && t.Ab || void 0, this.D = void 0, this.R = t && t.supportsCrossDomainXhr || !1, this.H = \"\", this.b = new Oh(t && t.concurrentRequestLimit), this.ja = new jh(), this.o = !t || void 0 === t.backgroundChannelTest || t.backgroundChannelTest, (this.W = t && t.fastHandshake || !1) && !this.o && (this.o = !0), t && t.forceLongPolling && (this.oa = !1), this.fa = void 0;\n  }\n\n  function sl(t) {\n    if (ul(t), 3 == t.u) {\n      var e = t.P++,\n          n = rh(t.B);\n      uh(n, \"SID\", t.H), uh(n, \"RID\", e), uh(n, \"TYPE\", \"terminate\"), fl(t, n), (e = new xc(t, e, void 0)).F = 2, e.f = hh(rh(n)), n = !1, ks.navigator && ks.navigator.sendBeacon && (n = ks.navigator.sendBeacon(e.f.toString(), \"\")), !n && ks.Image && (new Image().src = e.f, n = !0), n || (e.a = e.g.$(null), e.a.ca(e.f)), e.v = Ks(), Kc(e);\n    }\n\n    wl(t);\n  }\n\n  function ul(t) {\n    t.w && (t.w.abort(), t.w = null), t.a && (t.a.cancel(), t.a = null), t.l && (ks.clearTimeout(t.l), t.l = null), gl(t), t.b.cancel(), t.h && (Rs(t.h) && ks.clearTimeout(t.h), t.h = null);\n  }\n\n  function cl(t, e) {\n    t.f.push(new Rh(t.Ra++, e)), 3 == t.u && hl(t);\n  }\n\n  function hl(t) {\n    xh(t.b) || t.h || (t.h = !0, ic(t.Ia, t), t.A = 0);\n  }\n\n  function ll(t, e) {\n    var n;\n    n = e ? e.W : t.P++;\n    var r = rh(t.B);\n    uh(r, \"SID\", t.H), uh(r, \"RID\", n), uh(r, \"AID\", t.O), fl(t, r), t.g && t.i && ol(r, t.g, t.i), n = new xc(t, n, t.A + 1), null === t.g && (n.h = t.i), e && (t.f = e.j.concat(t.f)), e = pl(t, n, 1e3), n.setTimeout(Math.round(.5 * t.qa) + Math.round(.5 * t.qa * Math.random())), Uh(t.b, n), qc(n, r, e);\n  }\n\n  function fl(t, n) {\n    t.c && Xc({}, function (t, e) {\n      uh(n, e, t);\n    });\n  }\n\n  function pl(t, e, n) {\n    n = Math.min(t.f.length, n);\n    var r = t.c ? js(t.c.Ta, t.c, t) : null;\n\n    t: for (var i = t.f, o = -1;;) {\n      var a = [\"count=\" + n];\n      -1 == o ? 0 < n ? (o = i[0].b, a.push(\"ofs=\" + o)) : o = 0 : a.push(\"ofs=\" + o);\n\n      for (var s = !0, u = 0; u < n; u++) {\n        var c = i[u].b,\n            h = i[u].a;\n        if ((c -= o) < 0) o = Math.max(0, i[u].b - 100), s = !1;else try {\n          Wh(h, a, \"req\" + c + \"_\");\n        } catch (t) {\n          r && r(h);\n        }\n      }\n\n      if (s) {\n        r = a.join(\"&\");\n        break t;\n      }\n    }\n\n    return t = t.f.splice(0, n), e.j = t, r;\n  }\n\n  function dl(t) {\n    t.a || t.l || (t.S = 1, ic(t.Ha, t), t.v = 0);\n  }\n\n  function yl(t) {\n    return !(t.a || t.l || 3 <= t.v) && (t.S++, t.l = Sc(js(t.Ha, t), vl(t, t.v)), t.v++, !0);\n  }\n\n  function ml(t, e, n) {\n    var r = e.l;\n    r && Mh(t.b, r), t.ia = t.oa && n, t.m = e.c, t.B = _l(t, null, t.ha), hl(t);\n  }\n\n  function gl(t) {\n    null != t.s && (ks.clearTimeout(t.s), t.s = null);\n  }\n\n  function vl(t, e) {\n    var n = t.Oa + Math.floor(Math.random() * t.Sa);\n    return t.ma() || (n *= 2), n * e;\n  }\n\n  function bl(t, e) {\n    if (2 == e) {\n      var n = null;\n      t.c && (n = null);\n      var r = js(t.fb, t);\n      n || (n = new nh(\"//www.google.com/images/cleardot.gif\"), ks.location && \"http\" == ks.location.protocol || ih(n, \"https\"), hh(n)), function (t, e) {\n        var n = new gc();\n\n        if (ks.Image) {\n          var r = new Image();\n          r.onload = Ws(Kh, n, r, \"TestLoadImage: loaded\", !0, e), r.onerror = Ws(Kh, n, r, \"TestLoadImage: error\", !1, e), r.onabort = Ws(Kh, n, r, \"TestLoadImage: abort\", !1, e), r.ontimeout = Ws(Kh, n, r, \"TestLoadImage: timeout\", !1, e), ks.setTimeout(function () {\n            r.ontimeout && r.ontimeout();\n          }, 1e4), r.src = t;\n        } else e(!1);\n      }(n.toString(), r);\n    } else Ec(2);\n\n    t.u = 0, t.c && t.c.ta(e), wl(t), ul(t);\n  }\n\n  function wl(t) {\n    t.u = 0, t.m = -1, t.c && (0 == Vh(t.b).length && 0 == t.f.length || (t.b.c.length = 0, Xs(t.f), t.f.length = 0), t.c.sa());\n  }\n\n  function _l(t, e, n) {\n    var r,\n        i,\n        o,\n        a,\n        s,\n        u,\n        c = (r = n) instanceof nh ? rh(r) : new nh(r, void 0);\n    if (\"\" != c.b) e && oh(c, e + \".\" + c.b), ah(c, c.i);else {\n      var h,\n          l = ks.location;\n      h = e ? e + \".\" + l.hostname : l.hostname, i = l.protocol, o = h, a = +l.port, s = n, u = new nh(null, void 0), i && ih(u, i), o && oh(u, o), a && ah(u, a), s && (u.a = s), c = u;\n    }\n    return t.V && iu(t.V, function (t, e) {\n      uh(c, e, t);\n    }), e = t.j, n = t.I, e && n && uh(c, e, n), uh(c, \"VER\", t.wa), fl(t, c), c;\n  }\n\n  function El() {}\n\n  function Tl() {\n    if (fu && !(10 <= Number(_u))) throw Error(\"Environmental error: no available transport.\");\n  }\n\n  function Sl(t, e) {\n    Yu.call(this), this.a = new al(e), this.g = t, this.m = e && e.testUrl ? e.testUrl : function (t) {\n      for (var e = t, n = 1; n < arguments.length; n++) {\n        var r,\n            i = arguments[n];\n        0 == i.lastIndexOf(\"/\", 0) ? e = i : ((r = \"\" == e) || (r = 0 <= (r = e.length - 1) && e.indexOf(\"/\", r) == r), e += r ? i : \"/\" + i);\n      }\n\n      return e;\n    }(this.g, \"test\"), this.b = e && e.messageUrlParams || null, t = e && e.messageHeaders || null, e && e.clientProtocolHeaderRequired && (t ? t[\"X-Client-Protocol\"] = \"webchannel\" : t = {\n      \"X-Client-Protocol\": \"webchannel\"\n    }), this.a.i = t, t = e && e.initMessageHeaders || null, e && e.messageContentType && (t ? t[\"X-WebChannel-Content-Type\"] = e.messageContentType : t = {\n      \"X-WebChannel-Content-Type\": e.messageContentType\n    }), e && e.xa && (t ? t[\"X-WebChannel-Client-Profile\"] = e.xa : t = {\n      \"X-WebChannel-Client-Profile\": e.xa\n    }), this.a.J = t, (t = e && e.httpHeadersOverwriteParam) && !Js(t) && (this.a.g = t), this.l = e && e.supportsCrossDomainXhr || !1, this.h = e && e.sendRawJson || !1, (e = e && e.httpSessionIdParam) && !Js(e) && (this.a.j = e, null !== (t = this.b) && e in t && e in (t = this.b) && delete t[e]), this.f = new Nl(this);\n  }\n\n  function Il(t) {\n    Oc.call(this);\n    var e = t.__sm__;\n\n    if (e) {\n      t: {\n        for (var n in e) {\n          t = n;\n          break t;\n        }\n\n        t = void 0;\n      }\n\n      (this.c = t) ? (t = this.c, this.data = null !== e && t in e ? e[t] : void 0) : this.data = e;\n    } else this.data = t;\n  }\n\n  function Cl() {\n    Pc.call(this), this.status = 1;\n  }\n\n  function Nl(t) {\n    this.a = t;\n  }\n\n  (Cs = Gh.prototype).ca = function (t, e, n, r) {\n    if (this.a) throw Error(\"[goog.net.XhrIo] Object is active with another request=\" + this.A + \"; newUri=\" + t);\n    e = e ? e.toUpperCase() : \"GET\", this.A = t, this.f = \"\", this.h = 0, this.v = !1, this.b = !0, this.a = new XMLHttpRequest(), this.s = this.H ? Ac(this.H) : Ac(Dc), this.a.onreadystatechange = js(this.Fa, this);\n\n    try {\n      this.w = !0, this.a.open(e, String(t), !0), this.w = !1;\n    } catch (t) {\n      return void $h(this, t);\n    }\n\n    t = n || \"\";\n    var i,\n        o = new Jc(this.headers);\n    r && Xc(r, function (t, e) {\n      o.set(e, t);\n    }), r = function (t) {\n      t: {\n        for (var e = Jh, n = t.length, r = Ds(t) ? t.split(\"\") : t, i = 0; i < n; i++) if (i in r && e.call(void 0, r[i], i, t)) {\n          e = i;\n          break t;\n        }\n\n        e = -1;\n      }\n\n      return e < 0 ? null : Ds(t) ? t.charAt(e) : t[e];\n    }(o.K()), n = ks.FormData && t instanceof ks.FormData, !(0 <= Gs(Xh, e)) || r || n || o.set(\"Content-Type\", \"application/x-www-form-urlencoded;charset=utf-8\"), o.forEach(function (t, e) {\n      this.a.setRequestHeader(e, t);\n    }, this), this.I && (this.a.responseType = this.I), \"withCredentials\" in this.a && this.a.withCredentials !== this.F && (this.a.withCredentials = this.F);\n\n    try {\n      nl(this), 0 < this.o && ((this.D = (i = this.a, fu && Tu(9) && Rs(i.timeout) && void 0 !== i.ontimeout)) ? (this.a.timeout = this.o, this.a.ontimeout = js(this.Ca, this)) : this.m = hc(this.Ca, this.o, this)), this.l = !0, this.a.send(t), this.l = !1;\n    } catch (t) {\n      $h(this, t);\n    }\n  }, Cs.Ca = function () {\n    void 0 !== As && this.a && (this.f = \"Timed out after \" + this.o + \"ms, aborting\", this.h = 8, this.dispatchEvent(\"timeout\"), this.abort(8));\n  }, Cs.abort = function (t) {\n    this.a && this.b && (this.b = !1, this.g = !0, this.a.abort(), this.g = !1, this.h = t || 7, this.dispatchEvent(\"complete\"), this.dispatchEvent(\"abort\"), el(this));\n  }, Cs.G = function () {\n    this.a && (this.b && (this.b = !1, this.g = !0, this.a.abort(), this.g = !1), el(this, !0)), Gh.N.G.call(this);\n  }, Cs.Fa = function () {\n    this.j || (this.w || this.l || this.g ? tl(this) : this.$a());\n  }, Cs.$a = function () {\n    tl(this);\n  }, Cs.T = function () {\n    try {\n      return 2 < rl(this) ? this.a.status : -1;\n    } catch (t) {\n      return -1;\n    }\n  }, Cs.za = function () {\n    try {\n      return 2 < rl(this) ? this.a.statusText : \"\";\n    } catch (t) {\n      return \"\";\n    }\n  }, Cs.aa = function () {\n    try {\n      return this.a ? this.a.responseText : \"\";\n    } catch (t) {\n      return \"\";\n    }\n  }, Cs.Va = function (t) {\n    if (this.a) {\n      var e = this.a.responseText;\n      return t && 0 == e.indexOf(t) && (e = e.substring(t.length)), Qh(e);\n    }\n  }, Cs.ya = function () {\n    return this.h;\n  }, Cs.Ya = function () {\n    return Ds(this.f) ? this.f : String(this.f);\n  }, (Cs = al.prototype).wa = 8, Cs.u = 1, Cs.Da = function () {\n    return 0 == this.u;\n  }, Cs.Ia = function (t) {\n    if (this.h) if (this.h = null, 1 == this.u) {\n      if (!t) {\n        this.P = Math.floor(1e5 * Math.random());\n        var e,\n            n = new xc(this, t = this.P++, void 0),\n            r = this.i;\n        if (this.J && (r ? su(r = ou(r), this.J) : r = this.J), null === this.g && (n.h = r), this.W) t: {\n          for (var i = e = 0; i < this.f.length; i++) {\n            var o = this.f[i];\n            if (void 0 === (o = \"__data__\" in o.a && Ds(o = o.a.__data__) ? o.length : void 0)) break;\n\n            if (4096 < (e += o)) {\n              e = i;\n              break t;\n            }\n\n            if (4096 === e || i === this.f.length - 1) {\n              e = i + 1;\n              break t;\n            }\n          }\n\n          e = 1e3;\n        } else e = 1e3;\n        e = pl(this, n, e), uh(i = rh(this.B), \"RID\", t), uh(i, \"CVER\", 22), this.o && this.j && uh(i, \"X-HTTP-Session-Id\", this.j), fl(this, i), this.g && r && ol(i, this.g, r), Uh(this.b, n), this.W ? (uh(i, \"$req\", e), uh(i, \"SID\", \"null\"), n.S = !0, qc(n, i, null)) : qc(n, i, e), this.u = 2;\n      }\n    } else 3 == this.u && (t ? ll(this, t) : 0 == this.f.length || xh(this.b) || ll(this));\n  }, Cs.Ha = function () {\n    this.l = null, this.a = new xc(this, \"rpc\", this.S), null === this.g && (this.a.h = this.i), this.a.J = 0;\n    var t = rh(this.pa);\n    uh(t, \"RID\", \"rpc\"), uh(t, \"SID\", this.H), uh(t, \"CI\", this.ia ? \"0\" : \"1\"), uh(t, \"AID\", this.O), fl(this, t), uh(t, \"TYPE\", \"xmlhttp\"), this.g && this.i && ol(t, this.g, this.i), this.D && this.a.setTimeout(this.D), Vc(this.a, t, !0, this.ga);\n  }, Cs.Ga = function (t, e) {\n    if (0 != this.u && (this.a == t || Fh(this.b, t))) if (this.m = t.o, !t.s && Fh(this.b, t) && 3 == this.u) {\n      try {\n        var n = this.ja.a.parse(e);\n      } catch (t) {\n        n = null;\n      }\n\n      if (xs(n) && 3 == n.length) {\n        if (0 == (e = n)[0]) {\n          t: if (!this.l) {\n            if (this.a) {\n              if (!(this.a.v + 3e3 < t.v)) break t;\n              gl(this), this.a.cancel(), this.a = null;\n            }\n\n            yl(this), Ec(18);\n          }\n        } else this.ra = e[1], 0 < this.ra - this.O && e[2] < 37500 && this.ia && 0 == this.v && !this.s && (this.s = Sc(js(this.Za, this), 6e3));\n\n        if (Lh(this.b) <= 1 && this.fa) {\n          try {\n            this.fa();\n          } catch (t) {}\n\n          this.fa = void 0;\n        }\n      } else bl(this, 11);\n    } else if ((t.s || this.a == t) && gl(this), !Js(e)) for (e = n = this.ja.a.parse(e), n = 0; n < e.length; n++) {\n      var r = e[n];\n      if (this.O = r[0], r = r[1], 2 == this.u) {\n        if (\"c\" == r[0]) {\n          this.H = r[1], this.ga = r[2];\n          var i = r[3];\n          null != i && (this.wa = i), null != (r = r[5]) && Rs(r) && 0 < r && (this.D = 1.5 * r), this.o && (r = t.a) && ((i = il(r, \"X-Client-Wire-Protocol\")) && Mh(this.b, i), this.j && (r = il(r, \"X-HTTP-Session-Id\"))) && (this.I = r, uh(this.B, this.j, r)), this.u = 3, this.c && this.c.va(), r = t, this.pa = _l(this, this.Y() ? this.ga : null, this.ha), r.s ? (qh(this.b, r), (i = this.D) && r.setTimeout(i), r.i && (Hc(r), Kc(r)), this.a = r) : dl(this), 0 < this.f.length && hl(this);\n        } else \"stop\" != r[0] && \"close\" != r[0] || bl(this, 7);\n      } else 3 == this.u && (\"stop\" == r[0] || \"close\" == r[0] ? \"stop\" == r[0] ? bl(this, 7) : sl(this) : \"noop\" != r[0] && this.c && this.c.ua(r), this.v = 0);\n    }\n  }, Cs.Za = function () {\n    null != this.s && (this.s = null, this.a.cancel(), this.a = null, yl(this), Ec(19));\n  }, Cs.na = function (t) {\n    var e,\n        n,\n        r = null;\n\n    if (this.a == t) {\n      gl(this), this.a = null;\n      var i = 2;\n    } else {\n      if (!Fh(this.b, t)) return;\n      r = t.j, qh(this.b, t), i = 1;\n    }\n\n    if (this.m = t.o, 0 != this.u) if (t.b) 1 == i ? (r = Ks() - t.v, vc.dispatchEvent(new Tc(vc, t.l ? t.l.length : 0, r, this.A)), hl(this)) : dl(this);else {\n      var o = t.c;\n      if (3 == o || 0 == o && 0 < this.m || (1 != i || (n = t, Lh((e = this).b) >= e.b.f - (e.h ? 1 : 0) || (e.h ? (e.f = n.j.concat(e.f), 0) : 1 == e.u || 2 == e.u || e.A >= (e.Pa ? 0 : e.Qa) || (e.h = Sc(js(e.Ia, e, n), vl(e, e.A)), e.A++, 0)))) && (2 != i || !yl(this))) switch (r && 0 < r.length && (t = this.b, t.c = t.c.concat(r)), o) {\n        case 1:\n          bl(this, 5);\n          break;\n\n        case 4:\n          bl(this, 10);\n          break;\n\n        case 3:\n          bl(this, 6);\n          break;\n\n        default:\n          bl(this, 2);\n      }\n    }\n  }, Cs.fb = function (t) {\n    Ec(t ? 2 : 1);\n  }, Cs.$ = function (t) {\n    if (t && !this.R) throw Error(\"Can't create secondary domain capable XhrIo object.\");\n    return (t = new Gh(this.La)).F = this.R, t;\n  }, Cs.ma = function () {\n    return !!this.c && !0;\n  }, Cs.Y = function () {\n    return this.R;\n  }, (Cs = El.prototype).va = function () {}, Cs.ua = function () {}, Cs.ta = function () {}, Cs.sa = function () {}, Cs.Ta = function () {}, Tl.prototype.a = function (t, e) {\n    return new Sl(t, e);\n  }, Qs(Sl, Yu), (Cs = Sl.prototype).addEventListener = function (t, e, n, r) {\n    Sl.N.addEventListener.call(this, t, e, n, r);\n  }, Cs.removeEventListener = function (t, e, n, r) {\n    Sl.N.removeEventListener.call(this, t, e, n, r);\n  }, Cs.Wa = function () {\n    this.a.c = this.f, this.l && (this.a.R = !0);\n    var t = this.a,\n        e = this.m,\n        n = this.g,\n        r = this.b || void 0;\n    Ec(0), t.ha = n, t.V = r || {}, t.o && (t.F.b = [], t.F.a = !1), t.w = new Ch(t), null === t.g && (t.w.h = t.i), n = e, t.g && t.i && (n = ol(e, t.g, t.i)), (t = t.w).i = n, e = _l(t.a, null, t.i), Ec(3), null != (n = t.a.F.b) ? (t.f = n[0], t.M = 1, Nh(t)) : (ch(e, \"MODE\", \"init\"), !t.a.o && t.a.j && ch(e, \"X-HTTP-Session-Id\", t.a.j), t.b = new xc(t, void 0, void 0), t.b.h = t.h, Vc(t.b, e, !1, null), t.M = 0);\n  }, Cs.close = function () {\n    sl(this.a);\n  }, Cs.Xa = function (t) {\n    if (Ds(t)) {\n      var e = {};\n      e.__data__ = t, cl(this.a, e);\n    } else this.h ? ((e = {}).__data__ = Ju(t), cl(this.a, e)) : cl(this.a, t);\n  }, Cs.G = function () {\n    this.a.c = null, delete this.f, sl(this.a), delete this.a, Sl.N.G.call(this);\n  }, Qs(Il, Oc), Qs(Cl, Pc), Qs(Nl, El), Nl.prototype.va = function () {\n    this.a.dispatchEvent(\"a\");\n  }, Nl.prototype.ua = function (t) {\n    this.a.dispatchEvent(new Il(t));\n  }, Nl.prototype.ta = function (t) {\n    this.a.dispatchEvent(new Cl(t));\n  }, Nl.prototype.sa = function () {\n    this.a.dispatchEvent(\"b\");\n  };\n  var Al = Ws(function (t, e) {\n    function n() {}\n\n    n.prototype = t.prototype;\n    var r = new n();\n    return t.apply(r, Array.prototype.slice.call(arguments, 1)), r;\n  }, Tl);\n  Tl.prototype.createWebChannel = Tl.prototype.a, Sl.prototype.send = Sl.prototype.Xa, Sl.prototype.open = Sl.prototype.Wa, Sl.prototype.close = Sl.prototype.close, Ic.NO_ERROR = 0, Ic.TIMEOUT = 8, Ic.HTTP_ERROR = 6, Cc.COMPLETE = \"complete\", (kc.EventType = Rc).OPEN = \"a\", Rc.CLOSE = \"b\", Rc.ERROR = \"c\", Rc.MESSAGE = \"d\", Yu.prototype.listen = Yu.prototype.Aa, Gh.prototype.listenOnce = Gh.prototype.Ba, Gh.prototype.getLastError = Gh.prototype.Ya, Gh.prototype.getLastErrorCode = Gh.prototype.ya, Gh.prototype.getStatus = Gh.prototype.T, Gh.prototype.getStatusText = Gh.prototype.za, Gh.prototype.getResponseJson = Gh.prototype.Va, Gh.prototype.getResponseText = Gh.prototype.aa, Gh.prototype.send = Gh.prototype.ca;\n  var kl,\n      Dl,\n      Rl = {\n    createWebChannelTransport: Al,\n    ErrorCode: Ic,\n    EventType: Cc,\n    WebChannel: kc,\n    XhrIo: Gh\n  },\n      Ol = Rl.createWebChannelTransport,\n      Pl = Rl.ErrorCode,\n      Ml = Rl.EventType,\n      xl = Rl.WebChannel,\n      Ll = Rl.XhrIo,\n      Fl = Hh.SDK_VERSION,\n      Ul = new ii(\"@firebase/firestore\");\n\n  function ql() {\n    return Ul.logLevel === $r.DEBUG ? kl.DEBUG : Ul.logLevel === $r.SILENT ? kl.SILENT : kl.ERROR;\n  }\n\n  function Vl(t) {\n    switch (t) {\n      case kl.DEBUG:\n        Ul.logLevel = $r.DEBUG;\n        break;\n\n      case kl.ERROR:\n        Ul.logLevel = $r.ERROR;\n        break;\n\n      case kl.SILENT:\n        Ul.logLevel = $r.SILENT;\n        break;\n\n      default:\n        Ul.error(\"Firestore (\" + Fl + \"): Invalid value passed to `setLogLevel`\");\n    }\n  }\n\n  function Bl(t, e) {\n    for (var n = [], r = 2; r < arguments.length; r++) n[r - 2] = arguments[r];\n\n    if (Ul.logLevel <= $r.DEBUG) {\n      var i = n.map(Wl);\n      Ul.debug.apply(Ul, [\"Firestore (\" + Fl + \") [\" + t + \"]: \" + e].concat(i));\n    }\n  }\n\n  function jl(t) {\n    for (var e = [], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];\n\n    if (Ul.logLevel <= $r.ERROR) {\n      var r = e.map(Wl);\n      Ul.error.apply(Ul, [\"Firestore (\" + Fl + \"): \" + t].concat(r));\n    }\n  }\n\n  function Wl(e) {\n    if (\"string\" == typeof e) return e;\n    var t = Hl.getPlatform();\n\n    try {\n      return t.formatJSON(e);\n    } catch (t) {\n      return e;\n    }\n  }\n\n  function Kl(t) {\n    var e = \"FIRESTORE (\" + Fl + \") INTERNAL ASSERTION FAILED: \" + t;\n    throw jl(e), new Error(e);\n  }\n\n  function Ql(t, e) {\n    t || Kl(e);\n  }\n\n  (Dl = kl || (kl = {}))[Dl.DEBUG = 0] = \"DEBUG\", Dl[Dl.ERROR = 1] = \"ERROR\", Dl[Dl.SILENT = 2] = \"SILENT\";\n\n  var Hl = function () {\n    function e() {}\n\n    return e.setPlatform = function (t) {\n      e.platform && Kl(\"Platform already defined\"), e.platform = t;\n    }, e.getPlatform = function () {\n      return e.platform || Kl(\"Platform not set\"), e.platform;\n    }, e;\n  }();\n\n  function Gl() {\n    return Hl.getPlatform().emptyByteString;\n  }\n\n  var zl = {\n    OK: \"ok\",\n    CANCELLED: \"cancelled\",\n    UNKNOWN: \"unknown\",\n    INVALID_ARGUMENT: \"invalid-argument\",\n    DEADLINE_EXCEEDED: \"deadline-exceeded\",\n    NOT_FOUND: \"not-found\",\n    ALREADY_EXISTS: \"already-exists\",\n    PERMISSION_DENIED: \"permission-denied\",\n    UNAUTHENTICATED: \"unauthenticated\",\n    RESOURCE_EXHAUSTED: \"resource-exhausted\",\n    FAILED_PRECONDITION: \"failed-precondition\",\n    ABORTED: \"aborted\",\n    OUT_OF_RANGE: \"out-of-range\",\n    UNIMPLEMENTED: \"unimplemented\",\n    INTERNAL: \"internal\",\n    UNAVAILABLE: \"unavailable\",\n    DATA_LOSS: \"data-loss\"\n  },\n      Yl = function (r) {\n    function t(t, e) {\n      var n = r.call(this, e) || this;\n      return n.code = t, n.message = e, n.name = \"FirebaseError\", n.toString = function () {\n        return n.name + \": [code=\" + n.code + \"]: \" + n.message;\n      }, n;\n    }\n\n    return hr(t, r), t;\n  }(Error);\n\n  function Xl(t, e) {\n    function n() {\n      var t = \"This constructor is private.\";\n      throw e && (t += \" \", t += e), new Yl(zl.INVALID_ARGUMENT, t);\n    }\n\n    for (var r in n.prototype = t.prototype, t) t.hasOwnProperty(r) && (n[r] = t[r]);\n\n    return n;\n  }\n\n  function Jl(t, e) {\n    return Object.prototype.hasOwnProperty.call(t, e);\n  }\n\n  function $l(t, e) {\n    return void 0 !== t ? t : e;\n  }\n\n  function Zl(t, e) {\n    for (var n in t) if (Object.prototype.hasOwnProperty.call(t, n)) {\n      var r = Number(n);\n      isNaN(r) || e(r, t[n]);\n    }\n  }\n\n  function tf(t, e) {\n    for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e(n, t[n]);\n  }\n\n  function ef(t) {\n    for (var e in Ql(null != t && \"object\" == typeof t, \"isEmpty() expects object parameter.\"), t) if (Object.prototype.hasOwnProperty.call(t, e)) return !1;\n\n    return !0;\n  }\n\n  function nf(t, e) {\n    if (0 !== e.length) throw new Yl(zl.INVALID_ARGUMENT, \"Function \" + t + \"() does not support arguments, but was called with \" + wf(e.length, \"argument\") + \".\");\n  }\n\n  function rf(t, e, n) {\n    if (e.length !== n) throw new Yl(zl.INVALID_ARGUMENT, \"Function \" + t + \"() requires \" + wf(n, \"argument\") + \", but was called with \" + wf(e.length, \"argument\") + \".\");\n  }\n\n  function of(t, e, n) {\n    if (e.length < n) throw new Yl(zl.INVALID_ARGUMENT, \"Function \" + t + \"() requires at least \" + wf(n, \"argument\") + \", but was called with \" + wf(e.length, \"argument\") + \".\");\n  }\n\n  function af(t, e, n, r) {\n    if (e.length < n || e.length > r) throw new Yl(zl.INVALID_ARGUMENT, \"Function \" + t + \"() requires between \" + n + \" and \" + r + \" arguments, but was called with \" + wf(e.length, \"argument\") + \".\");\n  }\n\n  function sf(t, e, n, r) {\n    pf(t, e, bf(n) + \" argument\", r);\n  }\n\n  function uf(t, e, n, r) {\n    void 0 !== r && sf(t, e, n, r);\n  }\n\n  function cf(t, e, n, r) {\n    pf(t, e, n + \" option\", r);\n  }\n\n  function hf(t, e, n, r) {\n    void 0 !== r && cf(t, e, n, r);\n  }\n\n  function lf(t, e, n, r, i) {\n    void 0 !== r && function (t, e, n, r, i) {\n      if (!(r instanceof Array)) throw new Yl(zl.INVALID_ARGUMENT, \"Function \" + t + \"() requires its \" + e + \" option to be an array, but it was: \" + yf(r));\n\n      for (var o = 0; o < r.length; ++o) if (!i(r[o])) throw new Yl(zl.INVALID_ARGUMENT, \"Function \" + t + \"() requires all \" + e + \" elements to be \" + n + \", but the value at index \" + o + \" was: \" + yf(r[o]));\n    }(t, e, n, r, i);\n  }\n\n  function ff(t, e, n, r, i) {\n    void 0 !== r && function (t, e, n, r, i) {\n      for (var o = [], a = 0, s = i; a < s.length; a++) {\n        var u = s[a];\n        if (u === r) return;\n        o.push(yf(u));\n      }\n\n      var c = yf(r);\n      throw new Yl(zl.INVALID_ARGUMENT, \"Invalid value \" + c + \" provided to function \" + t + '() for option \"' + n + '\". Acceptable values: ' + o.join(\", \"));\n    }(t, 0, n, r, i);\n  }\n\n  function pf(t, e, n, r) {\n    if (!(\"object\" === e ? df(r) : \"non-empty string\" === e ? \"string\" == typeof r && \"\" !== r : typeof r === e)) {\n      var i = yf(r);\n      throw new Yl(zl.INVALID_ARGUMENT, \"Function \" + t + \"() requires its \" + n + \" to be of type \" + e + \", but it was: \" + i);\n    }\n  }\n\n  function df(t) {\n    return \"object\" == typeof t && null !== t && (Object.getPrototypeOf(t) === Object.prototype || null === Object.getPrototypeOf(t));\n  }\n\n  function yf(t) {\n    if (void 0 === t) return \"undefined\";\n    if (null === t) return \"null\";\n    if (\"string\" == typeof t) return 20 < t.length && (t = t.substring(0, 20) + \"...\"), JSON.stringify(t);\n    if (\"number\" == typeof t || \"boolean\" == typeof t) return \"\" + t;\n    if (\"object\" != typeof t) return \"function\" == typeof t ? \"a function\" : Kl(\"Unknown wrong type: \" + typeof t);\n    if (t instanceof Array) return \"an array\";\n\n    var e = function (t) {\n      if (t.constructor) {\n        var e = /function\\s+([^\\s(]+)\\s*\\(/.exec(t.constructor.toString());\n        if (e && 1 < e.length) return e[1];\n      }\n\n      return null;\n    }(t);\n\n    return e ? \"a custom \" + e + \" object\" : \"an object\";\n  }\n\n  function mf(t, e, n) {\n    if (void 0 === n) throw new Yl(zl.INVALID_ARGUMENT, \"Function \" + t + \"() requires a valid \" + bf(e) + \" argument, but it was undefined.\");\n  }\n\n  function gf(n, t, r) {\n    tf(t, function (t, e) {\n      if (r.indexOf(t) < 0) throw new Yl(zl.INVALID_ARGUMENT, \"Unknown option '\" + t + \"' passed to function \" + n + \"(). Available options: \" + r.join(\", \"));\n    });\n  }\n\n  function vf(t, e, n, r) {\n    var i = yf(r);\n    return new Yl(zl.INVALID_ARGUMENT, \"Function \" + t + \"() requires its \" + bf(n) + \" argument to be a \" + e + \", but it was: \" + i);\n  }\n\n  function bf(t) {\n    switch (t) {\n      case 1:\n        return \"first\";\n\n      case 2:\n        return \"second\";\n\n      case 3:\n        return \"third\";\n\n      default:\n        return t + \"th\";\n    }\n  }\n\n  function wf(t, e) {\n    return t + \" \" + e + (1 === t ? \"\" : \"s\");\n  }\n\n  var _f = function () {\n    function t() {}\n\n    return t.newId = function () {\n      for (var t = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\", e = \"\", n = 0; n < 20; n++) e += t.charAt(Math.floor(Math.random() * t.length));\n\n      return Ql(20 === e.length, \"Invalid auto ID: \" + e), e;\n    }, t;\n  }();\n\n  function Ef(t, e) {\n    return t < e ? -1 : e < t ? 1 : 0;\n  }\n\n  function Tf(t, e) {\n    if (t.length !== e.length) return !1;\n\n    for (var n = 0; n < t.length; n++) if (!t[n].isEqual(e[n])) return !1;\n\n    return !0;\n  }\n\n  function Sf(t) {\n    return t + \"\\0\";\n  }\n\n  function If() {\n    if (\"undefined\" == typeof Uint8Array) throw new Yl(zl.UNIMPLEMENTED, \"Uint8Arrays are not available in this environment.\");\n  }\n\n  function Cf() {\n    if (!Hl.getPlatform().base64Available) throw new Yl(zl.UNIMPLEMENTED, \"Blobs are unavailable in Firestore in this environment.\");\n  }\n\n  var Nf,\n      Af,\n      kf = function () {\n    function e(t) {\n      Cf(), this._binaryString = t;\n    }\n\n    return e.fromBase64String = function (t) {\n      rf(\"Blob.fromBase64String\", arguments, 1), sf(\"Blob.fromBase64String\", \"string\", 1, t), Cf();\n\n      try {\n        return new e(Hl.getPlatform().atob(t));\n      } catch (t) {\n        throw new Yl(zl.INVALID_ARGUMENT, \"Failed to construct Blob from Base64 string: \" + t);\n      }\n    }, e.fromUint8Array = function (t) {\n      if (rf(\"Blob.fromUint8Array\", arguments, 1), If(), !(t instanceof Uint8Array)) throw vf(\"Blob.fromUint8Array\", \"Uint8Array\", 1, t);\n      return new e(Array.prototype.map.call(t, function (t) {\n        return String.fromCharCode(t);\n      }).join(\"\"));\n    }, e.prototype.toBase64 = function () {\n      return rf(\"Blob.toBase64\", arguments, 0), Cf(), Hl.getPlatform().btoa(this._binaryString);\n    }, e.prototype.toUint8Array = function () {\n      rf(\"Blob.toUint8Array\", arguments, 0), If();\n\n      for (var t = new Uint8Array(this._binaryString.length), e = 0; e < this._binaryString.length; e++) t[e] = this._binaryString.charCodeAt(e);\n\n      return t;\n    }, e.prototype.toString = function () {\n      return \"Blob(base64: \" + this.toBase64() + \")\";\n    }, e.prototype.isEqual = function (t) {\n      return this._binaryString === t._binaryString;\n    }, e.prototype._compareTo = function (t) {\n      return Ef(this._binaryString, t._binaryString);\n    }, e;\n  }(),\n      Df = Xl(kf, \"Use Blob.fromUint8Array() or Blob.fromBase64String() instead.\"),\n      Rf = function (t, e, n, r, i) {\n    this.databaseId = t, this.persistenceKey = e, this.host = n, this.ssl = r, this.forceLongPolling = i;\n  },\n      Of = \"(default)\",\n      Pf = function () {\n    function e(t, e) {\n      this.projectId = t, this.database = e || Of;\n    }\n\n    return Object.defineProperty(e.prototype, \"isDefaultDatabase\", {\n      get: function () {\n        return this.database === Of;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.isEqual = function (t) {\n      return t instanceof e && t.projectId === this.projectId && t.database === this.database;\n    }, e.prototype.compareTo = function (t) {\n      return Ef(this.projectId, t.projectId) || Ef(this.database, t.database);\n    }, e;\n  }(),\n      Mf = function () {\n    function t(t, e) {\n      var n = this;\n      this.previousValue = t, e && (e.sequenceNumberHandler = function (t) {\n        return n.setPreviousValue(t);\n      }, this.writeNewSequenceNumber = function (t) {\n        return e.writeSequenceNumber(t);\n      });\n    }\n\n    return t.prototype.setPreviousValue = function (t) {\n      return this.previousValue = Math.max(t, this.previousValue), this.previousValue;\n    }, t.prototype.next = function () {\n      var t = ++this.previousValue;\n      return this.writeNewSequenceNumber && this.writeNewSequenceNumber(t), t;\n    }, t.INVALID = -1, t;\n  }(),\n      xf = \"__name__\",\n      Lf = function () {\n    function n(t, e, n) {\n      this.init(t, e, n);\n    }\n\n    return n.prototype.init = function (t, e, n) {\n      void 0 === e ? e = 0 : e > t.length && Kl(\"offset \" + e + \" out of range \" + t.length), void 0 === n ? n = t.length - e : n > t.length - e && Kl(\"length \" + n + \" out of range \" + (t.length - e)), this.segments = t, this.offset = e, this.len = n;\n    }, n.prototype.construct = function (t, e, n) {\n      var r = Object.create(Object.getPrototypeOf(this));\n      return r.init(t, e, n), r;\n    }, Object.defineProperty(n.prototype, \"length\", {\n      get: function () {\n        return this.len;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), n.prototype.isEqual = function (t) {\n      return 0 === n.comparator(this, t);\n    }, n.prototype.child = function (t) {\n      var e = this.segments.slice(this.offset, this.limit());\n      return t instanceof n ? t.forEach(function (t) {\n        e.push(t);\n      }) : \"string\" == typeof t ? e.push(t) : Kl(\"Unknown parameter type for Path.child(): \" + t), this.construct(e);\n    }, n.prototype.limit = function () {\n      return this.offset + this.length;\n    }, n.prototype.popFirst = function (t) {\n      return t = void 0 === t ? 1 : t, Ql(this.length >= t, \"Can't call popFirst() with less segments\"), this.construct(this.segments, this.offset + t, this.length - t);\n    }, n.prototype.popLast = function () {\n      return Ql(!this.isEmpty(), \"Can't call popLast() on empty path\"), this.construct(this.segments, this.offset, this.length - 1);\n    }, n.prototype.firstSegment = function () {\n      return Ql(!this.isEmpty(), \"Can't call firstSegment() on empty path\"), this.segments[this.offset];\n    }, n.prototype.lastSegment = function () {\n      return this.get(this.length - 1);\n    }, n.prototype.get = function (t) {\n      return Ql(t < this.length, \"Index out of range\"), this.segments[this.offset + t];\n    }, n.prototype.isEmpty = function () {\n      return 0 === this.length;\n    }, n.prototype.isPrefixOf = function (t) {\n      if (t.length < this.length) return !1;\n\n      for (var e = 0; e < this.length; e++) if (this.get(e) !== t.get(e)) return !1;\n\n      return !0;\n    }, n.prototype.isImmediateParentOf = function (t) {\n      if (this.length + 1 !== t.length) return !1;\n\n      for (var e = 0; e < this.length; e++) if (this.get(e) !== t.get(e)) return !1;\n\n      return !0;\n    }, n.prototype.forEach = function (t) {\n      for (var e = this.offset, n = this.limit(); e < n; e++) t(this.segments[e]);\n    }, n.prototype.toArray = function () {\n      return this.segments.slice(this.offset, this.limit());\n    }, n.comparator = function (t, e) {\n      for (var n = Math.min(t.length, e.length), r = 0; r < n; r++) {\n        var i = t.get(r),\n            o = e.get(r);\n        if (i < o) return -1;\n        if (o < i) return 1;\n      }\n\n      return t.length < e.length ? -1 : t.length > e.length ? 1 : 0;\n    }, n;\n  }(),\n      Ff = function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return hr(e, t), e.prototype.canonicalString = function () {\n      return this.toArray().join(\"/\");\n    }, e.prototype.toString = function () {\n      return this.canonicalString();\n    }, e.fromString = function (t) {\n      if (0 <= t.indexOf(\"//\")) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid path (\" + t + \"). Paths must not contain // in them.\");\n      return new e(t.split(\"/\").filter(function (t) {\n        return 0 < t.length;\n      }));\n    }, e.EMPTY_PATH = new e([]), e;\n  }(Lf),\n      Uf = /^[_a-zA-Z][_a-zA-Z0-9]*$/,\n      qf = function (t) {\n    function u() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return hr(u, t), u.isValidIdentifier = function (t) {\n      return Uf.test(t);\n    }, u.prototype.canonicalString = function () {\n      return this.toArray().map(function (t) {\n        return t = t.replace(\"\\\\\", \"\\\\\\\\\").replace(\"`\", \"\\\\`\"), u.isValidIdentifier(t) || (t = \"`\" + t + \"`\"), t;\n      }).join(\".\");\n    }, u.prototype.toString = function () {\n      return this.canonicalString();\n    }, u.prototype.isKeyField = function () {\n      return 1 === this.length && this.get(0) === xf;\n    }, u.keyField = function () {\n      return new u([xf]);\n    }, u.fromServerFormat = function (t) {\n      for (var e = [], n = \"\", r = 0, i = function () {\n        if (0 === n.length) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid field path (\" + t + \"). Paths must not be empty, begin with '.', end with '.', or contain '..'\");\n        e.push(n), n = \"\";\n      }, o = !1; r < t.length;) {\n        var a = t[r];\n\n        if (\"\\\\\" === a) {\n          if (r + 1 === t.length) throw new Yl(zl.INVALID_ARGUMENT, \"Path has trailing escape character: \" + t);\n          var s = t[r + 1];\n          if (\"\\\\\" !== s && \".\" !== s && \"`\" !== s) throw new Yl(zl.INVALID_ARGUMENT, \"Path has invalid escape sequence: \" + t);\n          n += s, r += 2;\n        } else \"`\" === a ? o = !o : \".\" !== a || o ? n += a : i(), r++;\n      }\n\n      if (i(), o) throw new Yl(zl.INVALID_ARGUMENT, \"Unterminated ` in path: \" + t);\n      return new u(e);\n    }, u.EMPTY_PATH = new u([]), u;\n  }(Lf),\n      Vf = function () {\n    function e(t) {\n      this.path = t, Ql(e.isDocumentKey(t), \"Invalid DocumentKey with an odd number of segments: \" + t.toArray().join(\"/\"));\n    }\n\n    return e.prototype.hasCollectionId = function (t) {\n      return 2 <= this.path.length && this.path.get(this.path.length - 2) === t;\n    }, e.prototype.isEqual = function (t) {\n      return null !== t && 0 === Ff.comparator(this.path, t.path);\n    }, e.prototype.toString = function () {\n      return this.path.toString();\n    }, e.comparator = function (t, e) {\n      return Ff.comparator(t.path, e.path);\n    }, e.isDocumentKey = function (t) {\n      return t.length % 2 == 0;\n    }, e.fromSegments = function (t) {\n      return new e(new Ff(t.slice()));\n    }, e.fromPathString = function (t) {\n      return new e(Ff.fromString(t));\n    }, e.EMPTY = new e(new Ff([])), e;\n  }(),\n      Bf = function () {\n    var n = this;\n    this.promise = new Promise(function (t, e) {\n      n.resolve = t, n.reject = e;\n    });\n  };\n\n  (Af = Nf || (Nf = {})).All = \"all\", Af.ListenStreamIdle = \"listen_stream_idle\", Af.ListenStreamConnectionBackoff = \"listen_stream_connection_backoff\", Af.WriteStreamIdle = \"write_stream_idle\", Af.WriteStreamConnectionBackoff = \"write_stream_connection_backoff\", Af.OnlineStateTimeout = \"online_state_timeout\", Af.ClientMetadataRefresh = \"client_metadata_refresh\", Af.LruGarbageCollection = \"lru_garbage_collection\";\n\n  var jf = function () {\n    function a(t, e, n, r, i) {\n      this.asyncQueue = t, this.timerId = e, this.targetTimeMs = n, this.op = r, this.removalCallback = i, this.deferred = new Bf(), this.then = this.deferred.promise.then.bind(this.deferred.promise), this.catch = this.deferred.promise.catch.bind(this.deferred.promise), this.deferred.promise.catch(function (t) {});\n    }\n\n    return a.createAndSchedule = function (t, e, n, r, i) {\n      var o = new a(t, e, Date.now() + n, r, i);\n      return o.start(n), o;\n    }, a.prototype.start = function (t) {\n      var e = this;\n      this.timerHandle = setTimeout(function () {\n        return e.handleDelayElapsed();\n      }, t);\n    }, a.prototype.skipDelay = function () {\n      return this.handleDelayElapsed();\n    }, a.prototype.cancel = function (t) {\n      null !== this.timerHandle && (this.clearTimeout(), this.deferred.reject(new Yl(zl.CANCELLED, \"Operation cancelled\" + (t ? \": \" + t : \"\"))));\n    }, a.prototype.handleDelayElapsed = function () {\n      var e = this;\n      this.asyncQueue.enqueueAndForget(function () {\n        return null !== e.timerHandle ? (e.clearTimeout(), e.op().then(function (t) {\n          return e.deferred.resolve(t);\n        })) : Promise.resolve();\n      });\n    }, a.prototype.clearTimeout = function () {\n      null !== this.timerHandle && (this.removalCallback(this), clearTimeout(this.timerHandle), this.timerHandle = null);\n    }, a;\n  }(),\n      Wf = function () {\n    function t() {\n      this.tail = Promise.resolve(), this.delayedOperations = [], this.operationInProgress = !1;\n    }\n\n    return t.prototype.enqueueAndForget = function (t) {\n      this.enqueue(t);\n    }, t.prototype.enqueue = function (t) {\n      var n = this;\n      this.verifyNotFailed();\n      var e = this.tail.then(function () {\n        return n.operationInProgress = !0, t().catch(function (t) {\n          n.failure = t, n.operationInProgress = !1;\n          var e = t.stack || t.message || \"\";\n          throw jl(\"INTERNAL UNHANDLED ERROR: \", e), e.indexOf(\"Firestore Test Simulated Error\") < 0 && setTimeout(function () {\n            throw t;\n          }, 0), t;\n        }).then(function (t) {\n          return n.operationInProgress = !1, t;\n        });\n      });\n      return this.tail = e;\n    }, t.prototype.enqueueAfterDelay = function (t, e, n) {\n      var r = this;\n      this.verifyNotFailed(), Ql(0 <= e, \"Attempted to schedule an operation with a negative delay of \" + e), Ql(!this.containsDelayedOperation(t), \"Attempted to schedule multiple operations with timer id \" + t + \".\");\n      var i = jf.createAndSchedule(this, t, e, n, function (t) {\n        return r.removeDelayedOperation(t);\n      });\n      return this.delayedOperations.push(i), i;\n    }, t.prototype.verifyNotFailed = function () {\n      this.failure && Kl(\"AsyncQueue is already failed: \" + (this.failure.stack || this.failure.message));\n    }, t.prototype.verifyOperationInProgress = function () {\n      Ql(this.operationInProgress, \"verifyOpInProgress() called when no op in progress on this queue.\");\n    }, t.prototype.drain = function () {\n      return this.enqueue(function () {\n        return Promise.resolve();\n      });\n    }, t.prototype.containsDelayedOperation = function (t) {\n      for (var e = 0, n = this.delayedOperations; e < n.length; e++) {\n        if (n[e].timerId === t) return !0;\n      }\n\n      return !1;\n    }, t.prototype.runDelayedOperationsEarly = function (r) {\n      var i = this;\n      return this.drain().then(function () {\n        Ql(r === Nf.All || i.containsDelayedOperation(r), \"Attempted to drain to missing operation \" + r), i.delayedOperations.sort(function (t, e) {\n          return t.targetTimeMs - e.targetTimeMs;\n        });\n\n        for (var t = 0, e = i.delayedOperations; t < e.length; t++) {\n          var n = e[t];\n          if (n.skipDelay(), r !== Nf.All && n.timerId === r) break;\n        }\n\n        return i.drain();\n      });\n    }, t.prototype.removeDelayedOperation = function (t) {\n      var e = this.delayedOperations.indexOf(t);\n      Ql(0 <= e, \"Delayed operation not found.\"), this.delayedOperations.splice(e, 1);\n    }, t;\n  }(),\n      Kf = \"\u0001\",\n      Qf = \"\u0001\",\n      Hf = \"\u0010\",\n      Gf = \"\u0011\";\n\n  function zf(t) {\n    for (var e = \"\", n = 0; n < t.length; n++) 0 < e.length && (e = Xf(e)), e = Yf(t.get(n), e);\n\n    return Xf(e);\n  }\n\n  function Yf(t, e) {\n    for (var n = e, r = t.length, i = 0; i < r; i++) {\n      var o = t.charAt(i);\n\n      switch (o) {\n        case \"\\0\":\n          n += Kf + Hf;\n          break;\n\n        case Kf:\n          n += Kf + Gf;\n          break;\n\n        default:\n          n += o;\n      }\n    }\n\n    return n;\n  }\n\n  function Xf(t) {\n    return t + Kf + Qf;\n  }\n\n  function Jf(t) {\n    var e = t.length;\n    if (Ql(2 <= e, \"Invalid path \" + t), 2 === e) return Ql(t.charAt(0) === Kf && t.charAt(1) === Qf, \"Non-empty path \" + t + \" had length 2\"), Ff.EMPTY_PATH;\n\n    for (var n = e - 2, r = [], i = \"\", o = 0; o < e;) {\n      var a = t.indexOf(Kf, o);\n\n      switch ((a < 0 || n < a) && Kl('Invalid encoded resource path: \"' + t + '\"'), t.charAt(a + 1)) {\n        case Qf:\n          var s = t.substring(o, a),\n              u = void 0;\n          0 === i.length ? u = s : (u = i += s, i = \"\"), r.push(u);\n          break;\n\n        case Hf:\n          i += t.substring(o, a), i += \"\\0\";\n          break;\n\n        case Gf:\n          i += t.substring(o, a + 1);\n          break;\n\n        default:\n          Kl('Invalid encoded resource path: \"' + t + '\"');\n      }\n\n      o = a + 2;\n    }\n\n    return new Ff(r);\n  }\n\n  var $f = function () {\n    function n(t, e) {\n      if (this.seconds = t, (this.nanoseconds = e) < 0) throw new Yl(zl.INVALID_ARGUMENT, \"Timestamp nanoseconds out of range: \" + e);\n      if (1e9 <= e) throw new Yl(zl.INVALID_ARGUMENT, \"Timestamp nanoseconds out of range: \" + e);\n      if (t < -62135596800) throw new Yl(zl.INVALID_ARGUMENT, \"Timestamp seconds out of range: \" + t);\n      if (253402300800 <= t) throw new Yl(zl.INVALID_ARGUMENT, \"Timestamp seconds out of range: \" + t);\n    }\n\n    return n.now = function () {\n      return n.fromMillis(Date.now());\n    }, n.fromDate = function (t) {\n      return n.fromMillis(t.getTime());\n    }, n.fromMillis = function (t) {\n      var e = Math.floor(t / 1e3);\n      return new n(e, 1e6 * (t - 1e3 * e));\n    }, n.prototype.toDate = function () {\n      return new Date(this.toMillis());\n    }, n.prototype.toMillis = function () {\n      return 1e3 * this.seconds + this.nanoseconds / 1e6;\n    }, n.prototype._compareTo = function (t) {\n      return this.seconds === t.seconds ? Ef(this.nanoseconds, t.nanoseconds) : Ef(this.seconds, t.seconds);\n    }, n.prototype.isEqual = function (t) {\n      return t.seconds === this.seconds && t.nanoseconds === this.nanoseconds;\n    }, n.prototype.toString = function () {\n      return \"Timestamp(seconds=\" + this.seconds + \", nanoseconds=\" + this.nanoseconds + \")\";\n    }, n;\n  }(),\n      Zf = function () {\n    function n(t) {\n      this.timestamp = t;\n    }\n\n    return n.fromMicroseconds = function (t) {\n      var e = Math.floor(t / 1e6);\n      return new n(new $f(e, t % 1e6 * 1e3));\n    }, n.fromTimestamp = function (t) {\n      return new n(t);\n    }, n.forDeletedDoc = function () {\n      return n.MIN;\n    }, n.prototype.compareTo = function (t) {\n      return this.timestamp._compareTo(t.timestamp);\n    }, n.prototype.isEqual = function (t) {\n      return this.timestamp.isEqual(t.timestamp);\n    }, n.prototype.toMicroseconds = function () {\n      return 1e6 * this.timestamp.seconds + this.timestamp.nanoseconds / 1e3;\n    }, n.prototype.toString = function () {\n      return \"SnapshotVersion(\" + this.timestamp.toString() + \")\";\n    }, n.prototype.toTimestamp = function () {\n      return this.timestamp;\n    }, n.MIN = new n(new $f(0, 0)), n;\n  }(),\n      tp = function () {\n    function n(t, e) {\n      this.comparator = t, this.root = e || np.EMPTY;\n    }\n\n    return n.prototype.insert = function (t, e) {\n      return new n(this.comparator, this.root.insert(t, e, this.comparator).copy(null, null, np.BLACK, null, null));\n    }, n.prototype.remove = function (t) {\n      return new n(this.comparator, this.root.remove(t, this.comparator).copy(null, null, np.BLACK, null, null));\n    }, n.prototype.get = function (t) {\n      for (var e = this.root; !e.isEmpty();) {\n        var n = this.comparator(t, e.key);\n        if (0 === n) return e.value;\n        n < 0 ? e = e.left : 0 < n && (e = e.right);\n      }\n\n      return null;\n    }, n.prototype.indexOf = function (t) {\n      for (var e = 0, n = this.root; !n.isEmpty();) {\n        var r = this.comparator(t, n.key);\n        if (0 === r) return e + n.left.size;\n        n = r < 0 ? n.left : (e += n.left.size + 1, n.right);\n      }\n\n      return -1;\n    }, n.prototype.isEmpty = function () {\n      return this.root.isEmpty();\n    }, Object.defineProperty(n.prototype, \"size\", {\n      get: function () {\n        return this.root.size;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), n.prototype.minKey = function () {\n      return this.root.minKey();\n    }, n.prototype.maxKey = function () {\n      return this.root.maxKey();\n    }, n.prototype.inorderTraversal = function (t) {\n      return this.root.inorderTraversal(t);\n    }, n.prototype.forEach = function (n) {\n      this.inorderTraversal(function (t, e) {\n        return n(t, e), !1;\n      });\n    }, n.prototype.toString = function () {\n      var n = [];\n      return this.inorderTraversal(function (t, e) {\n        return n.push(t + \":\" + e), !1;\n      }), \"{\" + n.join(\", \") + \"}\";\n    }, n.prototype.reverseTraversal = function (t) {\n      return this.root.reverseTraversal(t);\n    }, n.prototype.getIterator = function () {\n      return new ep(this.root, null, this.comparator, !1);\n    }, n.prototype.getIteratorFrom = function (t) {\n      return new ep(this.root, t, this.comparator, !1);\n    }, n.prototype.getReverseIterator = function () {\n      return new ep(this.root, null, this.comparator, !0);\n    }, n.prototype.getReverseIteratorFrom = function (t) {\n      return new ep(this.root, t, this.comparator, !0);\n    }, n;\n  }(),\n      ep = function () {\n    function t(t, e, n, r) {\n      this.isReverse = r, this.nodeStack = [];\n\n      for (var i = 1; !t.isEmpty();) if (i = e ? n(t.key, e) : 1, r && (i *= -1), i < 0) t = this.isReverse ? t.left : t.right;else {\n        if (0 === i) {\n          this.nodeStack.push(t);\n          break;\n        }\n\n        this.nodeStack.push(t), t = this.isReverse ? t.right : t.left;\n      }\n    }\n\n    return t.prototype.getNext = function () {\n      Ql(0 < this.nodeStack.length, \"getNext() called on iterator when hasNext() is false.\");\n      var t = this.nodeStack.pop(),\n          e = {\n        key: t.key,\n        value: t.value\n      };\n      if (this.isReverse) for (t = t.left; !t.isEmpty();) this.nodeStack.push(t), t = t.right;else for (t = t.right; !t.isEmpty();) this.nodeStack.push(t), t = t.left;\n      return e;\n    }, t.prototype.hasNext = function () {\n      return 0 < this.nodeStack.length;\n    }, t.prototype.peek = function () {\n      if (0 === this.nodeStack.length) return null;\n      var t = this.nodeStack[this.nodeStack.length - 1];\n      return {\n        key: t.key,\n        value: t.value\n      };\n    }, t;\n  }(),\n      np = function () {\n    function o(t, e, n, r, i) {\n      this.key = t, this.value = e, this.color = null != n ? n : o.RED, this.left = null != r ? r : o.EMPTY, this.right = null != i ? i : o.EMPTY, this.size = this.left.size + 1 + this.right.size;\n    }\n\n    return o.prototype.copy = function (t, e, n, r, i) {\n      return new o(null != t ? t : this.key, null != e ? e : this.value, null != n ? n : this.color, null != r ? r : this.left, null != i ? i : this.right);\n    }, o.prototype.isEmpty = function () {\n      return !1;\n    }, o.prototype.inorderTraversal = function (t) {\n      return this.left.inorderTraversal(t) || t(this.key, this.value) || this.right.inorderTraversal(t);\n    }, o.prototype.reverseTraversal = function (t) {\n      return this.right.reverseTraversal(t) || t(this.key, this.value) || this.left.reverseTraversal(t);\n    }, o.prototype.min = function () {\n      return this.left.isEmpty() ? this : this.left.min();\n    }, o.prototype.minKey = function () {\n      return this.min().key;\n    }, o.prototype.maxKey = function () {\n      return this.right.isEmpty() ? this.key : this.right.maxKey();\n    }, o.prototype.insert = function (t, e, n) {\n      var r = this,\n          i = n(t, r.key);\n      return (r = i < 0 ? r.copy(null, null, null, r.left.insert(t, e, n), null) : 0 === i ? r.copy(null, e, null, null, null) : r.copy(null, null, null, null, r.right.insert(t, e, n))).fixUp();\n    }, o.prototype.removeMin = function () {\n      if (this.left.isEmpty()) return o.EMPTY;\n      var t = this;\n      return t.left.isRed() || t.left.left.isRed() || (t = t.moveRedLeft()), (t = t.copy(null, null, null, t.left.removeMin(), null)).fixUp();\n    }, o.prototype.remove = function (t, e) {\n      var n,\n          r = this;\n      if (e(t, r.key) < 0) r.left.isEmpty() || r.left.isRed() || r.left.left.isRed() || (r = r.moveRedLeft()), r = r.copy(null, null, null, r.left.remove(t, e), null);else {\n        if (r.left.isRed() && (r = r.rotateRight()), r.right.isEmpty() || r.right.isRed() || r.right.left.isRed() || (r = r.moveRedRight()), 0 === e(t, r.key)) {\n          if (r.right.isEmpty()) return o.EMPTY;\n          n = r.right.min(), r = r.copy(n.key, n.value, null, null, r.right.removeMin());\n        }\n\n        r = r.copy(null, null, null, null, r.right.remove(t, e));\n      }\n      return r.fixUp();\n    }, o.prototype.isRed = function () {\n      return this.color;\n    }, o.prototype.fixUp = function () {\n      var t = this;\n      return t.right.isRed() && !t.left.isRed() && (t = t.rotateLeft()), t.left.isRed() && t.left.left.isRed() && (t = t.rotateRight()), t.left.isRed() && t.right.isRed() && (t = t.colorFlip()), t;\n    }, o.prototype.moveRedLeft = function () {\n      var t = this.colorFlip();\n      return t.right.left.isRed() && (t = (t = (t = t.copy(null, null, null, null, t.right.rotateRight())).rotateLeft()).colorFlip()), t;\n    }, o.prototype.moveRedRight = function () {\n      var t = this.colorFlip();\n      return t.left.left.isRed() && (t = (t = t.rotateRight()).colorFlip()), t;\n    }, o.prototype.rotateLeft = function () {\n      var t = this.copy(null, null, o.RED, null, this.right.left);\n      return this.right.copy(null, null, this.color, t, null);\n    }, o.prototype.rotateRight = function () {\n      var t = this.copy(null, null, o.RED, this.left.right, null);\n      return this.left.copy(null, null, this.color, null, t);\n    }, o.prototype.colorFlip = function () {\n      var t = this.left.copy(null, null, !this.left.color, null, null),\n          e = this.right.copy(null, null, !this.right.color, null, null);\n      return this.copy(null, null, !this.color, t, e);\n    }, o.prototype.checkMaxDepth = function () {\n      var t = this.check();\n      return Math.pow(2, t) <= this.size + 1;\n    }, o.prototype.check = function () {\n      if (this.isRed() && this.left.isRed()) throw Kl(\"Red node has red child(\" + this.key + \",\" + this.value + \")\");\n      if (this.right.isRed()) throw Kl(\"Right child of (\" + this.key + \",\" + this.value + \") is red\");\n      var t = this.left.check();\n      if (t !== this.right.check()) throw Kl(\"Black depths differ\");\n      return t + (this.isRed() ? 0 : 1);\n    }, o.EMPTY = null, o.RED = !0, o.BLACK = !1, o;\n  }(),\n      rp = function () {\n    function t() {\n      this.size = 0;\n    }\n\n    return t.prototype.copy = function (t, e, n, r, i) {\n      return this;\n    }, t.prototype.insert = function (t, e, n) {\n      return new np(t, e);\n    }, t.prototype.remove = function (t, e) {\n      return this;\n    }, t.prototype.isEmpty = function () {\n      return !0;\n    }, t.prototype.inorderTraversal = function (t) {\n      return !1;\n    }, t.prototype.reverseTraversal = function (t) {\n      return !1;\n    }, t.prototype.minKey = function () {\n      return null;\n    }, t.prototype.maxKey = function () {\n      return null;\n    }, t.prototype.isRed = function () {\n      return !1;\n    }, t.prototype.checkMaxDepth = function () {\n      return !0;\n    }, t.prototype.check = function () {\n      return 0;\n    }, t;\n  }();\n\n  np.EMPTY = new rp();\n\n  var ip = function () {\n    function o(t) {\n      this.comparator = t, this.data = new tp(this.comparator);\n    }\n\n    return o.fromMapKeys = function (t) {\n      var e = new o(t.comparator);\n      return t.forEach(function (t) {\n        e = e.add(t);\n      }), e;\n    }, o.prototype.has = function (t) {\n      return null !== this.data.get(t);\n    }, o.prototype.first = function () {\n      return this.data.minKey();\n    }, o.prototype.last = function () {\n      return this.data.maxKey();\n    }, Object.defineProperty(o.prototype, \"size\", {\n      get: function () {\n        return this.data.size;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), o.prototype.indexOf = function (t) {\n      return this.data.indexOf(t);\n    }, o.prototype.forEach = function (n) {\n      this.data.inorderTraversal(function (t, e) {\n        return n(t), !1;\n      });\n    }, o.prototype.forEachInRange = function (t, e) {\n      for (var n = this.data.getIteratorFrom(t[0]); n.hasNext();) {\n        var r = n.getNext();\n        if (0 <= this.comparator(r.key, t[1])) return;\n        e(r.key);\n      }\n    }, o.prototype.forEachWhile = function (t, e) {\n      var n;\n\n      for (n = void 0 !== e ? this.data.getIteratorFrom(e) : this.data.getIterator(); n.hasNext();) {\n        if (!t(n.getNext().key)) return;\n      }\n    }, o.prototype.firstAfterOrEqual = function (t) {\n      var e = this.data.getIteratorFrom(t);\n      return e.hasNext() ? e.getNext().key : null;\n    }, o.prototype.getIterator = function () {\n      return new op(this.data.getIterator());\n    }, o.prototype.getIteratorFrom = function (t) {\n      return new op(this.data.getIteratorFrom(t));\n    }, o.prototype.add = function (t) {\n      return this.copy(this.data.remove(t).insert(t, !0));\n    }, o.prototype.delete = function (t) {\n      return this.has(t) ? this.copy(this.data.remove(t)) : this;\n    }, o.prototype.isEmpty = function () {\n      return this.data.isEmpty();\n    }, o.prototype.unionWith = function (t) {\n      var e = this;\n      return t.forEach(function (t) {\n        e = e.add(t);\n      }), e;\n    }, o.prototype.isEqual = function (t) {\n      if (!(t instanceof o)) return !1;\n      if (this.size !== t.size) return !1;\n\n      for (var e = this.data.getIterator(), n = t.data.getIterator(); e.hasNext();) {\n        var r = e.getNext().key,\n            i = n.getNext().key;\n        if (0 !== this.comparator(r, i)) return !1;\n      }\n\n      return !0;\n    }, o.prototype.toArray = function () {\n      var e = [];\n      return this.forEach(function (t) {\n        e.push(t);\n      }), e;\n    }, o.prototype.toString = function () {\n      var e = [];\n      return this.forEach(function (t) {\n        return e.push(t);\n      }), \"SortedSet(\" + e.toString() + \")\";\n    }, o.prototype.copy = function (t) {\n      var e = new o(this.comparator);\n      return e.data = t, e;\n    }, o;\n  }(),\n      op = function () {\n    function t(t) {\n      this.iter = t;\n    }\n\n    return t.prototype.getNext = function () {\n      return this.iter.getNext().key;\n    }, t.prototype.hasNext = function () {\n      return this.iter.hasNext();\n    }, t;\n  }(),\n      ap = new tp(Vf.comparator);\n\n  function sp() {\n    return ap;\n  }\n\n  function up() {\n    return sp();\n  }\n\n  var cp = new tp(Vf.comparator);\n\n  function hp() {\n    return cp;\n  }\n\n  var lp = new tp(Vf.comparator);\n\n  function fp() {\n    return lp;\n  }\n\n  var pp = new ip(Vf.comparator);\n\n  function dp() {\n    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n    for (var n = pp, r = 0, i = t; r < i.length; r++) {\n      var o = i[r];\n      n = n.add(o);\n    }\n\n    return n;\n  }\n\n  var yp = new ip(Ef);\n\n  function mp() {\n    return yp;\n  }\n\n  var gp = function () {\n    function t(t, e, n, r) {\n      this.batchId = t, this.localWriteTime = e, this.baseMutations = n, Ql(0 < (this.mutations = r).length, \"Cannot create an empty mutation batch\");\n    }\n\n    return t.prototype.applyToRemoteDocument = function (t, e, n) {\n      e && Ql(e.key.isEqual(t), \"applyToRemoteDocument: key \" + t + \" should match maybeDoc key\\n        \" + e.key);\n      var r = n.mutationResults;\n      Ql(r.length === this.mutations.length, \"Mismatch between mutations length\\n      (\" + this.mutations.length + \") and mutation results length\\n      (\" + r.length + \").\");\n\n      for (var i = 0; i < this.mutations.length; i++) {\n        var o = this.mutations[i];\n\n        if (o.key.isEqual(t)) {\n          var a = r[i];\n          e = o.applyToRemoteDocument(e, a);\n        }\n      }\n\n      return e;\n    }, t.prototype.applyToLocalView = function (t, e) {\n      e && Ql(e.key.isEqual(t), \"applyToLocalDocument: key \" + t + \" should match maybeDoc key\\n        \" + e.key);\n\n      for (var n = 0, r = this.baseMutations; n < r.length; n++) {\n        (s = r[n]).key.isEqual(t) && (e = s.applyToLocalView(e, e, this.localWriteTime));\n      }\n\n      for (var i = e, o = 0, a = this.mutations; o < a.length; o++) {\n        var s;\n        (s = a[o]).key.isEqual(t) && (e = s.applyToLocalView(e, i, this.localWriteTime));\n      }\n\n      return e;\n    }, t.prototype.applyToLocalDocumentSet = function (n) {\n      var r = this,\n          i = n;\n      return this.mutations.forEach(function (t) {\n        var e = r.applyToLocalView(t.key, n.get(t.key));\n        e && (i = i.insert(t.key, e));\n      }), i;\n    }, t.prototype.keys = function () {\n      return this.mutations.reduce(function (t, e) {\n        return t.add(e.key);\n      }, dp());\n    }, t.prototype.isEqual = function (t) {\n      return this.batchId === t.batchId && Tf(this.mutations, t.mutations) && Tf(this.baseMutations, t.baseMutations);\n    }, t;\n  }(),\n      vp = function () {\n    function s(t, e, n, r, i) {\n      this.batch = t, this.commitVersion = e, this.mutationResults = n, this.streamToken = r, this.docVersions = i;\n    }\n\n    return s.from = function (t, e, n, r) {\n      Ql(t.mutations.length === n.length, \"Mutations sent \" + t.mutations.length + \" must equal results received \" + n.length);\n\n      for (var i = fp(), o = t.mutations, a = 0; a < o.length; a++) i = i.insert(o[a].key, n[a].version);\n\n      return new s(t, e, n, r, i);\n    }, s;\n  }(),\n      bp = function () {\n    function a(t) {\n      var e = this;\n      this.nextCallback = null, this.catchCallback = null, this.result = void 0, this.error = void 0, this.isDone = !1, this.callbackAttached = !1, t(function (t) {\n        e.isDone = !0, e.result = t, e.nextCallback && e.nextCallback(t);\n      }, function (t) {\n        e.isDone = !0, e.error = t, e.catchCallback && e.catchCallback(t);\n      });\n    }\n\n    return a.prototype.catch = function (t) {\n      return this.next(void 0, t);\n    }, a.prototype.next = function (r, i) {\n      var o = this;\n      return this.callbackAttached && Kl(\"Called next() or catch() twice for PersistencePromise\"), this.callbackAttached = !0, this.isDone ? this.error ? this.wrapFailure(i, this.error) : this.wrapSuccess(r, this.result) : new a(function (e, n) {\n        o.nextCallback = function (t) {\n          o.wrapSuccess(r, t).next(e, n);\n        }, o.catchCallback = function (t) {\n          o.wrapFailure(i, t).next(e, n);\n        };\n      });\n    }, a.prototype.toPromise = function () {\n      var n = this;\n      return new Promise(function (t, e) {\n        n.next(t, e);\n      });\n    }, a.prototype.wrapUserFunction = function (t) {\n      try {\n        var e = t();\n        return e instanceof a ? e : a.resolve(e);\n      } catch (t) {\n        return a.reject(t);\n      }\n    }, a.prototype.wrapSuccess = function (t, e) {\n      return t ? this.wrapUserFunction(function () {\n        return t(e);\n      }) : a.resolve(e);\n    }, a.prototype.wrapFailure = function (t, e) {\n      return t ? this.wrapUserFunction(function () {\n        return t(e);\n      }) : a.reject(e);\n    }, a.resolve = function (n) {\n      return new a(function (t, e) {\n        t(n);\n      });\n    }, a.reject = function (n) {\n      return new a(function (t, e) {\n        e(n);\n      });\n    }, a.waitFor = function (t) {\n      return new a(function (e, n) {\n        var r = 0,\n            i = 0,\n            o = !1;\n        t.forEach(function (t) {\n          ++r, t.next(function () {\n            ++i, o && i === r && e();\n          }, function (t) {\n            return n(t);\n          });\n        }), o = !0, i === r && e();\n      });\n    }, a.or = function (t) {\n      for (var n = a.resolve(!1), e = function (e) {\n        n = n.next(function (t) {\n          return t ? a.resolve(t) : e();\n        });\n      }, r = 0, i = t; r < i.length; r++) {\n        e(i[r]);\n      }\n\n      return n;\n    }, a.forEach = function (t, n) {\n      var r = this,\n          i = [];\n      return t.forEach(function (t, e) {\n        i.push(n.call(r, t, e));\n      }), this.waitFor(i);\n    }, a;\n  }(),\n      wp = function () {\n    function i(t, e, n, r) {\n      this.userId = t, this.serializer = e, this.indexManager = n, this.referenceDelegate = r, this.documentKeysByBatchId = {};\n    }\n\n    return i.forUser = function (t, e, n, r) {\n      return Ql(\"\" !== t.uid, \"UserID must not be an empty string.\"), new i(t.isAuthenticated() ? t.uid : \"\", e, n, r);\n    }, i.prototype.checkEmpty = function (t) {\n      var r = !0,\n          e = IDBKeyRange.bound([this.userId, Number.NEGATIVE_INFINITY], [this.userId, Number.POSITIVE_INFINITY]);\n      return Sp(t).iterate({\n        index: hd.userMutationsIndex,\n        range: e\n      }, function (t, e, n) {\n        r = !1, n.done();\n      }).next(function () {\n        return r;\n      });\n    }, i.prototype.acknowledgeBatch = function (e, t, n) {\n      return this.getMutationQueueMetadata(e).next(function (t) {\n        return t.lastStreamToken = Tp(n), Cp(e).put(t);\n      });\n    }, i.prototype.getLastStreamToken = function (t) {\n      return this.getMutationQueueMetadata(t).next(function (t) {\n        return t.lastStreamToken;\n      });\n    }, i.prototype.setLastStreamToken = function (e, n) {\n      return this.getMutationQueueMetadata(e).next(function (t) {\n        return t.lastStreamToken = Tp(n), Cp(e).put(t);\n      });\n    }, i.prototype.addMutationBatch = function (u, c, h, l) {\n      var f = this,\n          p = Ip(u),\n          d = Sp(u);\n      return d.add({}).next(function (t) {\n        Ql(\"number\" == typeof t, \"Auto-generated key is not a number\");\n        var e = new gp(t, c, h, l),\n            n = f.serializer.toDbMutationBatch(f.userId, e);\n        f.documentKeysByBatchId[t] = e.keys();\n\n        for (var r = [], i = 0, o = l; i < o.length; i++) {\n          var a = o[i],\n              s = ld.key(f.userId, a.key.path, t);\n          r.push(d.put(n)), r.push(p.put(s, ld.PLACEHOLDER)), r.push(f.indexManager.addToCollectionParentIndex(u, a.key.path.popLast()));\n        }\n\n        return bp.waitFor(r).next(function () {\n          return e;\n        });\n      });\n    }, i.prototype.lookupMutationBatch = function (t, e) {\n      var n = this;\n      return Sp(t).get(e).next(function (t) {\n        return t ? (Ql(t.userId === n.userId, \"Unexpected user '\" + t.userId + \"' for mutation batch \" + e), n.serializer.fromDbMutationBatch(t)) : null;\n      });\n    }, i.prototype.lookupMutationKeys = function (t, n) {\n      var r = this;\n      return this.documentKeysByBatchId[n] ? bp.resolve(this.documentKeysByBatchId[n]) : this.lookupMutationBatch(t, n).next(function (t) {\n        if (t) {\n          var e = t.keys();\n          return r.documentKeysByBatchId[n] = e;\n        }\n\n        return null;\n      });\n    }, i.prototype.getNextMutationBatchAfterBatchId = function (t, e) {\n      var r = this,\n          i = e + 1,\n          n = IDBKeyRange.lowerBound([this.userId, i]),\n          o = null;\n      return Sp(t).iterate({\n        index: hd.userMutationsIndex,\n        range: n\n      }, function (t, e, n) {\n        e.userId === r.userId && (Ql(e.batchId >= i, \"Should have found mutation after \" + i), o = r.serializer.fromDbMutationBatch(e)), n.done();\n      }).next(function () {\n        return o;\n      });\n    }, i.prototype.getAllMutationBatches = function (t) {\n      var e = this,\n          n = IDBKeyRange.bound([this.userId, -1], [this.userId, Number.POSITIVE_INFINITY]);\n      return Sp(t).loadAll(hd.userMutationsIndex, n).next(function (t) {\n        return t.map(function (t) {\n          return e.serializer.fromDbMutationBatch(t);\n        });\n      });\n    }, i.prototype.getAllMutationBatchesAffectingDocumentKey = function (s, u) {\n      var c = this,\n          t = ld.prefixForPath(this.userId, u.path),\n          e = IDBKeyRange.lowerBound(t),\n          h = [];\n      return Ip(s).iterate({\n        range: e\n      }, function (e, t, n) {\n        var r = e[0],\n            i = e[1],\n            o = e[2],\n            a = Jf(i);\n        if (r === c.userId && u.path.isEqual(a)) return Sp(s).get(o).next(function (t) {\n          if (!t) throw Kl(\"Dangling document-mutation reference found: \" + e + \" which points to \" + o);\n          Ql(t.userId === c.userId, \"Unexpected user '\" + t.userId + \"' for mutation batch \" + o), h.push(c.serializer.fromDbMutationBatch(t));\n        });\n        n.done();\n      }).next(function () {\n        return h;\n      });\n    }, i.prototype.getAllMutationBatchesAffectingDocumentKeys = function (r, t) {\n      var u = this,\n          c = new ip(Ef),\n          i = [];\n      return t.forEach(function (s) {\n        var t = ld.prefixForPath(u.userId, s.path),\n            e = IDBKeyRange.lowerBound(t),\n            n = Ip(r).iterate({\n          range: e\n        }, function (t, e, n) {\n          var r = t[0],\n              i = t[1],\n              o = t[2],\n              a = Jf(i);\n          r === u.userId && s.path.isEqual(a) ? c = c.add(o) : n.done();\n        });\n        i.push(n);\n      }), bp.waitFor(i).next(function () {\n        return u.lookupMutationBatches(r, c);\n      });\n    }, i.prototype.getAllMutationBatchesAffectingQuery = function (t, e) {\n      var s = this;\n      Ql(!e.isDocumentQuery(), \"Document queries shouldn't go down this path\"), Ql(!e.isCollectionGroupQuery(), \"CollectionGroup queries should be handled in LocalDocumentsView\");\n      var u = e.path,\n          c = u.length + 1,\n          n = ld.prefixForPath(this.userId, u),\n          r = IDBKeyRange.lowerBound(n),\n          h = new ip(Ef);\n      return Ip(t).iterate({\n        range: r\n      }, function (t, e, n) {\n        var r = t[0],\n            i = t[1],\n            o = t[2],\n            a = Jf(i);\n        r === s.userId && u.isPrefixOf(a) ? a.length === c && (h = h.add(o)) : n.done();\n      }).next(function () {\n        return s.lookupMutationBatches(t, h);\n      });\n    }, i.prototype.lookupMutationBatches = function (t, e) {\n      var n = this,\n          r = [],\n          i = [];\n      return e.forEach(function (e) {\n        i.push(Sp(t).get(e).next(function (t) {\n          if (null === t) throw Kl(\"Dangling document-mutation reference found, which points to \" + e);\n          Ql(t.userId === n.userId, \"Unexpected user '\" + t.userId + \"' for mutation batch \" + e), r.push(n.serializer.fromDbMutationBatch(t));\n        }));\n      }), bp.waitFor(i).next(function () {\n        return r;\n      });\n    }, i.prototype.removeMutationBatch = function (e, n) {\n      var r = this;\n      return Ep(e.simpleDbTransaction, this.userId, n).next(function (t) {\n        return r.removeCachedMutationKeys(n.batchId), bp.forEach(t, function (t) {\n          return r.referenceDelegate.removeMutationReference(e, t);\n        });\n      });\n    }, i.prototype.removeCachedMutationKeys = function (t) {\n      delete this.documentKeysByBatchId[t];\n    }, i.prototype.performConsistencyCheck = function (n) {\n      var o = this;\n      return this.checkEmpty(n).next(function (t) {\n        if (!t) return bp.resolve();\n        var e = IDBKeyRange.lowerBound(ld.prefixForUser(o.userId)),\n            i = [];\n        return Ip(n).iterate({\n          range: e\n        }, function (t, e, n) {\n          if (t[0] === o.userId) {\n            var r = Jf(t[1]);\n            i.push(r);\n          } else n.done();\n        }).next(function () {\n          Ql(0 === i.length, \"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: \" + i.map(function (t) {\n            return t.canonicalString();\n          }));\n        });\n      });\n    }, i.prototype.containsKey = function (t, e) {\n      return _p(t, this.userId, e);\n    }, i.prototype.getMutationQueueMetadata = function (t) {\n      var e = this;\n      return Cp(t).get(this.userId).next(function (t) {\n        return t || new cd(e.userId, -1, \"\");\n      });\n    }, i;\n  }();\n\n  function _p(t, o, e) {\n    var n = ld.prefixForPath(o, e.path),\n        a = n[1],\n        r = IDBKeyRange.lowerBound(n),\n        s = !1;\n    return Ip(t).iterate({\n      range: r,\n      keysOnly: !0\n    }, function (t, e, n) {\n      var r = t[0],\n          i = t[1];\n      t[2];\n      r === o && i === a && (s = !0), n.done();\n    }).next(function () {\n      return s;\n    });\n  }\n\n  function Ep(t, e, n) {\n    var r = t.store(hd.store),\n        i = t.store(ld.store),\n        o = [],\n        a = IDBKeyRange.only(n.batchId),\n        s = 0,\n        u = r.iterate({\n      range: a\n    }, function (t, e, n) {\n      return s++, n.delete();\n    });\n    o.push(u.next(function () {\n      Ql(1 === s, \"Dangling document-mutation reference found: Missing batch \" + n.batchId);\n    }));\n\n    for (var c = [], h = 0, l = n.mutations; h < l.length; h++) {\n      var f = l[h],\n          p = ld.key(e, f.key.path, n.batchId);\n      o.push(i.delete(p)), c.push(f.key);\n    }\n\n    return bp.waitFor(o).next(function () {\n      return c;\n    });\n  }\n\n  function Tp(t) {\n    return t instanceof Uint8Array ? (Ql(\"YES\" === process.env.USE_MOCK_PERSISTENCE, \"Persisting non-string stream tokens is only supported with mock persistence.\"), t.toString()) : t;\n  }\n\n  function Sp(t) {\n    return Vd.getStore(t, hd.store);\n  }\n\n  function Ip(t) {\n    return Vd.getStore(t, ld.store);\n  }\n\n  function Cp(t) {\n    return Vd.getStore(t, cd.store);\n  }\n\n  var Np, Ap;\n  (Ap = Np || (Np = {}))[Ap.QueryCache = 0] = \"QueryCache\", Ap[Ap.SyncEngine = 1] = \"SyncEngine\";\n\n  var kp = function () {\n    function t(t, e) {\n      Ql((1 & (this.generatorId = t)) === t, \"Generator ID \" + t + \" contains more than 1 reserved bits\"), this.seek(void 0 !== e ? e : this.generatorId);\n    }\n\n    return t.prototype.next = function () {\n      var t = this.nextId;\n      return this.nextId += 2, t;\n    }, t.prototype.after = function (t) {\n      return this.seek(t + 2), this.next();\n    }, t.prototype.seek = function (t) {\n      Ql((1 & t) === this.generatorId, \"Cannot supply target ID from different generator ID\"), this.nextId = t;\n    }, t.forQueryCache = function () {\n      return new t(Np.QueryCache, 2);\n    }, t.forSyncEngine = function () {\n      return new t(Np.SyncEngine);\n    }, t;\n  }(),\n      Dp = \"SimpleDb\",\n      Rp = function () {\n    function s(t) {\n      this.db = t, 12.2 === s.getIOSVersion(Ir()) && jl(\"Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\");\n    }\n\n    return s.openOrCreate = function (o, t, a) {\n      return Ql(s.isAvailable(), \"IndexedDB not supported in current environment.\"), Bl(Dp, \"Opening database:\", o), new bp(function (n, r) {\n        var i = window.indexedDB.open(o, t);\n        i.onsuccess = function (t) {\n          var e = t.target.result;\n          n(new s(e));\n        }, i.onblocked = function () {\n          r(new Yl(zl.FAILED_PRECONDITION, \"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed.\"));\n        }, i.onerror = function (t) {\n          var e = t.target.error;\n          \"VersionError\" === e.name ? r(new Yl(zl.FAILED_PRECONDITION, \"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.\")) : r(e);\n        }, i.onupgradeneeded = function (t) {\n          Bl(Dp, 'Database \"' + o + '\" requires upgrade from version:', t.oldVersion);\n          var e = t.target.result,\n              n = new Pp(i.transaction);\n          a.createOrUpgrade(e, n, t.oldVersion, od).next(function () {\n            Bl(Dp, \"Database upgrade to version \" + od + \" complete\");\n          });\n        };\n      }).toPromise();\n    }, s.delete = function (t) {\n      return Bl(Dp, \"Removing database:\", t), xp(window.indexedDB.deleteDatabase(t)).toPromise();\n    }, s.isAvailable = function () {\n      if (\"undefined\" == typeof window || null == window.indexedDB) return !1;\n      if (void 0 === window.navigator) return \"YES\" === process.env.USE_MOCK_PERSISTENCE;\n      var t = Ir(),\n          e = s.getIOSVersion(t),\n          n = 0 < e && e < 10,\n          r = s.getAndroidVersion(t),\n          i = 0 < r && r < 4.5;\n      return !(0 < t.indexOf(\"MSIE \") || 0 < t.indexOf(\"Trident/\") || 0 < t.indexOf(\"Edge/\") || n || i);\n    }, s.getStore = function (t, e) {\n      return t.store(e);\n    }, s.getIOSVersion = function (t) {\n      var e = t.match(/i(?:phone|pad|pod) os ([\\d_]+)/i),\n          n = e ? e[1].split(\"_\").slice(0, 2).join(\".\") : \"-1\";\n      return Number(n);\n    }, s.getAndroidVersion = function (t) {\n      var e = t.match(/Android ([\\d.]+)/i),\n          n = e ? e[1].split(\".\").slice(0, 2).join(\".\") : \"-1\";\n      return Number(n);\n    }, s.prototype.setVersionChangeListener = function (e) {\n      this.db.onversionchange = function (t) {\n        return e(t);\n      };\n    }, s.prototype.runTransaction = function (t, e, n) {\n      var r = Pp.open(this.db, t, e),\n          i = n(r).catch(function (t) {\n        return r.abort(t), bp.reject(t);\n      }).toPromise();\n      return i.catch(function () {}), r.completionPromise.then(function () {\n        return i;\n      });\n    }, s.prototype.close = function () {\n      this.db.close();\n    }, s;\n  }(),\n      Op = function () {\n    function t(t) {\n      this.dbCursor = t, this.shouldStop = !1, this.nextKey = null;\n    }\n\n    return Object.defineProperty(t.prototype, \"isDone\", {\n      get: function () {\n        return this.shouldStop;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"skipToKey\", {\n      get: function () {\n        return this.nextKey;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"cursor\", {\n      set: function (t) {\n        this.dbCursor = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.done = function () {\n      this.shouldStop = !0;\n    }, t.prototype.skip = function (t) {\n      this.nextKey = t;\n    }, t.prototype.delete = function () {\n      return xp(this.dbCursor.delete());\n    }, t;\n  }(),\n      Pp = function () {\n    function r(t) {\n      var n = this;\n      this.transaction = t, this.aborted = !1, this.completionDeferred = new Bf(), this.transaction.oncomplete = function () {\n        n.completionDeferred.resolve();\n      }, this.transaction.onabort = function () {\n        t.error ? n.completionDeferred.reject(t.error) : n.completionDeferred.resolve();\n      }, this.transaction.onerror = function (t) {\n        var e = Fp(t.target.error);\n        n.completionDeferred.reject(e);\n      };\n    }\n\n    return r.open = function (t, e, n) {\n      return new r(t.transaction(n, e));\n    }, Object.defineProperty(r.prototype, \"completionPromise\", {\n      get: function () {\n        return this.completionDeferred.promise;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), r.prototype.abort = function (t) {\n      t && this.completionDeferred.reject(t), this.aborted || (Bl(Dp, \"Aborting transaction:\", t ? t.message : \"Client-initiated abort\"), this.aborted = !0, this.transaction.abort());\n    }, r.prototype.store = function (t) {\n      var e = this.transaction.objectStore(t);\n      return Ql(!!e, \"Object store not part of transaction: \" + t), new Mp(e);\n    }, r;\n  }(),\n      Mp = function () {\n    function t(t) {\n      this.store = t;\n    }\n\n    return t.prototype.put = function (t, e) {\n      return xp(void 0 !== e ? (Bl(Dp, \"PUT\", this.store.name, t, e), this.store.put(e, t)) : (Bl(Dp, \"PUT\", this.store.name, \"<auto-key>\", t), this.store.put(t)));\n    }, t.prototype.add = function (t) {\n      return Bl(Dp, \"ADD\", this.store.name, t, t), xp(this.store.add(t));\n    }, t.prototype.get = function (e) {\n      var n = this;\n      return xp(this.store.get(e)).next(function (t) {\n        return void 0 === t && (t = null), Bl(Dp, \"GET\", n.store.name, e, t), t;\n      });\n    }, t.prototype.delete = function (t) {\n      return Bl(Dp, \"DELETE\", this.store.name, t), xp(this.store.delete(t));\n    }, t.prototype.count = function () {\n      return Bl(Dp, \"COUNT\", this.store.name), xp(this.store.count());\n    }, t.prototype.loadAll = function (t, e) {\n      var n = this.cursor(this.options(t, e)),\n          r = [];\n      return this.iterateCursor(n, function (t, e) {\n        r.push(e);\n      }).next(function () {\n        return r;\n      });\n    }, t.prototype.deleteAll = function (t, e) {\n      Bl(Dp, \"DELETE ALL\", this.store.name);\n      var n = this.options(t, e);\n      n.keysOnly = !1;\n      var r = this.cursor(n);\n      return this.iterateCursor(r, function (t, e, n) {\n        return n.delete();\n      });\n    }, t.prototype.iterate = function (t, e) {\n      var n;\n      e ? n = t : (n = {}, e = t);\n      var r = this.cursor(n);\n      return this.iterateCursor(r, e);\n    }, t.prototype.iterateSerial = function (i) {\n      var t = this.cursor({});\n      return new bp(function (n, r) {\n        t.onerror = function (t) {\n          var e = Fp(t.target.error);\n          r(e);\n        }, t.onsuccess = function (t) {\n          var e = t.target.result;\n          e ? i(e.primaryKey, e.value).next(function (t) {\n            t ? e.continue() : n();\n          }) : n();\n        };\n      });\n    }, t.prototype.iterateCursor = function (t, a) {\n      var s = [];\n      return new bp(function (o, e) {\n        t.onerror = function (t) {\n          e(t.target.error);\n        }, t.onsuccess = function (t) {\n          var e = t.target.result;\n\n          if (e) {\n            var n = new Op(e),\n                r = a(e.primaryKey, e.value, n);\n\n            if (r instanceof bp) {\n              var i = r.catch(function (t) {\n                return n.done(), bp.reject(t);\n              });\n              s.push(i);\n            }\n\n            n.isDone ? o() : null === n.skipToKey ? e.continue() : e.continue(n.skipToKey);\n          } else o();\n        };\n      }).next(function () {\n        return bp.waitFor(s);\n      });\n    }, t.prototype.options = function (t, e) {\n      var n = void 0;\n      return void 0 !== t && (\"string\" == typeof t ? n = t : (Ql(void 0 === e, \"3rd argument must not be defined if 2nd is a range.\"), e = t)), {\n        index: n,\n        range: e\n      };\n    }, t.prototype.cursor = function (t) {\n      var e = \"next\";\n\n      if (t.reverse && (e = \"prev\"), t.index) {\n        var n = this.store.index(t.index);\n        return t.keysOnly ? n.openKeyCursor(t.range, e) : n.openCursor(t.range, e);\n      }\n\n      return this.store.openCursor(t.range, e);\n    }, t;\n  }();\n\n  function xp(t) {\n    return new bp(function (n, r) {\n      t.onsuccess = function (t) {\n        var e = t.target.result;\n        n(e);\n      }, t.onerror = function (t) {\n        var e = Fp(t.target.error);\n        r(e);\n      };\n    });\n  }\n\n  var Lp = !1;\n\n  function Fp(t) {\n    var e = Rp.getIOSVersion(Ir());\n\n    if (12.2 <= e && e < 13) {\n      var n = \"An internal error was encountered in the Indexed Database server\";\n\n      if (0 <= t.message.indexOf(n)) {\n        var r = new Yl(\"internal\", \"IOS_INDEXEDDB_BUG1: IndexedDb has thrown '\" + n + \"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\");\n        return Lp || (Lp = !0, setTimeout(function () {\n          throw r;\n        }, 0)), r;\n      }\n    }\n\n    return t;\n  }\n\n  var Up = function () {\n    function t(t, e) {\n      this.referenceDelegate = t, this.serializer = e, this.targetIdGenerator = kp.forQueryCache();\n    }\n\n    return t.prototype.allocateTargetId = function (e) {\n      var n = this;\n      return this.retrieveMetadata(e).next(function (t) {\n        return t.highestTargetId = n.targetIdGenerator.after(t.highestTargetId), n.saveMetadata(e, t).next(function () {\n          return t.highestTargetId;\n        });\n      });\n    }, t.prototype.getLastRemoteSnapshotVersion = function (t) {\n      return this.retrieveMetadata(t).next(function (t) {\n        return Zf.fromTimestamp(new $f(t.lastRemoteSnapshotVersion.seconds, t.lastRemoteSnapshotVersion.nanoseconds));\n      });\n    }, t.prototype.getHighestSequenceNumber = function (t) {\n      return Bp(t.simpleDbTransaction);\n    }, t.prototype.setTargetsMetadata = function (e, n, r) {\n      var i = this;\n      return this.retrieveMetadata(e).next(function (t) {\n        return t.highestListenSequenceNumber = n, r && (t.lastRemoteSnapshotVersion = r.toTimestamp()), n > t.highestListenSequenceNumber && (t.highestListenSequenceNumber = n), i.saveMetadata(e, t);\n      });\n    }, t.prototype.addQueryData = function (e, n) {\n      var r = this;\n      return this.saveQueryData(e, n).next(function () {\n        return r.retrieveMetadata(e).next(function (t) {\n          return t.targetCount += 1, r.updateMetadataFromQueryData(n, t), r.saveMetadata(e, t);\n        });\n      });\n    }, t.prototype.updateQueryData = function (t, e) {\n      return this.saveQueryData(t, e);\n    }, t.prototype.removeQueryData = function (e, t) {\n      var n = this;\n      return this.removeMatchingKeysForTargetId(e, t.targetId).next(function () {\n        return qp(e).delete(t.targetId);\n      }).next(function () {\n        return n.retrieveMetadata(e);\n      }).next(function (t) {\n        return Ql(0 < t.targetCount, \"Removing from an empty query cache\"), t.targetCount -= 1, n.saveMetadata(e, t);\n      });\n    }, t.prototype.removeTargets = function (r, i, o) {\n      var a = this,\n          s = 0,\n          u = [];\n      return qp(r).iterate(function (t, e) {\n        var n = a.serializer.fromDbTarget(e);\n        n.sequenceNumber <= i && void 0 === o[n.targetId] && (s++, u.push(a.removeQueryData(r, n)));\n      }).next(function () {\n        return bp.waitFor(u);\n      }).next(function () {\n        return s;\n      });\n    }, t.prototype.forEachTarget = function (t, r) {\n      var i = this;\n      return qp(t).iterate(function (t, e) {\n        var n = i.serializer.fromDbTarget(e);\n        r(n);\n      });\n    }, t.prototype.retrieveMetadata = function (t) {\n      return Vp(t.simpleDbTransaction);\n    }, t.prototype.saveMetadata = function (t, e) {\n      return (n = t, Vd.getStore(n, vd.store)).put(vd.key, e);\n      var n;\n    }, t.prototype.saveQueryData = function (t, e) {\n      return qp(t).put(this.serializer.toDbTarget(e));\n    }, t.prototype.updateMetadataFromQueryData = function (t, e) {\n      var n = !1;\n      return t.targetId > e.highestTargetId && (e.highestTargetId = t.targetId, n = !0), t.sequenceNumber > e.highestListenSequenceNumber && (e.highestListenSequenceNumber = t.sequenceNumber, n = !0), n;\n    }, t.prototype.getQueryCount = function (t) {\n      return this.retrieveMetadata(t).next(function (t) {\n        return t.targetCount;\n      });\n    }, t.prototype.getQueryData = function (t, i) {\n      var o = this,\n          e = i.canonicalId(),\n          n = IDBKeyRange.bound([e, Number.NEGATIVE_INFINITY], [e, Number.POSITIVE_INFINITY]),\n          a = null;\n      return qp(t).iterate({\n        range: n,\n        index: md.queryTargetsIndexName\n      }, function (t, e, n) {\n        var r = o.serializer.fromDbTarget(e);\n        i.isEqual(r.query) && (a = r, n.done());\n      }).next(function () {\n        return a;\n      });\n    }, t.prototype.addMatchingKeys = function (n, t, r) {\n      var i = this,\n          o = [],\n          a = jp(n);\n      return t.forEach(function (t) {\n        var e = zf(t.path);\n        o.push(a.put(new gd(r, e))), o.push(i.referenceDelegate.addReference(n, t));\n      }), bp.waitFor(o);\n    }, t.prototype.removeMatchingKeys = function (n, t, r) {\n      var i = this,\n          o = jp(n);\n      return bp.forEach(t, function (t) {\n        var e = zf(t.path);\n        return bp.waitFor([o.delete([r, e]), i.referenceDelegate.removeReference(n, t)]);\n      });\n    }, t.prototype.removeMatchingKeysForTargetId = function (t, e) {\n      var n = jp(t),\n          r = IDBKeyRange.bound([e], [e + 1], !1, !0);\n      return n.delete(r);\n    }, t.prototype.getMatchingKeysForTargetId = function (t, e) {\n      var n = IDBKeyRange.bound([e], [e + 1], !1, !0),\n          r = jp(t),\n          o = dp();\n      return r.iterate({\n        range: n,\n        keysOnly: !0\n      }, function (t, e, n) {\n        var r = Jf(t[1]),\n            i = new Vf(r);\n        o = o.add(i);\n      }).next(function () {\n        return o;\n      });\n    }, t.prototype.containsKey = function (t, e) {\n      var n = zf(e.path),\n          r = IDBKeyRange.bound([n], [Sf(n)], !1, !0),\n          i = 0;\n      return jp(t).iterate({\n        index: gd.documentTargetsIndex,\n        keysOnly: !0,\n        range: r\n      }, function (t, e, n) {\n        var r = t[0];\n        t[1];\n        0 !== r && (i++, n.done());\n      }).next(function () {\n        return 0 < i;\n      });\n    }, t.prototype.getQueryDataForTarget = function (t, e) {\n      var n = this;\n      return qp(t).get(e).next(function (t) {\n        return t ? n.serializer.fromDbTarget(t) : null;\n      });\n    }, t;\n  }();\n\n  function qp(t) {\n    return Vd.getStore(t, md.store);\n  }\n\n  function Vp(t) {\n    return Rp.getStore(t, vd.store).get(vd.key).next(function (t) {\n      return Ql(null !== t, \"Missing metadata row.\"), t;\n    });\n  }\n\n  function Bp(t) {\n    return Vp(t).next(function (t) {\n      return t.highestListenSequenceNumber;\n    });\n  }\n\n  function jp(t) {\n    return Vd.getStore(t, gd.store);\n  }\n\n  var Wp = function () {\n    function t(t, e) {\n      this.key = t, this.version = e;\n    }\n\n    return t.compareByKey = function (t, e) {\n      return Vf.comparator(t.key, e.key);\n    }, t;\n  }(),\n      Kp = function (a) {\n    function e(t, e, n, r, i) {\n      var o = a.call(this, t, e) || this;\n      return o.data = n, o.proto = i, o.hasLocalMutations = !!r.hasLocalMutations, o.hasCommittedMutations = !!r.hasCommittedMutations, o;\n    }\n\n    return hr(e, a), e.prototype.field = function (t) {\n      return this.data.field(t);\n    }, e.prototype.fieldValue = function (t) {\n      var e = this.field(t);\n      return e ? e.value() : void 0;\n    }, e.prototype.value = function () {\n      return this.data.value();\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.key.isEqual(t.key) && this.version.isEqual(t.version) && this.data.isEqual(t.data) && this.hasLocalMutations === t.hasLocalMutations && this.hasCommittedMutations === t.hasCommittedMutations;\n    }, e.prototype.toString = function () {\n      return \"Document(\" + this.key + \", \" + this.version + \", \" + this.data.toString() + \", {hasLocalMutations: \" + this.hasLocalMutations + \"}), {hasCommittedMutations: \" + this.hasCommittedMutations + \"})\";\n    }, Object.defineProperty(e.prototype, \"hasPendingWrites\", {\n      get: function () {\n        return this.hasLocalMutations || this.hasCommittedMutations;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.compareByField = function (t, e, n) {\n      var r = e.field(t),\n          i = n.field(t);\n      return void 0 !== r && void 0 !== i ? r.compareTo(i) : Kl(\"Trying to compare documents on fields that don't exist\");\n    }, e;\n  }(Wp),\n      Qp = function (i) {\n    function e(t, e, n) {\n      var r = i.call(this, t, e) || this;\n      return r.hasCommittedMutations = !(!n || !n.hasCommittedMutations), r;\n    }\n\n    return hr(e, i), e.prototype.toString = function () {\n      return \"NoDocument(\" + this.key + \", \" + this.version + \")\";\n    }, Object.defineProperty(e.prototype, \"hasPendingWrites\", {\n      get: function () {\n        return this.hasCommittedMutations;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.isEqual = function (t) {\n      return t instanceof e && t.hasCommittedMutations === this.hasCommittedMutations && t.version.isEqual(this.version) && t.key.isEqual(this.key);\n    }, e;\n  }(Wp),\n      Hp = function (n) {\n    function e(t, e) {\n      return n.call(this, t, e) || this;\n    }\n\n    return hr(e, n), e.prototype.toString = function () {\n      return \"UnknownDocument(\" + this.key + \", \" + this.version + \")\";\n    }, Object.defineProperty(e.prototype, \"hasPendingWrites\", {\n      get: function () {\n        return !0;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.isEqual = function (t) {\n      return t instanceof e && t.version.isEqual(this.version) && t.key.isEqual(this.key);\n    }, e;\n  }(Wp),\n      Gp = function () {\n    function t(t) {\n      this.mapKeyFn = t, this.inner = {};\n    }\n\n    return t.prototype.get = function (t) {\n      var e = this.mapKeyFn(t),\n          n = this.inner[e];\n      if (void 0 !== n) for (var r = 0, i = n; r < i.length; r++) {\n        var o = i[r],\n            a = o[0],\n            s = o[1];\n        if (a.isEqual(t)) return s;\n      }\n    }, t.prototype.has = function (t) {\n      return void 0 !== this.get(t);\n    }, t.prototype.set = function (t, e) {\n      var n = this.mapKeyFn(t),\n          r = this.inner[n];\n\n      if (void 0 !== r) {\n        for (var i = 0; i < r.length; i++) if (r[i][0].isEqual(t)) return void (r[i] = [t, e]);\n\n        r.push([t, e]);\n      } else this.inner[n] = [[t, e]];\n    }, t.prototype.delete = function (t) {\n      var e = this.mapKeyFn(t),\n          n = this.inner[e];\n      if (void 0 === n) return !1;\n\n      for (var r = 0; r < n.length; r++) if (n[r][0].isEqual(t)) return 1 === n.length ? delete this.inner[e] : n.splice(r, 1), !0;\n\n      return !1;\n    }, t.prototype.forEach = function (s) {\n      tf(this.inner, function (t, e) {\n        for (var n = 0, r = e; n < r.length; n++) {\n          var i = r[n],\n              o = i[0],\n              a = i[1];\n          s(o, a);\n        }\n      });\n    }, t.prototype.isEmpty = function () {\n      return ef(this.inner);\n    }, t;\n  }(),\n      zp = function () {\n    function t() {\n      this.changes = sp(), this.documentSizes = new Gp(function (t) {\n        return t.toString();\n      });\n    }\n\n    return t.prototype.addEntry = function (t) {\n      var e = this.assertChanges();\n      this.changes = e.insert(t.key, t);\n    }, t.prototype.getEntry = function (t, e) {\n      var n = this,\n          r = this.assertChanges().get(e);\n      return r ? bp.resolve(r) : this.getFromCache(t, e).next(function (t) {\n        return null === t ? (n.documentSizes.set(e, 0), null) : (n.documentSizes.set(e, t.size), t.maybeDocument);\n      });\n    }, t.prototype.getEntries = function (t, e) {\n      var n = this;\n      return this.getAllFromCache(t, e).next(function (t) {\n        var e = t.maybeDocuments;\n        return t.sizeMap.forEach(function (t, e) {\n          n.documentSizes.set(t, e);\n        }), e;\n      });\n    }, t.prototype.apply = function (t) {\n      var e = this.applyChanges(t);\n      return this.changes = null, e;\n    }, t.prototype.assertChanges = function () {\n      return Ql(null !== this.changes, \"Changes have already been applied.\"), this.changes;\n    }, t;\n  }(),\n      Yp = \"The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.\",\n      Xp = function () {\n    function t(t, e, n) {\n      this.serializer = t, this.indexManager = e, this.keepDocumentChangeLog = n, this._lastProcessedDocumentChangeId = 0;\n    }\n\n    return Object.defineProperty(t.prototype, \"lastProcessedDocumentChangeId\", {\n      get: function () {\n        return this._lastProcessedDocumentChangeId;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.start = function (t) {\n      var e = Rp.getStore(t, _d.store);\n      return this.synchronizeLastDocumentChangeId(e);\n    }, t.prototype.addEntries = function (t, e, n) {\n      var r = [];\n\n      if (0 < e.length) {\n        for (var i = Zp(t), o = dp(), a = 0, s = e; a < s.length; a++) {\n          var u = s[a],\n              c = u.key,\n              h = u.doc;\n          r.push(i.put(ed(c), h)), o = o.add(c), r.push(this.indexManager.addToCollectionParentIndex(t, c.path.popLast()));\n        }\n\n        this.keepDocumentChangeLog && r.push(td(t).put({\n          changes: this.serializer.toDbResourcePaths(o)\n        })), r.push(this.updateSize(t, n));\n      }\n\n      return bp.waitFor(r);\n    }, t.prototype.removeEntry = function (t, e) {\n      var n = Zp(t),\n          r = ed(e);\n      return n.get(r).next(function (t) {\n        return t ? n.delete(r).next(function () {\n          return nd(t);\n        }) : bp.resolve(0);\n      });\n    }, t.prototype.getEntry = function (t, e) {\n      var n = this;\n      return Zp(t).get(ed(e)).next(function (t) {\n        return t ? n.serializer.fromDbRemoteDocument(t) : null;\n      });\n    }, t.prototype.getSizedEntry = function (t, e) {\n      var n = this;\n      return Zp(t).get(ed(e)).next(function (t) {\n        return t ? {\n          maybeDocument: n.serializer.fromDbRemoteDocument(t),\n          size: nd(t)\n        } : null;\n      });\n    }, t.prototype.getEntries = function (t, e) {\n      var n = this,\n          r = up();\n      return this.forEachDbEntry(t, e, function (t, e) {\n        r = e ? r.insert(t, n.serializer.fromDbRemoteDocument(e)) : r.insert(t, null);\n      }).next(function () {\n        return r;\n      });\n    }, t.prototype.getSizedEntries = function (t, e) {\n      var n = this,\n          r = up(),\n          i = new tp(Vf.comparator);\n      return this.forEachDbEntry(t, e, function (t, e) {\n        i = e ? (r = r.insert(t, n.serializer.fromDbRemoteDocument(e)), i.insert(t, nd(e))) : (r = r.insert(t, null), i.insert(t, 0));\n      }).next(function () {\n        return {\n          maybeDocuments: r,\n          sizeMap: i\n        };\n      });\n    }, t.prototype.forEachDbEntry = function (t, e, i) {\n      if (e.isEmpty()) return bp.resolve();\n      var n = IDBKeyRange.bound(e.first().path.toArray(), e.last().path.toArray()),\n          o = e.getIterator(),\n          a = o.getNext();\n      return Zp(t).iterate({\n        range: n\n      }, function (t, e, n) {\n        for (var r = Vf.fromSegments(t); a && Vf.comparator(a, r) < 0;) i(a, null), a = o.getNext();\n\n        a && a.isEqual(r) && (i(a, e), a = o.hasNext() ? o.getNext() : null), a ? n.skip(a.path.toArray()) : n.done();\n      }).next(function () {\n        for (; a;) i(a, null), a = o.hasNext() ? o.getNext() : null;\n      });\n    }, t.prototype.getDocumentsMatchingQuery = function (t, i) {\n      var o = this;\n      Ql(!i.isCollectionGroupQuery(), \"CollectionGroup queries should be handled in LocalDocumentsView\");\n      var a = hp(),\n          s = i.path.length + 1,\n          e = i.path.toArray(),\n          n = IDBKeyRange.lowerBound(e);\n      return Zp(t).iterate({\n        range: n\n      }, function (t, e, n) {\n        if (t.length === s) {\n          var r = o.serializer.fromDbRemoteDocument(e);\n          i.path.isPrefixOf(r.key.path) ? r instanceof Kp && i.matches(r) && (a = a.insert(r.key, r)) : n.done();\n        }\n      }).next(function () {\n        return a;\n      });\n    }, t.prototype.getNewDocumentChanges = function (e) {\n      var r = this;\n      Ql(this.keepDocumentChangeLog, \"Can only call getNewDocumentChanges() when document change log is enabled\");\n      var n = dp(),\n          i = sp(),\n          t = IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId + 1),\n          o = !0,\n          a = td(e);\n      return a.iterate({\n        range: t\n      }, function (t, e) {\n        if (o && (o = !1, r._lastProcessedDocumentChangeId + 1 !== e.id)) return r.synchronizeLastDocumentChangeId(a).next(function () {\n          return bp.reject(new Yl(zl.DATA_LOSS, Yp));\n        });\n        n = n.unionWith(r.serializer.fromDbResourcePaths(e.changes)), r._lastProcessedDocumentChangeId = e.id;\n      }).next(function () {\n        var t = [];\n        return n.forEach(function (n) {\n          t.push(r.getEntry(e, n).next(function (t) {\n            var e = t || new Qp(n, Zf.forDeletedDoc());\n            i = i.insert(n, e);\n          }));\n        }), bp.waitFor(t);\n      }).next(function () {\n        return i;\n      });\n    }, t.prototype.removeDocumentChangesThroughChangeId = function (t, e) {\n      var n = IDBKeyRange.upperBound(e);\n      return td(t).delete(n);\n    }, t.prototype.synchronizeLastDocumentChangeId = function (t) {\n      var r = this;\n      return this._lastProcessedDocumentChangeId = 0, t.iterate({\n        keysOnly: !0,\n        reverse: !0\n      }, function (t, e, n) {\n        r._lastProcessedDocumentChangeId = t, n.done();\n      });\n    }, t.prototype.newChangeBuffer = function () {\n      return new $p(this);\n    }, t.prototype.getSize = function (t) {\n      return this.getMetadata(t).next(function (t) {\n        return t.byteSize;\n      });\n    }, t.prototype.getMetadata = function (t) {\n      return Jp(t).get(yd.key).next(function (t) {\n        return Ql(!!t, \"Missing document cache metadata\"), t;\n      });\n    }, t.prototype.setMetadata = function (t, e) {\n      return Jp(t).put(yd.key, e);\n    }, t.prototype.updateSize = function (e, n) {\n      var r = this;\n      return this.getMetadata(e).next(function (t) {\n        return t.byteSize += n, r.setMetadata(e, t);\n      });\n    }, t;\n  }();\n\n  function Jp(t) {\n    return Vd.getStore(t, yd.store);\n  }\n\n  var $p = function (n) {\n    function t(t) {\n      var e = n.call(this) || this;\n      return e.documentCache = t, e;\n    }\n\n    return hr(t, n), t.prototype.applyChanges = function (t) {\n      var o = this,\n          e = this.assertChanges(),\n          a = 0,\n          s = [];\n      return e.forEach(function (t, e) {\n        var n = o.documentCache.serializer.toDbRemoteDocument(e),\n            r = o.documentSizes.get(t);\n        Ql(void 0 !== r, \"Attempting to change document \" + t.toString() + \" without having read it first\");\n        var i = nd(n);\n        a += i - r, s.push({\n          key: t,\n          doc: n\n        });\n      }), this.documentCache.addEntries(t, s, a);\n    }, t.prototype.getFromCache = function (t, e) {\n      return this.documentCache.getSizedEntry(t, e);\n    }, t.prototype.getAllFromCache = function (t, e) {\n      return this.documentCache.getSizedEntries(t, e);\n    }, t;\n  }(zp);\n\n  function Zp(t) {\n    return Vd.getStore(t, dd.store);\n  }\n\n  function td(t) {\n    return Vd.getStore(t, _d.store);\n  }\n\n  function ed(t) {\n    return t.path.toArray();\n  }\n\n  function nd(t) {\n    var e;\n    if (t.document) e = t.document;else if (t.unknownDocument) e = t.unknownDocument;else {\n      if (!t.noDocument) throw Kl(\"Unknown remote document type\");\n      e = t.noDocument;\n    }\n    return JSON.stringify(e).length;\n  }\n\n  var rd = function () {\n    function t() {\n      this.collectionParentIndex = new id();\n    }\n\n    return t.prototype.addToCollectionParentIndex = function (t, e) {\n      return this.collectionParentIndex.add(e), bp.resolve();\n    }, t.prototype.getCollectionParents = function (t, e) {\n      return bp.resolve(this.collectionParentIndex.getEntries(e));\n    }, t;\n  }(),\n      id = function () {\n    function t() {\n      this.index = {};\n    }\n\n    return t.prototype.add = function (t) {\n      Ql(t.length % 2 == 1, \"Expected a collection path.\");\n      var e = t.lastSegment(),\n          n = t.popLast(),\n          r = this.index[e] || new ip(Ff.comparator),\n          i = !r.has(n);\n      return this.index[e] = r.add(n), i;\n    }, t.prototype.getEntries = function (t) {\n      return (this.index[t] || new ip(Ff.comparator)).toArray();\n    }, t;\n  }(),\n      od = 8,\n      ad = function () {\n    function t(t) {\n      this.serializer = t;\n    }\n\n    return t.prototype.createOrUpgrade = function (t, n, e, r) {\n      var i,\n          o = this;\n      Ql(e < r && 0 <= e && r <= od, \"Unexpected schema upgrade from v\" + e + \" to v{toVersion}.\"), e < 1 && 1 <= r && (t.createObjectStore(ud.store), (i = t).createObjectStore(cd.store, {\n        keyPath: cd.keyPath\n      }), i.createObjectStore(hd.store, {\n        keyPath: hd.keyPath,\n        autoIncrement: !0\n      }).createIndex(hd.userMutationsIndex, hd.userMutationsKeyPath, {\n        unique: !0\n      }), i.createObjectStore(ld.store), wd(t), t.createObjectStore(dd.store));\n      var a,\n          s = bp.resolve();\n      return e < 3 && 3 <= r && (0 !== e && ((a = t).deleteObjectStore(gd.store), a.deleteObjectStore(md.store), a.deleteObjectStore(vd.store), wd(t)), s = s.next(function () {\n        return t = n.store(vd.store), e = new vd(0, 0, Zf.MIN.toTimestamp(), 0), t.put(vd.key, e);\n        var t, e;\n      })), e < 4 && 4 <= r && (0 !== e && (s = s.next(function () {\n        return i = t, (o = n).store(hd.store).loadAll().next(function (t) {\n          i.deleteObjectStore(hd.store);\n          var e = i.createObjectStore(hd.store, {\n            keyPath: hd.keyPath,\n            autoIncrement: !0\n          });\n          e.createIndex(hd.userMutationsIndex, hd.userMutationsKeyPath, {\n            unique: !0\n          });\n          var n = o.store(hd.store),\n              r = t.map(function (t) {\n            return n.put(t);\n          });\n          return bp.waitFor(r);\n        });\n        var i, o;\n      })), s = s.next(function () {\n        t.createObjectStore(Ed.store, {\n          keyPath: Ed.keyPath\n        }), t.createObjectStore(_d.store, {\n          keyPath: \"id\",\n          autoIncrement: !0\n        });\n      })), e < 5 && 5 <= r && (s = s.next(function () {\n        return o.removeAcknowledgedMutations(n);\n      })), e < 6 && 6 <= r && (s = s.next(function () {\n        return t.createObjectStore(yd.store), o.addDocumentGlobal(n);\n      })), e < 7 && 7 <= r && (s = s.next(function () {\n        return o.ensureSequenceNumbers(n);\n      })), e < 8 && 8 <= r && (s = s.next(function () {\n        return o.createCollectionParentIndex(t, n);\n      })), s;\n    }, t.prototype.addDocumentGlobal = function (e) {\n      var n = 0;\n      return e.store(dd.store).iterate(function (t, e) {\n        n += nd(e);\n      }).next(function () {\n        var t = new yd(n);\n        return e.store(yd.store).put(yd.key, t);\n      });\n    }, t.prototype.removeAcknowledgedMutations = function (r) {\n      var i = this,\n          t = r.store(cd.store),\n          e = r.store(hd.store);\n      return t.loadAll().next(function (t) {\n        return bp.forEach(t, function (n) {\n          var t = IDBKeyRange.bound([n.userId, -1], [n.userId, n.lastAcknowledgedBatchId]);\n          return e.loadAll(hd.userMutationsIndex, t).next(function (t) {\n            return bp.forEach(t, function (t) {\n              Ql(t.userId === n.userId, \"Cannot process batch \" + t.batchId + \" from unexpected user\");\n              var e = i.serializer.fromDbMutationBatch(t);\n              return Ep(r, n.userId, e).next(function () {});\n            });\n          });\n        });\n      });\n    }, t.prototype.ensureSequenceNumbers = function (t) {\n      var a = t.store(gd.store),\n          e = t.store(dd.store);\n      return Bp(t).next(function (i) {\n        var o = [];\n        return e.iterate(function (t, e) {\n          var n = new Ff(t),\n              r = [0, zf(n)];\n          o.push(a.get(r).next(function (t) {\n            return t ? bp.resolve() : (e = n, a.put(new gd(0, zf(e), i)));\n            var e;\n          }));\n        }).next(function () {\n          return bp.waitFor(o);\n        });\n      });\n    }, t.prototype.createCollectionParentIndex = function (t, e) {\n      t.createObjectStore(bd.store, {\n        keyPath: bd.keyPath\n      });\n\n      var r = e.store(bd.store),\n          i = new id(),\n          o = function (t) {\n        if (i.add(t)) {\n          var e = t.lastSegment(),\n              n = t.popLast();\n          return r.put({\n            collectionId: e,\n            parent: zf(n)\n          });\n        }\n      };\n\n      return e.store(dd.store).iterate({\n        keysOnly: !0\n      }, function (t, e) {\n        var n = new Ff(t);\n        return o(n.popLast());\n      }).next(function () {\n        return e.store(ld.store).iterate({\n          keysOnly: !0\n        }, function (t, e) {\n          t[0];\n          var n = t[1],\n              r = (t[2], Jf(n));\n          return o(r.popLast());\n        });\n      });\n    }, t;\n  }();\n\n  var sd = function (t, e) {\n    this.seconds = t, this.nanoseconds = e;\n  },\n      ud = function () {\n    function t(t, e, n) {\n      this.ownerId = t, this.allowTabSynchronization = e, this.leaseTimestampMs = n;\n    }\n\n    return t.store = \"owner\", t.key = \"owner\", t;\n  }();\n\n  var cd = function () {\n    function t(t, e, n) {\n      this.userId = t, this.lastAcknowledgedBatchId = e, this.lastStreamToken = n;\n    }\n\n    return t.store = \"mutationQueues\", t.keyPath = \"userId\", t;\n  }(),\n      hd = function () {\n    function t(t, e, n, r, i) {\n      this.userId = t, this.batchId = e, this.localWriteTimeMs = n, this.baseMutations = r, this.mutations = i;\n    }\n\n    return t.store = \"mutations\", t.keyPath = \"batchId\", t.userMutationsIndex = \"userMutationsIndex\", t.userMutationsKeyPath = [\"userId\", \"batchId\"], t;\n  }();\n\n  var ld = function () {\n    function t() {}\n\n    return t.prefixForUser = function (t) {\n      return [t];\n    }, t.prefixForPath = function (t, e) {\n      return [t, zf(e)];\n    }, t.key = function (t, e, n) {\n      return [t, zf(e), n];\n    }, t.store = \"documentMutations\", t.PLACEHOLDER = new t(), t;\n  }();\n\n  var fd = function (t, e) {\n    this.path = t, this.readTime = e;\n  },\n      pd = function (t, e) {\n    this.path = t, this.version = e;\n  },\n      dd = function () {\n    function t(t, e, n, r) {\n      this.unknownDocument = t, this.noDocument = e, this.document = n, this.hasCommittedMutations = r;\n    }\n\n    return t.store = \"remoteDocuments\", t;\n  }(),\n      yd = function () {\n    function t(t) {\n      this.byteSize = t;\n    }\n\n    return t.store = \"remoteDocumentGlobal\", t.key = \"remoteDocumentGlobalKey\", t;\n  }();\n\n  var md = function () {\n    function t(t, e, n, r, i, o) {\n      this.targetId = t, this.canonicalId = e, this.readTime = n, this.resumeToken = r, this.lastListenSequenceNumber = i, this.query = o;\n    }\n\n    return t.store = \"targets\", t.keyPath = \"targetId\", t.queryTargetsIndexName = \"queryTargetsIndex\", t.queryTargetsKeyPath = [\"canonicalId\", \"targetId\"], t;\n  }(),\n      gd = function () {\n    function t(t, e, n) {\n      this.targetId = t, this.path = e, Ql(0 === t == (void 0 !== (this.sequenceNumber = n)), \"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number\");\n    }\n\n    return t.store = \"targetDocuments\", t.keyPath = [\"targetId\", \"path\"], t.documentTargetsIndex = \"documentTargetsIndex\", t.documentTargetsKeyPath = [\"path\", \"targetId\"], t;\n  }(),\n      vd = function () {\n    function t(t, e, n, r) {\n      this.highestTargetId = t, this.highestListenSequenceNumber = e, this.lastRemoteSnapshotVersion = n, this.targetCount = r;\n    }\n\n    return t.key = \"targetGlobalKey\", t.store = \"targetGlobal\", t;\n  }(),\n      bd = function () {\n    function t(t, e) {\n      this.collectionId = t, this.parent = e;\n    }\n\n    return t.store = \"collectionParents\", t.keyPath = [\"collectionId\", \"parent\"], t;\n  }();\n\n  function wd(t) {\n    t.createObjectStore(gd.store, {\n      keyPath: gd.keyPath\n    }).createIndex(gd.documentTargetsIndex, gd.documentTargetsKeyPath, {\n      unique: !0\n    }), t.createObjectStore(md.store, {\n      keyPath: md.keyPath\n    }).createIndex(md.queryTargetsIndexName, md.queryTargetsKeyPath, {\n      unique: !0\n    }), t.createObjectStore(vd.store);\n  }\n\n  var _d = function () {\n    function t(t) {\n      this.changes = t;\n    }\n\n    return t.store = \"remoteDocumentChanges\", t.keyPath = \"id\", t;\n  }();\n\n  var Ed = function () {\n    function t(t, e, n, r, i) {\n      this.clientId = t, this.updateTimeMs = e, this.networkEnabled = n, this.inForeground = r, this.lastProcessedDocumentChangeId = i;\n    }\n\n    return t.store = \"clientMetadata\", t.keyPath = \"clientId\", t;\n  }();\n\n  var Td,\n      Sd,\n      Id = [cd.store, hd.store, ld.store, dd.store, md.store, ud.store, vd.store, gd.store].concat([Ed.store, _d.store]).concat([yd.store]).concat([bd.store]),\n      Cd = function () {\n    function t() {\n      this.collectionParentsCache = new id();\n    }\n\n    return t.prototype.addToCollectionParentIndex = function (t, e) {\n      if (Ql(e.length % 2 == 1, \"Expected a collection path.\"), this.collectionParentsCache.add(e)) {\n        Ql(1 <= e.length, \"Invalid collection path.\");\n        var n = e.lastSegment(),\n            r = e.popLast();\n        return Nd(t).put({\n          collectionId: n,\n          parent: zf(r)\n        });\n      }\n\n      return bp.resolve();\n    }, t.prototype.getCollectionParents = function (t, i) {\n      var o = [],\n          e = IDBKeyRange.bound([i, \"\"], [Sf(i), \"\"], !1, !0);\n      return Nd(t).loadAll(e).next(function (t) {\n        for (var e = 0, n = t; e < n.length; e++) {\n          var r = n[e];\n          if (r.collectionId !== i) break;\n          o.push(Jf(r.parent));\n        }\n\n        return o;\n      });\n    }, t;\n  }();\n\n  function Nd(t) {\n    return Vd.getStore(t, bd.store);\n  }\n\n  (Sd = Td || (Td = {}))[Sd.Listen = 0] = \"Listen\", Sd[Sd.ExistenceFilterMismatch = 1] = \"ExistenceFilterMismatch\", Sd[Sd.LimboResolution = 2] = \"LimboResolution\";\n\n  var Ad = function () {\n    function e(t, e, n, r, i, o) {\n      void 0 === i && (i = Zf.MIN), void 0 === o && (o = Gl()), this.query = t, this.targetId = e, this.purpose = n, this.sequenceNumber = r, this.snapshotVersion = i, this.resumeToken = o;\n    }\n\n    return e.prototype.copy = function (t) {\n      return new e(this.query, this.targetId, this.purpose, void 0 === t.sequenceNumber ? this.sequenceNumber : t.sequenceNumber, void 0 === t.snapshotVersion ? this.snapshotVersion : t.snapshotVersion, void 0 === t.resumeToken ? this.resumeToken : t.resumeToken);\n    }, e.prototype.isEqual = function (t) {\n      return this.targetId === t.targetId && this.purpose === t.purpose && this.sequenceNumber === t.sequenceNumber && this.snapshotVersion.isEqual(t.snapshotVersion) && this.resumeToken === t.resumeToken && this.query.isEqual(t.query);\n    }, e;\n  }(),\n      kd = function () {\n    function t(t) {\n      this.remoteSerializer = t;\n    }\n\n    return t.prototype.fromDbRemoteDocument = function (t) {\n      if (t.document) return this.remoteSerializer.fromDocument(t.document, !!t.hasCommittedMutations);\n\n      if (t.noDocument) {\n        var e = Vf.fromSegments(t.noDocument.path),\n            n = this.fromDbTimestamp(t.noDocument.readTime);\n        return new Qp(e, n, {\n          hasCommittedMutations: !!t.hasCommittedMutations\n        });\n      }\n\n      if (t.unknownDocument) {\n        e = Vf.fromSegments(t.unknownDocument.path), n = this.fromDbTimestamp(t.unknownDocument.version);\n        return new Hp(e, n);\n      }\n\n      return Kl(\"Unexpected DbRemoteDocument\");\n    }, t.prototype.toDbRemoteDocument = function (t) {\n      if (t instanceof Kp) {\n        var e = t.proto ? t.proto : this.remoteSerializer.toDocument(t),\n            n = t.hasCommittedMutations;\n        return new dd(null, null, e, n);\n      }\n\n      if (t instanceof Qp) {\n        var r = t.key.path.toArray(),\n            i = this.toDbTimestamp(t.version);\n        n = t.hasCommittedMutations;\n        return new dd(null, new fd(r, i), null, n);\n      }\n\n      if (t instanceof Hp) {\n        r = t.key.path.toArray(), i = this.toDbTimestamp(t.version);\n        return new dd(new pd(r, i), null, null, !0);\n      }\n\n      return Kl(\"Unexpected MaybeDocumment\");\n    }, t.prototype.toDbTimestamp = function (t) {\n      var e = t.toTimestamp();\n      return new sd(e.seconds, e.nanoseconds);\n    }, t.prototype.fromDbTimestamp = function (t) {\n      var e = new $f(t.seconds, t.nanoseconds);\n      return Zf.fromTimestamp(e);\n    }, t.prototype.toDbMutationBatch = function (t, e) {\n      var n = this,\n          r = e.baseMutations.map(function (t) {\n        return n.remoteSerializer.toMutation(t);\n      }),\n          i = e.mutations.map(function (t) {\n        return n.remoteSerializer.toMutation(t);\n      });\n      return new hd(t, e.batchId, e.localWriteTime.toMillis(), r, i);\n    }, t.prototype.fromDbMutationBatch = function (t) {\n      var e = this,\n          n = (t.baseMutations || []).map(function (t) {\n        return e.remoteSerializer.fromMutation(t);\n      }),\n          r = t.mutations.map(function (t) {\n        return e.remoteSerializer.fromMutation(t);\n      }),\n          i = $f.fromMillis(t.localWriteTimeMs);\n      return new gp(t.batchId, i, n, r);\n    }, t.prototype.toDbResourcePaths = function (t) {\n      var e = [];\n      return t.forEach(function (t) {\n        e.push(zf(t.path));\n      }), e;\n    }, t.prototype.fromDbResourcePaths = function (t) {\n      for (var e = dp(), n = 0, r = t; n < r.length; n++) {\n        var i = r[n];\n        e = e.add(new Vf(Jf(i)));\n      }\n\n      return e;\n    }, t.prototype.fromDbTarget = function (t) {\n      var e,\n          n = this.fromDbTimestamp(t.readTime);\n      return e = void 0 !== t.query.documents ? this.remoteSerializer.fromDocumentsTarget(t.query) : this.remoteSerializer.fromQueryTarget(t.query), new Ad(e, t.targetId, Td.Listen, t.lastListenSequenceNumber, n, t.resumeToken);\n    }, t.prototype.toDbTarget = function (t) {\n      Ql(Td.Listen === t.purpose, \"Only queries with purpose \" + Td.Listen + \" may be stored, got \" + t.purpose);\n      var e,\n          n,\n          r = this.toDbTimestamp(t.snapshotVersion);\n      return e = t.query.isDocumentQuery() ? this.remoteSerializer.toDocumentsTarget(t.query) : this.remoteSerializer.toQueryTarget(t.query), n = t.resumeToken instanceof Uint8Array ? (Ql(\"YES\" === process.env.USE_MOCK_PERSISTENCE, \"Persisting non-string stream tokens is only supported with mock persistence .\"), t.resumeToken.toString()) : t.resumeToken, new md(t.targetId, t.query.canonicalId(), r, n, t.sequenceNumber, e);\n    }, t;\n  }();\n\n  function Dd(t, e) {\n    var n = t[0],\n        r = t[1],\n        i = e[0],\n        o = e[1],\n        a = Ef(n, i);\n    return 0 === a ? Ef(r, o) : a;\n  }\n\n  var Rd = function () {\n    function t(t) {\n      this.maxElements = t, this.buffer = new ip(Dd), this.previousIndex = 0;\n    }\n\n    return t.prototype.nextIndex = function () {\n      return ++this.previousIndex;\n    }, t.prototype.addElement = function (t) {\n      var e = [t, this.nextIndex()];\n      if (this.buffer.size < this.maxElements) this.buffer = this.buffer.add(e);else {\n        var n = this.buffer.last();\n        Dd(e, n) < 0 && (this.buffer = this.buffer.delete(n).add(e));\n      }\n    }, Object.defineProperty(t.prototype, \"maxValue\", {\n      get: function () {\n        return this.buffer.last()[0];\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t;\n  }(),\n      Od = {\n    didRun: !1,\n    sequenceNumbersCollected: 0,\n    targetsRemoved: 0,\n    documentsRemoved: 0\n  },\n      Pd = function () {\n    function e(t, e, n) {\n      this.cacheSizeCollectionThreshold = t, this.percentileToCollect = e, this.maximumSequenceNumbersToCollect = n;\n    }\n\n    return e.withCacheSize = function (t) {\n      return new e(t, e.DEFAULT_COLLECTION_PERCENTILE, e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT);\n    }, e.COLLECTION_DISABLED = -1, e.MINIMUM_CACHE_SIZE_BYTES = 1048576, e.DEFAULT = new e(e.DEFAULT_CACHE_SIZE_BYTES = 41943040, e.DEFAULT_COLLECTION_PERCENTILE = 10, e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT = 1e3), e.DISABLED = new e(e.COLLECTION_DISABLED, 0, 0), e;\n  }(),\n      Md = function () {\n    function t(t, e, n) {\n      this.garbageCollector = t, this.asyncQueue = e, this.localStore = n, this.gcTask = null;\n    }\n\n    return t.prototype.start = function () {\n      Ql(null === this.gcTask, \"Cannot start an already started LruScheduler\"), this.garbageCollector.params.cacheSizeCollectionThreshold !== Pd.COLLECTION_DISABLED && this.scheduleGC();\n    }, t.prototype.stop = function () {\n      this.gcTask && (this.gcTask.cancel(), this.gcTask = null);\n    }, Object.defineProperty(t.prototype, \"started\", {\n      get: function () {\n        return null !== this.gcTask;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.scheduleGC = function () {\n      var t = this;\n      Ql(null === this.gcTask, \"Cannot schedule GC while a task is pending\");\n      var e = this.hasRun ? 3e5 : 6e4;\n      Bl(\"LruGarbageCollector\", \"Garbage collection scheduled in \" + e + \"ms\"), this.gcTask = this.asyncQueue.enqueueAfterDelay(Nf.LruGarbageCollection, e, function () {\n        return t.gcTask = null, t.hasRun = !0, t.localStore.collectGarbage(t.garbageCollector).then(function () {\n          return t.scheduleGC();\n        }).catch(Bd);\n      });\n    }, t;\n  }(),\n      xd = function () {\n    function t(t, e) {\n      this.delegate = t, this.params = e;\n    }\n\n    return t.prototype.calculateTargetCount = function (t, e) {\n      return this.delegate.getSequenceNumberCount(t).next(function (t) {\n        return Math.floor(e / 100 * t);\n      });\n    }, t.prototype.nthSequenceNumber = function (t, e) {\n      var n = this;\n      if (0 === e) return bp.resolve(Mf.INVALID);\n      var r = new Rd(e);\n      return this.delegate.forEachTarget(t, function (t) {\n        return r.addElement(t.sequenceNumber);\n      }).next(function () {\n        return n.delegate.forEachOrphanedDocumentSequenceNumber(t, function (t) {\n          return r.addElement(t);\n        });\n      }).next(function () {\n        return r.maxValue;\n      });\n    }, t.prototype.removeTargets = function (t, e, n) {\n      return this.delegate.removeTargets(t, e, n);\n    }, t.prototype.removeOrphanedDocuments = function (t, e) {\n      return this.delegate.removeOrphanedDocuments(t, e);\n    }, t.prototype.collect = function (e, n) {\n      var r = this;\n      return this.params.cacheSizeCollectionThreshold === Pd.COLLECTION_DISABLED ? (Bl(\"LruGarbageCollector\", \"Garbage collection skipped; disabled\"), bp.resolve(Od)) : this.getCacheSize(e).next(function (t) {\n        return t < r.params.cacheSizeCollectionThreshold ? (Bl(\"LruGarbageCollector\", \"Garbage collection skipped; Cache size \" + t + \" is lower than threshold \" + r.params.cacheSizeCollectionThreshold), Od) : r.runGarbageCollection(e, n);\n      });\n    }, t.prototype.getCacheSize = function (t) {\n      return this.delegate.getCacheSize(t);\n    }, t.prototype.runGarbageCollection = function (e, n) {\n      var r,\n          i,\n          o,\n          a,\n          s,\n          u,\n          c,\n          h,\n          l = this;\n      return a = Date.now(), this.calculateTargetCount(e, this.params.percentileToCollect).next(function (t) {\n        return i = t > l.params.maximumSequenceNumbersToCollect ? (Bl(\"LruGarbageCollector\", \"Capping sequence numbers to collect down to the maximum of \" + l.params.maximumSequenceNumbersToCollect + \" from \" + t), l.params.maximumSequenceNumbersToCollect) : t, s = Date.now(), l.nthSequenceNumber(e, i);\n      }).next(function (t) {\n        return r = t, u = Date.now(), l.removeTargets(e, r, n);\n      }).next(function (t) {\n        return o = t, c = Date.now(), l.removeOrphanedDocuments(e, r);\n      }).next(function (t) {\n        (h = Date.now(), ql() <= kl.DEBUG) && Bl(\"LruGarbageCollector\", \"LRU Garbage Collection\\n\\tCounted targets in \" + (s - a) + \"ms\\n\\tDetermined least recently used \" + i + \" in \" + (u - s) + \"ms\\n\\tRemoved \" + o + \" targets in \" + (c - u) + \"ms\\n\\tRemoved \" + t + \" documents in \" + (h - c) + \"ms\\nTotal Duration: \" + (h - a) + \"ms\");\n        return bp.resolve({\n          didRun: !0,\n          sequenceNumbersCollected: i,\n          targetsRemoved: o,\n          documentsRemoved: t\n        });\n      });\n    }, t;\n  }(),\n      Ld = \"IndexedDbPersistence\",\n      Fd = \"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.\",\n      Ud = \"Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.\",\n      qd = function (r) {\n    function t(t, e) {\n      var n = r.call(this) || this;\n      return n.simpleDbTransaction = t, n.currentSequenceNumber = e, n;\n    }\n\n    return hr(t, r), t;\n  }(function () {}),\n      Vd = function () {\n    function c(t, e, n, r, i, o, a) {\n      if (this.persistenceKey = t, this.clientId = e, this.queue = r, this.multiClientParams = a, this._started = !1, this.isPrimary = !1, this.networkEnabled = !0, this.inForeground = !1, this.lastGarbageCollectionTime = Number.NEGATIVE_INFINITY, this.primaryStateListener = function (t) {\n        return Promise.resolve();\n      }, !c.isAvailable()) throw new Yl(zl.UNIMPLEMENTED, \"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.\");\n      if (this.referenceDelegate = new zd(this, o), this.dbName = t + c.MAIN_DATABASE, this.serializer = new kd(i), this.document = n.document, this.allowTabSynchronization = void 0 !== a, this.queryCache = new Up(this.referenceDelegate, this.serializer), this.indexManager = new Cd(), this.remoteDocumentCache = new Xp(this.serializer, this.indexManager, this.allowTabSynchronization), !n.window || !n.window.localStorage) throw new Yl(zl.UNIMPLEMENTED, \"IndexedDB persistence is only available on platforms that support LocalStorage.\");\n      this.window = n.window, this.webStorage = this.window.localStorage;\n    }\n\n    return c.getStore = function (t, e) {\n      if (t instanceof qd) return Rp.getStore(t.simpleDbTransaction, e);\n      throw Kl(\"IndexedDbPersistence must use instances of IndexedDbTransaction\");\n    }, c.createIndexedDbPersistence = function (n, r, i, o, a, s) {\n      return fr(this, void 0, void 0, function () {\n        var e;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, (e = new c(n, r, i, o, a, s)).start()];\n\n            case 1:\n              return t.sent(), [2, e];\n          }\n        });\n      });\n    }, c.createMultiClientIndexedDbPersistence = function (n, r, i, o, a, s, u) {\n      return fr(this, void 0, void 0, function () {\n        var e;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, (e = new c(n, r, i, o, a, s, u)).start()];\n\n            case 1:\n              return t.sent(), [2, e];\n          }\n        });\n      });\n    }, c.prototype.start = function () {\n      var n = this;\n      return Ql(!this.started, \"IndexedDbPersistence double-started!\"), Ql(null !== this.window, \"Expected 'window' to be defined\"), Rp.openOrCreate(this.dbName, od, new ad(this.serializer)).then(function (t) {\n        return n.simpleDb = t, n.updateClientMetadataAndTryBecomePrimary();\n      }).then(function () {\n        return n.attachVisibilityHandler(), n.attachWindowUnloadHook(), n.scheduleClientMetadataAndPrimaryLeaseRefreshes(), n.startRemoteDocumentCache();\n      }).then(function () {\n        return n.simpleDb.runTransaction(\"readonly\", [vd.store], function (t) {\n          return Bp(t).next(function (t) {\n            var e = n.multiClientParams ? n.multiClientParams.sequenceNumberSyncer : void 0;\n            n.listenSequence = new Mf(t, e);\n          });\n        });\n      }).then(function () {\n        n._started = !0;\n      }).catch(function (t) {\n        return n.simpleDb && n.simpleDb.close(), Promise.reject(t);\n      });\n    }, c.prototype.startRemoteDocumentCache = function () {\n      var e = this;\n      return this.simpleDb.runTransaction(\"readonly\", Id, function (t) {\n        return e.remoteDocumentCache.start(t);\n      });\n    }, c.prototype.setPrimaryStateListener = function (n) {\n      var t = this;\n      return this.primaryStateListener = function (e) {\n        return fr(t, void 0, void 0, function () {\n          return pr(this, function (t) {\n            return this.started ? [2, n(e)] : [2];\n          });\n        });\n      }, n(this.isPrimary);\n    }, c.prototype.setDatabaseDeletedListener = function (n) {\n      var t = this;\n      this.simpleDb.setVersionChangeListener(function (e) {\n        return fr(t, void 0, void 0, function () {\n          return pr(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return null !== e.newVersion ? [3, 2] : [4, n()];\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [2];\n            }\n          });\n        });\n      });\n    }, c.prototype.setNetworkEnabled = function (t) {\n      var e = this;\n      this.networkEnabled !== t && (this.networkEnabled = t, this.queue.enqueueAndForget(function () {\n        return fr(e, void 0, void 0, function () {\n          return pr(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.started ? [4, this.updateClientMetadataAndTryBecomePrimary()] : [3, 2];\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [2];\n            }\n          });\n        });\n      }));\n    }, c.prototype.updateClientMetadataAndTryBecomePrimary = function () {\n      var r = this;\n      return this.simpleDb.runTransaction(\"readwrite\", Id, function (n) {\n        return Wd(n).put(new Ed(r.clientId, Date.now(), r.networkEnabled, r.inForeground, r.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function () {\n          if (r.isPrimary) return r.verifyPrimaryLease(n).next(function (t) {\n            t || (r.isPrimary = !1, r.queue.enqueueAndForget(function () {\n              return r.primaryStateListener(!1);\n            }));\n          });\n        }).next(function () {\n          return r.canActAsPrimary(n);\n        }).next(function (t) {\n          var e = r.isPrimary;\n          return r.isPrimary = t, e !== r.isPrimary && r.queue.enqueueAndForget(function () {\n            return r.primaryStateListener(r.isPrimary);\n          }), e && !r.isPrimary ? r.releasePrimaryLeaseIfHeld(n) : r.isPrimary ? r.acquireOrExtendPrimaryLease(n) : void 0;\n        });\n      });\n    }, c.prototype.verifyPrimaryLease = function (t) {\n      var e = this;\n      return jd(t).get(ud.key).next(function (t) {\n        return bp.resolve(e.isLocalClient(t));\n      });\n    }, c.prototype.removeClientMetadata = function (t) {\n      return Wd(t).delete(this.clientId);\n    }, c.prototype.maybeGarbageCollectMultiClientState = function () {\n      return fr(this, void 0, void 0, function () {\n        var r,\n            i,\n            o = this;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return !this.isPrimary || this.isWithinAge(this.lastGarbageCollectionTime, 18e5) ? [3, 2] : (this.lastGarbageCollectionTime = Date.now(), i = [], [4, this.runTransaction(\"maybeGarbageCollectMultiClientState\", \"readwrite-primary\", function (n) {\n                var e = c.getStore(n, Ed.store);\n                return e.loadAll().next(function (t) {\n                  r = o.filterActiveClients(t, 18e5), i = t.filter(function (t) {\n                    return -1 === r.indexOf(t);\n                  });\n                }).next(function () {\n                  return bp.forEach(i, function (t) {\n                    return e.delete(t.clientId);\n                  });\n                }).next(function () {\n                  if (0 < (r = r.filter(function (t) {\n                    return t.clientId !== o.clientId;\n                  })).length) {\n                    var t = r.map(function (t) {\n                      return t.lastProcessedDocumentChangeId || 0;\n                    }),\n                        e = Math.min.apply(Math, t);\n                    return o.remoteDocumentCache.removeDocumentChangesThroughChangeId(n, e);\n                  }\n                });\n              })]);\n\n            case 1:\n              t.sent(), i.forEach(function (t) {\n                o.window.localStorage.removeItem(o.zombiedClientLocalStorageKey(t.clientId));\n              }), t.label = 2;\n\n            case 2:\n              return [2];\n          }\n        });\n      });\n    }, c.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes = function () {\n      var t = this;\n      this.clientMetadataRefresher = this.queue.enqueueAfterDelay(Nf.ClientMetadataRefresh, 4e3, function () {\n        return t.updateClientMetadataAndTryBecomePrimary().then(function () {\n          return t.maybeGarbageCollectMultiClientState();\n        }).then(function () {\n          return t.scheduleClientMetadataAndPrimaryLeaseRefreshes();\n        });\n      });\n    }, c.prototype.isLocalClient = function (t) {\n      return !!t && t.ownerId === this.clientId;\n    }, c.prototype.canActAsPrimary = function (e) {\n      var i = this;\n      return jd(e).get(ud.key).next(function (t) {\n        if (null !== t && i.isWithinAge(t.leaseTimestampMs, 5e3) && !i.isClientZombied(t.ownerId)) {\n          if (i.isLocalClient(t) && i.networkEnabled) return !0;\n\n          if (!i.isLocalClient(t)) {\n            if (!t.allowTabSynchronization) throw new Yl(zl.FAILED_PRECONDITION, Ud);\n            return !1;\n          }\n        }\n\n        return !(!i.networkEnabled || !i.inForeground) || Wd(e).loadAll().next(function (t) {\n          return void 0 === i.filterActiveClients(t, 5e3).find(function (t) {\n            if (i.clientId !== t.clientId) {\n              var e = !i.networkEnabled && t.networkEnabled,\n                  n = !i.inForeground && t.inForeground,\n                  r = i.networkEnabled === t.networkEnabled;\n              if (e || n && r) return !0;\n            }\n\n            return !1;\n          });\n        });\n      }).next(function (t) {\n        return i.isPrimary !== t && Bl(Ld, \"Client \" + (t ? \"is\" : \"is not\") + \" eligible for a primary lease.\"), t;\n      });\n    }, c.prototype.shutdown = function () {\n      return fr(this, void 0, void 0, function () {\n        var e = this;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this._started = !1, this.markClientZombied(), this.clientMetadataRefresher && this.clientMetadataRefresher.cancel(), this.detachVisibilityHandler(), this.detachWindowUnloadHook(), [4, this.simpleDb.runTransaction(\"readwrite\", [ud.store, Ed.store], function (t) {\n                return e.releasePrimaryLeaseIfHeld(t).next(function () {\n                  return e.removeClientMetadata(t);\n                });\n              })];\n\n            case 1:\n              return t.sent(), this.simpleDb.close(), this.removeClientZombiedEntry(), [2];\n          }\n        });\n      });\n    }, c.prototype.filterActiveClients = function (t, e) {\n      var n = this;\n      return t.filter(function (t) {\n        return n.isWithinAge(t.updateTimeMs, e) && !n.isClientZombied(t.clientId);\n      });\n    }, c.prototype.getActiveClients = function () {\n      var e = this;\n      return this.simpleDb.runTransaction(\"readonly\", [Ed.store], function (t) {\n        return Wd(t).loadAll().next(function (t) {\n          return e.filterActiveClients(t, 18e5).map(function (t) {\n            return t.clientId;\n          });\n        });\n      });\n    }, c.clearPersistence = function (n) {\n      return fr(this, void 0, void 0, function () {\n        var e;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return c.isAvailable() ? (e = n + c.MAIN_DATABASE, [4, Rp.delete(e)]) : [2, Promise.resolve()];\n\n            case 1:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, Object.defineProperty(c.prototype, \"started\", {\n      get: function () {\n        return this._started;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), c.prototype.getMutationQueue = function (t) {\n      return Ql(this.started, \"Cannot initialize MutationQueue before persistence is started.\"), wp.forUser(t, this.serializer, this.indexManager, this.referenceDelegate);\n    }, c.prototype.getQueryCache = function () {\n      return Ql(this.started, \"Cannot initialize QueryCache before persistence is started.\"), this.queryCache;\n    }, c.prototype.getRemoteDocumentCache = function () {\n      return Ql(this.started, \"Cannot initialize RemoteDocumentCache before persistence is started.\"), this.remoteDocumentCache;\n    }, c.prototype.getIndexManager = function () {\n      return Ql(this.started, \"Cannot initialize IndexManager before persistence is started.\"), this.indexManager;\n    }, c.prototype.runTransaction = function (n, t, r) {\n      var i = this;\n      return Bl(Ld, \"Starting transaction:\", n), this.simpleDb.runTransaction(\"readonly\" === t ? \"readonly\" : \"readwrite\", Id, function (e) {\n        return \"readwrite-primary\" === t ? i.verifyPrimaryLease(e).next(function (t) {\n          if (!t) throw jl(\"Failed to obtain primary lease for action '\" + n + \"'.\"), i.isPrimary = !1, i.queue.enqueueAndForget(function () {\n            return i.primaryStateListener(!1);\n          }), new Yl(zl.FAILED_PRECONDITION, Fd);\n          return r(new qd(e, i.listenSequence.next()));\n        }).next(function (t) {\n          return i.acquireOrExtendPrimaryLease(e).next(function () {\n            return t;\n          });\n        }) : i.verifyAllowTabSynchronization(e).next(function () {\n          return r(new qd(e, i.listenSequence.next()));\n        });\n      });\n    }, c.prototype.verifyAllowTabSynchronization = function (t) {\n      var e = this;\n      return jd(t).get(ud.key).next(function (t) {\n        if (null !== t && e.isWithinAge(t.leaseTimestampMs, 5e3) && !e.isClientZombied(t.ownerId) && !e.isLocalClient(t) && !t.allowTabSynchronization) throw new Yl(zl.FAILED_PRECONDITION, Ud);\n      });\n    }, c.prototype.acquireOrExtendPrimaryLease = function (t) {\n      var e = new ud(this.clientId, this.allowTabSynchronization, Date.now());\n      return jd(t).put(ud.key, e);\n    }, c.isAvailable = function () {\n      return Rp.isAvailable();\n    }, c.buildStoragePrefix = function (t) {\n      var e = t.databaseId.projectId;\n      return t.databaseId.isDefaultDatabase || (e += \".\" + t.databaseId.database), \"firestore/\" + t.persistenceKey + \"/\" + e + \"/\";\n    }, c.prototype.releasePrimaryLeaseIfHeld = function (t) {\n      var e = this,\n          n = jd(t);\n      return n.get(ud.key).next(function (t) {\n        return e.isLocalClient(t) ? (Bl(Ld, \"Releasing primary lease.\"), n.delete(ud.key)) : bp.resolve();\n      });\n    }, c.prototype.isWithinAge = function (t, e) {\n      var n = Date.now();\n      return !(t < n - e) && (!(n < t) || (jl(\"Detected an update time that is in the future: \" + t + \" > \" + n), !1));\n    }, c.prototype.attachVisibilityHandler = function () {\n      var t = this;\n      null !== this.document && \"function\" == typeof this.document.addEventListener && (this.documentVisibilityHandler = function () {\n        t.queue.enqueueAndForget(function () {\n          return t.inForeground = \"visible\" === t.document.visibilityState, t.updateClientMetadataAndTryBecomePrimary();\n        });\n      }, this.document.addEventListener(\"visibilitychange\", this.documentVisibilityHandler), this.inForeground = \"visible\" === this.document.visibilityState);\n    }, c.prototype.detachVisibilityHandler = function () {\n      this.documentVisibilityHandler && (Ql(null !== this.document && \"function\" == typeof this.document.addEventListener, \"Expected 'document.addEventListener' to be a function\"), this.document.removeEventListener(\"visibilitychange\", this.documentVisibilityHandler), this.documentVisibilityHandler = null);\n    }, c.prototype.attachWindowUnloadHook = function () {\n      var t = this;\n      \"function\" == typeof this.window.addEventListener && (this.windowUnloadHandler = function () {\n        t.markClientZombied(), t.queue.enqueueAndForget(function () {\n          return t.shutdown();\n        });\n      }, this.window.addEventListener(\"unload\", this.windowUnloadHandler));\n    }, c.prototype.detachWindowUnloadHook = function () {\n      this.windowUnloadHandler && (Ql(\"function\" == typeof this.window.removeEventListener, \"Expected 'window.removeEventListener' to be a function\"), this.window.removeEventListener(\"unload\", this.windowUnloadHandler), this.windowUnloadHandler = null);\n    }, c.prototype.isClientZombied = function (t) {\n      try {\n        var e = null !== this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));\n        return Bl(Ld, \"Client '\" + t + \"' \" + (e ? \"is\" : \"is not\") + \" zombied in LocalStorage\"), e;\n      } catch (t) {\n        return jl(Ld, \"Failed to get zombied client id.\", t), !1;\n      }\n    }, c.prototype.markClientZombied = function () {\n      try {\n        this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId), String(Date.now()));\n      } catch (t) {\n        jl(\"Failed to set zombie client id.\", t);\n      }\n    }, c.prototype.removeClientZombiedEntry = function () {\n      try {\n        this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId));\n      } catch (t) {}\n    }, c.prototype.zombiedClientLocalStorageKey = function (t) {\n      return \"firestore_zombie_\" + this.persistenceKey + \"_\" + t;\n    }, c.MAIN_DATABASE = \"main\", c;\n  }();\n\n  function Bd(n) {\n    return fr(this, void 0, void 0, function () {\n      return pr(this, function (t) {\n        if ((e = n).code !== zl.FAILED_PRECONDITION || e.message !== Fd) throw n;\n        var e;\n        return Bl(Ld, \"Unexpectedly lost primary lease\"), [2];\n      });\n    });\n  }\n\n  function jd(t) {\n    return t.store(ud.store);\n  }\n\n  function Wd(t) {\n    return t.store(Ed.store);\n  }\n\n  var Kd,\n      Qd,\n      Hd,\n      Gd,\n      zd = function () {\n    function t(t, e) {\n      this.db = t, this.garbageCollector = new xd(this, e);\n    }\n\n    return t.prototype.getSequenceNumberCount = function (t) {\n      var n = this.orphanedDocmentCount(t);\n      return this.db.getQueryCache().getQueryCount(t).next(function (e) {\n        return n.next(function (t) {\n          return e + t;\n        });\n      });\n    }, t.prototype.orphanedDocmentCount = function (t) {\n      var e = 0;\n      return this.forEachOrphanedDocumentSequenceNumber(t, function (t) {\n        e++;\n      }).next(function () {\n        return e;\n      });\n    }, t.prototype.forEachTarget = function (t, e) {\n      return this.db.getQueryCache().forEachTarget(t, e);\n    }, t.prototype.forEachOrphanedDocumentSequenceNumber = function (t, n) {\n      return this.forEachOrphanedDocument(t, function (t, e) {\n        return n(e);\n      });\n    }, t.prototype.setInMemoryPins = function (t) {\n      this.inMemoryPins = t;\n    }, t.prototype.addReference = function (t, e) {\n      return Yd(t, e);\n    }, t.prototype.removeReference = function (t, e) {\n      return Yd(t, e);\n    }, t.prototype.removeTargets = function (t, e, n) {\n      return this.db.getQueryCache().removeTargets(t, e, n);\n    }, t.prototype.removeMutationReference = function (t, e) {\n      return Yd(t, e);\n    }, t.prototype.isPinned = function (t, e) {\n      return this.inMemoryPins.containsKey(e) ? bp.resolve(!0) : (r = e, i = !1, Cp(n = t).iterateSerial(function (t) {\n        return _p(n, t, r).next(function (t) {\n          return t && (i = !0), bp.resolve(!t);\n        });\n      }).next(function () {\n        return i;\n      }));\n      var n, r, i;\n    }, t.prototype.removeOrphanedDocuments = function (r, i) {\n      var o = this,\n          a = 0,\n          s = 0,\n          u = [];\n      return this.forEachOrphanedDocument(r, function (e, t) {\n        if (t <= i) {\n          var n = o.isPinned(r, e).next(function (t) {\n            if (!t) return a++, o.removeOrphanedDocument(r, e).next(function (t) {\n              s += t;\n            });\n          });\n          u.push(n);\n        }\n      }).next(function () {\n        return bp.waitFor(u);\n      }).next(function () {\n        return o.db.getRemoteDocumentCache().updateSize(r, -s);\n      }).next(function () {\n        return a;\n      });\n    }, t.prototype.removeOrphanedDocument = function (t, e) {\n      var n,\n          r = 0,\n          i = this.db.getRemoteDocumentCache();\n      return bp.waitFor([jp(t).delete((n = e, [0, zf(n.path)])), i.removeEntry(t, e).next(function (t) {\n        r += t;\n      })]).next(function () {\n        return r;\n      });\n    }, t.prototype.removeTarget = function (t, e) {\n      var n = e.copy({\n        sequenceNumber: t.currentSequenceNumber\n      });\n      return this.db.getQueryCache().updateQueryData(t, n);\n    }, t.prototype.updateLimboDocument = function (t, e) {\n      return Yd(t, e);\n    }, t.prototype.forEachOrphanedDocument = function (t, o) {\n      var a,\n          e = jp(t),\n          s = Mf.INVALID;\n      return e.iterate({\n        index: gd.documentTargetsIndex\n      }, function (t, e) {\n        var n = t[0],\n            r = (t[1], e.path),\n            i = e.sequenceNumber;\n        0 === n ? (s !== Mf.INVALID && o(new Vf(Jf(a)), s), s = i, a = r) : s = Mf.INVALID;\n      }).next(function () {\n        s !== Mf.INVALID && o(new Vf(Jf(a)), s);\n      });\n    }, t.prototype.getCacheSize = function (t) {\n      return this.db.getRemoteDocumentCache().getSize(t);\n    }, t;\n  }();\n\n  function Yd(t, e) {\n    return jp(t).put((n = e, r = t.currentSequenceNumber, new gd(0, zf(n.path), r)));\n    var n, r;\n  }\n\n  (Qd = Kd || (Kd = {}))[Qd.NullValue = 0] = \"NullValue\", Qd[Qd.BooleanValue = 1] = \"BooleanValue\", Qd[Qd.NumberValue = 2] = \"NumberValue\", Qd[Qd.TimestampValue = 3] = \"TimestampValue\", Qd[Qd.StringValue = 4] = \"StringValue\", Qd[Qd.BlobValue = 5] = \"BlobValue\", Qd[Qd.RefValue = 6] = \"RefValue\", Qd[Qd.GeoPointValue = 7] = \"GeoPointValue\", Qd[Qd.ArrayValue = 8] = \"ArrayValue\", Qd[Qd.ObjectValue = 9] = \"ObjectValue\", (Gd = Hd || (Hd = {}))[Gd.Default = 0] = \"Default\", Gd[Gd.Estimate = 1] = \"Estimate\", Gd[Gd.Previous = 2] = \"Previous\";\n\n  var Xd = function () {\n    function n(t, e) {\n      this.serverTimestampBehavior = t, this.timestampsInSnapshots = e;\n    }\n\n    return n.fromSnapshotOptions = function (t, e) {\n      switch (t.serverTimestamps) {\n        case \"estimate\":\n          return new n(Hd.Estimate, e);\n\n        case \"previous\":\n          return new n(Hd.Previous, e);\n\n        case \"none\":\n        case void 0:\n          return new n(Hd.Default, e);\n\n        default:\n          return Kl(\"fromSnapshotOptions() called with invalid options.\");\n      }\n    }, n;\n  }(),\n      Jd = function () {\n    function t() {}\n\n    return t.prototype.toString = function () {\n      var t = this.value();\n      return null === t ? \"null\" : t.toString();\n    }, t.prototype.defaultCompareTo = function (t) {\n      return Ql(this.typeOrder !== t.typeOrder, \"Default compareTo should not be used for values of same type.\"), Ef(this.typeOrder, t.typeOrder);\n    }, t;\n  }(),\n      $d = function (e) {\n    function n() {\n      var t = e.call(this) || this;\n      return t.typeOrder = Kd.NullValue, t.internalValue = null, t;\n    }\n\n    return hr(n, e), n.prototype.value = function (t) {\n      return null;\n    }, n.prototype.isEqual = function (t) {\n      return t instanceof n;\n    }, n.prototype.compareTo = function (t) {\n      return t instanceof n ? 0 : this.defaultCompareTo(t);\n    }, n.INSTANCE = new n(), n;\n  }(Jd),\n      Zd = function (n) {\n    function e(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Kd.BooleanValue, e;\n    }\n\n    return hr(e, n), e.prototype.value = function (t) {\n      return this.internalValue;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.internalValue === t.internalValue;\n    }, e.prototype.compareTo = function (t) {\n      return t instanceof e ? Ef(this, t) : this.defaultCompareTo(t);\n    }, e.of = function (t) {\n      return t ? e.TRUE : e.FALSE;\n    }, e.TRUE = new e(!0), e.FALSE = new e(!1), e;\n  }(Jd),\n      ty = function (n) {\n    function r(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Kd.NumberValue, e;\n    }\n\n    return hr(r, n), r.prototype.value = function (t) {\n      return this.internalValue;\n    }, r.prototype.compareTo = function (t) {\n      return t instanceof r ? (e = this.internalValue, n = t.internalValue, e < n ? -1 : n < e ? 1 : e === n ? 0 : isNaN(e) ? isNaN(n) ? 0 : -1 : 1) : this.defaultCompareTo(t);\n      var e, n;\n    }, r;\n  }(Jd);\n\n  function ey(t, e) {\n    return t === e ? 0 !== t || 1 / t == 1 / e : t != t && e != e;\n  }\n\n  var ny,\n      ry,\n      iy = function (e) {\n    function n(t) {\n      return e.call(this, t) || this;\n    }\n\n    return hr(n, e), n.prototype.isEqual = function (t) {\n      return t instanceof n && ey(this.internalValue, t.internalValue);\n    }, n;\n  }(ty),\n      oy = function (n) {\n    function e(t) {\n      var e = n.call(this, t) || this;\n      return e.internalValue = t, e;\n    }\n\n    return hr(e, n), e.prototype.isEqual = function (t) {\n      return t instanceof e && ey(this.internalValue, t.internalValue);\n    }, e.NAN = new e(NaN), e.POSITIVE_INFINITY = new e(1 / 0), e.NEGATIVE_INFINITY = new e(-1 / 0), e;\n  }(ty),\n      ay = function (n) {\n    function e(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Kd.StringValue, e;\n    }\n\n    return hr(e, n), e.prototype.value = function (t) {\n      return this.internalValue;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.internalValue === t.internalValue;\n    }, e.prototype.compareTo = function (t) {\n      return t instanceof e ? Ef(this.internalValue, t.internalValue) : this.defaultCompareTo(t);\n    }, e;\n  }(Jd),\n      sy = function (n) {\n    function e(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Kd.TimestampValue, e;\n    }\n\n    return hr(e, n), e.prototype.value = function (t) {\n      return !t || t.timestampsInSnapshots ? this.internalValue : this.internalValue.toDate();\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.internalValue.isEqual(t.internalValue);\n    }, e.prototype.compareTo = function (t) {\n      return t instanceof e ? this.internalValue._compareTo(t.internalValue) : t instanceof uy ? -1 : this.defaultCompareTo(t);\n    }, e;\n  }(Jd),\n      uy = function (r) {\n    function e(t, e) {\n      var n = r.call(this) || this;\n      return n.localWriteTime = t, n.previousValue = e, n.typeOrder = Kd.TimestampValue, n;\n    }\n\n    return hr(e, r), e.prototype.value = function (t) {\n      return t && t.serverTimestampBehavior === Hd.Estimate ? new sy(this.localWriteTime).value(t) : t && t.serverTimestampBehavior === Hd.Previous && this.previousValue ? this.previousValue.value(t) : null;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.localWriteTime.isEqual(t.localWriteTime);\n    }, e.prototype.compareTo = function (t) {\n      return t instanceof e ? this.localWriteTime._compareTo(t.localWriteTime) : t instanceof sy ? 1 : this.defaultCompareTo(t);\n    }, e.prototype.toString = function () {\n      return \"<ServerTimestamp localTime=\" + this.localWriteTime.toString() + \">\";\n    }, e;\n  }(Jd),\n      cy = function (n) {\n    function e(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Kd.BlobValue, e;\n    }\n\n    return hr(e, n), e.prototype.value = function (t) {\n      return this.internalValue;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.internalValue.isEqual(t.internalValue);\n    }, e.prototype.compareTo = function (t) {\n      return t instanceof e ? this.internalValue._compareTo(t.internalValue) : this.defaultCompareTo(t);\n    }, e;\n  }(Jd),\n      hy = function (r) {\n    function n(t, e) {\n      var n = r.call(this) || this;\n      return n.databaseId = t, n.key = e, n.typeOrder = Kd.RefValue, n;\n    }\n\n    return hr(n, r), n.prototype.value = function (t) {\n      return this.key;\n    }, n.prototype.isEqual = function (t) {\n      return t instanceof n && this.key.isEqual(t.key) && this.databaseId.isEqual(t.databaseId);\n    }, n.prototype.compareTo = function (t) {\n      if (t instanceof n) {\n        var e = this.databaseId.compareTo(t.databaseId);\n        return 0 !== e ? e : Vf.comparator(this.key, t.key);\n      }\n\n      return this.defaultCompareTo(t);\n    }, n;\n  }(Jd),\n      ly = function (n) {\n    function e(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Kd.GeoPointValue, e;\n    }\n\n    return hr(e, n), e.prototype.value = function (t) {\n      return this.internalValue;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.internalValue.isEqual(t.internalValue);\n    }, e.prototype.compareTo = function (t) {\n      return t instanceof e ? this.internalValue._compareTo(t.internalValue) : this.defaultCompareTo(t);\n    }, e;\n  }(Jd),\n      fy = function (n) {\n    function a(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Kd.ObjectValue, e;\n    }\n\n    return hr(a, n), a.prototype.value = function (n) {\n      var r = {};\n      return this.internalValue.inorderTraversal(function (t, e) {\n        r[t] = e.value(n);\n      }), r;\n    }, a.prototype.forEach = function (t) {\n      this.internalValue.inorderTraversal(t);\n    }, a.prototype.isEqual = function (t) {\n      if (t instanceof a) {\n        for (var e = this.internalValue.getIterator(), n = t.internalValue.getIterator(); e.hasNext() && n.hasNext();) {\n          var r = e.getNext(),\n              i = n.getNext();\n          if (r.key !== i.key || !r.value.isEqual(i.value)) return !1;\n        }\n\n        return !e.hasNext() && !n.hasNext();\n      }\n\n      return !1;\n    }, a.prototype.compareTo = function (t) {\n      if (t instanceof a) {\n        for (var e = this.internalValue.getIterator(), n = t.internalValue.getIterator(); e.hasNext() && n.hasNext();) {\n          var r = e.getNext(),\n              i = n.getNext(),\n              o = Ef(r.key, i.key) || r.value.compareTo(i.value);\n          if (o) return o;\n        }\n\n        return Ef(e.hasNext(), n.hasNext());\n      }\n\n      return this.defaultCompareTo(t);\n    }, a.prototype.set = function (t, e) {\n      if (Ql(!t.isEmpty(), \"Cannot set field for empty path on ObjectValue\"), 1 === t.length) return this.setChild(t.firstSegment(), e);\n      var n = this.child(t.firstSegment());\n      n instanceof a || (n = a.EMPTY);\n      var r = n.set(t.popFirst(), e);\n      return this.setChild(t.firstSegment(), r);\n    }, a.prototype.delete = function (t) {\n      if (Ql(!t.isEmpty(), \"Cannot delete field for empty path on ObjectValue\"), 1 === t.length) return new a(this.internalValue.remove(t.firstSegment()));\n      var e = this.child(t.firstSegment());\n\n      if (e instanceof a) {\n        var n = e.delete(t.popFirst());\n        return new a(this.internalValue.insert(t.firstSegment(), n));\n      }\n\n      return this;\n    }, a.prototype.contains = function (t) {\n      return void 0 !== this.field(t);\n    }, a.prototype.field = function (t) {\n      Ql(!t.isEmpty(), \"Can't get field of empty path\");\n      var e = this;\n      return t.forEach(function (t) {\n        e = e instanceof a && e.internalValue.get(t) || void 0;\n      }), e;\n    }, a.prototype.toString = function () {\n      return this.internalValue.toString();\n    }, a.prototype.child = function (t) {\n      return this.internalValue.get(t) || void 0;\n    }, a.prototype.setChild = function (t, e) {\n      return new a(this.internalValue.insert(t, e));\n    }, a.EMPTY = new a(new tp(Ef)), a;\n  }(Jd),\n      py = function (n) {\n    function i(t) {\n      var e = n.call(this) || this;\n      return e.internalValue = t, e.typeOrder = Kd.ArrayValue, e;\n    }\n\n    return hr(i, n), i.prototype.value = function (e) {\n      return this.internalValue.map(function (t) {\n        return t.value(e);\n      });\n    }, i.prototype.contains = function (t) {\n      for (var e = 0, n = this.internalValue; e < n.length; e++) {\n        if (n[e].isEqual(t)) return !0;\n      }\n\n      return !1;\n    }, i.prototype.forEach = function (t) {\n      this.internalValue.forEach(t);\n    }, i.prototype.isEqual = function (t) {\n      if (t instanceof i) {\n        if (this.internalValue.length !== t.internalValue.length) return !1;\n\n        for (var e = 0; e < this.internalValue.length; e++) if (!this.internalValue[e].isEqual(t.internalValue[e])) return !1;\n\n        return !0;\n      }\n\n      return !1;\n    }, i.prototype.compareTo = function (t) {\n      if (t instanceof i) {\n        for (var e = Math.min(this.internalValue.length, t.internalValue.length), n = 0; n < e; n++) {\n          var r = this.internalValue[n].compareTo(t.internalValue[n]);\n          if (r) return r;\n        }\n\n        return Ef(this.internalValue.length, t.internalValue.length);\n      }\n\n      return this.defaultCompareTo(t);\n    }, i.prototype.toString = function () {\n      return \"[\" + this.internalValue.map(function (t) {\n        return t.toString();\n      }).join(\",\") + \"]\";\n    }, i;\n  }(Jd),\n      dy = function () {\n    function n(t) {\n      this.fields = t;\n    }\n\n    return n.fromSet = function (t) {\n      return new n(t);\n    }, n.fromArray = function (t) {\n      var e = new ip(qf.comparator);\n      return t.forEach(function (t) {\n        return e = e.add(t);\n      }), new n(e);\n    }, n.prototype.covers = function (e) {\n      var n = !1;\n      return this.fields.forEach(function (t) {\n        t.isPrefixOf(e) && (n = !0);\n      }), n;\n    }, n.prototype.applyTo = function (n) {\n      var r = fy.EMPTY;\n      return this.fields.forEach(function (t) {\n        if (t.isEmpty()) return n;\n        var e = n.field(t);\n        void 0 !== e && (r = r.set(t, e));\n      }), r;\n    }, n.prototype.isEqual = function (t) {\n      return this.fields.isEqual(t.fields);\n    }, n;\n  }(),\n      yy = function () {\n    function t(t, e) {\n      this.field = t, this.transform = e;\n    }\n\n    return Object.defineProperty(t.prototype, \"isIdempotent\", {\n      get: function () {\n        return this.transform.isIdempotent;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.isEqual = function (t) {\n      return this.field.isEqual(t.field) && this.transform.isEqual(t.transform);\n    }, t;\n  }(),\n      my = function (t, e) {\n    this.version = t, this.transformResults = e;\n  };\n\n  (ry = ny || (ny = {}))[ry.Set = 0] = \"Set\", ry[ry.Patch = 1] = \"Patch\", ry[ry.Transform = 2] = \"Transform\", ry[ry.Delete = 3] = \"Delete\";\n\n  var gy = function () {\n    function e(t, e) {\n      this.updateTime = t, this.exists = e, Ql(void 0 === t || void 0 === e, 'Precondition can specify \"exists\" or \"updateTime\" but not both');\n    }\n\n    return e.exists = function (t) {\n      return new e(void 0, t);\n    }, e.updateTime = function (t) {\n      return new e(t);\n    }, Object.defineProperty(e.prototype, \"isNone\", {\n      get: function () {\n        return void 0 === this.updateTime && void 0 === this.exists;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.isValidFor = function (t) {\n      return void 0 !== this.updateTime ? t instanceof Kp && t.version.isEqual(this.updateTime) : void 0 !== this.exists ? this.exists === t instanceof Kp : (Ql(this.isNone, \"Precondition should be empty\"), !0);\n    }, e.prototype.isEqual = function (t) {\n      return e = this.updateTime, n = t.updateTime, (null != e ? !(!n || !e.isEqual(n)) : e === n) && this.exists === t.exists;\n      var e, n;\n    }, e.NONE = new e(), e;\n  }(),\n      vy = function () {\n    function t() {}\n\n    return t.prototype.verifyKeyMatches = function (t) {\n      null != t && Ql(t.key.isEqual(this.key), \"Can only apply a mutation to a document with the same key\");\n    }, t.getPostMutationVersion = function (t) {\n      return t instanceof Kp ? t.version : Zf.MIN;\n    }, t;\n  }(),\n      by = function (i) {\n    function e(t, e, n) {\n      var r = i.call(this) || this;\n      return r.key = t, r.value = e, r.precondition = n, r.type = ny.Set, r;\n    }\n\n    return hr(e, i), e.prototype.applyToRemoteDocument = function (t, e) {\n      this.verifyKeyMatches(t), Ql(null == e.transformResults, \"Transform results received by SetMutation.\");\n      var n = e.version;\n      return new Kp(this.key, n, this.value, {\n        hasCommittedMutations: !0\n      });\n    }, e.prototype.applyToLocalView = function (t, e, n) {\n      if (this.verifyKeyMatches(t), !this.precondition.isValidFor(t)) return t;\n      var r = vy.getPostMutationVersion(t);\n      return new Kp(this.key, r, this.value, {\n        hasLocalMutations: !0\n      });\n    }, Object.defineProperty(e.prototype, \"isIdempotent\", {\n      get: function () {\n        return !0;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"fieldMask\", {\n      get: function () {\n        return null;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.isEqual = function (t) {\n      return t instanceof e && this.key.isEqual(t.key) && this.value.isEqual(t.value) && this.precondition.isEqual(t.precondition);\n    }, e;\n  }(vy),\n      wy = function (o) {\n    function e(t, e, n, r) {\n      var i = o.call(this) || this;\n      return i.key = t, i.data = e, i.fieldMask = n, i.precondition = r, i.type = ny.Patch, i;\n    }\n\n    return hr(e, o), e.prototype.applyToRemoteDocument = function (t, e) {\n      if (this.verifyKeyMatches(t), Ql(null == e.transformResults, \"Transform results received by PatchMutation.\"), !this.precondition.isValidFor(t)) return new Hp(this.key, e.version);\n      var n = this.patchDocument(t);\n      return new Kp(this.key, e.version, n, {\n        hasCommittedMutations: !0\n      });\n    }, e.prototype.applyToLocalView = function (t, e, n) {\n      if (this.verifyKeyMatches(t), !this.precondition.isValidFor(t)) return t;\n      var r = vy.getPostMutationVersion(t),\n          i = this.patchDocument(t);\n      return new Kp(this.key, r, i, {\n        hasLocalMutations: !0\n      });\n    }, Object.defineProperty(e.prototype, \"isIdempotent\", {\n      get: function () {\n        return !0;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.isEqual = function (t) {\n      return t instanceof e && this.key.isEqual(t.key) && this.fieldMask.isEqual(t.fieldMask) && this.precondition.isEqual(t.precondition);\n    }, e.prototype.patchDocument = function (t) {\n      var e;\n      return e = t instanceof Kp ? t.data : fy.EMPTY, this.patchObject(e);\n    }, e.prototype.patchObject = function (n) {\n      var r = this;\n      return this.fieldMask.fields.forEach(function (t) {\n        if (!t.isEmpty()) {\n          var e = r.data.field(t);\n          n = void 0 !== e ? n.set(t, e) : n.delete(t);\n        }\n      }), n;\n    }, e;\n  }(vy),\n      _y = function (r) {\n    function e(t, e) {\n      var n = r.call(this) || this;\n      return n.key = t, n.fieldTransforms = e, n.type = ny.Transform, n.precondition = gy.exists(!0), n;\n    }\n\n    return hr(e, r), e.prototype.applyToRemoteDocument = function (t, e) {\n      if (this.verifyKeyMatches(t), Ql(null != e.transformResults, \"Transform results missing for TransformMutation.\"), !this.precondition.isValidFor(t)) return new Hp(this.key, e.version);\n      var n = this.requireDocument(t),\n          r = this.serverTransformResults(t, e.transformResults),\n          i = e.version,\n          o = this.transformObject(n.data, r);\n      return new Kp(this.key, i, o, {\n        hasCommittedMutations: !0\n      });\n    }, e.prototype.applyToLocalView = function (t, e, n) {\n      if (this.verifyKeyMatches(t), !this.precondition.isValidFor(t)) return t;\n      var r = this.requireDocument(t),\n          i = this.localTransformResults(n, e),\n          o = this.transformObject(r.data, i);\n      return new Kp(this.key, r.version, o, {\n        hasLocalMutations: !0\n      });\n    }, Object.defineProperty(e.prototype, \"isIdempotent\", {\n      get: function () {\n        for (var t = 0, e = this.fieldTransforms; t < e.length; t++) {\n          if (!e[t].isIdempotent) return !1;\n        }\n\n        return !0;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"fieldMask\", {\n      get: function () {\n        var e = new ip(qf.comparator);\n        return this.fieldTransforms.forEach(function (t) {\n          return e = e.add(t.field);\n        }), new dy(e);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.isEqual = function (t) {\n      return t instanceof e && this.key.isEqual(t.key) && Tf(this.fieldTransforms, t.fieldTransforms) && this.precondition.isEqual(t.precondition);\n    }, e.prototype.requireDocument = function (t) {\n      Ql(t instanceof Kp, \"Unknown MaybeDocument type \" + t);\n      var e = t;\n      return Ql(e.key.isEqual(this.key), \"Can only transform a document with the same key\"), e;\n    }, e.prototype.serverTransformResults = function (t, e) {\n      var n = [];\n      Ql(this.fieldTransforms.length === e.length, \"server transform result count (\" + e.length + \") should match field transform count (\" + this.fieldTransforms.length + \")\");\n\n      for (var r = 0; r < e.length; r++) {\n        var i = this.fieldTransforms[r],\n            o = i.transform,\n            a = null;\n        t instanceof Kp && (a = t.field(i.field) || null), n.push(o.applyToRemoteDocument(a, e[r]));\n      }\n\n      return n;\n    }, e.prototype.localTransformResults = function (t, e) {\n      for (var n = [], r = 0, i = this.fieldTransforms; r < i.length; r++) {\n        var o = i[r],\n            a = o.transform,\n            s = null;\n        e instanceof Kp && (s = e.field(o.field) || null), n.push(a.applyToLocalView(s, t));\n      }\n\n      return n;\n    }, e.prototype.transformObject = function (t, e) {\n      Ql(e.length === this.fieldTransforms.length, \"TransformResults length mismatch.\");\n\n      for (var n = 0; n < this.fieldTransforms.length; n++) {\n        var r = this.fieldTransforms[n].field;\n        t = t.set(r, e[n]);\n      }\n\n      return t;\n    }, e;\n  }(vy),\n      Ey = function (r) {\n    function e(t, e) {\n      var n = r.call(this) || this;\n      return n.key = t, n.precondition = e, n.type = ny.Delete, n;\n    }\n\n    return hr(e, r), e.prototype.applyToRemoteDocument = function (t, e) {\n      return this.verifyKeyMatches(t), Ql(null == e.transformResults, \"Transform results received by DeleteMutation.\"), new Qp(this.key, e.version, {\n        hasCommittedMutations: !0\n      });\n    }, e.prototype.applyToLocalView = function (t, e, n) {\n      return this.verifyKeyMatches(t), this.precondition.isValidFor(t) ? (t && Ql(t.key.isEqual(this.key), \"Can only apply mutation to document with same key\"), new Qp(this.key, Zf.forDeletedDoc())) : t;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.key.isEqual(t.key) && this.precondition.isEqual(t.precondition);\n    }, Object.defineProperty(e.prototype, \"isIdempotent\", {\n      get: function () {\n        return !0;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"fieldMask\", {\n      get: function () {\n        return null;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e;\n  }(vy),\n      Ty = function () {\n    function t(t, e, n) {\n      this.remoteDocumentCache = t, this.mutationQueue = e, this.indexManager = n;\n    }\n\n    return t.prototype.getDocument = function (e, n) {\n      var r = this;\n      return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e, n).next(function (t) {\n        return r.getDocumentInternal(e, n, t);\n      });\n    }, t.prototype.getDocumentInternal = function (t, r, i) {\n      return this.remoteDocumentCache.getEntry(t, r).next(function (t) {\n        for (var e = 0, n = i; e < n.length; e++) {\n          t = n[e].applyToLocalView(r, t);\n        }\n\n        return t;\n      });\n    }, t.prototype.applyLocalMutationsToDocuments = function (t, e, i) {\n      var o = up();\n      return e.forEach(function (t, e) {\n        for (var n = 0, r = i; n < r.length; n++) {\n          e = r[n].applyToLocalView(t, e);\n        }\n\n        o = o.insert(t, e);\n      }), o;\n    }, t.prototype.getDocuments = function (e, t) {\n      var n = this;\n      return this.remoteDocumentCache.getEntries(e, t).next(function (t) {\n        return n.getLocalViewOfDocuments(e, t);\n      });\n    }, t.prototype.getLocalViewOfDocuments = function (r, i) {\n      var o = this;\n      return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(r, i).next(function (t) {\n        var e = o.applyLocalMutationsToDocuments(r, i, t),\n            n = sp();\n        return e.forEach(function (t, e) {\n          e || (e = new Qp(t, Zf.forDeletedDoc())), n = n.insert(t, e);\n        }), n;\n      });\n    }, t.prototype.getDocumentsMatchingQuery = function (t, e) {\n      return e.isDocumentQuery() ? this.getDocumentsMatchingDocumentQuery(t, e.path) : e.isCollectionGroupQuery() ? this.getDocumentsMatchingCollectionGroupQuery(t, e) : this.getDocumentsMatchingCollectionQuery(t, e);\n    }, t.prototype.getDocumentsMatchingDocumentQuery = function (t, e) {\n      return this.getDocument(t, new Vf(e)).next(function (t) {\n        var e = hp();\n        return t instanceof Kp && (e = e.insert(t.key, t)), e;\n      });\n    }, t.prototype.getDocumentsMatchingCollectionGroupQuery = function (n, r) {\n      var i = this;\n      Ql(r.path.isEmpty(), \"Currently we only support collection group queries at the root.\");\n      var o = r.collectionGroup,\n          a = hp();\n      return this.indexManager.getCollectionParents(n, o).next(function (t) {\n        return bp.forEach(t, function (t) {\n          var e = r.asCollectionQueryAtPath(t.child(o));\n          return i.getDocumentsMatchingCollectionQuery(n, e).next(function (t) {\n            t.forEach(function (t, e) {\n              a = a.insert(t, e);\n            });\n          });\n        }).next(function () {\n          return a;\n        });\n      });\n    }, t.prototype.getDocumentsMatchingCollectionQuery = function (e, h) {\n      var l,\n          n = this;\n      return this.remoteDocumentCache.getDocumentsMatchingQuery(e, h).next(function (t) {\n        return l = t, n.mutationQueue.getAllMutationBatchesAffectingQuery(e, h);\n      }).next(function (t) {\n        for (var e = 0, n = t; e < n.length; e++) for (var r = n[e], i = 0, o = r.mutations; i < o.length; i++) {\n          var a = o[i],\n              s = a.key;\n\n          if (h.path.isImmediateParentOf(s.path)) {\n            var u = l.get(s),\n                c = a.applyToLocalView(u, u, r.localWriteTime);\n            l = c instanceof Kp ? l.insert(s, c) : l.remove(s);\n          }\n        }\n      }).next(function () {\n        return l.forEach(function (t, e) {\n          h.matches(e) || (l = l.remove(t));\n        }), l;\n      });\n    }, t;\n  }(),\n      Sy = function () {\n    function t() {\n      this.refsByKey = new ip(Iy.compareByKey), this.refsByTarget = new ip(Iy.compareByTargetId);\n    }\n\n    return t.prototype.isEmpty = function () {\n      return this.refsByKey.isEmpty();\n    }, t.prototype.addReference = function (t, e) {\n      var n = new Iy(t, e);\n      this.refsByKey = this.refsByKey.add(n), this.refsByTarget = this.refsByTarget.add(n);\n    }, t.prototype.addReferences = function (t, e) {\n      var n = this;\n      t.forEach(function (t) {\n        return n.addReference(t, e);\n      });\n    }, t.prototype.removeReference = function (t, e) {\n      this.removeRef(new Iy(t, e));\n    }, t.prototype.removeReferences = function (t, e) {\n      var n = this;\n      t.forEach(function (t) {\n        return n.removeReference(t, e);\n      });\n    }, t.prototype.removeReferencesForId = function (t) {\n      var e = this,\n          n = Vf.EMPTY,\n          r = new Iy(n, t),\n          i = new Iy(n, t + 1),\n          o = [];\n      return this.refsByTarget.forEachInRange([r, i], function (t) {\n        e.removeRef(t), o.push(t.key);\n      }), o;\n    }, t.prototype.removeAllReferences = function () {\n      var e = this;\n      this.refsByKey.forEach(function (t) {\n        return e.removeRef(t);\n      });\n    }, t.prototype.removeRef = function (t) {\n      this.refsByKey = this.refsByKey.delete(t), this.refsByTarget = this.refsByTarget.delete(t);\n    }, t.prototype.referencesForId = function (t) {\n      var e = Vf.EMPTY,\n          n = new Iy(e, t),\n          r = new Iy(e, t + 1),\n          i = dp();\n      return this.refsByTarget.forEachInRange([n, r], function (t) {\n        i = i.add(t.key);\n      }), i;\n    }, t.prototype.containsKey = function (t) {\n      var e = new Iy(t, 0),\n          n = this.refsByKey.firstAfterOrEqual(e);\n      return null !== n && t.isEqual(n.key);\n    }, t;\n  }(),\n      Iy = function () {\n    function t(t, e) {\n      this.key = t, this.targetOrBatchId = e;\n    }\n\n    return t.compareByKey = function (t, e) {\n      return Vf.comparator(t.key, e.key) || Ef(t.targetOrBatchId, e.targetOrBatchId);\n    }, t.compareByTargetId = function (t, e) {\n      return Ef(t.targetOrBatchId, e.targetOrBatchId) || Vf.comparator(t.key, e.key);\n    }, t;\n  }(),\n      Cy = function () {\n    function l(t, e) {\n      this.persistence = t, this.localViewReferences = new Sy(), this.queryDataByTarget = {}, Ql(t.started, \"LocalStore was passed an unstarted persistence implementation\"), this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences), this.mutationQueue = t.getMutationQueue(e), this.remoteDocuments = t.getRemoteDocumentCache(), this.queryCache = t.getQueryCache(), this.localDocuments = new Ty(this.remoteDocuments, this.mutationQueue, this.persistence.getIndexManager());\n    }\n\n    return l.prototype.handleUserChange = function (e) {\n      var m = this;\n      return this.persistence.runTransaction(\"Handle user change\", \"readonly\", function (d) {\n        var y;\n        return m.mutationQueue.getAllMutationBatches(d).next(function (t) {\n          return y = t, m.mutationQueue = m.persistence.getMutationQueue(e), m.localDocuments = new Ty(m.remoteDocuments, m.mutationQueue, m.persistence.getIndexManager()), m.mutationQueue.getAllMutationBatches(d);\n        }).next(function (t) {\n          for (var e = [], n = [], r = dp(), i = 0, o = y; i < o.length; i++) {\n            var a = o[i];\n            e.push(a.batchId);\n\n            for (var s = 0, u = a.mutations; s < u.length; s++) {\n              var c = u[s];\n              r = r.add(c.key);\n            }\n          }\n\n          for (var h = 0, l = t; h < l.length; h++) {\n            a = l[h];\n            n.push(a.batchId);\n\n            for (var f = 0, p = a.mutations; f < p.length; f++) {\n              c = p[f];\n              r = r.add(c.key);\n            }\n          }\n\n          return m.localDocuments.getDocuments(d, r).next(function (t) {\n            return {\n              affectedDocuments: t,\n              removedBatchIds: e,\n              addedBatchIds: n\n            };\n          });\n        });\n      });\n    }, l.prototype.localWrite = function (c) {\n      var h = this,\n          l = $f.now(),\n          t = c.reduce(function (t, e) {\n        return t.add(e.key);\n      }, dp());\n      return this.persistence.runTransaction(\"Locally write mutations\", \"readwrite\", function (u) {\n        return h.localDocuments.getDocuments(u, t).next(function (n) {\n          for (var t = [], e = 0, r = c; e < r.length; e++) {\n            var i = r[e],\n                o = n.get(i.key);\n\n            if (!i.isIdempotent) {\n              var a = i.fieldMask;\n\n              if (a) {\n                var s = o instanceof Kp ? a.applyTo(o.data) : fy.EMPTY;\n                t.push(new wy(i.key, s, a, gy.exists(!0)));\n              }\n            }\n          }\n\n          return h.mutationQueue.addMutationBatch(u, l, t, c).next(function (t) {\n            var e = t.applyToLocalDocumentSet(n);\n            return {\n              batchId: t.batchId,\n              changes: e\n            };\n          });\n        });\n      });\n    }, l.prototype.lookupMutationDocuments = function (t) {\n      var n = this;\n      return this.persistence.runTransaction(\"Lookup mutation documents\", \"readonly\", function (e) {\n        return n.mutationQueue.lookupMutationKeys(e, t).next(function (t) {\n          return t ? n.localDocuments.getDocuments(e, t) : bp.resolve(null);\n        });\n      });\n    }, l.prototype.acknowledgeBatch = function (r) {\n      var i = this;\n      return this.persistence.runTransaction(\"Acknowledge batch\", \"readwrite-primary\", function (t) {\n        var e = r.batch.keys(),\n            n = i.remoteDocuments.newChangeBuffer();\n        return i.mutationQueue.acknowledgeBatch(t, r.batch, r.streamToken).next(function () {\n          return i.applyWriteToRemoteDocuments(t, r, n);\n        }).next(function () {\n          return n.apply(t);\n        }).next(function () {\n          return i.mutationQueue.performConsistencyCheck(t);\n        }).next(function () {\n          return i.localDocuments.getDocuments(t, e);\n        });\n      });\n    }, l.prototype.rejectBatch = function (t) {\n      var r = this;\n      return this.persistence.runTransaction(\"Reject batch\", \"readwrite-primary\", function (e) {\n        var n;\n        return r.mutationQueue.lookupMutationBatch(e, t).next(function (t) {\n          return Ql(null !== t, \"Attempt to reject nonexistent batch!\"), n = t.keys(), r.mutationQueue.removeMutationBatch(e, t);\n        }).next(function () {\n          return r.mutationQueue.performConsistencyCheck(e);\n        }).next(function () {\n          return r.localDocuments.getDocuments(e, n);\n        });\n      });\n    }, l.prototype.getLastStreamToken = function () {\n      var e = this;\n      return this.persistence.runTransaction(\"Get last stream token\", \"readonly\", function (t) {\n        return e.mutationQueue.getLastStreamToken(t);\n      });\n    }, l.prototype.setLastStreamToken = function (e) {\n      var n = this;\n      return this.persistence.runTransaction(\"Set last stream token\", \"readwrite-primary\", function (t) {\n        return n.mutationQueue.setLastStreamToken(t, e);\n      });\n    }, l.prototype.getLastRemoteSnapshotVersion = function () {\n      var e = this;\n      return this.persistence.runTransaction(\"Get last remote snapshot version\", \"readonly\", function (t) {\n        return e.queryCache.getLastRemoteSnapshotVersion(t);\n      });\n    }, l.prototype.applyRemoteEvent = function (u) {\n      var c = this,\n          h = this.remoteDocuments.newChangeBuffer();\n      return this.persistence.runTransaction(\"Apply remote event\", \"readwrite-primary\", function (o) {\n        var a = [],\n            s = dp();\n        Zl(u.targetChanges, function (t, e) {\n          var n = c.queryDataByTarget[t];\n\n          if (n) {\n            e.addedDocuments.forEach(function (t) {\n              s = s.add(t);\n            }), e.modifiedDocuments.forEach(function (t) {\n              s = s.add(t);\n            }), a.push(c.queryCache.removeMatchingKeys(o, e.removedDocuments, t).next(function () {\n              return c.queryCache.addMatchingKeys(o, e.addedDocuments, t);\n            }));\n            var r = e.resumeToken;\n\n            if (0 < r.length) {\n              var i = n;\n              n = n.copy({\n                resumeToken: r,\n                snapshotVersion: u.snapshotVersion\n              }), c.queryDataByTarget[t] = n, l.shouldPersistQueryData(i, n, e) && a.push(c.queryCache.updateQueryData(o, n));\n            }\n          }\n        });\n        var i = sp(),\n            n = dp();\n        u.documentUpdates.forEach(function (t, e) {\n          n = n.add(t);\n        }), a.push(h.getEntries(o, n).next(function (r) {\n          u.documentUpdates.forEach(function (t, e) {\n            var n = r.get(t);\n            null == n || e.version.isEqual(Zf.MIN) || s.has(e.key) && !n.hasPendingWrites || 0 <= e.version.compareTo(n.version) ? (h.addEntry(e), i = i.insert(t, e)) : Bl(\"LocalStore\", \"Ignoring outdated watch update for \", t, \". Current version:\", n.version, \" Watch version:\", e.version), u.resolvedLimboDocuments.has(t) && a.push(c.persistence.referenceDelegate.updateLimboDocument(o, t));\n          });\n        }));\n        var e = u.snapshotVersion;\n\n        if (!e.isEqual(Zf.MIN)) {\n          var t = c.queryCache.getLastRemoteSnapshotVersion(o).next(function (t) {\n            return Ql(0 <= e.compareTo(t), \"Watch stream reverted to previous snapshot?? \" + e + \" < \" + t), c.queryCache.setTargetsMetadata(o, o.currentSequenceNumber, e);\n          });\n          a.push(t);\n        }\n\n        return bp.waitFor(a).next(function () {\n          return h.apply(o);\n        }).next(function () {\n          return c.localDocuments.getLocalViewOfDocuments(o, i);\n        });\n      });\n    }, l.shouldPersistQueryData = function (t, e, n) {\n      return 0 !== e.resumeToken.length && (0 === t.resumeToken.length || e.snapshotVersion.toMicroseconds() - t.snapshotVersion.toMicroseconds() >= this.RESUME_TOKEN_MAX_AGE_MICROS || 0 < n.addedDocuments.size + n.modifiedDocuments.size + n.removedDocuments.size);\n    }, l.prototype.notifyLocalViewChanges = function (t) {\n      var n = this;\n      return this.persistence.runTransaction(\"notifyLocalViewChanges\", \"readwrite\", function (e) {\n        return bp.forEach(t, function (t) {\n          return n.localViewReferences.addReferences(t.addedKeys, t.targetId), n.localViewReferences.removeReferences(t.removedKeys, t.targetId), bp.forEach(t.removedKeys, function (t) {\n            return n.persistence.referenceDelegate.removeReference(e, t);\n          });\n        });\n      });\n    }, l.prototype.nextMutationBatch = function (e) {\n      var n = this;\n      return this.persistence.runTransaction(\"Get next mutation batch\", \"readonly\", function (t) {\n        return void 0 === e && (e = -1), n.mutationQueue.getNextMutationBatchAfterBatchId(t, e);\n      });\n    }, l.prototype.readDocument = function (e) {\n      var n = this;\n      return this.persistence.runTransaction(\"read document\", \"readonly\", function (t) {\n        return n.localDocuments.getDocument(t, e);\n      });\n    }, l.prototype.allocateQuery = function (r) {\n      var i = this;\n      return this.persistence.runTransaction(\"Allocate query\", \"readwrite\", function (e) {\n        var n;\n        return i.queryCache.getQueryData(e, r).next(function (t) {\n          return t ? (n = t, bp.resolve()) : i.queryCache.allocateTargetId(e).next(function (t) {\n            return n = new Ad(r, t, Td.Listen, e.currentSequenceNumber), i.queryCache.addQueryData(e, n);\n          });\n        }).next(function () {\n          return Ql(!i.queryDataByTarget[n.targetId], \"Tried to allocate an already allocated query: \" + r), i.queryDataByTarget[n.targetId] = n;\n        });\n      });\n    }, l.prototype.releaseQuery = function (o, a) {\n      var s = this,\n          t = a ? \"readwrite\" : \"readwrite-primary\";\n      return this.persistence.runTransaction(\"Release query\", t, function (i) {\n        return s.queryCache.getQueryData(i, o).next(function (t) {\n          Ql(null != t, \"Tried to release nonexistent query: \" + o);\n          var e = t.targetId,\n              n = s.queryDataByTarget[e],\n              r = s.localViewReferences.removeReferencesForId(e);\n          return delete s.queryDataByTarget[e], a ? bp.resolve() : bp.forEach(r, function (t) {\n            return s.persistence.referenceDelegate.removeReference(i, t);\n          }).next(function () {\n            return s.persistence.referenceDelegate.removeTarget(i, n);\n          });\n        });\n      });\n    }, l.prototype.executeQuery = function (e) {\n      var n = this;\n      return this.persistence.runTransaction(\"Execute query\", \"readonly\", function (t) {\n        return n.localDocuments.getDocumentsMatchingQuery(t, e);\n      });\n    }, l.prototype.remoteDocumentKeys = function (e) {\n      var n = this;\n      return this.persistence.runTransaction(\"Remote document keys\", \"readonly\", function (t) {\n        return n.queryCache.getMatchingKeysForTargetId(t, e);\n      });\n    }, l.prototype.getActiveClients = function () {\n      return this.persistence.getActiveClients();\n    }, l.prototype.removeCachedMutationBatchMetadata = function (t) {\n      this.mutationQueue.removeCachedMutationKeys(t);\n    }, l.prototype.setNetworkEnabled = function (t) {\n      this.persistence.setNetworkEnabled(t);\n    }, l.prototype.applyWriteToRemoteDocuments = function (t, i, o) {\n      var e = this,\n          a = i.batch,\n          n = a.keys(),\n          s = bp.resolve();\n      return n.forEach(function (r) {\n        s = s.next(function () {\n          return o.getEntry(t, r);\n        }).next(function (t) {\n          var e = t,\n              n = i.docVersions.get(r);\n          Ql(null !== n, \"ackVersions should contain every doc in the write.\"), (!e || e.version.compareTo(n) < 0) && ((e = a.applyToRemoteDocument(r, e, i)) ? o.addEntry(e) : Ql(!t, \"Mutation batch \" + a + \" applied to document \" + t + \" resulted in null\"));\n        });\n      }), s.next(function () {\n        return e.mutationQueue.removeMutationBatch(t, a);\n      });\n    }, l.prototype.collectGarbage = function (e) {\n      var n = this;\n      return this.persistence.runTransaction(\"Collect garbage\", \"readwrite-primary\", function (t) {\n        return e.collect(t, n.queryDataByTarget);\n      });\n    }, l.prototype.getQueryForTarget = function (e) {\n      var n = this;\n      return this.queryDataByTarget[e] ? Promise.resolve(this.queryDataByTarget[e].query) : this.persistence.runTransaction(\"Get query data\", \"readonly\", function (t) {\n        return n.queryCache.getQueryDataForTarget(t, e).next(function (t) {\n          return t ? t.query : null;\n        });\n      });\n    }, l.prototype.getNewDocumentChanges = function () {\n      var e = this;\n      return this.persistence.runTransaction(\"Get new document changes\", \"readonly\", function (t) {\n        return e.remoteDocuments.getNewDocumentChanges(t);\n      });\n    }, l.RESUME_TOKEN_MAX_AGE_MICROS = 3e8, l;\n  }(),\n      Ny = function () {\n    function t(t, e) {\n      this.indexManager = t, this.referenceDelegate = e, this.mutationQueue = [], this.nextBatchId = 1, this.lastStreamToken = Gl(), this.batchesByDocumentKey = new ip(Iy.compareByKey);\n    }\n\n    return t.prototype.checkEmpty = function (t) {\n      return bp.resolve(0 === this.mutationQueue.length);\n    }, t.prototype.acknowledgeBatch = function (t, e, n) {\n      var r = e.batchId,\n          i = this.indexOfExistingBatchId(r, \"acknowledged\");\n      Ql(0 === i, \"Can only acknowledge the first batch in the mutation queue\");\n      var o = this.mutationQueue[i];\n      return Ql(r === o.batchId, \"Queue ordering failure: expected batch \" + r + \", got batch \" + o.batchId), this.lastStreamToken = n, bp.resolve();\n    }, t.prototype.getLastStreamToken = function (t) {\n      return bp.resolve(this.lastStreamToken);\n    }, t.prototype.setLastStreamToken = function (t, e) {\n      return this.lastStreamToken = e, bp.resolve();\n    }, t.prototype.addMutationBatch = function (t, e, n, r) {\n      Ql(0 !== r.length, \"Mutation batches should not be empty\");\n      var i = this.nextBatchId;\n      (this.nextBatchId++, 0 < this.mutationQueue.length) && Ql(this.mutationQueue[this.mutationQueue.length - 1].batchId < i, \"Mutation batchIDs must be monotonically increasing order\");\n      var o = new gp(i, e, n, r);\n      this.mutationQueue.push(o);\n\n      for (var a = 0, s = r; a < s.length; a++) {\n        var u = s[a];\n        this.batchesByDocumentKey = this.batchesByDocumentKey.add(new Iy(u.key, i)), this.indexManager.addToCollectionParentIndex(t, u.key.path.popLast());\n      }\n\n      return bp.resolve(o);\n    }, t.prototype.lookupMutationBatch = function (t, e) {\n      return bp.resolve(this.findMutationBatch(e));\n    }, t.prototype.lookupMutationKeys = function (t, e) {\n      var n = this.findMutationBatch(e);\n      return Ql(null != n, \"Failed to find local mutation batch.\"), bp.resolve(n.keys());\n    }, t.prototype.getNextMutationBatchAfterBatchId = function (t, e) {\n      var n = e + 1,\n          r = this.indexOfBatchId(n),\n          i = r < 0 ? 0 : r;\n      return bp.resolve(this.mutationQueue.length > i ? this.mutationQueue[i] : null);\n    }, t.prototype.getAllMutationBatches = function (t) {\n      return bp.resolve(this.mutationQueue.slice());\n    }, t.prototype.getAllMutationBatchesAffectingDocumentKey = function (t, n) {\n      var r = this,\n          e = new Iy(n, 0),\n          i = new Iy(n, Number.POSITIVE_INFINITY),\n          o = [];\n      return this.batchesByDocumentKey.forEachInRange([e, i], function (t) {\n        Ql(n.isEqual(t.key), \"Should only iterate over a single key's batches\");\n        var e = r.findMutationBatch(t.targetOrBatchId);\n        Ql(null !== e, \"Batches in the index must exist in the main table\"), o.push(e);\n      }), bp.resolve(o);\n    }, t.prototype.getAllMutationBatchesAffectingDocumentKeys = function (t, e) {\n      var r = this,\n          i = new ip(Ef);\n      return e.forEach(function (e) {\n        var t = new Iy(e, 0),\n            n = new Iy(e, Number.POSITIVE_INFINITY);\n        r.batchesByDocumentKey.forEachInRange([t, n], function (t) {\n          Ql(e.isEqual(t.key), \"For each key, should only iterate over a single key's batches\"), i = i.add(t.targetOrBatchId);\n        });\n      }), bp.resolve(this.findMutationBatches(i));\n    }, t.prototype.getAllMutationBatchesAffectingQuery = function (t, e) {\n      Ql(!e.isCollectionGroupQuery(), \"CollectionGroup queries should be handled in LocalDocumentsView\");\n      var n = e.path,\n          r = n.length + 1,\n          i = n;\n      Vf.isDocumentKey(i) || (i = i.child(\"\"));\n      var o = new Iy(new Vf(i), 0),\n          a = new ip(Ef);\n      return this.batchesByDocumentKey.forEachWhile(function (t) {\n        var e = t.key.path;\n        return !!n.isPrefixOf(e) && (e.length === r && (a = a.add(t.targetOrBatchId)), !0);\n      }, o), bp.resolve(this.findMutationBatches(a));\n    }, t.prototype.findMutationBatches = function (t) {\n      var n = this,\n          r = [];\n      return t.forEach(function (t) {\n        var e = n.findMutationBatch(t);\n        null !== e && r.push(e);\n      }), r;\n    }, t.prototype.removeMutationBatch = function (n, r) {\n      var i = this;\n      Ql(0 === this.indexOfExistingBatchId(r.batchId, \"removed\"), \"Can only remove the first entry of the mutation queue\"), this.mutationQueue.shift();\n      var o = this.batchesByDocumentKey;\n      return bp.forEach(r.mutations, function (t) {\n        var e = new Iy(t.key, r.batchId);\n        return o = o.delete(e), i.referenceDelegate.removeMutationReference(n, t.key);\n      }).next(function () {\n        i.batchesByDocumentKey = o;\n      });\n    }, t.prototype.removeCachedMutationKeys = function (t) {}, t.prototype.containsKey = function (t, e) {\n      var n = new Iy(e, 0),\n          r = this.batchesByDocumentKey.firstAfterOrEqual(n);\n      return bp.resolve(e.isEqual(r && r.key));\n    }, t.prototype.performConsistencyCheck = function (t) {\n      return 0 === this.mutationQueue.length && Ql(this.batchesByDocumentKey.isEmpty(), \"Document leak -- detected dangling mutation references when queue is empty.\"), bp.resolve();\n    }, t.prototype.indexOfExistingBatchId = function (t, e) {\n      var n = this.indexOfBatchId(t);\n      return Ql(0 <= n && n < this.mutationQueue.length, \"Batches must exist to be \" + e), n;\n    }, t.prototype.indexOfBatchId = function (t) {\n      return 0 === this.mutationQueue.length ? 0 : t - this.mutationQueue[0].batchId;\n    }, t.prototype.findMutationBatch = function (t) {\n      var e = this.indexOfBatchId(t);\n      if (e < 0 || e >= this.mutationQueue.length) return null;\n      var n = this.mutationQueue[e];\n      return Ql(n.batchId === t, \"If found batch must match\"), n;\n    }, t;\n  }(),\n      Ay = function () {\n    function t(t) {\n      this.persistence = t, this.queries = new Gp(function (t) {\n        return t.canonicalId();\n      }), this.lastRemoteSnapshotVersion = Zf.MIN, this.highestTargetId = 0, this.highestSequenceNumber = 0, this.references = new Sy(), this.targetCount = 0, this.targetIdGenerator = kp.forQueryCache();\n    }\n\n    return t.prototype.getTargetCount = function (t) {\n      return bp.resolve(this.targetCount);\n    }, t.prototype.forEachTarget = function (t, n) {\n      return this.queries.forEach(function (t, e) {\n        return n(e);\n      }), bp.resolve();\n    }, t.prototype.getLastRemoteSnapshotVersion = function (t) {\n      return bp.resolve(this.lastRemoteSnapshotVersion);\n    }, t.prototype.getHighestSequenceNumber = function (t) {\n      return bp.resolve(this.highestSequenceNumber);\n    }, t.prototype.allocateTargetId = function (t) {\n      var e = this.targetIdGenerator.after(this.highestTargetId);\n      return this.highestTargetId = e, bp.resolve(e);\n    }, t.prototype.setTargetsMetadata = function (t, e, n) {\n      return n && (this.lastRemoteSnapshotVersion = n), e > this.highestSequenceNumber && (this.highestSequenceNumber = e), bp.resolve();\n    }, t.prototype.saveQueryData = function (t) {\n      this.queries.set(t.query, t);\n      var e = t.targetId;\n      e > this.highestTargetId && (this.highestTargetId = e), t.sequenceNumber > this.highestSequenceNumber && (this.highestSequenceNumber = t.sequenceNumber);\n    }, t.prototype.addQueryData = function (t, e) {\n      return Ql(!this.queries.has(e.query), \"Adding a query that already exists\"), this.saveQueryData(e), this.targetCount += 1, bp.resolve();\n    }, t.prototype.updateQueryData = function (t, e) {\n      return Ql(this.queries.has(e.query), \"Updating a non-existent query\"), this.saveQueryData(e), bp.resolve();\n    }, t.prototype.removeQueryData = function (t, e) {\n      return Ql(0 < this.targetCount, \"Removing a target from an empty cache\"), Ql(this.queries.has(e.query), \"Removing a non-existent target from the cache\"), this.queries.delete(e.query), this.references.removeReferencesForId(e.targetId), this.targetCount -= 1, bp.resolve();\n    }, t.prototype.removeTargets = function (n, r, i) {\n      var o = this,\n          a = 0,\n          s = [];\n      return this.queries.forEach(function (t, e) {\n        e.sequenceNumber <= r && !i[e.targetId] && (o.queries.delete(t), s.push(o.removeMatchingKeysForTargetId(n, e.targetId)), a++);\n      }), bp.waitFor(s).next(function () {\n        return a;\n      });\n    }, t.prototype.getQueryCount = function (t) {\n      return bp.resolve(this.targetCount);\n    }, t.prototype.getQueryData = function (t, e) {\n      var n = this.queries.get(e) || null;\n      return bp.resolve(n);\n    }, t.prototype.getQueryDataForTarget = function (t, e) {\n      return Kl(\"Not yet implemented.\");\n    }, t.prototype.addMatchingKeys = function (e, t, n) {\n      this.references.addReferences(t, n);\n      var r = this.persistence.referenceDelegate,\n          i = [];\n      return r && t.forEach(function (t) {\n        i.push(r.addReference(e, t));\n      }), bp.waitFor(i);\n    }, t.prototype.removeMatchingKeys = function (e, t, n) {\n      this.references.removeReferences(t, n);\n      var r = this.persistence.referenceDelegate,\n          i = [];\n      return r && t.forEach(function (t) {\n        i.push(r.removeReference(e, t));\n      }), bp.waitFor(i);\n    }, t.prototype.removeMatchingKeysForTargetId = function (t, e) {\n      return this.references.removeReferencesForId(e), bp.resolve();\n    }, t.prototype.getMatchingKeysForTargetId = function (t, e) {\n      var n = this.references.referencesForId(e);\n      return bp.resolve(n);\n    }, t.prototype.containsKey = function (t, e) {\n      return bp.resolve(this.references.containsKey(e));\n    }, t;\n  }();\n\n  var ky = function () {\n    function t(t, e) {\n      this.indexManager = t, this.sizer = e, this.docs = new tp(Vf.comparator), this.newDocumentChanges = dp(), this.size = 0;\n    }\n\n    return t.prototype.addEntries = function (t, e, n) {\n      for (var r = [], i = 0, o = e; i < o.length; i++) {\n        var a = o[i],\n            s = a.maybeDocument.key;\n        this.docs = this.docs.insert(s, a), this.newDocumentChanges = this.newDocumentChanges.add(s), r.push(this.indexManager.addToCollectionParentIndex(t, s.path.popLast()));\n      }\n\n      return this.size += n, bp.waitFor(r);\n    }, t.prototype.removeEntry = function (t, e) {\n      var n = this.docs.get(e);\n      return n ? (this.docs = this.docs.remove(e), this.size -= n.size, bp.resolve(n.size)) : bp.resolve(0);\n    }, t.prototype.getEntry = function (t, e) {\n      var n = this.docs.get(e);\n      return bp.resolve(n ? n.maybeDocument : null);\n    }, t.prototype.getSizedEntry = function (t, e) {\n      return bp.resolve(this.docs.get(e));\n    }, t.prototype.getEntries = function (t, e) {\n      var n = this,\n          r = up();\n      return e.forEach(function (t) {\n        var e = n.docs.get(t);\n        r = r.insert(t, e ? e.maybeDocument : null);\n      }), bp.resolve(r);\n    }, t.prototype.getSizedEntries = function (t, e) {\n      var n = this,\n          r = up(),\n          i = new tp(Vf.comparator);\n      return e.forEach(function (t) {\n        var e = n.docs.get(t);\n        r = r.insert(t, e ? e.maybeDocument : null), i = i.insert(t, e ? e.size : 0);\n      }), bp.resolve({\n        maybeDocuments: r,\n        sizeMap: i\n      });\n    }, t.prototype.getDocumentsMatchingQuery = function (t, e) {\n      Ql(!e.isCollectionGroupQuery(), \"CollectionGroup queries should be handled in LocalDocumentsView\");\n\n      for (var n = hp(), r = new Vf(e.path.child(\"\")), i = this.docs.getIteratorFrom(r); i.hasNext();) {\n        var o = i.getNext(),\n            a = o.key,\n            s = o.value.maybeDocument;\n        if (!e.path.isPrefixOf(a.path)) break;\n        s instanceof Kp && e.matches(s) && (n = n.insert(s.key, s));\n      }\n\n      return bp.resolve(n);\n    }, t.prototype.forEachDocumentKey = function (t, e) {\n      return bp.forEach(this.docs, function (t) {\n        return e(t);\n      });\n    }, t.prototype.getNewDocumentChanges = function (t) {\n      var r = this,\n          i = sp();\n      return this.newDocumentChanges.forEach(function (t) {\n        var e = r.docs.get(t),\n            n = e ? e.maybeDocument : new Qp(t, Zf.forDeletedDoc());\n        i = i.insert(t, n);\n      }), this.newDocumentChanges = dp(), bp.resolve(i);\n    }, t.prototype.newChangeBuffer = function () {\n      return new Dy(this.sizer, this);\n    }, t.prototype.getSize = function (t) {\n      return bp.resolve(this.size);\n    }, t;\n  }(),\n      Dy = function (r) {\n    function t(t, e) {\n      var n = r.call(this) || this;\n      return n.sizer = t, n.documentCache = e, n;\n    }\n\n    return hr(t, r), t.prototype.applyChanges = function (t) {\n      var i = this,\n          e = this.assertChanges(),\n          o = 0,\n          a = [];\n      return e.forEach(function (t, e) {\n        var n = i.documentSizes.get(t);\n        Ql(void 0 !== n, \"Attempting to change document \" + t.toString() + \" without having read it first\");\n        var r = i.sizer(e);\n        o += r - n, a.push({\n          maybeDocument: e,\n          size: r\n        });\n      }), this.documentCache.addEntries(t, a, o);\n    }, t.prototype.getFromCache = function (t, e) {\n      return this.documentCache.getSizedEntry(t, e);\n    }, t.prototype.getAllFromCache = function (t, e) {\n      return this.documentCache.getSizedEntries(t, e);\n    }, t;\n  }(zp),\n      Ry = function () {\n    function r(t, e) {\n      var n = this;\n      this.clientId = t, this.mutationQueues = {}, this.listenSequence = new Mf(0), this._started = !1, this._started = !0, this.referenceDelegate = e(this), this.queryCache = new Ay(this);\n      this.indexManager = new rd(), this.remoteDocumentCache = new ky(this.indexManager, function (t) {\n        return n.referenceDelegate.documentSize(t);\n      });\n    }\n\n    return r.createLruPersistence = function (t, e, n) {\n      return new r(t, function (t) {\n        return new My(t, new kd(e), n);\n      });\n    }, r.createEagerPersistence = function (t) {\n      return new r(t, function (t) {\n        return new Py(t);\n      });\n    }, r.prototype.shutdown = function () {\n      return this._started = !1, Promise.resolve();\n    }, Object.defineProperty(r.prototype, \"started\", {\n      get: function () {\n        return this._started;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), r.prototype.getActiveClients = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          return [2, [this.clientId]];\n        });\n      });\n    }, r.prototype.setPrimaryStateListener = function (t) {\n      return t(!0);\n    }, r.prototype.setDatabaseDeletedListener = function () {}, r.prototype.setNetworkEnabled = function (t) {}, r.prototype.getIndexManager = function () {\n      return this.indexManager;\n    }, r.prototype.getMutationQueue = function (t) {\n      var e = this.mutationQueues[t.toKey()];\n      return e || (e = new Ny(this.indexManager, this.referenceDelegate), this.mutationQueues[t.toKey()] = e), e;\n    }, r.prototype.getQueryCache = function () {\n      return this.queryCache;\n    }, r.prototype.getRemoteDocumentCache = function () {\n      return this.remoteDocumentCache;\n    }, r.prototype.runTransaction = function (t, e, n) {\n      var r = this;\n      Bl(\"MemoryPersistence\", \"Starting transaction:\", t);\n      var i = new Oy(this.listenSequence.next());\n      return this.referenceDelegate.onTransactionStarted(), n(i).next(function (t) {\n        return r.referenceDelegate.onTransactionCommitted(i).next(function () {\n          return t;\n        });\n      }).toPromise();\n    }, r.prototype.mutationQueuesContainKey = function (e, n) {\n      return bp.or((t = this.mutationQueues, r = [], tf(t, function (t, e) {\n        return r.push(e);\n      }), r).map(function (t) {\n        return function () {\n          return t.containsKey(e, n);\n        };\n      }));\n      var t, r;\n    }, r;\n  }(),\n      Oy = function (t) {\n    this.currentSequenceNumber = t;\n  },\n      Py = function () {\n    function t(t) {\n      this.persistence = t;\n    }\n\n    return t.prototype.setInMemoryPins = function (t) {\n      this.inMemoryPins = t;\n    }, t.prototype.addReference = function (t, e) {\n      return this.orphanedDocuments.delete(e), bp.resolve();\n    }, t.prototype.removeReference = function (t, e) {\n      return this.orphanedDocuments.add(e), bp.resolve();\n    }, t.prototype.removeMutationReference = function (t, e) {\n      return this.orphanedDocuments.add(e), bp.resolve();\n    }, t.prototype.removeTarget = function (t, e) {\n      var n = this,\n          r = this.persistence.getQueryCache();\n      return r.getMatchingKeysForTargetId(t, e.targetId).next(function (t) {\n        t.forEach(function (t) {\n          return n.orphanedDocuments.add(t);\n        });\n      }).next(function () {\n        return r.removeQueryData(t, e);\n      });\n    }, t.prototype.onTransactionStarted = function () {\n      this.orphanedDocuments = new Set();\n    }, t.prototype.onTransactionCommitted = function (n) {\n      var t = this,\n          r = this.persistence.getRemoteDocumentCache();\n      return bp.forEach(this.orphanedDocuments, function (e) {\n        return t.isReferenced(n, e).next(function (t) {\n          return t ? bp.resolve() : r.removeEntry(n, e).next(function () {});\n        });\n      });\n    }, t.prototype.updateLimboDocument = function (t, e) {\n      var n = this;\n      return this.isReferenced(t, e).next(function (t) {\n        t ? n.orphanedDocuments.delete(e) : n.orphanedDocuments.add(e);\n      });\n    }, t.prototype.documentSize = function (t) {\n      return 0;\n    }, t.prototype.isReferenced = function (t, e) {\n      var n = this;\n      return bp.or([function () {\n        return n.persistence.getQueryCache().containsKey(t, e);\n      }, function () {\n        return n.persistence.mutationQueuesContainKey(t, e);\n      }, function () {\n        return bp.resolve(n.inMemoryPins.containsKey(e));\n      }]);\n    }, t;\n  }(),\n      My = function () {\n    function t(t, e, n) {\n      this.persistence = t, this.serializer = e, this.orphanedSequenceNumbers = new Gp(function (t) {\n        return zf(t.path);\n      }), this.garbageCollector = new xd(this, n);\n    }\n\n    return t.prototype.onTransactionStarted = function () {}, t.prototype.onTransactionCommitted = function (t) {\n      return bp.resolve();\n    }, t.prototype.forEachTarget = function (t, e) {\n      return this.persistence.getQueryCache().forEachTarget(t, e);\n    }, t.prototype.getSequenceNumberCount = function (t) {\n      var n = this.orphanedDocumentCount(t);\n      return this.persistence.getQueryCache().getTargetCount(t).next(function (e) {\n        return n.next(function (t) {\n          return e + t;\n        });\n      });\n    }, t.prototype.orphanedDocumentCount = function (t) {\n      var e = 0;\n      return this.forEachOrphanedDocumentSequenceNumber(t, function (t) {\n        e++;\n      }).next(function () {\n        return e;\n      });\n    }, t.prototype.forEachOrphanedDocumentSequenceNumber = function (n, r) {\n      var i = this;\n      return bp.forEach(this.orphanedSequenceNumbers, function (t, e) {\n        return i.isPinned(n, t, e).next(function (t) {\n          return t ? bp.resolve() : r(e);\n        });\n      });\n    }, t.prototype.setInMemoryPins = function (t) {\n      this.inMemoryPins = t;\n    }, t.prototype.removeTargets = function (t, e, n) {\n      return this.persistence.getQueryCache().removeTargets(t, e, n);\n    }, t.prototype.removeOrphanedDocuments = function (n, t) {\n      var r = this,\n          i = 0,\n          o = this.persistence.getRemoteDocumentCache();\n      return o.forEachDocumentKey(n, function (e) {\n        return r.isPinned(n, e, t).next(function (t) {\n          return t ? bp.resolve() : (i++, o.removeEntry(n, e).next());\n        });\n      }).next(function () {\n        return i;\n      });\n    }, t.prototype.removeMutationReference = function (t, e) {\n      return this.orphanedSequenceNumbers.set(e, t.currentSequenceNumber), bp.resolve();\n    }, t.prototype.removeTarget = function (t, e) {\n      var n = e.copy({\n        sequenceNumber: t.currentSequenceNumber\n      });\n      return this.persistence.getQueryCache().updateQueryData(t, n);\n    }, t.prototype.addReference = function (t, e) {\n      return this.orphanedSequenceNumbers.set(e, t.currentSequenceNumber), bp.resolve();\n    }, t.prototype.removeReference = function (t, e) {\n      return this.orphanedSequenceNumbers.set(e, t.currentSequenceNumber), bp.resolve();\n    }, t.prototype.updateLimboDocument = function (t, e) {\n      return this.orphanedSequenceNumbers.set(e, t.currentSequenceNumber), bp.resolve();\n    }, t.prototype.documentSize = function (t) {\n      var e,\n          n = this.serializer.toDbRemoteDocument(t);\n      if (n.document) e = n.document;else if (n.unknownDocument) e = n.unknownDocument;else {\n        if (!n.noDocument) throw Kl(\"Unknown remote document type\");\n        e = n.noDocument;\n      }\n      return JSON.stringify(e).length;\n    }, t.prototype.isPinned = function (t, e, n) {\n      var r = this;\n      return bp.or([function () {\n        return r.persistence.mutationQueuesContainKey(t, e);\n      }, function () {\n        return bp.resolve(r.inMemoryPins.containsKey(e));\n      }, function () {\n        return r.persistence.getQueryCache().containsKey(t, e);\n      }, function () {\n        var t = r.orphanedSequenceNumbers.get(e);\n        return bp.resolve(void 0 !== t && n < t);\n      }]);\n    }, t.prototype.getCacheSize = function (t) {\n      return this.persistence.getRemoteDocumentCache().getSize(t);\n    }, t;\n  }(),\n      xy = Number,\n      Ly = xy.MIN_SAFE_INTEGER || -(Math.pow(2, 53) - 1),\n      Fy = xy.MAX_SAFE_INTEGER || Math.pow(2, 53) - 1,\n      Uy = xy.isInteger || function (t) {\n    return \"number\" == typeof t && isFinite(t) && Math.floor(t) === t;\n  };\n\n  function qy(t) {\n    return null == t;\n  }\n\n  function Vy(t) {\n    return Uy(t) && t <= Fy && Ly <= t;\n  }\n\n  var By,\n      jy,\n      Wy = function () {\n    function t(t, e, n, r, i) {\n      this.queue = t, this.timerId = e, this.initialDelayMs = n, this.backoffFactor = r, this.maxDelayMs = i, this.timerPromise = null, this.lastAttemptTime = Date.now(), this.reset();\n    }\n\n    return t.prototype.reset = function () {\n      this.currentBaseMs = 0;\n    }, t.prototype.resetToMax = function () {\n      this.currentBaseMs = this.maxDelayMs;\n    }, t.prototype.backoffAndRun = function (t) {\n      var e = this;\n      this.cancel();\n      var n = Math.floor(this.currentBaseMs + this.jitterDelayMs()),\n          r = Math.max(0, Date.now() - this.lastAttemptTime),\n          i = Math.max(0, n - r);\n      0 < this.currentBaseMs && Bl(\"ExponentialBackoff\", \"Backing off for \" + i + \" ms (base delay: \" + this.currentBaseMs + \" ms, delay with jitter: \" + n + \" ms, last attempt: \" + r + \" ms ago)\"), this.timerPromise = this.queue.enqueueAfterDelay(this.timerId, i, function () {\n        return e.lastAttemptTime = Date.now(), t();\n      }), this.currentBaseMs *= this.backoffFactor, this.currentBaseMs < this.initialDelayMs && (this.currentBaseMs = this.initialDelayMs), this.currentBaseMs > this.maxDelayMs && (this.currentBaseMs = this.maxDelayMs);\n    }, t.prototype.cancel = function () {\n      null !== this.timerPromise && (this.timerPromise.cancel(), this.timerPromise = null);\n    }, t.prototype.jitterDelayMs = function () {\n      return (Math.random() - .5) * this.currentBaseMs;\n    }, t;\n  }(),\n      Ky = \"PersistentStream\";\n\n  (jy = By || (By = {}))[jy.Initial = 0] = \"Initial\", jy[jy.Starting = 1] = \"Starting\", jy[jy.Open = 2] = \"Open\", jy[jy.Error = 3] = \"Error\", jy[jy.Backoff = 4] = \"Backoff\";\n\n  var Qy,\n      Hy,\n      Gy,\n      zy,\n      Yy = function () {\n    function t(t, e, n, r, i, o) {\n      this.queue = t, this.idleTimerId = n, this.connection = r, this.credentialsProvider = i, this.listener = o, this.state = By.Initial, this.closeCount = 0, this.idleTimer = null, this.stream = null, this.backoff = new Wy(t, e, 1e3, 1.5, 6e4);\n    }\n\n    return t.prototype.isStarted = function () {\n      return this.state === By.Starting || this.state === By.Open || this.state === By.Backoff;\n    }, t.prototype.isOpen = function () {\n      return this.state === By.Open;\n    }, t.prototype.start = function () {\n      this.state !== By.Error ? (Ql(this.state === By.Initial, \"Already started\"), this.auth()) : this.performBackoff();\n    }, t.prototype.stop = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.isStarted() ? [4, this.close(By.Initial)] : [3, 2];\n\n            case 1:\n              t.sent(), t.label = 2;\n\n            case 2:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.inhibitBackoff = function () {\n      Ql(!this.isStarted(), \"Can only inhibit backoff in a stopped state\"), this.state = By.Initial, this.backoff.reset();\n    }, t.prototype.markIdle = function () {\n      var t = this;\n      this.isOpen() && null === this.idleTimer && (this.idleTimer = this.queue.enqueueAfterDelay(this.idleTimerId, 6e4, function () {\n        return t.handleIdleCloseTimer();\n      }));\n    }, t.prototype.sendRequest = function (t) {\n      this.cancelIdleCheck(), this.stream.send(t);\n    }, t.prototype.handleIdleCloseTimer = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          return this.isOpen() ? [2, this.close(By.Initial)] : [2];\n        });\n      });\n    }, t.prototype.cancelIdleCheck = function () {\n      this.idleTimer && (this.idleTimer.cancel(), this.idleTimer = null);\n    }, t.prototype.close = function (e, n) {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return Ql(this.isStarted(), \"Only started streams should be closed.\"), Ql(e === By.Error || qy(n), \"Can't provide an error when not in an error state.\"), this.cancelIdleCheck(), this.backoff.cancel(), this.closeCount++, e !== By.Error ? this.backoff.reset() : n && n.code === zl.RESOURCE_EXHAUSTED ? (jl(n.toString()), jl(\"Using maximum backoff delay to prevent overloading the backend.\"), this.backoff.resetToMax()) : n && n.code === zl.UNAUTHENTICATED && this.credentialsProvider.invalidateToken(), null !== this.stream && (this.tearDown(), this.stream.close(), this.stream = null), this.state = e, [4, this.listener.onClose(n)];\n\n            case 1:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.tearDown = function () {}, t.prototype.auth = function () {\n      var n = this;\n      Ql(this.state === By.Initial, \"Must be in initial state to auth\"), this.state = By.Starting;\n      var t = this.getCloseGuardedDispatcher(this.closeCount),\n          e = this.closeCount;\n      this.credentialsProvider.getToken().then(function (t) {\n        n.closeCount === e && n.startStream(t);\n      }, function (e) {\n        t(function () {\n          var t = new Yl(zl.UNKNOWN, \"Fetching auth token failed: \" + e.message);\n          return n.handleStreamClose(t);\n        });\n      });\n    }, t.prototype.startStream = function (t) {\n      var e = this;\n      Ql(this.state === By.Starting, \"Trying to start stream in a non-starting state\");\n      var n = this.getCloseGuardedDispatcher(this.closeCount);\n      this.stream = this.startRpc(t), this.stream.onOpen(function () {\n        n(function () {\n          return Ql(e.state === By.Starting, \"Expected stream to be in state Starting, but was \" + e.state), e.state = By.Open, e.listener.onOpen();\n        });\n      }), this.stream.onClose(function (t) {\n        n(function () {\n          return e.handleStreamClose(t);\n        });\n      }), this.stream.onMessage(function (t) {\n        n(function () {\n          return e.onMessage(t);\n        });\n      });\n    }, t.prototype.performBackoff = function () {\n      var t = this;\n      Ql(this.state === By.Error, \"Should only perform backoff when in Error state\"), this.state = By.Backoff, this.backoff.backoffAndRun(function () {\n        return fr(t, void 0, void 0, function () {\n          return pr(this, function (t) {\n            return Ql(this.state === By.Backoff, \"Backoff elapsed but state is now: \" + this.state), this.state = By.Initial, this.start(), Ql(this.isStarted(), \"PersistentStream should have started\"), [2];\n          });\n        });\n      });\n    }, t.prototype.handleStreamClose = function (t) {\n      return Ql(this.isStarted(), \"Can't handle server close on non-started stream\"), Bl(Ky, \"close with error: \" + t), this.stream = null, this.close(By.Error, t);\n    }, t.prototype.getCloseGuardedDispatcher = function (e) {\n      var n = this;\n      return function (t) {\n        n.queue.enqueueAndForget(function () {\n          return n.closeCount === e ? t() : (Bl(Ky, \"stream callback skipped by getCloseGuardedDispatcher.\"), Promise.resolve());\n        });\n      };\n    }, t;\n  }(),\n      Xy = function (a) {\n    function t(t, e, n, r, i) {\n      var o = a.call(this, t, Nf.ListenStreamConnectionBackoff, Nf.ListenStreamIdle, e, n, i) || this;\n      return o.serializer = r, o;\n    }\n\n    return hr(t, a), t.prototype.startRpc = function (t) {\n      return this.connection.openStream(\"Listen\", t);\n    }, t.prototype.onMessage = function (t) {\n      this.backoff.reset();\n      var e = this.serializer.fromWatchChange(t),\n          n = this.serializer.versionFromListenResponse(t);\n      return this.listener.onWatchChange(e, n);\n    }, t.prototype.watch = function (t) {\n      var e = {};\n      e.database = this.serializer.encodedDatabaseId, e.addTarget = this.serializer.toTarget(t);\n      var n = this.serializer.toListenRequestLabels(t);\n      n && (e.labels = n), this.sendRequest(e);\n    }, t.prototype.unwatch = function (t) {\n      var e = {};\n      e.database = this.serializer.encodedDatabaseId, e.removeTarget = t, this.sendRequest(e);\n    }, t;\n  }(Yy),\n      Jy = function (a) {\n    function t(t, e, n, r, i) {\n      var o = a.call(this, t, Nf.WriteStreamConnectionBackoff, Nf.WriteStreamIdle, e, n, i) || this;\n      return o.serializer = r, o.handshakeComplete_ = !1, o;\n    }\n\n    return hr(t, a), Object.defineProperty(t.prototype, \"handshakeComplete\", {\n      get: function () {\n        return this.handshakeComplete_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.start = function () {\n      this.handshakeComplete_ = !1, a.prototype.start.call(this);\n    }, t.prototype.tearDown = function () {\n      this.handshakeComplete_ && this.writeMutations([]);\n    }, t.prototype.startRpc = function (t) {\n      return this.connection.openStream(\"Write\", t);\n    }, t.prototype.onMessage = function (t) {\n      if (Ql(!!t.streamToken, \"Got a write response without a stream token\"), this.lastStreamToken = t.streamToken, this.handshakeComplete_) {\n        this.backoff.reset();\n        var e = this.serializer.fromWriteResults(t.writeResults, t.commitTime),\n            n = this.serializer.fromVersion(t.commitTime);\n        return this.listener.onMutationResult(n, e);\n      }\n\n      return Ql(!t.writeResults || 0 === t.writeResults.length, \"Got mutation results for handshake\"), this.handshakeComplete_ = !0, this.listener.onHandshakeComplete();\n    }, t.prototype.writeHandshake = function () {\n      Ql(this.isOpen(), \"Writing handshake requires an opened stream\"), Ql(!this.handshakeComplete_, \"Handshake already completed\");\n      var t = {};\n      t.database = this.serializer.encodedDatabaseId, this.sendRequest(t);\n    }, t.prototype.writeMutations = function (t) {\n      var e = this;\n      Ql(this.isOpen(), \"Writing mutations requires an opened stream\"), Ql(this.handshakeComplete_, \"Handshake must be complete before writing mutations\"), Ql(0 < this.lastStreamToken.length, \"Trying to write mutation without a token\");\n      var n = {\n        streamToken: this.lastStreamToken,\n        writes: t.map(function (t) {\n          return e.serializer.toMutation(t);\n        })\n      };\n      this.sendRequest(n);\n    }, t;\n  }(Yy),\n      $y = function () {\n    function t(t, e, n, r) {\n      this.queue = t, this.connection = e, this.credentials = n, this.serializer = r;\n    }\n\n    return t.prototype.newPersistentWriteStream = function (t) {\n      return new Jy(this.queue, this.connection, this.credentials, this.serializer, t);\n    }, t.prototype.newPersistentWatchStream = function (t) {\n      return new Xy(this.queue, this.connection, this.credentials, this.serializer, t);\n    }, t.prototype.commit = function (t) {\n      var e = this,\n          n = {\n        database: this.serializer.encodedDatabaseId,\n        writes: t.map(function (t) {\n          return e.serializer.toMutation(t);\n        })\n      };\n      return this.invokeRPC(\"Commit\", n).then(function (t) {\n        return e.serializer.fromWriteResults(t.writeResults, t.commitTime);\n      });\n    }, t.prototype.lookup = function (e) {\n      var i = this,\n          t = {\n        database: this.serializer.encodedDatabaseId,\n        documents: e.map(function (t) {\n          return i.serializer.toName(t);\n        })\n      };\n      return this.invokeStreamingRPC(\"BatchGetDocuments\", t).then(function (t) {\n        var n = sp();\n        t.forEach(function (t) {\n          var e = i.serializer.fromMaybeDocument(t);\n          n = n.insert(e.key, e);\n        });\n        var r = [];\n        return e.forEach(function (t) {\n          var e = n.get(t);\n          Ql(!!e, \"Missing entity in write response for \" + t), r.push(e);\n        }), r;\n      });\n    }, t.prototype.invokeRPC = function (e, n) {\n      var r = this;\n      return this.credentials.getToken().then(function (t) {\n        return r.connection.invokeRPC(e, n, t);\n      }).catch(function (t) {\n        throw t.code === zl.UNAUTHENTICATED && r.credentials.invalidateToken(), t;\n      });\n    }, t.prototype.invokeStreamingRPC = function (e, n) {\n      var r = this;\n      return this.credentials.getToken().then(function (t) {\n        return r.connection.invokeStreamingRPC(e, n, t);\n      }).catch(function (t) {\n        throw t.code === zl.UNAUTHENTICATED && r.credentials.invalidateToken(), t;\n      });\n    }, t;\n  }(),\n      Zy = function () {\n    function t(t) {\n      this.datastore = t, this.readVersions = fp(), this.mutations = [], this.committed = !1;\n    }\n\n    return t.prototype.recordVersion = function (t) {\n      var e;\n      if (t instanceof Kp) e = t.version;else {\n        if (!(t instanceof Qp)) throw Kl(\"Document in a transaction was a \" + t.constructor.name);\n        e = Zf.forDeletedDoc();\n      }\n      var n = this.readVersions.get(t.key);\n\n      if (null !== n) {\n        if (!e.isEqual(n)) throw new Yl(zl.ABORTED, \"Document version changed between two reads.\");\n      } else this.readVersions = this.readVersions.insert(t.key, e);\n    }, t.prototype.lookup = function (t) {\n      var e = this;\n      return this.committed ? Promise.reject(\"Transaction has already completed.\") : 0 < this.mutations.length ? Promise.reject(\"Transactions lookups are invalid after writes.\") : this.datastore.lookup(t).then(function (t) {\n        return t.forEach(function (t) {\n          t instanceof Qp || t instanceof Kp ? e.recordVersion(t) : Kl(\"Document in a transaction was a \" + t.constructor.name);\n        }), t;\n      });\n    }, t.prototype.write = function (t) {\n      if (this.committed) throw new Yl(zl.FAILED_PRECONDITION, \"Transaction has already completed.\");\n      this.mutations = this.mutations.concat(t);\n    }, t.prototype.precondition = function (t) {\n      var e = this.readVersions.get(t);\n      return e ? gy.updateTime(e) : gy.NONE;\n    }, t.prototype.preconditionForUpdate = function (t) {\n      var e = this.readVersions.get(t);\n      if (e && e.isEqual(Zf.forDeletedDoc())) throw new Yl(zl.FAILED_PRECONDITION, \"Can't update a document that doesn't exist.\");\n      return e ? gy.updateTime(e) : gy.exists(!0);\n    }, t.prototype.set = function (t, e) {\n      this.write(e.toMutations(t, this.precondition(t)));\n    }, t.prototype.update = function (t, e) {\n      this.write(e.toMutations(t, this.preconditionForUpdate(t)));\n    }, t.prototype.delete = function (t) {\n      this.write([new Ey(t, this.precondition(t))]), this.readVersions = this.readVersions.insert(t, Zf.forDeletedDoc());\n    }, t.prototype.commit = function () {\n      var t = this,\n          e = this.readVersions;\n      return this.mutations.forEach(function (t) {\n        e = e.remove(t.key);\n      }), e.isEmpty() ? this.datastore.commit(this.mutations).then(function () {\n        t.committed = !0;\n      }) : Promise.reject(Error(\"Every document read in a transaction must also be written.\"));\n    }, t;\n  }();\n\n  (Hy = Qy || (Qy = {}))[Hy.Unknown = 0] = \"Unknown\", Hy[Hy.Online = 1] = \"Online\", Hy[Hy.Offline = 2] = \"Offline\", (zy = Gy || (Gy = {}))[zy.RemoteStore = 0] = \"RemoteStore\", zy[zy.SharedClientState = 1] = \"SharedClientState\";\n\n  var tm,\n      em,\n      nm = function () {\n    function t(t, e) {\n      this.asyncQueue = t, this.onlineStateHandler = e, this.state = Qy.Unknown, this.watchStreamFailures = 0, this.onlineStateTimer = null, this.shouldWarnClientIsOffline = !0;\n    }\n\n    return t.prototype.handleWatchStreamStart = function () {\n      var t = this;\n      0 === this.watchStreamFailures && (this.setAndBroadcast(Qy.Unknown), Ql(null === this.onlineStateTimer, \"onlineStateTimer shouldn't be started yet\"), this.onlineStateTimer = this.asyncQueue.enqueueAfterDelay(Nf.OnlineStateTimeout, 1e4, function () {\n        return t.onlineStateTimer = null, Ql(t.state === Qy.Unknown, \"Timer should be canceled if we transitioned to a different state.\"), t.logClientOfflineWarningIfNecessary(\"Backend didn't respond within 10 seconds.\"), t.setAndBroadcast(Qy.Offline), Promise.resolve();\n      }));\n    }, t.prototype.handleWatchStreamFailure = function (t) {\n      this.state === Qy.Online ? (this.setAndBroadcast(Qy.Unknown), Ql(0 === this.watchStreamFailures, \"watchStreamFailures must be 0\"), Ql(null === this.onlineStateTimer, \"onlineStateTimer must be null\")) : (this.watchStreamFailures++, 1 <= this.watchStreamFailures && (this.clearOnlineStateTimer(), this.logClientOfflineWarningIfNecessary(\"Connection failed 1 times. Most recent error: \" + t.toString()), this.setAndBroadcast(Qy.Offline)));\n    }, t.prototype.set = function (t) {\n      this.clearOnlineStateTimer(), this.watchStreamFailures = 0, t === Qy.Online && (this.shouldWarnClientIsOffline = !1), this.setAndBroadcast(t);\n    }, t.prototype.setAndBroadcast = function (t) {\n      t !== this.state && (this.state = t, this.onlineStateHandler(t));\n    }, t.prototype.logClientOfflineWarningIfNecessary = function (t) {\n      var e = \"Could not reach Cloud Firestore backend. \" + t + \"\\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.\";\n      this.shouldWarnClientIsOffline ? (jl(e), this.shouldWarnClientIsOffline = !1) : Bl(\"OnlineStateTracker\", e);\n    }, t.prototype.clearOnlineStateTimer = function () {\n      null !== this.onlineStateTimer && (this.onlineStateTimer.cancel(), this.onlineStateTimer = null);\n    }, t;\n  }();\n\n  function rm(t) {\n    switch (t) {\n      case zl.OK:\n        return Kl(\"Treated status OK as error\");\n\n      case zl.CANCELLED:\n      case zl.UNKNOWN:\n      case zl.DEADLINE_EXCEEDED:\n      case zl.RESOURCE_EXHAUSTED:\n      case zl.INTERNAL:\n      case zl.UNAVAILABLE:\n      case zl.UNAUTHENTICATED:\n        return !1;\n\n      case zl.INVALID_ARGUMENT:\n      case zl.NOT_FOUND:\n      case zl.ALREADY_EXISTS:\n      case zl.PERMISSION_DENIED:\n      case zl.FAILED_PRECONDITION:\n      case zl.ABORTED:\n      case zl.OUT_OF_RANGE:\n      case zl.UNIMPLEMENTED:\n      case zl.DATA_LOSS:\n        return !0;\n\n      default:\n        return Kl(\"Unknown status code: \" + t);\n    }\n  }\n\n  function im(t) {\n    if (void 0 === t) return jl(\"GRPC error has no .code\"), zl.UNKNOWN;\n\n    switch (t) {\n      case tm.OK:\n        return zl.OK;\n\n      case tm.CANCELLED:\n        return zl.CANCELLED;\n\n      case tm.UNKNOWN:\n        return zl.UNKNOWN;\n\n      case tm.DEADLINE_EXCEEDED:\n        return zl.DEADLINE_EXCEEDED;\n\n      case tm.RESOURCE_EXHAUSTED:\n        return zl.RESOURCE_EXHAUSTED;\n\n      case tm.INTERNAL:\n        return zl.INTERNAL;\n\n      case tm.UNAVAILABLE:\n        return zl.UNAVAILABLE;\n\n      case tm.UNAUTHENTICATED:\n        return zl.UNAUTHENTICATED;\n\n      case tm.INVALID_ARGUMENT:\n        return zl.INVALID_ARGUMENT;\n\n      case tm.NOT_FOUND:\n        return zl.NOT_FOUND;\n\n      case tm.ALREADY_EXISTS:\n        return zl.ALREADY_EXISTS;\n\n      case tm.PERMISSION_DENIED:\n        return zl.PERMISSION_DENIED;\n\n      case tm.FAILED_PRECONDITION:\n        return zl.FAILED_PRECONDITION;\n\n      case tm.ABORTED:\n        return zl.ABORTED;\n\n      case tm.OUT_OF_RANGE:\n        return zl.OUT_OF_RANGE;\n\n      case tm.UNIMPLEMENTED:\n        return zl.UNIMPLEMENTED;\n\n      case tm.DATA_LOSS:\n        return zl.DATA_LOSS;\n\n      default:\n        return Kl(\"Unknown status code: \" + t);\n    }\n  }\n\n  (em = tm || (tm = {}))[em.OK = 0] = \"OK\", em[em.CANCELLED = 1] = \"CANCELLED\", em[em.UNKNOWN = 2] = \"UNKNOWN\", em[em.INVALID_ARGUMENT = 3] = \"INVALID_ARGUMENT\", em[em.DEADLINE_EXCEEDED = 4] = \"DEADLINE_EXCEEDED\", em[em.NOT_FOUND = 5] = \"NOT_FOUND\", em[em.ALREADY_EXISTS = 6] = \"ALREADY_EXISTS\", em[em.PERMISSION_DENIED = 7] = \"PERMISSION_DENIED\", em[em.UNAUTHENTICATED = 16] = \"UNAUTHENTICATED\", em[em.RESOURCE_EXHAUSTED = 8] = \"RESOURCE_EXHAUSTED\", em[em.FAILED_PRECONDITION = 9] = \"FAILED_PRECONDITION\", em[em.ABORTED = 10] = \"ABORTED\", em[em.OUT_OF_RANGE = 11] = \"OUT_OF_RANGE\", em[em.UNIMPLEMENTED = 12] = \"UNIMPLEMENTED\", em[em.INTERNAL = 13] = \"INTERNAL\", em[em.UNAVAILABLE = 14] = \"UNAVAILABLE\", em[em.DATA_LOSS = 15] = \"DATA_LOSS\";\n\n  var om,\n      am,\n      sm,\n      um,\n      cm = function () {\n    function o(n) {\n      this.comparator = n ? function (t, e) {\n        return n(t, e) || Vf.comparator(t.key, e.key);\n      } : function (t, e) {\n        return Vf.comparator(t.key, e.key);\n      }, this.keyedMap = hp(), this.sortedSet = new tp(this.comparator);\n    }\n\n    return o.emptySet = function (t) {\n      return new o(t.comparator);\n    }, o.prototype.has = function (t) {\n      return null != this.keyedMap.get(t);\n    }, o.prototype.get = function (t) {\n      return this.keyedMap.get(t);\n    }, o.prototype.first = function () {\n      return this.sortedSet.minKey();\n    }, o.prototype.last = function () {\n      return this.sortedSet.maxKey();\n    }, o.prototype.isEmpty = function () {\n      return this.sortedSet.isEmpty();\n    }, o.prototype.indexOf = function (t) {\n      var e = this.keyedMap.get(t);\n      return e ? this.sortedSet.indexOf(e) : -1;\n    }, Object.defineProperty(o.prototype, \"size\", {\n      get: function () {\n        return this.sortedSet.size;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), o.prototype.forEach = function (n) {\n      this.sortedSet.inorderTraversal(function (t, e) {\n        return n(t), !1;\n      });\n    }, o.prototype.add = function (t) {\n      var e = this.delete(t.key);\n      return e.copy(e.keyedMap.insert(t.key, t), e.sortedSet.insert(t, null));\n    }, o.prototype.delete = function (t) {\n      var e = this.get(t);\n      return e ? this.copy(this.keyedMap.remove(t), this.sortedSet.remove(e)) : this;\n    }, o.prototype.isEqual = function (t) {\n      if (!(t instanceof o)) return !1;\n      if (this.size !== t.size) return !1;\n\n      for (var e = this.sortedSet.getIterator(), n = t.sortedSet.getIterator(); e.hasNext();) {\n        var r = e.getNext().key,\n            i = n.getNext().key;\n        if (!r.isEqual(i)) return !1;\n      }\n\n      return !0;\n    }, o.prototype.toString = function () {\n      var e = [];\n      return this.forEach(function (t) {\n        e.push(t.toString());\n      }), 0 === e.length ? \"DocumentSet ()\" : \"DocumentSet (\\n  \" + e.join(\"  \\n\") + \"\\n)\";\n    }, o.prototype.copy = function (t, e) {\n      var n = new o();\n      return n.comparator = this.comparator, n.keyedMap = t, n.sortedSet = e, n;\n    }, o;\n  }();\n\n  (am = om || (om = {}))[am.Added = 0] = \"Added\", am[am.Removed = 1] = \"Removed\", am[am.Modified = 2] = \"Modified\", am[am.Metadata = 3] = \"Metadata\", (um = sm || (sm = {}))[um.Local = 0] = \"Local\", um[um.Synced = 1] = \"Synced\";\n\n  var hm,\n      lm,\n      fm = function () {\n    function t() {\n      this.changeMap = new tp(Vf.comparator);\n    }\n\n    return t.prototype.track = function (t) {\n      var e = t.doc.key,\n          n = this.changeMap.get(e);\n      n ? t.type !== om.Added && n.type === om.Metadata ? this.changeMap = this.changeMap.insert(e, t) : t.type === om.Metadata && n.type !== om.Removed ? this.changeMap = this.changeMap.insert(e, {\n        type: n.type,\n        doc: t.doc\n      }) : t.type === om.Modified && n.type === om.Modified ? this.changeMap = this.changeMap.insert(e, {\n        type: om.Modified,\n        doc: t.doc\n      }) : t.type === om.Modified && n.type === om.Added ? this.changeMap = this.changeMap.insert(e, {\n        type: om.Added,\n        doc: t.doc\n      }) : t.type === om.Removed && n.type === om.Added ? this.changeMap = this.changeMap.remove(e) : t.type === om.Removed && n.type === om.Modified ? this.changeMap = this.changeMap.insert(e, {\n        type: om.Removed,\n        doc: n.doc\n      }) : t.type === om.Added && n.type === om.Removed ? this.changeMap = this.changeMap.insert(e, {\n        type: om.Modified,\n        doc: t.doc\n      }) : Kl(\"unsupported combination of changes: \" + JSON.stringify(t) + \" after \" + JSON.stringify(n)) : this.changeMap = this.changeMap.insert(e, t);\n    }, t.prototype.getChanges = function () {\n      var n = [];\n      return this.changeMap.inorderTraversal(function (t, e) {\n        n.push(e);\n      }), n;\n    }, t;\n  }(),\n      pm = function () {\n    function o(t, e, n, r, i, o, a, s) {\n      this.query = t, this.docs = e, this.oldDocs = n, this.docChanges = r, this.mutatedKeys = i, this.fromCache = o, this.syncStateChanged = a, this.excludesMetadataChanges = s;\n    }\n\n    return o.fromInitialDocuments = function (t, e, n, r) {\n      var i = [];\n      return e.forEach(function (t) {\n        i.push({\n          type: om.Added,\n          doc: t\n        });\n      }), new o(t, e, cm.emptySet(e), i, n, r, !0, !1);\n    }, Object.defineProperty(o.prototype, \"hasPendingWrites\", {\n      get: function () {\n        return !this.mutatedKeys.isEmpty();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), o.prototype.isEqual = function (t) {\n      if (!(this.fromCache === t.fromCache && this.syncStateChanged === t.syncStateChanged && this.mutatedKeys.isEqual(t.mutatedKeys) && this.query.isEqual(t.query) && this.docs.isEqual(t.docs) && this.oldDocs.isEqual(t.oldDocs))) return !1;\n      var e = this.docChanges,\n          n = t.docChanges;\n      if (e.length !== n.length) return !1;\n\n      for (var r = 0; r < e.length; r++) if (e[r].type !== n[r].type || !e[r].doc.isEqual(n[r].doc)) return !1;\n\n      return !0;\n    }, o;\n  }(),\n      dm = function () {\n    function i(t, e, n, r, i) {\n      this.snapshotVersion = t, this.targetChanges = e, this.targetMismatches = n, this.documentUpdates = r, this.resolvedLimboDocuments = i;\n    }\n\n    return i.createSynthesizedRemoteEventForCurrentChange = function (t, e) {\n      var n,\n          r = ((n = {})[t] = ym.createSynthesizedTargetChangeForCurrentChange(t, e), n);\n      return new i(Zf.MIN, r, mp(), sp(), dp());\n    }, i;\n  }(),\n      ym = function () {\n    function n(t, e, n, r, i) {\n      this.resumeToken = t, this.current = e, this.addedDocuments = n, this.modifiedDocuments = r, this.removedDocuments = i;\n    }\n\n    return n.createSynthesizedTargetChangeForCurrentChange = function (t, e) {\n      return new n(Gl(), e, dp(), dp(), dp());\n    }, n;\n  }(),\n      mm = function (t, e, n, r) {\n    this.updatedTargetIds = t, this.removedTargetIds = e, this.key = n, this.newDoc = r;\n  },\n      gm = function (t, e) {\n    this.targetId = t, this.existenceFilter = e;\n  };\n\n  (lm = hm || (hm = {}))[lm.NoChange = 0] = \"NoChange\", lm[lm.Added = 1] = \"Added\", lm[lm.Removed = 2] = \"Removed\", lm[lm.Current = 3] = \"Current\", lm[lm.Reset = 4] = \"Reset\";\n\n  var vm = function (t, e, n, r) {\n    void 0 === n && (n = Gl()), void 0 === r && (r = null), this.state = t, this.targetIds = e, this.resumeToken = n, this.cause = r;\n  },\n      bm = function () {\n    function t() {\n      this.pendingResponses = 0, this.documentChanges = Em(), this._resumeToken = Gl(), this._current = !1, this._hasPendingChanges = !0;\n    }\n\n    return Object.defineProperty(t.prototype, \"current\", {\n      get: function () {\n        return this._current;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"resumeToken\", {\n      get: function () {\n        return this._resumeToken;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"isPending\", {\n      get: function () {\n        return 0 !== this.pendingResponses;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"hasPendingChanges\", {\n      get: function () {\n        return this._hasPendingChanges;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.updateResumeToken = function (t) {\n      0 < t.length && (this._hasPendingChanges = !0, this._resumeToken = t);\n    }, t.prototype.toTargetChange = function () {\n      var n = dp(),\n          r = dp(),\n          i = dp();\n      return this.documentChanges.forEach(function (t, e) {\n        switch (e) {\n          case om.Added:\n            n = n.add(t);\n            break;\n\n          case om.Modified:\n            r = r.add(t);\n            break;\n\n          case om.Removed:\n            i = i.add(t);\n            break;\n\n          default:\n            Kl(\"Encountered invalid change type: \" + e);\n        }\n      }), new ym(this._resumeToken, this._current, n, r, i);\n    }, t.prototype.clearPendingChanges = function () {\n      this._hasPendingChanges = !1, this.documentChanges = Em();\n    }, t.prototype.addDocumentChange = function (t, e) {\n      this._hasPendingChanges = !0, this.documentChanges = this.documentChanges.insert(t, e);\n    }, t.prototype.removeDocumentChange = function (t) {\n      this._hasPendingChanges = !0, this.documentChanges = this.documentChanges.remove(t);\n    }, t.prototype.recordPendingTargetRequest = function () {\n      this.pendingResponses += 1;\n    }, t.prototype.recordTargetResponse = function () {\n      this.pendingResponses -= 1;\n    }, t.prototype.markCurrent = function () {\n      this._hasPendingChanges = !0, this._current = !0;\n    }, t;\n  }(),\n      wm = function () {\n    function t(t) {\n      this.metadataProvider = t, this.targetStates = {}, this.pendingDocumentUpdates = sp(), this.pendingDocumentTargetMapping = _m(), this.pendingTargetResets = new ip(Ef);\n    }\n\n    return t.prototype.handleDocumentChange = function (t) {\n      for (var e = 0, n = t.updatedTargetIds; e < n.length; e++) {\n        var r = n[e];\n        t.newDoc instanceof Kp ? this.addDocumentToTarget(r, t.newDoc) : t.newDoc instanceof Qp && this.removeDocumentFromTarget(r, t.key, t.newDoc);\n      }\n\n      for (var i = 0, o = t.removedTargetIds; i < o.length; i++) {\n        r = o[i];\n        this.removeDocumentFromTarget(r, t.key, t.newDoc);\n      }\n    }, t.prototype.handleTargetChange = function (n) {\n      var r = this;\n      this.forEachTarget(n, function (t) {\n        var e = r.ensureTargetState(t);\n\n        switch (n.state) {\n          case hm.NoChange:\n            r.isActiveTarget(t) && e.updateResumeToken(n.resumeToken);\n            break;\n\n          case hm.Added:\n            e.recordTargetResponse(), e.isPending || e.clearPendingChanges(), e.updateResumeToken(n.resumeToken);\n            break;\n\n          case hm.Removed:\n            e.recordTargetResponse(), e.isPending || r.removeTarget(t), Ql(!n.cause, \"WatchChangeAggregator does not handle errored targets\");\n            break;\n\n          case hm.Current:\n            r.isActiveTarget(t) && (e.markCurrent(), e.updateResumeToken(n.resumeToken));\n            break;\n\n          case hm.Reset:\n            r.isActiveTarget(t) && (r.resetTarget(t), e.updateResumeToken(n.resumeToken));\n            break;\n\n          default:\n            Kl(\"Unknown target watch change state: \" + n.state);\n        }\n      });\n    }, t.prototype.forEachTarget = function (t, e) {\n      0 < t.targetIds.length ? t.targetIds.forEach(e) : Zl(this.targetStates, e);\n    }, t.prototype.handleExistenceFilter = function (t) {\n      var e = t.targetId,\n          n = t.existenceFilter.count,\n          r = this.queryDataForActiveTarget(e);\n\n      if (r) {\n        var i = r.query;\n        if (i.isDocumentQuery()) {\n          if (0 === n) {\n            var o = new Vf(i.path);\n            this.removeDocumentFromTarget(e, o, new Qp(o, Zf.forDeletedDoc()));\n          } else Ql(1 === n, \"Single document existence filter with count: \" + n);\n        } else this.getCurrentDocumentCountForTarget(e) !== n && (this.resetTarget(e), this.pendingTargetResets = this.pendingTargetResets.add(e));\n      }\n    }, t.prototype.createRemoteEvent = function (i) {\n      var o = this,\n          a = {};\n      Zl(this.targetStates, function (t, e) {\n        var n = o.queryDataForActiveTarget(t);\n\n        if (n) {\n          if (e.current && n.query.isDocumentQuery()) {\n            var r = new Vf(n.query.path);\n            null !== o.pendingDocumentUpdates.get(r) || o.targetContainsDocument(t, r) || o.removeDocumentFromTarget(t, r, new Qp(r, i));\n          }\n\n          e.hasPendingChanges && (a[t] = e.toTargetChange(), e.clearPendingChanges());\n        }\n      });\n      var r = dp();\n      this.pendingDocumentTargetMapping.forEach(function (t, e) {\n        var n = !0;\n        e.forEachWhile(function (t) {\n          var e = o.queryDataForActiveTarget(t);\n          return !e || e.purpose === Td.LimboResolution || (n = !1);\n        }), n && (r = r.add(t));\n      });\n      var t = new dm(i, a, this.pendingTargetResets, this.pendingDocumentUpdates, r);\n      return this.pendingDocumentUpdates = sp(), this.pendingDocumentTargetMapping = _m(), this.pendingTargetResets = new ip(Ef), t;\n    }, t.prototype.addDocumentToTarget = function (t, e) {\n      if (this.isActiveTarget(t)) {\n        var n = this.targetContainsDocument(t, e.key) ? om.Modified : om.Added;\n        this.ensureTargetState(t).addDocumentChange(e.key, n), this.pendingDocumentUpdates = this.pendingDocumentUpdates.insert(e.key, e), this.pendingDocumentTargetMapping = this.pendingDocumentTargetMapping.insert(e.key, this.ensureDocumentTargetMapping(e.key).add(t));\n      }\n    }, t.prototype.removeDocumentFromTarget = function (t, e, n) {\n      if (this.isActiveTarget(t)) {\n        var r = this.ensureTargetState(t);\n        this.targetContainsDocument(t, e) ? r.addDocumentChange(e, om.Removed) : r.removeDocumentChange(e), this.pendingDocumentTargetMapping = this.pendingDocumentTargetMapping.insert(e, this.ensureDocumentTargetMapping(e).delete(t)), n && (this.pendingDocumentUpdates = this.pendingDocumentUpdates.insert(e, n));\n      }\n    }, t.prototype.removeTarget = function (t) {\n      delete this.targetStates[t];\n    }, t.prototype.getCurrentDocumentCountForTarget = function (t) {\n      var e = this.ensureTargetState(t).toTargetChange();\n      return this.metadataProvider.getRemoteKeysForTarget(t).size + e.addedDocuments.size - e.removedDocuments.size;\n    }, t.prototype.recordPendingTargetRequest = function (t) {\n      this.ensureTargetState(t).recordPendingTargetRequest();\n    }, t.prototype.ensureTargetState = function (t) {\n      return this.targetStates[t] || (this.targetStates[t] = new bm()), this.targetStates[t];\n    }, t.prototype.ensureDocumentTargetMapping = function (t) {\n      var e = this.pendingDocumentTargetMapping.get(t);\n      return e || (e = new ip(Ef), this.pendingDocumentTargetMapping = this.pendingDocumentTargetMapping.insert(t, e)), e;\n    }, t.prototype.isActiveTarget = function (t) {\n      return null !== this.queryDataForActiveTarget(t);\n    }, t.prototype.queryDataForActiveTarget = function (t) {\n      var e = this.targetStates[t];\n      return e && e.isPending ? null : this.metadataProvider.getQueryDataForTarget(t);\n    }, t.prototype.resetTarget = function (e) {\n      var n = this;\n      Ql(!this.targetStates[e].isPending, \"Should only reset active targets\"), this.targetStates[e] = new bm(), this.metadataProvider.getRemoteKeysForTarget(e).forEach(function (t) {\n        n.removeDocumentFromTarget(e, t, null);\n      });\n    }, t.prototype.targetContainsDocument = function (t, e) {\n      return this.metadataProvider.getRemoteKeysForTarget(t).has(e);\n    }, t;\n  }();\n\n  function _m() {\n    return new tp(Vf.comparator);\n  }\n\n  function Em() {\n    return new tp(Vf.comparator);\n  }\n\n  var Tm = \"RemoteStore\",\n      Sm = function () {\n    function t(t, e, n, r, i) {\n      var o = this;\n      this.localStore = t, this.datastore = e, this.writePipeline = [], this.listenTargets = {}, this.watchChangeAggregator = null, this.networkEnabled = !1, this.isPrimary = !1, this.connectivityMonitor = i, this.connectivityMonitor.addCallback(function (t) {\n        n.enqueueAndForget(function () {\n          return fr(o, void 0, void 0, function () {\n            return pr(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return this.canUseNetwork() ? (Bl(Tm, \"Restarting streams for network reachability change.\"), [4, this.restartNetwork()]) : [3, 2];\n\n                case 1:\n                  t.sent(), t.label = 2;\n\n                case 2:\n                  return [2];\n              }\n            });\n          });\n        });\n      }), this.onlineStateTracker = new nm(n, r), this.watchStream = this.datastore.newPersistentWatchStream({\n        onOpen: this.onWatchStreamOpen.bind(this),\n        onClose: this.onWatchStreamClose.bind(this),\n        onWatchChange: this.onWatchStreamChange.bind(this)\n      }), this.writeStream = this.datastore.newPersistentWriteStream({\n        onOpen: this.onWriteStreamOpen.bind(this),\n        onClose: this.onWriteStreamClose.bind(this),\n        onHandshakeComplete: this.onWriteHandshakeComplete.bind(this),\n        onMutationResult: this.onMutationResult.bind(this)\n      });\n    }\n\n    return t.prototype.start = function () {\n      return this.enableNetwork();\n    }, t.prototype.enableNetwork = function () {\n      return fr(this, void 0, void 0, function () {\n        var e;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.networkEnabled = !0, this.canUseNetwork() ? (e = this.writeStream, [4, this.localStore.getLastStreamToken()]) : [3, 3];\n\n            case 1:\n              return e.lastStreamToken = t.sent(), this.shouldStartWatchStream() ? this.startWatchStream() : this.onlineStateTracker.set(Qy.Unknown), [4, this.fillWritePipeline()];\n\n            case 2:\n              t.sent(), t.label = 3;\n\n            case 3:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.disableNetwork = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.networkEnabled = !1, [4, this.disableNetworkInternal()];\n\n            case 1:\n              return t.sent(), this.onlineStateTracker.set(Qy.Offline), [2];\n          }\n        });\n      });\n    }, t.prototype.disableNetworkInternal = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.writeStream.stop()];\n\n            case 1:\n              return t.sent(), [4, this.watchStream.stop()];\n\n            case 2:\n              return t.sent(), 0 < this.writePipeline.length && (Bl(Tm, \"Stopping write stream with \" + this.writePipeline.length + \" pending writes\"), this.writePipeline = []), this.cleanUpWatchStreamState(), [2];\n          }\n        });\n      });\n    }, t.prototype.shutdown = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return Bl(Tm, \"RemoteStore shutting down.\"), this.networkEnabled = !1, [4, this.disableNetworkInternal()];\n\n            case 1:\n              return t.sent(), this.connectivityMonitor.shutdown(), this.onlineStateTracker.set(Qy.Unknown), [2];\n          }\n        });\n      });\n    }, t.prototype.listen = function (t) {\n      Ql(!Jl(this.listenTargets, t.targetId), \"listen called with duplicate targetId!\"), this.listenTargets[t.targetId] = t, this.shouldStartWatchStream() ? this.startWatchStream() : this.watchStream.isOpen() && this.sendWatchRequest(t);\n    }, t.prototype.unlisten = function (t) {\n      Ql(Jl(this.listenTargets, t), \"unlisten called without assigned target ID!\"), delete this.listenTargets[t], this.watchStream.isOpen() && this.sendUnwatchRequest(t), ef(this.listenTargets) && (this.watchStream.isOpen() ? this.watchStream.markIdle() : this.canUseNetwork() && this.onlineStateTracker.set(Qy.Unknown));\n    }, t.prototype.getQueryDataForTarget = function (t) {\n      return this.listenTargets[t] || null;\n    }, t.prototype.getRemoteKeysForTarget = function (t) {\n      return this.syncEngine.getRemoteKeysForTarget(t);\n    }, t.prototype.sendWatchRequest = function (t) {\n      this.watchChangeAggregator.recordPendingTargetRequest(t.targetId), this.watchStream.watch(t);\n    }, t.prototype.sendUnwatchRequest = function (t) {\n      this.watchChangeAggregator.recordPendingTargetRequest(t), this.watchStream.unwatch(t);\n    }, t.prototype.startWatchStream = function () {\n      Ql(this.shouldStartWatchStream(), \"startWatchStream() called when shouldStartWatchStream() is false.\"), this.watchChangeAggregator = new wm(this), this.watchStream.start(), this.onlineStateTracker.handleWatchStreamStart();\n    }, t.prototype.shouldStartWatchStream = function () {\n      return this.canUseNetwork() && !this.watchStream.isStarted() && !ef(this.listenTargets);\n    }, t.prototype.canUseNetwork = function () {\n      return this.isPrimary && this.networkEnabled;\n    }, t.prototype.cleanUpWatchStreamState = function () {\n      this.watchChangeAggregator = null;\n    }, t.prototype.onWatchStreamOpen = function () {\n      return fr(this, void 0, void 0, function () {\n        var n = this;\n        return pr(this, function (t) {\n          return Zl(this.listenTargets, function (t, e) {\n            n.sendWatchRequest(e);\n          }), [2];\n        });\n      });\n    }, t.prototype.onWatchStreamClose = function (e) {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          return void 0 === e && Ql(!this.shouldStartWatchStream(), \"Watch stream was stopped gracefully while still needed.\"), this.cleanUpWatchStreamState(), this.shouldStartWatchStream() ? (this.onlineStateTracker.handleWatchStreamFailure(e), this.startWatchStream()) : this.onlineStateTracker.set(Qy.Unknown), [2];\n        });\n      });\n    }, t.prototype.onWatchStreamChange = function (n, r) {\n      return fr(this, void 0, void 0, function () {\n        var e;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.onlineStateTracker.set(Qy.Online), n instanceof vm && n.state === hm.Removed && n.cause ? [2, this.handleTargetError(n)] : (n instanceof mm ? this.watchChangeAggregator.handleDocumentChange(n) : n instanceof gm ? this.watchChangeAggregator.handleExistenceFilter(n) : (Ql(n instanceof vm, \"Expected watchChange to be an instance of WatchTargetChange\"), this.watchChangeAggregator.handleTargetChange(n)), r.isEqual(Zf.MIN) ? [3, 3] : [4, this.localStore.getLastRemoteSnapshotVersion()]);\n\n            case 1:\n              return e = t.sent(), 0 <= r.compareTo(e) ? [4, this.raiseWatchSnapshot(r)] : [3, 3];\n\n            case 2:\n              t.sent(), t.label = 3;\n\n            case 3:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.raiseWatchSnapshot = function (r) {\n      var i = this;\n      Ql(!r.isEqual(Zf.MIN), \"Can't raise event for unknown SnapshotVersion\");\n      var t = this.watchChangeAggregator.createRemoteEvent(r);\n      return Zl(t.targetChanges, function (t, e) {\n        if (0 < e.resumeToken.length) {\n          var n = i.listenTargets[t];\n          n && (i.listenTargets[t] = n.copy({\n            resumeToken: e.resumeToken,\n            snapshotVersion: r\n          }));\n        }\n      }), t.targetMismatches.forEach(function (t) {\n        var e = i.listenTargets[t];\n\n        if (e) {\n          i.listenTargets[t] = e.copy({\n            resumeToken: Gl()\n          }), i.sendUnwatchRequest(t);\n          var n = new Ad(e.query, t, Td.ExistenceFilterMismatch, e.sequenceNumber);\n          i.sendWatchRequest(n);\n        }\n      }), this.syncEngine.applyRemoteEvent(t);\n    }, t.prototype.handleTargetError = function (t) {\n      var n = this;\n      Ql(!!t.cause, \"Handling target error without a cause\");\n      var r = t.cause,\n          i = Promise.resolve();\n      return t.targetIds.forEach(function (e) {\n        i = i.then(function () {\n          return fr(n, void 0, void 0, function () {\n            return pr(this, function (t) {\n              return Jl(this.listenTargets, e) ? (delete this.listenTargets[e], this.watchChangeAggregator.removeTarget(e), [2, this.syncEngine.rejectListen(e, r)]) : [2];\n            });\n          });\n        });\n      }), i;\n    }, t.prototype.fillWritePipeline = function () {\n      return fr(this, void 0, void 0, function () {\n        var e, n;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.canAddToWritePipeline() ? (e = 0 < this.writePipeline.length ? this.writePipeline[this.writePipeline.length - 1].batchId : -1, [4, this.localStore.nextMutationBatch(e)]) : [3, 4];\n\n            case 1:\n              return null !== (n = t.sent()) ? [3, 2] : (0 === this.writePipeline.length && this.writeStream.markIdle(), [3, 4]);\n\n            case 2:\n              return this.addToWritePipeline(n), [4, this.fillWritePipeline()];\n\n            case 3:\n              t.sent(), t.label = 4;\n\n            case 4:\n              return this.shouldStartWriteStream() && this.startWriteStream(), [2];\n          }\n        });\n      });\n    }, t.prototype.canAddToWritePipeline = function () {\n      return this.canUseNetwork() && this.writePipeline.length < 10;\n    }, t.prototype.outstandingWrites = function () {\n      return this.writePipeline.length;\n    }, t.prototype.addToWritePipeline = function (t) {\n      Ql(this.canAddToWritePipeline(), \"addToWritePipeline called when pipeline is full\"), this.writePipeline.push(t), this.writeStream.isOpen() && this.writeStream.handshakeComplete && this.writeStream.writeMutations(t.mutations);\n    }, t.prototype.shouldStartWriteStream = function () {\n      return this.canUseNetwork() && !this.writeStream.isStarted() && 0 < this.writePipeline.length;\n    }, t.prototype.startWriteStream = function () {\n      Ql(this.shouldStartWriteStream(), \"startWriteStream() called when shouldStartWriteStream() is false.\"), this.writeStream.start();\n    }, t.prototype.onWriteStreamOpen = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          return this.writeStream.writeHandshake(), [2];\n        });\n      });\n    }, t.prototype.onWriteHandshakeComplete = function () {\n      var r = this;\n      return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function () {\n        for (var t = 0, e = r.writePipeline; t < e.length; t++) {\n          var n = e[t];\n          r.writeStream.writeMutations(n.mutations);\n        }\n      }).catch(Bd);\n    }, t.prototype.onMutationResult = function (t, e) {\n      var n = this;\n      Ql(0 < this.writePipeline.length, \"Got result for empty write pipeline\");\n      var r = this.writePipeline.shift(),\n          i = vp.from(r, t, e, this.writeStream.lastStreamToken);\n      return this.syncEngine.applySuccessfulWrite(i).then(function () {\n        return n.fillWritePipeline();\n      });\n    }, t.prototype.onWriteStreamClose = function (n) {\n      return fr(this, void 0, void 0, function () {\n        var e = this;\n        return pr(this, function (t) {\n          return void 0 === n && Ql(!this.shouldStartWriteStream(), \"Write stream was stopped gracefully while still needed.\"), n && 0 < this.writePipeline.length ? (void 0, [2, (this.writeStream.handshakeComplete ? this.handleWriteError(n) : this.handleHandshakeError(n)).then(function () {\n            e.shouldStartWriteStream() && e.startWriteStream();\n          })]) : [2];\n        });\n      });\n    }, t.prototype.handleHandshakeError = function (e) {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          return rm(e.code) ? (Bl(Tm, \"RemoteStore error before completed handshake; resetting stream token: \", this.writeStream.lastStreamToken), this.writeStream.lastStreamToken = Gl(), [2, this.localStore.setLastStreamToken(Gl()).catch(Bd)]) : [2];\n        });\n      });\n    }, t.prototype.handleWriteError = function (i) {\n      return fr(this, void 0, void 0, function () {\n        var n,\n            r = this;\n        return pr(this, function (t) {\n          return rm(e = i.code) && e !== zl.ABORTED ? (n = this.writePipeline.shift(), this.writeStream.inhibitBackoff(), [2, this.syncEngine.rejectFailedWrite(n.batchId, i).then(function () {\n            return r.fillWritePipeline();\n          })]) : [2];\n          var e;\n        });\n      });\n    }, t.prototype.createTransaction = function () {\n      return new Zy(this.datastore);\n    }, t.prototype.restartNetwork = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.networkEnabled = !1, [4, this.disableNetworkInternal()];\n\n            case 1:\n              return t.sent(), this.onlineStateTracker.set(Qy.Unknown), [4, this.enableNetwork()];\n\n            case 2:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.handleCredentialChange = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.canUseNetwork() ? (Bl(Tm, \"RemoteStore restarting streams for new credential\"), [4, this.restartNetwork()]) : [3, 2];\n\n            case 1:\n              t.sent(), t.label = 2;\n\n            case 2:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.applyPrimaryState = function (e) {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return (this.isPrimary = e) && this.networkEnabled ? [4, this.enableNetwork()] : [3, 2];\n\n            case 1:\n              return t.sent(), [3, 4];\n\n            case 2:\n              return e ? [3, 4] : [4, this.disableNetworkInternal()];\n\n            case 3:\n              t.sent(), this.onlineStateTracker.set(Qy.Unknown), t.label = 4;\n\n            case 4:\n              return [2];\n          }\n        });\n      });\n    }, t;\n  }(),\n      Im = function () {\n    function t(t, e) {\n      if (rf(\"GeoPoint\", arguments, 2), sf(\"GeoPoint\", \"number\", 1, t), sf(\"GeoPoint\", \"number\", 2, e), !isFinite(t) || t < -90 || 90 < t) throw new Yl(zl.INVALID_ARGUMENT, \"Latitude must be a number between -90 and 90, but was: \" + t);\n      if (!isFinite(e) || e < -180 || 180 < e) throw new Yl(zl.INVALID_ARGUMENT, \"Longitude must be a number between -180 and 180, but was: \" + e);\n      this._lat = t, this._long = e;\n    }\n\n    return Object.defineProperty(t.prototype, \"latitude\", {\n      get: function () {\n        return this._lat;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"longitude\", {\n      get: function () {\n        return this._long;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.isEqual = function (t) {\n      return this._lat === t._lat && this._long === t._long;\n    }, t.prototype._compareTo = function (t) {\n      return Ef(this._lat, t._lat) || Ef(this._long, t._long);\n    }, t;\n  }(),\n      Cm = function () {\n    function n(t, e, n, r, i, o, a) {\n      void 0 === e && (e = null), void 0 === n && (n = []), void 0 === r && (r = []), void 0 === i && (i = null), void 0 === o && (o = null), void 0 === a && (a = null), this.path = t, this.collectionGroup = e, this.explicitOrderBy = n, this.filters = r, this.limit = i, this.startAt = o, this.endAt = a, this.memoizedCanonicalId = null, this.memoizedOrderBy = null, this.startAt && this.assertValidBound(this.startAt), this.endAt && this.assertValidBound(this.endAt);\n    }\n\n    return n.atPath = function (t) {\n      return new n(t);\n    }, Object.defineProperty(n.prototype, \"orderBy\", {\n      get: function () {\n        if (null === this.memoizedOrderBy) {\n          var t = this.getInequalityFilterField(),\n              e = this.getFirstOrderByField();\n          if (null !== t && null === e) t.isKeyField() ? this.memoizedOrderBy = [Fm] : this.memoizedOrderBy = [new Lm(t), Fm];else {\n            Ql(null === t || null !== e && t.isEqual(e), \"First orderBy should match inequality field.\");\n\n            for (var n = !(this.memoizedOrderBy = []), r = 0, i = this.explicitOrderBy; r < i.length; r++) {\n              var o = i[r];\n              this.memoizedOrderBy.push(o), o.field.isKeyField() && (n = !0);\n            }\n\n            if (!n) {\n              var a = 0 < this.explicitOrderBy.length ? this.explicitOrderBy[this.explicitOrderBy.length - 1].dir : Mm.ASCENDING;\n              this.memoizedOrderBy.push(a === Mm.ASCENDING ? Fm : Um);\n            }\n          }\n        }\n\n        return this.memoizedOrderBy;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), n.prototype.addFilter = function (t) {\n      Ql(null == this.getInequalityFilterField() || !(t instanceof km) || !t.isInequality() || t.field.isEqual(this.getInequalityFilterField()), \"Query must only have one inequality field.\"), Ql(!this.isDocumentQuery(), \"No filtering allowed for document query\");\n      var e = this.filters.concat([t]);\n      return new n(this.path, this.collectionGroup, this.explicitOrderBy.slice(), e, this.limit, this.startAt, this.endAt);\n    }, n.prototype.addOrderBy = function (t) {\n      Ql(!this.startAt && !this.endAt, \"Bounds must be set after orderBy\");\n      var e = this.explicitOrderBy.concat([t]);\n      return new n(this.path, this.collectionGroup, e, this.filters.slice(), this.limit, this.startAt, this.endAt);\n    }, n.prototype.withLimit = function (t) {\n      return new n(this.path, this.collectionGroup, this.explicitOrderBy.slice(), this.filters.slice(), t, this.startAt, this.endAt);\n    }, n.prototype.withStartAt = function (t) {\n      return new n(this.path, this.collectionGroup, this.explicitOrderBy.slice(), this.filters.slice(), this.limit, t, this.endAt);\n    }, n.prototype.withEndAt = function (t) {\n      return new n(this.path, this.collectionGroup, this.explicitOrderBy.slice(), this.filters.slice(), this.limit, this.startAt, t);\n    }, n.prototype.asCollectionQueryAtPath = function (t) {\n      return new n(t, null, this.explicitOrderBy.slice(), this.filters.slice(), this.limit, this.startAt, this.endAt);\n    }, n.prototype.canonicalId = function () {\n      if (null === this.memoizedCanonicalId) {\n        var t = this.path.canonicalString();\n        this.isCollectionGroupQuery() && (t += \"|cg:\" + this.collectionGroup), t += \"|f:\";\n\n        for (var e = 0, n = this.filters; e < n.length; e++) {\n          t += n[e].canonicalId(), t += \",\";\n        }\n\n        t += \"|ob:\";\n\n        for (var r = 0, i = this.orderBy; r < i.length; r++) {\n          t += i[r].canonicalId(), t += \",\";\n        }\n\n        qy(this.limit) || (t += \"|l:\", t += this.limit), this.startAt && (t += \"|lb:\", t += this.startAt.canonicalId()), this.endAt && (t += \"|ub:\", t += this.endAt.canonicalId()), this.memoizedCanonicalId = t;\n      }\n\n      return this.memoizedCanonicalId;\n    }, n.prototype.toString = function () {\n      var t = \"Query(\" + this.path.canonicalString();\n      return this.isCollectionGroupQuery() && (t += \" collectionGroup=\" + this.collectionGroup), 0 < this.filters.length && (t += \", filters: [\" + this.filters.join(\", \") + \"]\"), qy(this.limit) || (t += \", limit: \" + this.limit), 0 < this.explicitOrderBy.length && (t += \", orderBy: [\" + this.explicitOrderBy.join(\", \") + \"]\"), this.startAt && (t += \", startAt: \" + this.startAt.canonicalId()), this.endAt && (t += \", endAt: \" + this.endAt.canonicalId()), t + \")\";\n    }, n.prototype.isEqual = function (t) {\n      if (this.limit !== t.limit) return !1;\n      if (this.orderBy.length !== t.orderBy.length) return !1;\n\n      for (var e = 0; e < this.orderBy.length; e++) if (!this.orderBy[e].isEqual(t.orderBy[e])) return !1;\n\n      if (this.filters.length !== t.filters.length) return !1;\n\n      for (e = 0; e < this.filters.length; e++) if (!this.filters[e].isEqual(t.filters[e])) return !1;\n\n      return this.collectionGroup === t.collectionGroup && !!this.path.isEqual(t.path) && !(null !== this.startAt ? !this.startAt.isEqual(t.startAt) : null !== t.startAt) && (null !== this.endAt ? this.endAt.isEqual(t.endAt) : null === t.endAt);\n    }, n.prototype.docComparator = function (t, e) {\n      for (var n = !1, r = 0, i = this.orderBy; r < i.length; r++) {\n        var o = i[r],\n            a = o.compare(t, e);\n        if (0 !== a) return a;\n        n = n || o.field.isKeyField();\n      }\n\n      return Ql(n, \"orderBy used that doesn't compare on key field\"), 0;\n    }, n.prototype.matches = function (t) {\n      return this.matchesPathAndCollectionGroup(t) && this.matchesOrderBy(t) && this.matchesFilters(t) && this.matchesBounds(t);\n    }, n.prototype.hasLimit = function () {\n      return !qy(this.limit);\n    }, n.prototype.getFirstOrderByField = function () {\n      return 0 < this.explicitOrderBy.length ? this.explicitOrderBy[0].field : null;\n    }, n.prototype.getInequalityFilterField = function () {\n      for (var t = 0, e = this.filters; t < e.length; t++) {\n        var n = e[t];\n        if (n instanceof km && n.isInequality()) return n.field;\n      }\n\n      return null;\n    }, n.prototype.findFilterOperator = function (t) {\n      for (var e = 0, n = this.filters; e < n.length; e++) {\n        var r = n[e];\n        if (r instanceof km && 0 <= t.indexOf(r.op)) return r.op;\n      }\n\n      return null;\n    }, n.prototype.isDocumentQuery = function () {\n      return Vf.isDocumentKey(this.path) && null === this.collectionGroup && 0 === this.filters.length;\n    }, n.prototype.isCollectionGroupQuery = function () {\n      return null !== this.collectionGroup;\n    }, n.prototype.matchesPathAndCollectionGroup = function (t) {\n      var e = t.key.path;\n      return null !== this.collectionGroup ? t.key.hasCollectionId(this.collectionGroup) && this.path.isPrefixOf(e) : Vf.isDocumentKey(this.path) ? this.path.isEqual(e) : this.path.isImmediateParentOf(e);\n    }, n.prototype.matchesOrderBy = function (t) {\n      for (var e = 0, n = this.explicitOrderBy; e < n.length; e++) {\n        var r = n[e];\n        if (!r.field.isKeyField() && void 0 === t.field(r.field)) return !1;\n      }\n\n      return !0;\n    }, n.prototype.matchesFilters = function (t) {\n      for (var e = 0, n = this.filters; e < n.length; e++) {\n        if (!n[e].matches(t)) return !1;\n      }\n\n      return !0;\n    }, n.prototype.matchesBounds = function (t) {\n      return !(this.startAt && !this.startAt.sortsBeforeDocument(this.orderBy, t)) && (!this.endAt || !this.endAt.sortsBeforeDocument(this.orderBy, t));\n    }, n.prototype.assertValidBound = function (t) {\n      Ql(t.position.length <= this.orderBy.length, \"Bound is longer than orderBy\");\n    }, n;\n  }(),\n      Nm = function () {},\n      Am = function () {\n    function e(t) {\n      this.name = t;\n    }\n\n    return e.fromString = function (t) {\n      switch (t) {\n        case \"<\":\n          return e.LESS_THAN;\n\n        case \"<=\":\n          return e.LESS_THAN_OR_EQUAL;\n\n        case \"==\":\n          return e.EQUAL;\n\n        case \">=\":\n          return e.GREATER_THAN_OR_EQUAL;\n\n        case \">\":\n          return e.GREATER_THAN;\n\n        case \"array-contains\":\n          return e.ARRAY_CONTAINS;\n\n        case \"in\":\n          return e.IN;\n\n        case \"array-contains-any\":\n          return e.ARRAY_CONTAINS_ANY;\n\n        default:\n          return Kl(\"Unknown FieldFilter operator: \" + t);\n      }\n    }, e.prototype.toString = function () {\n      return this.name;\n    }, e.prototype.isEqual = function (t) {\n      return this.name === t.name;\n    }, e.LESS_THAN = new e(\"<\"), e.LESS_THAN_OR_EQUAL = new e(\"<=\"), e.EQUAL = new e(\"==\"), e.GREATER_THAN = new e(\">\"), e.GREATER_THAN_OR_EQUAL = new e(\">=\"), e.ARRAY_CONTAINS = new e(\"array-contains\"), e.IN = new e(\"in\"), e.ARRAY_CONTAINS_ANY = new e(\"array-contains-any\"), e;\n  }(),\n      km = function (i) {\n    function r(t, e, n) {\n      var r = i.call(this) || this;\n      return r.field = t, r.op = e, r.value = n, r;\n    }\n\n    return hr(r, i), r.create = function (t, e, n) {\n      if (t.isKeyField()) return Ql(n instanceof hy, \"Comparing on key, but filter value not a RefValue\"), Ql(e !== Am.ARRAY_CONTAINS && e !== Am.ARRAY_CONTAINS_ANY && e !== Am.IN, \"'\" + e.toString() + \"' queries don't make sense on document keys.\"), new Dm(t, e, n);\n\n      if (n.isEqual($d.INSTANCE)) {\n        if (e !== Am.EQUAL) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid query. You can only perform equals comparisons on null.\");\n        return new r(t, e, n);\n      }\n\n      if (n.isEqual(oy.NAN)) {\n        if (e !== Am.EQUAL) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid query. You can only perform equals comparisons on NaN.\");\n        return new r(t, e, n);\n      }\n\n      return e === Am.ARRAY_CONTAINS ? new Rm(t, n) : e === Am.IN ? (Ql(n instanceof py, \"IN filter has invalid value: \" + n.toString()), new Om(t, n)) : e === Am.ARRAY_CONTAINS_ANY ? (Ql(n instanceof py, \"ARRAY_CONTAINS_ANY filter has invalid value: \" + n.toString()), new Pm(t, n)) : new r(t, e, n);\n    }, r.prototype.matches = function (t) {\n      var e = t.field(this.field);\n      return void 0 !== e && this.value.typeOrder === e.typeOrder && this.matchesComparison(e.compareTo(this.value));\n    }, r.prototype.matchesComparison = function (t) {\n      switch (this.op) {\n        case Am.LESS_THAN:\n          return t < 0;\n\n        case Am.LESS_THAN_OR_EQUAL:\n          return t <= 0;\n\n        case Am.EQUAL:\n          return 0 === t;\n\n        case Am.GREATER_THAN:\n          return 0 < t;\n\n        case Am.GREATER_THAN_OR_EQUAL:\n          return 0 <= t;\n\n        default:\n          return Kl(\"Unknown FieldFilter operator: \" + this.op);\n      }\n    }, r.prototype.isInequality = function () {\n      return 0 <= [Am.LESS_THAN, Am.LESS_THAN_OR_EQUAL, Am.GREATER_THAN, Am.GREATER_THAN_OR_EQUAL].indexOf(this.op);\n    }, r.prototype.canonicalId = function () {\n      return this.field.canonicalString() + this.op.toString() + this.value.toString();\n    }, r.prototype.isEqual = function (t) {\n      return t instanceof r && this.op.isEqual(t.op) && this.field.isEqual(t.field) && this.value.isEqual(t.value);\n    }, r.prototype.toString = function () {\n      return this.field.canonicalString() + \" \" + this.op + \" \" + this.value.value();\n    }, r;\n  }(Nm),\n      Dm = function (r) {\n    function t(t, e, n) {\n      return r.call(this, t, e, n) || this;\n    }\n\n    return hr(t, r), t.prototype.matches = function (t) {\n      var e = this.value,\n          n = Vf.comparator(t.key, e.key);\n      return this.matchesComparison(n);\n    }, t;\n  }(km),\n      Rm = function (n) {\n    function t(t, e) {\n      return n.call(this, t, Am.ARRAY_CONTAINS, e) || this;\n    }\n\n    return hr(t, n), t.prototype.matches = function (t) {\n      var e = t.field(this.field);\n      return e instanceof py && e.contains(this.value);\n    }, t;\n  }(km),\n      Om = function (n) {\n    function t(t, e) {\n      return n.call(this, t, Am.IN, e) || this;\n    }\n\n    return hr(t, n), t.prototype.matches = function (t) {\n      var e = this.value,\n          n = t.field(this.field);\n      return void 0 !== n && e.contains(n);\n    }, t;\n  }(km),\n      Pm = function (n) {\n    function t(t, e) {\n      return n.call(this, t, Am.ARRAY_CONTAINS_ANY, e) || this;\n    }\n\n    return hr(t, n), t.prototype.matches = function (t) {\n      var e = this.value,\n          n = t.field(this.field);\n      return n instanceof py && n.internalValue.some(function (t) {\n        return e.contains(t);\n      });\n    }, t;\n  }(km),\n      Mm = function () {\n    function t(t) {\n      this.name = t;\n    }\n\n    return t.prototype.toString = function () {\n      return this.name;\n    }, t.ASCENDING = new t(\"asc\"), t.DESCENDING = new t(\"desc\"), t;\n  }(),\n      xm = function () {\n    function t(t, e) {\n      this.position = t, this.before = e;\n    }\n\n    return t.prototype.canonicalId = function () {\n      for (var t = this.before ? \"b:\" : \"a:\", e = 0, n = this.position; e < n.length; e++) {\n        t += n[e].toString();\n      }\n\n      return t;\n    }, t.prototype.sortsBeforeDocument = function (t, e) {\n      Ql(this.position.length <= t.length, \"Bound has more components than query's orderBy\");\n\n      for (var n = 0, r = 0; r < this.position.length; r++) {\n        var i = t[r],\n            o = this.position[r];\n        if (i.field.isKeyField()) Ql(o instanceof hy, \"Bound has a non-key value where the key path is being used.\"), n = Vf.comparator(o.key, e.key);else {\n          var a = e.field(i.field);\n          Ql(void 0 !== a, \"Field should exist since document matched the orderBy already.\"), n = o.compareTo(a);\n        }\n        if (i.dir === Mm.DESCENDING && (n *= -1), 0 !== n) break;\n      }\n\n      return this.before ? n <= 0 : n < 0;\n    }, t.prototype.isEqual = function (t) {\n      if (null === t) return !1;\n      if (this.before !== t.before || this.position.length !== t.position.length) return !1;\n\n      for (var e = 0; e < this.position.length; e++) {\n        var n = this.position[e],\n            r = t.position[e];\n        if (!n.isEqual(r)) return !1;\n      }\n\n      return !0;\n    }, t;\n  }(),\n      Lm = function () {\n    function t(t, e) {\n      this.field = t, void 0 === e && (e = Mm.ASCENDING), this.dir = e, this.isKeyOrderBy = t.isKeyField();\n    }\n\n    return t.prototype.compare = function (t, e) {\n      var n = this.isKeyOrderBy ? Kp.compareByKey(t, e) : Kp.compareByField(this.field, t, e);\n\n      switch (this.dir) {\n        case Mm.ASCENDING:\n          return n;\n\n        case Mm.DESCENDING:\n          return -1 * n;\n\n        default:\n          return Kl(\"Unknown direction: \" + this.dir);\n      }\n    }, t.prototype.canonicalId = function () {\n      return this.field.canonicalString() + this.dir.toString();\n    }, t.prototype.toString = function () {\n      return this.field.canonicalString() + \" (\" + this.dir + \")\";\n    }, t.prototype.isEqual = function (t) {\n      return this.dir === t.dir && this.field.isEqual(t.field);\n    }, t;\n  }(),\n      Fm = new Lm(qf.keyField(), Mm.ASCENDING),\n      Um = new Lm(qf.keyField(), Mm.DESCENDING),\n      qm = function () {\n    function e() {\n      this.isIdempotent = !0;\n    }\n\n    return e.prototype.applyToLocalView = function (t, e) {\n      return new uy(e, t);\n    }, e.prototype.applyToRemoteDocument = function (t, e) {\n      return e;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e;\n    }, e.instance = new e(), e;\n  }(),\n      Vm = function () {\n    function e(t) {\n      this.elements = t, this.isIdempotent = !0;\n    }\n\n    return e.prototype.applyToLocalView = function (t, e) {\n      return this.apply(t);\n    }, e.prototype.applyToRemoteDocument = function (t, e) {\n      return this.apply(t);\n    }, e.prototype.apply = function (t) {\n      for (var n = Wm(t), e = function (e) {\n        n.find(function (t) {\n          return t.isEqual(e);\n        }) || n.push(e);\n      }, r = 0, i = this.elements; r < i.length; r++) {\n        e(i[r]);\n      }\n\n      return new py(n);\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && Tf(t.elements, this.elements);\n    }, e;\n  }(),\n      Bm = function () {\n    function e(t) {\n      this.elements = t, this.isIdempotent = !0;\n    }\n\n    return e.prototype.applyToLocalView = function (t, e) {\n      return this.apply(t);\n    }, e.prototype.applyToRemoteDocument = function (t, e) {\n      return this.apply(t);\n    }, e.prototype.apply = function (t) {\n      for (var n = Wm(t), e = function (e) {\n        n = n.filter(function (t) {\n          return !t.isEqual(e);\n        });\n      }, r = 0, i = this.elements; r < i.length; r++) {\n        e(i[r]);\n      }\n\n      return new py(n);\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && Tf(t.elements, this.elements);\n    }, e;\n  }(),\n      jm = function () {\n    function e(t) {\n      this.operand = t, this.isIdempotent = !1;\n    }\n\n    return e.prototype.applyToLocalView = function (t, e) {\n      if (t instanceof iy && this.operand instanceof iy) {\n        var n = t.internalValue + this.operand.internalValue;\n        return new iy(n);\n      }\n\n      if (t instanceof ty) {\n        n = t.internalValue + this.operand.internalValue;\n        return new oy(n);\n      }\n\n      return this.operand;\n    }, e.prototype.applyToRemoteDocument = function (t, e) {\n      return Ql(null !== e, \"Didn't receive transformResult for NUMERIC_ADD transform\"), e;\n    }, e.prototype.isEqual = function (t) {\n      return t instanceof e && this.operand.isEqual(t.operand);\n    }, e;\n  }();\n\n  function Wm(t) {\n    return t instanceof py ? t.internalValue.slice() : [];\n  }\n\n  var Km,\n      Qm,\n      Hm = function () {\n    function t(t) {\n      this.count = t;\n    }\n\n    return t.prototype.isEqual = function (t) {\n      return t && t.count === this.count;\n    }, t;\n  }(),\n      Gm = ((Km = {})[Mm.ASCENDING.name] = \"ASCENDING\", Km[Mm.DESCENDING.name] = \"DESCENDING\", Km),\n      zm = ((Qm = {})[Am.LESS_THAN.name] = \"LESS_THAN\", Qm[Am.LESS_THAN_OR_EQUAL.name] = \"LESS_THAN_OR_EQUAL\", Qm[Am.GREATER_THAN.name] = \"GREATER_THAN\", Qm[Am.GREATER_THAN_OR_EQUAL.name] = \"GREATER_THAN_OR_EQUAL\", Qm[Am.EQUAL.name] = \"EQUAL\", Qm[Am.ARRAY_CONTAINS.name] = \"ARRAY_CONTAINS\", Qm[Am.IN.name] = \"IN\", Qm[Am.ARRAY_CONTAINS_ANY.name] = \"ARRAY_CONTAINS_ANY\", Qm),\n      Ym = new RegExp(/^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(?:\\.(\\d+))?Z$/);\n\n  function Xm(t, e) {\n    Ql(!qy(t), e + \" is missing\");\n  }\n\n  function Jm(t) {\n    return \"number\" == typeof t ? t : \"string\" == typeof t ? Number(t) : Kl(\"can't parse \" + t);\n  }\n\n  var $m = function () {\n    function t(t, e) {\n      this.databaseId = t, this.options = e;\n    }\n\n    return t.prototype.emptyByteString = function () {\n      return this.options.useProto3Json ? \"\" : new Uint8Array(0);\n    }, t.prototype.unsafeCastProtoByteString = function (t) {\n      return t;\n    }, t.prototype.fromRpcStatus = function (t) {\n      var e = void 0 === t.code ? zl.UNKNOWN : im(t.code);\n      return new Yl(e, t.message || \"\");\n    }, t.prototype.toInt32Value = function (t) {\n      return qy(t) ? void 0 : {\n        value: t\n      };\n    }, t.prototype.fromInt32Value = function (t) {\n      var e;\n      return qy(e = \"object\" == typeof t ? t.value : t) ? null : e;\n    }, t.prototype.toTimestamp = function (t) {\n      return {\n        seconds: \"\" + t.seconds,\n        nanos: t.nanoseconds\n      };\n    }, t.prototype.fromTimestamp = function (t) {\n      if (\"string\" == typeof t) return this.fromIso8601String(t);\n      Ql(!!t, \"Cannot deserialize null or undefined timestamp.\");\n      var e = Jm(t.seconds || \"0\"),\n          n = t.nanos || 0;\n      return new $f(e, n);\n    }, t.prototype.fromIso8601String = function (t) {\n      var e = 0,\n          n = Ym.exec(t);\n\n      if (Ql(!!n, \"invalid timestamp: \" + t), n[1]) {\n        var r = n[1];\n        r = (r + \"000000000\").substr(0, 9), e = Number(r);\n      }\n\n      var i = new Date(t),\n          o = Math.floor(i.getTime() / 1e3);\n      return new $f(o, e);\n    }, t.prototype.toBytes = function (t) {\n      return this.options.useProto3Json ? t.toBase64() : this.unsafeCastProtoByteString(t.toUint8Array());\n    }, t.prototype.fromBlob = function (t) {\n      return \"string\" == typeof t ? (Ql(this.options.useProto3Json, \"Expected bytes to be passed in as Uint8Array, but got a string instead.\"), kf.fromBase64String(t)) : (Ql(!this.options.useProto3Json, \"Expected bytes to be passed in as Uint8Array, but got a string instead.\"), kf.fromUint8Array(t));\n    }, t.prototype.toVersion = function (t) {\n      return this.toTimestamp(t.toTimestamp());\n    }, t.prototype.fromVersion = function (t) {\n      return Ql(!!t, \"Trying to deserialize version that isn't set\"), Zf.fromTimestamp(this.fromTimestamp(t));\n    }, t.prototype.toResourceName = function (t, e) {\n      return this.fullyQualifiedPrefixPath(t).child(\"documents\").child(e).canonicalString();\n    }, t.prototype.fromResourceName = function (t) {\n      var e = Ff.fromString(t);\n      return Ql(this.isValidResourceName(e), \"Tried to deserialize invalid key \" + e.toString()), e;\n    }, t.prototype.toName = function (t) {\n      return this.toResourceName(this.databaseId, t.path);\n    }, t.prototype.fromName = function (t) {\n      var e = this.fromResourceName(t);\n      return Ql(e.get(1) === this.databaseId.projectId, \"Tried to deserialize key from different project: \" + e.get(1) + \" vs \" + this.databaseId.projectId), Ql(!e.get(3) && !this.databaseId.database || e.get(3) === this.databaseId.database, \"Tried to deserialize key from different database: \" + e.get(3) + \" vs \" + this.databaseId.database), new Vf(this.extractLocalPathFromResourceName(e));\n    }, t.prototype.toQueryPath = function (t) {\n      return this.toResourceName(this.databaseId, t);\n    }, t.prototype.fromQueryPath = function (t) {\n      var e = this.fromResourceName(t);\n      return 4 === e.length ? Ff.EMPTY_PATH : this.extractLocalPathFromResourceName(e);\n    }, Object.defineProperty(t.prototype, \"encodedDatabaseId\", {\n      get: function () {\n        return new Ff([\"projects\", this.databaseId.projectId, \"databases\", this.databaseId.database]).canonicalString();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.fullyQualifiedPrefixPath = function (t) {\n      return new Ff([\"projects\", t.projectId, \"databases\", t.database]);\n    }, t.prototype.extractLocalPathFromResourceName = function (t) {\n      return Ql(4 < t.length && \"documents\" === t.get(4), \"tried to deserialize invalid key \" + t.toString()), t.popFirst(5);\n    }, t.prototype.isValidResourceName = function (t) {\n      return 4 <= t.length && \"projects\" === t.get(0) && \"databases\" === t.get(2);\n    }, t.prototype.toValue = function (t) {\n      if (t instanceof $d) return {\n        nullValue: \"NULL_VALUE\"\n      };\n      if (t instanceof Zd) return {\n        booleanValue: t.value()\n      };\n      if (t instanceof iy) return {\n        integerValue: \"\" + t.value()\n      };\n\n      if (t instanceof oy) {\n        var e = t.value();\n\n        if (this.options.useProto3Json) {\n          if (isNaN(e)) return {\n            doubleValue: \"NaN\"\n          };\n          if (e === 1 / 0) return {\n            doubleValue: \"Infinity\"\n          };\n          if (e === -1 / 0) return {\n            doubleValue: \"-Infinity\"\n          };\n        }\n\n        return {\n          doubleValue: t.value()\n        };\n      }\n\n      return t instanceof ay ? {\n        stringValue: t.value()\n      } : t instanceof fy ? {\n        mapValue: this.toMapValue(t)\n      } : t instanceof py ? {\n        arrayValue: this.toArrayValue(t)\n      } : t instanceof sy ? {\n        timestampValue: this.toTimestamp(t.internalValue)\n      } : t instanceof ly ? {\n        geoPointValue: {\n          latitude: t.value().latitude,\n          longitude: t.value().longitude\n        }\n      } : t instanceof cy ? {\n        bytesValue: this.toBytes(t.value())\n      } : t instanceof hy ? {\n        referenceValue: this.toResourceName(t.databaseId, t.key.path)\n      } : Kl(\"Unknown FieldValue \" + JSON.stringify(t));\n    }, t.prototype.fromValue = function (t) {\n      var e = this;\n      if (\"nullValue\" in t) return $d.INSTANCE;\n      if (\"booleanValue\" in t) return Zd.of(t.booleanValue);\n      if (\"integerValue\" in t) return new iy(Jm(t.integerValue));\n\n      if (\"doubleValue\" in t) {\n        if (this.options.useProto3Json) {\n          if (\"NaN\" === t.doubleValue) return oy.NAN;\n          if (\"Infinity\" === t.doubleValue) return oy.POSITIVE_INFINITY;\n          if (\"-Infinity\" === t.doubleValue) return oy.NEGATIVE_INFINITY;\n        }\n\n        return new oy(t.doubleValue);\n      }\n\n      if (\"stringValue\" in t) return new ay(t.stringValue);\n      if (\"mapValue\" in t) return this.fromFields(t.mapValue.fields || {});\n\n      if (\"arrayValue\" in t) {\n        Xm(t.arrayValue, \"arrayValue\");\n        var n = t.arrayValue.values || [];\n        return new py(n.map(function (t) {\n          return e.fromValue(t);\n        }));\n      }\n\n      if (\"timestampValue\" in t) return Xm(t.timestampValue, \"timestampValue\"), new sy(this.fromTimestamp(t.timestampValue));\n\n      if (\"geoPointValue\" in t) {\n        Xm(t.geoPointValue, \"geoPointValue\");\n        var r = t.geoPointValue.latitude || 0,\n            i = t.geoPointValue.longitude || 0;\n        return new ly(new Im(r, i));\n      }\n\n      if (\"bytesValue\" in t) {\n        Xm(t.bytesValue, \"bytesValue\");\n        var o = this.fromBlob(t.bytesValue);\n        return new cy(o);\n      }\n\n      if (\"referenceValue\" in t) {\n        Xm(t.referenceValue, \"referenceValue\");\n        var a = this.fromResourceName(t.referenceValue),\n            s = new Pf(a.get(1), a.get(3)),\n            u = new Vf(this.extractLocalPathFromResourceName(a));\n        return new hy(s, u);\n      }\n\n      return Kl(\"Unknown Value proto \" + JSON.stringify(t));\n    }, t.prototype.toMutationDocument = function (t, e) {\n      return {\n        name: this.toName(t),\n        fields: this.toFields(e)\n      };\n    }, t.prototype.toDocument = function (t) {\n      return Ql(!t.hasLocalMutations, \"Can't serialize documents with mutations.\"), {\n        name: this.toName(t.key),\n        fields: this.toFields(t.data),\n        updateTime: this.toTimestamp(t.version.toTimestamp())\n      };\n    }, t.prototype.fromDocument = function (t, e) {\n      return new Kp(this.fromName(t.name), this.fromVersion(t.updateTime), this.fromFields(t.fields || {}), {\n        hasCommittedMutations: !!e\n      });\n    }, t.prototype.toFields = function (t) {\n      var n = this,\n          r = {};\n      return t.forEach(function (t, e) {\n        r[t] = n.toValue(e);\n      }), r;\n    }, t.prototype.fromFields = function (t) {\n      var n = this,\n          e = t,\n          r = fy.EMPTY;\n      return tf(e, function (t, e) {\n        r = r.set(new qf([t]), n.fromValue(e));\n      }), r;\n    }, t.prototype.toMapValue = function (t) {\n      return {\n        fields: this.toFields(t)\n      };\n    }, t.prototype.toArrayValue = function (t) {\n      var e = this,\n          n = [];\n      return t.forEach(function (t) {\n        n.push(e.toValue(t));\n      }), {\n        values: n\n      };\n    }, t.prototype.fromFound = function (t) {\n      Ql(!!t.found, \"Tried to deserialize a found document from a missing document.\"), Xm(t.found.name, \"doc.found.name\"), Xm(t.found.updateTime, \"doc.found.updateTime\");\n      var e = this.fromName(t.found.name),\n          n = this.fromVersion(t.found.updateTime),\n          r = this.fromFields(t.found.fields || {});\n      return new Kp(e, n, r, {}, t.found);\n    }, t.prototype.fromMissing = function (t) {\n      Ql(!!t.missing, \"Tried to deserialize a missing document from a found document.\"), Ql(!!t.readTime, \"Tried to deserialize a missing document without a read time.\");\n      var e = this.fromName(t.missing),\n          n = this.fromVersion(t.readTime);\n      return new Qp(e, n);\n    }, t.prototype.fromMaybeDocument = function (t) {\n      return \"found\" in t ? this.fromFound(t) : \"missing\" in t ? this.fromMissing(t) : Kl(\"invalid batch get response: \" + JSON.stringify(t));\n    }, t.prototype.toWatchTargetChangeState = function (t) {\n      switch (t) {\n        case hm.Added:\n          return \"ADD\";\n\n        case hm.Current:\n          return \"CURRENT\";\n\n        case hm.NoChange:\n          return \"NO_CHANGE\";\n\n        case hm.Removed:\n          return \"REMOVE\";\n\n        case hm.Reset:\n          return \"RESET\";\n\n        default:\n          return Kl(\"Unknown WatchTargetChangeState: \" + t);\n      }\n    }, t.prototype.toTestWatchChange = function (t) {\n      if (t instanceof gm) return {\n        filter: {\n          count: t.existenceFilter.count,\n          targetId: t.targetId\n        }\n      };\n\n      if (t instanceof mm) {\n        if (t.newDoc instanceof Kp) {\n          var e = t.newDoc;\n          return {\n            documentChange: {\n              document: {\n                name: this.toName(e.key),\n                fields: this.toFields(e.data),\n                updateTime: this.toVersion(e.version)\n              },\n              targetIds: t.updatedTargetIds,\n              removedTargetIds: t.removedTargetIds\n            }\n          };\n        }\n\n        if (t.newDoc instanceof Qp) {\n          e = t.newDoc;\n          return {\n            documentDelete: {\n              document: this.toName(e.key),\n              readTime: this.toVersion(e.version),\n              removedTargetIds: t.removedTargetIds\n            }\n          };\n        }\n\n        if (null === t.newDoc) return {\n          documentRemove: {\n            document: this.toName(t.key),\n            removedTargetIds: t.removedTargetIds\n          }\n        };\n      }\n\n      if (t instanceof vm) {\n        var n = void 0;\n        return t.cause && (n = {\n          code: function (t) {\n            if (void 0 === t) return tm.OK;\n\n            switch (t) {\n              case zl.OK:\n                return tm.OK;\n\n              case zl.CANCELLED:\n                return tm.CANCELLED;\n\n              case zl.UNKNOWN:\n                return tm.UNKNOWN;\n\n              case zl.DEADLINE_EXCEEDED:\n                return tm.DEADLINE_EXCEEDED;\n\n              case zl.RESOURCE_EXHAUSTED:\n                return tm.RESOURCE_EXHAUSTED;\n\n              case zl.INTERNAL:\n                return tm.INTERNAL;\n\n              case zl.UNAVAILABLE:\n                return tm.UNAVAILABLE;\n\n              case zl.UNAUTHENTICATED:\n                return tm.UNAUTHENTICATED;\n\n              case zl.INVALID_ARGUMENT:\n                return tm.INVALID_ARGUMENT;\n\n              case zl.NOT_FOUND:\n                return tm.NOT_FOUND;\n\n              case zl.ALREADY_EXISTS:\n                return tm.ALREADY_EXISTS;\n\n              case zl.PERMISSION_DENIED:\n                return tm.PERMISSION_DENIED;\n\n              case zl.FAILED_PRECONDITION:\n                return tm.FAILED_PRECONDITION;\n\n              case zl.ABORTED:\n                return tm.ABORTED;\n\n              case zl.OUT_OF_RANGE:\n                return tm.OUT_OF_RANGE;\n\n              case zl.UNIMPLEMENTED:\n                return tm.UNIMPLEMENTED;\n\n              case zl.DATA_LOSS:\n                return tm.DATA_LOSS;\n\n              default:\n                return Kl(\"Unknown status code: \" + t);\n            }\n          }(t.cause.code),\n          message: t.cause.message\n        }), {\n          targetChange: {\n            targetChangeType: this.toWatchTargetChangeState(t.state),\n            targetIds: t.targetIds,\n            resumeToken: this.unsafeCastProtoByteString(t.resumeToken),\n            cause: n\n          }\n        };\n      }\n\n      return Kl(\"Unrecognized watch change: \" + JSON.stringify(t));\n    }, t.prototype.fromWatchChange = function (t) {\n      var e;\n\n      if (\"targetChange\" in t) {\n        Xm(t.targetChange, \"targetChange\");\n        var n = this.fromWatchTargetChangeState(t.targetChange.targetChangeType || \"NO_CHANGE\"),\n            r = t.targetChange.targetIds || [],\n            i = t.targetChange.resumeToken || this.emptyByteString(),\n            o = t.targetChange.cause,\n            a = o && this.fromRpcStatus(o);\n        e = new vm(n, r, i, a || null);\n      } else if (\"documentChange\" in t) {\n        Xm(t.documentChange, \"documentChange\"), Xm(t.documentChange.document, \"documentChange.name\"), Xm(t.documentChange.document.name, \"documentChange.document.name\"), Xm(t.documentChange.document.updateTime, \"documentChange.document.updateTime\");\n        var s = t.documentChange,\n            u = this.fromName(s.document.name),\n            c = this.fromVersion(s.document.updateTime),\n            h = this.fromFields(s.document.fields || {}),\n            l = new Kp(u, c, h, {}, s.document),\n            f = s.targetIds || [],\n            p = s.removedTargetIds || [];\n        e = new mm(f, p, l.key, l);\n      } else if (\"documentDelete\" in t) {\n        Xm(t.documentDelete, \"documentDelete\"), Xm(t.documentDelete.document, \"documentDelete.document\");\n        var d = t.documentDelete;\n        u = this.fromName(d.document), c = d.readTime ? this.fromVersion(d.readTime) : Zf.forDeletedDoc(), l = new Qp(u, c), p = d.removedTargetIds || [];\n        e = new mm([], p, l.key, l);\n      } else if (\"documentRemove\" in t) {\n        Xm(t.documentRemove, \"documentRemove\"), Xm(t.documentRemove.document, \"documentRemove\");\n        var y = t.documentRemove;\n        u = this.fromName(y.document), p = y.removedTargetIds || [];\n        e = new mm([], p, u, null);\n      } else {\n        if (!(\"filter\" in t)) return Kl(\"Unknown change type \" + JSON.stringify(t));\n        Xm(t.filter, \"filter\"), Xm(t.filter.targetId, \"filter.targetId\");\n        var m = t.filter,\n            g = m.count || 0,\n            v = new Hm(g),\n            b = m.targetId;\n        e = new gm(b, v);\n      }\n\n      return e;\n    }, t.prototype.fromWatchTargetChangeState = function (t) {\n      return \"NO_CHANGE\" === t ? hm.NoChange : \"ADD\" === t ? hm.Added : \"REMOVE\" === t ? hm.Removed : \"CURRENT\" === t ? hm.Current : \"RESET\" === t ? hm.Reset : Kl(\"Got unexpected TargetChange.state: \" + t);\n    }, t.prototype.versionFromListenResponse = function (t) {\n      if (!(\"targetChange\" in t)) return Zf.MIN;\n      var e = t.targetChange;\n      return e.targetIds && e.targetIds.length ? Zf.MIN : e.readTime ? this.fromVersion(e.readTime) : Zf.MIN;\n    }, t.prototype.toMutation = function (t) {\n      var e,\n          n = this;\n      if (t instanceof by) e = {\n        update: this.toMutationDocument(t.key, t.value)\n      };else if (t instanceof Ey) e = {\n        delete: this.toName(t.key)\n      };else if (t instanceof wy) e = {\n        update: this.toMutationDocument(t.key, t.data),\n        updateMask: this.toDocumentMask(t.fieldMask)\n      };else {\n        if (!(t instanceof _y)) return Kl(\"Unknown mutation type \" + t.type);\n        e = {\n          transform: {\n            document: this.toName(t.key),\n            fieldTransforms: t.fieldTransforms.map(function (t) {\n              return n.toFieldTransform(t);\n            })\n          }\n        };\n      }\n      return t.precondition.isNone || (e.currentDocument = this.toPrecondition(t.precondition)), e;\n    }, t.prototype.fromMutation = function (t) {\n      var e = this,\n          n = t.currentDocument ? this.fromPrecondition(t.currentDocument) : gy.NONE;\n\n      if (t.update) {\n        Xm(t.update.name, \"name\");\n        var r = this.fromName(t.update.name),\n            i = this.fromFields(t.update.fields || {});\n\n        if (t.updateMask) {\n          var o = this.fromDocumentMask(t.updateMask);\n          return new wy(r, i, o, n);\n        }\n\n        return new by(r, i, n);\n      }\n\n      if (t.delete) {\n        r = this.fromName(t.delete);\n        return new Ey(r, n);\n      }\n\n      if (t.transform) {\n        r = this.fromName(t.transform.document);\n        var a = t.transform.fieldTransforms.map(function (t) {\n          return e.fromFieldTransform(t);\n        });\n        return Ql(!0 === n.exists, 'Transforms only support precondition \"exists == true\"'), new _y(r, a);\n      }\n\n      return Kl(\"unknown mutation proto: \" + JSON.stringify(t));\n    }, t.prototype.toPrecondition = function (t) {\n      return Ql(!t.isNone, \"Can't serialize an empty precondition\"), void 0 !== t.updateTime ? {\n        updateTime: this.toVersion(t.updateTime)\n      } : void 0 !== t.exists ? {\n        exists: t.exists\n      } : Kl(\"Unknown precondition\");\n    }, t.prototype.fromPrecondition = function (t) {\n      return void 0 !== t.updateTime ? gy.updateTime(this.fromVersion(t.updateTime)) : void 0 !== t.exists ? gy.exists(t.exists) : gy.NONE;\n    }, t.prototype.fromWriteResult = function (t, e) {\n      var n = this,\n          r = t.updateTime ? this.fromVersion(t.updateTime) : this.fromVersion(e),\n          i = null;\n      return t.transformResults && 0 < t.transformResults.length && (i = t.transformResults.map(function (t) {\n        return n.fromValue(t);\n      })), new my(r, i);\n    }, t.prototype.fromWriteResults = function (t, e) {\n      var n = this;\n      return t && 0 < t.length ? (Ql(void 0 !== e, \"Received a write result without a commit time\"), t.map(function (t) {\n        return n.fromWriteResult(t, e);\n      })) : [];\n    }, t.prototype.toFieldTransform = function (t) {\n      var e = this,\n          n = t.transform;\n      if (n instanceof qm) return {\n        fieldPath: t.field.canonicalString(),\n        setToServerValue: \"REQUEST_TIME\"\n      };\n      if (n instanceof Vm) return {\n        fieldPath: t.field.canonicalString(),\n        appendMissingElements: {\n          values: n.elements.map(function (t) {\n            return e.toValue(t);\n          })\n        }\n      };\n      if (n instanceof Bm) return {\n        fieldPath: t.field.canonicalString(),\n        removeAllFromArray: {\n          values: n.elements.map(function (t) {\n            return e.toValue(t);\n          })\n        }\n      };\n      if (n instanceof jm) return {\n        fieldPath: t.field.canonicalString(),\n        increment: this.toValue(n.operand)\n      };\n      throw Kl(\"Unknown transform: \" + t.transform);\n    }, t.prototype.fromFieldTransform = function (t) {\n      var e = this,\n          n = null;\n      if (\"setToServerValue\" in t) Ql(\"REQUEST_TIME\" === t.setToServerValue, \"Unknown server value transform proto: \" + JSON.stringify(t)), n = qm.instance;else if (\"appendMissingElements\" in t) {\n        var r = t.appendMissingElements.values || [];\n        n = new Vm(r.map(function (t) {\n          return e.fromValue(t);\n        }));\n      } else if (\"removeAllFromArray\" in t) {\n        r = t.removeAllFromArray.values || [];\n        n = new Bm(r.map(function (t) {\n          return e.fromValue(t);\n        }));\n      } else if (\"increment\" in t) {\n        var i = this.fromValue(t.increment);\n        Ql(i instanceof ty, \"NUMERIC_ADD transform requires a NumberValue\"), n = new jm(i);\n      } else Kl(\"Unknown transform proto: \" + JSON.stringify(t));\n      var o = qf.fromServerFormat(t.fieldPath);\n      return new yy(o, n);\n    }, t.prototype.toDocumentsTarget = function (t) {\n      return {\n        documents: [this.toQueryPath(t.path)]\n      };\n    }, t.prototype.fromDocumentsTarget = function (t) {\n      var e = t.documents.length;\n      Ql(1 === e, \"DocumentsTarget contained other than 1 document: \" + e);\n      var n = t.documents[0];\n      return Cm.atPath(this.fromQueryPath(n));\n    }, t.prototype.toQueryTarget = function (t) {\n      var e = {\n        structuredQuery: {}\n      },\n          n = t.path;\n      null !== t.collectionGroup ? (Ql(n.length % 2 == 0, \"Collection Group queries should be within a document path or root.\"), e.parent = this.toQueryPath(n), e.structuredQuery.from = [{\n        collectionId: t.collectionGroup,\n        allDescendants: !0\n      }]) : (Ql(n.length % 2 != 0, \"Document queries with filters are not supported.\"), e.parent = this.toQueryPath(n.popLast()), e.structuredQuery.from = [{\n        collectionId: n.lastSegment()\n      }]);\n      var r = this.toFilter(t.filters);\n      r && (e.structuredQuery.where = r);\n      var i = this.toOrder(t.orderBy);\n      i && (e.structuredQuery.orderBy = i);\n      var o = this.toInt32Value(t.limit);\n      return void 0 !== o && (e.structuredQuery.limit = o), t.startAt && (e.structuredQuery.startAt = this.toCursor(t.startAt)), t.endAt && (e.structuredQuery.endAt = this.toCursor(t.endAt)), e;\n    }, t.prototype.fromQueryTarget = function (t) {\n      var e = this.fromQueryPath(t.parent),\n          n = t.structuredQuery,\n          r = n.from ? n.from.length : 0,\n          i = null;\n\n      if (0 < r) {\n        Ql(1 === r, \"StructuredQuery.from with more than one collection is not supported.\");\n        var o = n.from[0];\n        o.allDescendants ? i = o.collectionId : e = e.child(o.collectionId);\n      }\n\n      var a = [];\n      n.where && (a = this.fromFilter(n.where));\n      var s = [];\n      n.orderBy && (s = this.fromOrder(n.orderBy));\n      var u = null;\n      n.limit && (u = this.fromInt32Value(n.limit));\n      var c = null;\n      n.startAt && (c = this.fromCursor(n.startAt));\n      var h = null;\n      return n.endAt && (h = this.fromCursor(n.endAt)), new Cm(e, i, s, a, u, c, h);\n    }, t.prototype.toListenRequestLabels = function (t) {\n      var e = this.toLabel(t.purpose);\n      return null == e ? null : {\n        \"goog-listen-tags\": e\n      };\n    }, t.prototype.toLabel = function (t) {\n      switch (t) {\n        case Td.Listen:\n          return null;\n\n        case Td.ExistenceFilterMismatch:\n          return \"existence-filter-mismatch\";\n\n        case Td.LimboResolution:\n          return \"limbo-document\";\n\n        default:\n          return Kl(\"Unrecognized query purpose: \" + t);\n      }\n    }, t.prototype.toTarget = function (t) {\n      var e,\n          n = t.query;\n      return (e = n.isDocumentQuery() ? {\n        documents: this.toDocumentsTarget(n)\n      } : {\n        query: this.toQueryTarget(n)\n      }).targetId = t.targetId, 0 < t.resumeToken.length && (e.resumeToken = this.unsafeCastProtoByteString(t.resumeToken)), e;\n    }, t.prototype.toFilter = function (t) {\n      var e = this;\n\n      if (0 !== t.length) {\n        var n = t.map(function (t) {\n          return t instanceof km ? e.toUnaryOrFieldFilter(t) : Kl(\"Unrecognized filter: \" + JSON.stringify(t));\n        });\n        return 1 === n.length ? n[0] : {\n          compositeFilter: {\n            op: \"AND\",\n            filters: n\n          }\n        };\n      }\n    }, t.prototype.fromFilter = function (t) {\n      var e = this;\n      return t ? void 0 !== t.unaryFilter ? [this.fromUnaryFilter(t)] : void 0 !== t.fieldFilter ? [this.fromFieldFilter(t)] : void 0 !== t.compositeFilter ? t.compositeFilter.filters.map(function (t) {\n        return e.fromFilter(t);\n      }).reduce(function (t, e) {\n        return t.concat(e);\n      }) : Kl(\"Unknown filter: \" + JSON.stringify(t)) : [];\n    }, t.prototype.toOrder = function (t) {\n      var e = this;\n      if (0 !== t.length) return t.map(function (t) {\n        return e.toPropertyOrder(t);\n      });\n    }, t.prototype.fromOrder = function (t) {\n      var e = this;\n      return t.map(function (t) {\n        return e.fromPropertyOrder(t);\n      });\n    }, t.prototype.toCursor = function (t) {\n      var e = this;\n      return {\n        before: t.before,\n        values: t.position.map(function (t) {\n          return e.toValue(t);\n        })\n      };\n    }, t.prototype.fromCursor = function (t) {\n      var e = this,\n          n = !!t.before,\n          r = t.values.map(function (t) {\n        return e.fromValue(t);\n      });\n      return new xm(r, n);\n    }, t.prototype.toDirection = function (t) {\n      return Gm[t.name];\n    }, t.prototype.fromDirection = function (t) {\n      switch (t) {\n        case \"ASCENDING\":\n          return Mm.ASCENDING;\n\n        case \"DESCENDING\":\n          return Mm.DESCENDING;\n\n        default:\n          return;\n      }\n    }, t.prototype.toOperatorName = function (t) {\n      return zm[t.name];\n    }, t.prototype.fromOperatorName = function (t) {\n      switch (t) {\n        case \"EQUAL\":\n          return Am.EQUAL;\n\n        case \"GREATER_THAN\":\n          return Am.GREATER_THAN;\n\n        case \"GREATER_THAN_OR_EQUAL\":\n          return Am.GREATER_THAN_OR_EQUAL;\n\n        case \"LESS_THAN\":\n          return Am.LESS_THAN;\n\n        case \"LESS_THAN_OR_EQUAL\":\n          return Am.LESS_THAN_OR_EQUAL;\n\n        case \"ARRAY_CONTAINS\":\n          return Am.ARRAY_CONTAINS;\n\n        case \"IN\":\n          return Am.IN;\n\n        case \"ARRAY_CONTAINS_ANY\":\n          return Am.ARRAY_CONTAINS_ANY;\n\n        case \"OPERATOR_UNSPECIFIED\":\n          return Kl(\"Unspecified operator\");\n\n        default:\n          return Kl(\"Unknown operator\");\n      }\n    }, t.prototype.toFieldPathReference = function (t) {\n      return {\n        fieldPath: t.canonicalString()\n      };\n    }, t.prototype.fromFieldPathReference = function (t) {\n      return qf.fromServerFormat(t.fieldPath);\n    }, t.prototype.toPropertyOrder = function (t) {\n      return {\n        field: this.toFieldPathReference(t.field),\n        direction: this.toDirection(t.dir)\n      };\n    }, t.prototype.fromPropertyOrder = function (t) {\n      return new Lm(this.fromFieldPathReference(t.field), this.fromDirection(t.direction));\n    }, t.prototype.fromFieldFilter = function (t) {\n      return km.create(this.fromFieldPathReference(t.fieldFilter.field), this.fromOperatorName(t.fieldFilter.op), this.fromValue(t.fieldFilter.value));\n    }, t.prototype.toUnaryOrFieldFilter = function (t) {\n      if (t.op === Am.EQUAL) {\n        if (t.value.isEqual(oy.NAN)) return {\n          unaryFilter: {\n            field: this.toFieldPathReference(t.field),\n            op: \"IS_NAN\"\n          }\n        };\n        if (t.value.isEqual($d.INSTANCE)) return {\n          unaryFilter: {\n            field: this.toFieldPathReference(t.field),\n            op: \"IS_NULL\"\n          }\n        };\n      }\n\n      return {\n        fieldFilter: {\n          field: this.toFieldPathReference(t.field),\n          op: this.toOperatorName(t.op),\n          value: this.toValue(t.value)\n        }\n      };\n    }, t.prototype.fromUnaryFilter = function (t) {\n      switch (t.unaryFilter.op) {\n        case \"IS_NAN\":\n          var e = this.fromFieldPathReference(t.unaryFilter.field);\n          return km.create(e, Am.EQUAL, oy.NAN);\n\n        case \"IS_NULL\":\n          var n = this.fromFieldPathReference(t.unaryFilter.field);\n          return km.create(n, Am.EQUAL, $d.INSTANCE);\n\n        case \"OPERATOR_UNSPECIFIED\":\n          return Kl(\"Unspecified filter\");\n\n        default:\n          return Kl(\"Unknown filter\");\n      }\n    }, t.prototype.toDocumentMask = function (t) {\n      var e = [];\n      return t.fields.forEach(function (t) {\n        return e.push(t.canonicalString());\n      }), {\n        fieldPaths: e\n      };\n    }, t.prototype.fromDocumentMask = function (t) {\n      var e = (t.fieldPaths || []).map(function (t) {\n        return qf.fromServerFormat(t);\n      });\n      return dy.fromArray(e);\n    }, t;\n  }(),\n      Zm = function () {\n    this.listeners = [];\n  },\n      tg = function () {\n    function t(t) {\n      this.syncEngine = t, this.queries = new Gp(function (t) {\n        return t.canonicalId();\n      }), this.onlineState = Qy.Unknown, this.syncEngine.subscribe(this);\n    }\n\n    return t.prototype.listen = function (t) {\n      var e = t.query,\n          n = !1,\n          r = this.queries.get(e);\n      return r || (n = !0, r = new Zm(), this.queries.set(e, r)), r.listeners.push(t), t.applyOnlineStateChange(this.onlineState), r.viewSnap && t.onViewSnapshot(r.viewSnap), n ? this.syncEngine.listen(e).then(function (t) {\n        return r.targetId = t;\n      }) : Promise.resolve(r.targetId);\n    }, t.prototype.unlisten = function (o) {\n      return fr(this, void 0, void 0, function () {\n        var e, n, r, i;\n        return pr(this, function (t) {\n          return e = o.query, n = !1, (r = this.queries.get(e)) && 0 <= (i = r.listeners.indexOf(o)) && (r.listeners.splice(i, 1), n = 0 === r.listeners.length), n ? (this.queries.delete(e), [2, this.syncEngine.unlisten(e)]) : [2];\n        });\n      });\n    }, t.prototype.onWatchChange = function (t) {\n      for (var e = 0, n = t; e < n.length; e++) {\n        var r = n[e],\n            i = r.query,\n            o = this.queries.get(i);\n\n        if (o) {\n          for (var a = 0, s = o.listeners; a < s.length; a++) {\n            s[a].onViewSnapshot(r);\n          }\n\n          o.viewSnap = r;\n        }\n      }\n    }, t.prototype.onWatchError = function (t, e) {\n      var n = this.queries.get(t);\n      if (n) for (var r = 0, i = n.listeners; r < i.length; r++) {\n        i[r].onError(e);\n      }\n      this.queries.delete(t);\n    }, t.prototype.onOnlineStateChange = function (i) {\n      this.onlineState = i, this.queries.forEach(function (t, e) {\n        for (var n = 0, r = e.listeners; n < r.length; n++) {\n          r[n].applyOnlineStateChange(i);\n        }\n      });\n    }, t;\n  }(),\n      eg = function () {\n    function t(t, e, n) {\n      this.query = t, this.queryObserver = e, this.raisedInitialEvent = !1, this.onlineState = Qy.Unknown, this.options = n || {};\n    }\n\n    return t.prototype.onViewSnapshot = function (t) {\n      if (Ql(0 < t.docChanges.length || t.syncStateChanged, \"We got a new snapshot with no changes?\"), !this.options.includeMetadataChanges) {\n        for (var e = [], n = 0, r = t.docChanges; n < r.length; n++) {\n          var i = r[n];\n          i.type !== om.Metadata && e.push(i);\n        }\n\n        t = new pm(t.query, t.docs, t.oldDocs, e, t.mutatedKeys, t.fromCache, t.syncStateChanged, !0);\n      }\n\n      this.raisedInitialEvent ? this.shouldRaiseEvent(t) && this.queryObserver.next(t) : this.shouldRaiseInitialEvent(t, this.onlineState) && this.raiseInitialEvent(t), this.snap = t;\n    }, t.prototype.onError = function (t) {\n      this.queryObserver.error(t);\n    }, t.prototype.applyOnlineStateChange = function (t) {\n      this.onlineState = t, this.snap && !this.raisedInitialEvent && this.shouldRaiseInitialEvent(this.snap, t) && this.raiseInitialEvent(this.snap);\n    }, t.prototype.shouldRaiseInitialEvent = function (t, e) {\n      if (Ql(!this.raisedInitialEvent, \"Determining whether to raise first event but already had first event\"), !t.fromCache) return !0;\n      var n = e !== Qy.Offline;\n      return this.options.waitForSyncWhenOnline && n ? (Ql(t.fromCache, \"Waiting for sync, but snapshot is not from cache\"), !1) : !t.docs.isEmpty() || e === Qy.Offline;\n    }, t.prototype.shouldRaiseEvent = function (t) {\n      if (0 < t.docChanges.length) return !0;\n      var e = this.snap && this.snap.hasPendingWrites !== t.hasPendingWrites;\n      return !(!t.syncStateChanged && !e) && !0 === this.options.includeMetadataChanges;\n    }, t.prototype.raiseInitialEvent = function (t) {\n      Ql(!this.raisedInitialEvent, \"Trying to raise initial events for second time\"), t = pm.fromInitialDocuments(t.query, t.docs, t.mutatedKeys, t.fromCache), this.raisedInitialEvent = !0, this.queryObserver.next(t);\n    }, t;\n  }(),\n      ng = function () {\n    function s(t, e, n) {\n      this.targetId = t, this.addedKeys = e, this.removedKeys = n;\n    }\n\n    return s.fromSnapshot = function (t, e) {\n      for (var n = dp(), r = dp(), i = 0, o = e.docChanges; i < o.length; i++) {\n        var a = o[i];\n\n        switch (a.type) {\n          case om.Added:\n            n = n.add(a.doc.key);\n            break;\n\n          case om.Removed:\n            r = r.add(a.doc.key);\n        }\n      }\n\n      return new s(t, n, r);\n    }, s;\n  }(),\n      rg = function (t) {\n    this.key = t;\n  },\n      ig = function (t) {\n    this.key = t;\n  },\n      og = function () {\n    function t(t, e) {\n      this.query = t, this._syncedDocuments = e, this.syncState = null, this.current = !1, this.limboDocuments = dp(), this.mutatedKeys = dp(), this.documentSet = new cm(t.docComparator.bind(t));\n    }\n\n    return Object.defineProperty(t.prototype, \"syncedDocuments\", {\n      get: function () {\n        return this._syncedDocuments;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.computeDocChanges = function (t, e) {\n      var s = this,\n          u = e ? e.changeSet : new fm(),\n          c = e ? e.documentSet : this.documentSet,\n          h = e ? e.mutatedKeys : this.mutatedKeys,\n          l = c,\n          f = !1,\n          p = this.query.hasLimit() && c.size === this.query.limit ? c.last() : null;\n      if (t.inorderTraversal(function (t, e) {\n        var n = c.get(t),\n            r = e instanceof Kp ? e : null;\n        r && (Ql(t.isEqual(r.key), \"Mismatching keys found in document changes: \" + t + \" != \" + r.key), r = s.query.matches(r) ? r : null);\n        var i = !!n && s.mutatedKeys.has(n.key),\n            o = !!r && (r.hasLocalMutations || s.mutatedKeys.has(r.key) && r.hasCommittedMutations),\n            a = !1;\n        n && r ? n.data.isEqual(r.data) ? i !== o && (u.track({\n          type: om.Metadata,\n          doc: r\n        }), a = !0) : s.shouldWaitForSyncedDocument(n, r) || (u.track({\n          type: om.Modified,\n          doc: r\n        }), a = !0, p && 0 < s.query.docComparator(r, p) && (f = !0)) : !n && r ? (u.track({\n          type: om.Added,\n          doc: r\n        }), a = !0) : n && !r && (u.track({\n          type: om.Removed,\n          doc: n\n        }), a = !0, p && (f = !0));\n        a && (h = r ? (l = l.add(r), o ? h.add(t) : h.delete(t)) : (l = l.delete(t), h.delete(t)));\n      }), this.query.hasLimit()) for (; l.size > this.query.limit;) {\n        var n = l.last();\n        l = l.delete(n.key), h = h.delete(n.key), u.track({\n          type: om.Removed,\n          doc: n\n        });\n      }\n      return Ql(!f || !e, \"View was refilled using docs that themselves needed refilling.\"), {\n        documentSet: l,\n        changeSet: u,\n        needsRefill: f,\n        mutatedKeys: h\n      };\n    }, t.prototype.shouldWaitForSyncedDocument = function (t, e) {\n      return t.hasLocalMutations && e.hasCommittedMutations && !e.hasLocalMutations;\n    }, t.prototype.applyChanges = function (t, e, n) {\n      var o = this;\n      Ql(!t.needsRefill, \"Cannot apply changes that need a refill\");\n      var r = this.documentSet;\n      this.documentSet = t.documentSet, this.mutatedKeys = t.mutatedKeys;\n      var i = t.changeSet.getChanges();\n      i.sort(function (t, e) {\n        return n = t.type, r = e.type, (i = function (t) {\n          switch (t) {\n            case om.Added:\n              return 1;\n\n            case om.Modified:\n            case om.Metadata:\n              return 2;\n\n            case om.Removed:\n              return 0;\n\n            default:\n              return Kl(\"Unknown ChangeType: \" + t);\n          }\n        })(n) - i(r) || o.query.docComparator(t.doc, e.doc);\n        var n, r, i;\n      }), this.applyTargetChange(n);\n      var a = e ? this.updateLimboDocuments() : [],\n          s = 0 === this.limboDocuments.size && this.current ? sm.Synced : sm.Local,\n          u = s !== this.syncState;\n      return this.syncState = s, 0 !== i.length || u ? {\n        snapshot: new pm(this.query, t.documentSet, r, i, t.mutatedKeys, s === sm.Local, u, !1),\n        limboChanges: a\n      } : {\n        limboChanges: a\n      };\n    }, t.prototype.applyOnlineStateChange = function (t) {\n      return this.current && t === Qy.Offline ? (this.current = !1, this.applyChanges({\n        documentSet: this.documentSet,\n        changeSet: new fm(),\n        mutatedKeys: this.mutatedKeys,\n        needsRefill: !1\n      }, !1)) : {\n        limboChanges: []\n      };\n    }, t.prototype.shouldBeInLimbo = function (t) {\n      return !this._syncedDocuments.has(t) && !!this.documentSet.has(t) && !this.documentSet.get(t).hasLocalMutations;\n    }, t.prototype.applyTargetChange = function (t) {\n      var e = this;\n      t && (t.addedDocuments.forEach(function (t) {\n        return e._syncedDocuments = e._syncedDocuments.add(t);\n      }), t.modifiedDocuments.forEach(function (t) {\n        return Ql(e._syncedDocuments.has(t), \"Modified document \" + t + \" not found in view.\");\n      }), t.removedDocuments.forEach(function (t) {\n        return e._syncedDocuments = e._syncedDocuments.delete(t);\n      }), this.current = t.current);\n    }, t.prototype.updateLimboDocuments = function () {\n      var e = this;\n      if (!this.current) return [];\n      var n = this.limboDocuments;\n      this.limboDocuments = dp(), this.documentSet.forEach(function (t) {\n        e.shouldBeInLimbo(t.key) && (e.limboDocuments = e.limboDocuments.add(t.key));\n      });\n      var r = [];\n      return n.forEach(function (t) {\n        e.limboDocuments.has(t) || r.push(new ig(t));\n      }), this.limboDocuments.forEach(function (t) {\n        n.has(t) || r.push(new rg(t));\n      }), r;\n    }, t.prototype.synchronizeWithPersistedState = function (t, e) {\n      this._syncedDocuments = e, this.limboDocuments = dp();\n      var n = this.computeDocChanges(t);\n      return this.applyChanges(n, !0);\n    }, t.prototype.computeInitialSnapshot = function () {\n      return pm.fromInitialDocuments(this.query, this.documentSet, this.mutatedKeys, this.syncState === sm.Local);\n    }, t;\n  }();\n\n  var ag = \"SyncEngine\",\n      sg = function (t, e, n) {\n    this.query = t, this.targetId = e, this.view = n;\n  },\n      ug = function (t) {\n    this.key = t;\n  },\n      cg = function () {\n    function t(t, e, n, r) {\n      this.localStore = t, this.remoteStore = e, this.sharedClientState = n, this.currentUser = r, this.syncEngineListener = null, this.queryViewsByQuery = new Gp(function (t) {\n        return t.canonicalId();\n      }), this.queryViewsByTarget = {}, this.limboTargetsByKey = new tp(Vf.comparator), this.limboResolutionsByTarget = {}, this.limboDocumentRefs = new Sy(), this.mutationUserCallbacks = {}, this.limboTargetIdGenerator = kp.forSyncEngine(), this.isPrimary = void 0, this.onlineState = Qy.Unknown;\n    }\n\n    return Object.defineProperty(t.prototype, \"isPrimaryClient\", {\n      get: function () {\n        return !0 === this.isPrimary;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.subscribe = function (t) {\n      Ql(null !== t, \"SyncEngine listener cannot be null\"), Ql(null === this.syncEngineListener, \"SyncEngine already has a subscriber.\"), this.syncEngineListener = t;\n    }, t.prototype.listen = function (a) {\n      return fr(this, void 0, void 0, function () {\n        var e, n, r, i, o;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.assertSubscribed(\"listen()\"), (r = this.queryViewsByQuery.get(a)) ? (e = r.targetId, this.sharedClientState.addLocalQueryTarget(e), n = r.view.computeInitialSnapshot(), [3, 4]) : [3, 1];\n\n            case 1:\n              return [4, this.localStore.allocateQuery(a)];\n\n            case 2:\n              return i = t.sent(), o = this.sharedClientState.addLocalQueryTarget(i.targetId), e = i.targetId, [4, this.initializeViewAndComputeSnapshot(i, \"current\" === o)];\n\n            case 3:\n              n = t.sent(), this.isPrimary && this.remoteStore.listen(i), t.label = 4;\n\n            case 4:\n              return this.syncEngineListener.onWatchChange([n]), [2, e];\n          }\n        });\n      });\n    }, t.prototype.initializeViewAndComputeSnapshot = function (s, u) {\n      var c = this,\n          h = s.query;\n      return this.localStore.executeQuery(h).then(function (a) {\n        return c.localStore.remoteDocumentKeys(s.targetId).then(function (t) {\n          var e = new og(h, t),\n              n = e.computeDocChanges(a),\n              r = ym.createSynthesizedTargetChangeForCurrentChange(s.targetId, u && c.onlineState !== Qy.Offline),\n              i = e.applyChanges(n, !0 === c.isPrimary, r);\n          Ql(0 === i.limboChanges.length, \"View returned limbo docs before target ack from the server.\"), Ql(!!i.snapshot, \"applyChanges for new view should always return a snapshot\");\n          var o = new sg(h, s.targetId, e);\n          return c.queryViewsByQuery.set(h, o), c.queryViewsByTarget[s.targetId] = o, i.snapshot;\n        });\n      });\n    }, t.prototype.synchronizeViewAndComputeSnapshot = function (i) {\n      var t = this;\n      return this.localStore.executeQuery(i.query).then(function (r) {\n        return t.localStore.remoteDocumentKeys(i.targetId).then(function (n) {\n          return fr(t, void 0, void 0, function () {\n            var e;\n            return pr(this, function (t) {\n              return e = i.view.synchronizeWithPersistedState(r, n), this.isPrimary && this.updateTrackedLimbos(i.targetId, e.limboChanges), [2, e];\n            });\n          });\n        });\n      });\n    }, t.prototype.unlisten = function (r) {\n      return fr(this, void 0, void 0, function () {\n        var e,\n            n = this;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.assertSubscribed(\"unlisten()\"), Ql(!!(e = this.queryViewsByQuery.get(r)), \"Trying to unlisten on query not found:\" + r), this.isPrimary ? (this.sharedClientState.removeLocalQueryTarget(e.targetId), this.sharedClientState.isActiveQueryTarget(e.targetId) ? [3, 2] : [4, this.localStore.releaseQuery(r, !1).then(function () {\n                n.sharedClientState.clearQueryState(e.targetId), n.remoteStore.unlisten(e.targetId), n.removeAndCleanupQuery(e);\n              }).catch(Bd)]) : [3, 3];\n\n            case 1:\n              t.sent(), t.label = 2;\n\n            case 2:\n              return [3, 5];\n\n            case 3:\n              return this.removeAndCleanupQuery(e), [4, this.localStore.releaseQuery(r, !0)];\n\n            case 4:\n              t.sent(), t.label = 5;\n\n            case 5:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.write = function (t, e) {\n      var n = this;\n      return this.assertSubscribed(\"write()\"), this.localStore.localWrite(t).then(function (t) {\n        return n.sharedClientState.addPendingMutation(t.batchId), n.addMutationCallback(t.batchId, e), n.emitNewSnapsAndNotifyLocalStore(t.changes);\n      }).then(function () {\n        return n.remoteStore.fillWritePipeline();\n      });\n    }, t.prototype.wrapUpdateFunctionError = function (t) {\n      return t;\n    }, t.prototype.runTransaction = function (e, n) {\n      var r = this;\n      void 0 === n && (n = 5), Ql(0 <= n, \"Got negative number of retries for transaction.\");\n      var i = this.remoteStore.createTransaction();\n      return function () {\n        try {\n          var t = e(i);\n          return !qy(t) && t.catch && t.then ? t.catch(function (t) {\n            return Promise.reject(r.wrapUpdateFunctionError(t));\n          }) : Promise.reject(Error(\"Transaction callback must return a Promise\"));\n        } catch (t) {\n          return Promise.reject(r.wrapUpdateFunctionError(t));\n        }\n      }().then(function (t) {\n        return i.commit().then(function () {\n          return t;\n        }).catch(function (t) {\n          return 0 === n ? Promise.reject(t) : r.runTransaction(e, n - 1);\n        });\n      });\n    }, t.prototype.applyRemoteEvent = function (e) {\n      var r = this;\n      return this.assertSubscribed(\"applyRemoteEvent()\"), this.localStore.applyRemoteEvent(e).then(function (t) {\n        return tf(e.targetChanges, function (t, e) {\n          var n = r.limboResolutionsByTarget[Number(t)];\n          n && (Ql(e.addedDocuments.size + e.modifiedDocuments.size + e.removedDocuments.size <= 1, \"Limbo resolution for single document contains multiple changes.\"), 0 < e.addedDocuments.size ? n.receivedDocument = !0 : 0 < e.modifiedDocuments.size ? Ql(n.receivedDocument, \"Received change for limbo target document without add.\") : 0 < e.removedDocuments.size && (Ql(n.receivedDocument, \"Received remove for limbo target document without add.\"), n.receivedDocument = !1));\n        }), r.emitNewSnapsAndNotifyLocalStore(t, e);\n      }).catch(Bd);\n    }, t.prototype.applyOnlineStateChange = function (r, t) {\n      if (this.isPrimary && t === Gy.RemoteStore || !this.isPrimary && t === Gy.SharedClientState) {\n        var i = [];\n        this.queryViewsByQuery.forEach(function (t, e) {\n          var n = e.view.applyOnlineStateChange(r);\n          Ql(0 === n.limboChanges.length, \"OnlineState should not affect limbo documents.\"), n.snapshot && i.push(n.snapshot);\n        }), this.syncEngineListener.onOnlineStateChange(r), this.syncEngineListener.onWatchChange(i), this.onlineState = r, this.isPrimary && this.sharedClientState.setOnlineState(r);\n      }\n    }, t.prototype.rejectListen = function (u, c) {\n      return fr(this, void 0, void 0, function () {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s = this;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.assertSubscribed(\"rejectListens()\"), this.sharedClientState.updateQueryState(u, \"rejected\", c), e = this.limboResolutionsByTarget[u], (n = e && e.key) ? (this.limboTargetsByKey = this.limboTargetsByKey.remove(n), delete this.limboResolutionsByTarget[u], r = (r = new tp(Vf.comparator)).insert(n, new Qp(n, Zf.forDeletedDoc())), i = dp().add(n), o = new dm(Zf.MIN, {}, new ip(Ef), r, i), [2, this.applyRemoteEvent(o)]) : [3, 1];\n\n            case 1:\n              return Ql(!!(a = this.queryViewsByTarget[u]), \"Unknown targetId: \" + u), [4, this.localStore.releaseQuery(a.query, !1).then(function () {\n                return s.removeAndCleanupQuery(a);\n              }).catch(Bd)];\n\n            case 2:\n              t.sent(), this.syncEngineListener.onWatchError(a.query, c), t.label = 3;\n\n            case 3:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.applyBatchState = function (n, r, i) {\n      return fr(this, void 0, void 0, function () {\n        var e;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.assertSubscribed(\"applyBatchState()\"), [4, this.localStore.lookupMutationDocuments(n)];\n\n            case 1:\n              return null === (e = t.sent()) ? (Bl(ag, \"Cannot apply mutation batch with id: \" + n), [2]) : \"pending\" !== r ? [3, 3] : [4, this.remoteStore.fillWritePipeline()];\n\n            case 2:\n              return t.sent(), [3, 4];\n\n            case 3:\n              \"acknowledged\" === r || \"rejected\" === r ? (this.processUserCallback(n, i || null), this.localStore.removeCachedMutationBatchMetadata(n)) : Kl(\"Unknown batchState: \" + r), t.label = 4;\n\n            case 4:\n              return [4, this.emitNewSnapsAndNotifyLocalStore(e)];\n\n            case 5:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.applySuccessfulWrite = function (t) {\n      var e = this;\n      this.assertSubscribed(\"applySuccessfulWrite()\");\n      var n = t.batch.batchId;\n      return this.processUserCallback(n, null), this.localStore.acknowledgeBatch(t).then(function (t) {\n        return e.sharedClientState.updateMutationState(n, \"acknowledged\"), e.emitNewSnapsAndNotifyLocalStore(t);\n      }).catch(Bd);\n    }, t.prototype.rejectFailedWrite = function (e, n) {\n      var r = this;\n      return this.assertSubscribed(\"rejectFailedWrite()\"), this.processUserCallback(e, n), this.localStore.rejectBatch(e).then(function (t) {\n        return r.sharedClientState.updateMutationState(e, \"rejected\", n), r.emitNewSnapsAndNotifyLocalStore(t);\n      }).catch(Bd);\n    }, t.prototype.addMutationCallback = function (t, e) {\n      var n = this.mutationUserCallbacks[this.currentUser.toKey()];\n      n || (n = new tp(Ef)), n = n.insert(t, e), this.mutationUserCallbacks[this.currentUser.toKey()] = n;\n    }, t.prototype.processUserCallback = function (t, e) {\n      var n = this.mutationUserCallbacks[this.currentUser.toKey()];\n\n      if (n) {\n        var r = n.get(t);\n        r && (Ql(t === n.minKey(), \"Mutation callbacks processed out-of-order?\"), e ? r.reject(e) : r.resolve(), n = n.remove(t)), this.mutationUserCallbacks[this.currentUser.toKey()] = n;\n      }\n    }, t.prototype.removeAndCleanupQuery = function (t) {\n      var e = this;\n\n      if (this.sharedClientState.removeLocalQueryTarget(t.targetId), this.queryViewsByQuery.delete(t.query), delete this.queryViewsByTarget[t.targetId], this.isPrimary) {\n        var n = this.limboDocumentRefs.referencesForId(t.targetId);\n        this.limboDocumentRefs.removeReferencesForId(t.targetId), n.forEach(function (t) {\n          e.limboDocumentRefs.containsKey(t) || e.removeLimboTarget(t);\n        });\n      }\n    }, t.prototype.removeLimboTarget = function (t) {\n      var e = this.limboTargetsByKey.get(t);\n      null !== e && (this.remoteStore.unlisten(e), this.limboTargetsByKey = this.limboTargetsByKey.remove(t), delete this.limboResolutionsByTarget[e]);\n    }, t.prototype.updateTrackedLimbos = function (t, e) {\n      for (var n = 0, r = e; n < r.length; n++) {\n        var i = r[n];\n        if (i instanceof rg) this.limboDocumentRefs.addReference(i.key, t), this.trackLimboChange(i);else if (i instanceof ig) {\n          Bl(ag, \"Document no longer in limbo: \" + i.key), this.limboDocumentRefs.removeReference(i.key, t), this.limboDocumentRefs.containsKey(i.key) || this.removeLimboTarget(i.key);\n        } else Kl(\"Unknown limbo change: \" + JSON.stringify(i));\n      }\n    }, t.prototype.trackLimboChange = function (t) {\n      var e = t.key;\n\n      if (!this.limboTargetsByKey.get(e)) {\n        Bl(ag, \"New document in limbo: \" + e);\n        var n = this.limboTargetIdGenerator.next(),\n            r = Cm.atPath(e.path);\n        this.limboResolutionsByTarget[n] = new ug(e), this.remoteStore.listen(new Ad(r, n, Td.LimboResolution, Mf.INVALID)), this.limboTargetsByKey = this.limboTargetsByKey.insert(e, n);\n      }\n    }, t.prototype.currentLimboDocs = function () {\n      return this.limboTargetsByKey;\n    }, t.prototype.emitNewSnapsAndNotifyLocalStore = function (n, u) {\n      return fr(this, void 0, void 0, function () {\n        var o,\n            a,\n            e,\n            s = this;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return o = [], a = [], e = [], this.queryViewsByQuery.forEach(function (t, i) {\n                e.push(Promise.resolve().then(function () {\n                  var e = i.view.computeDocChanges(n);\n                  return e.needsRefill ? s.localStore.executeQuery(i.query).then(function (t) {\n                    return i.view.computeDocChanges(t, e);\n                  }) : e;\n                }).then(function (t) {\n                  var e = u && u.targetChanges[i.targetId],\n                      n = i.view.applyChanges(t, !0 === s.isPrimary, e);\n\n                  if (s.updateTrackedLimbos(i.targetId, n.limboChanges), n.snapshot) {\n                    s.isPrimary && s.sharedClientState.updateQueryState(i.targetId, n.snapshot.fromCache ? \"not-current\" : \"current\"), o.push(n.snapshot);\n                    var r = ng.fromSnapshot(i.targetId, n.snapshot);\n                    a.push(r);\n                  }\n                }));\n              }), [4, Promise.all(e)];\n\n            case 1:\n              return t.sent(), this.syncEngineListener.onWatchChange(o), [4, this.localStore.notifyLocalViewChanges(a)];\n\n            case 2:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.assertSubscribed = function (t) {\n      Ql(null !== this.syncEngineListener, \"Trying to call \" + t + \" before calling subscribe().\");\n    }, t.prototype.handleCredentialChange = function (r) {\n      return fr(this, void 0, void 0, function () {\n        var e, n;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return e = !this.currentUser.isEqual(r), this.currentUser = r, e ? [4, this.localStore.handleUserChange(r)] : [3, 3];\n\n            case 1:\n              return n = t.sent(), this.sharedClientState.handleUserChange(r, n.removedBatchIds, n.addedBatchIds), [4, this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];\n\n            case 2:\n              t.sent(), t.label = 3;\n\n            case 3:\n              return [4, this.remoteStore.handleCredentialChange()];\n\n            case 4:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.applyPrimaryState = function (c) {\n      return fr(this, void 0, void 0, function () {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s,\n            u = this;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return !0 !== c || !0 === this.isPrimary ? [3, 3] : (this.isPrimary = !0, [4, this.remoteStore.applyPrimaryState(!0)]);\n\n            case 1:\n              return t.sent(), e = this.sharedClientState.getAllActiveQueryTargets(), [4, this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];\n\n            case 2:\n              for (n = t.sent(), r = 0, i = n; r < i.length; r++) o = i[r], this.remoteStore.listen(o);\n\n              return [3, 7];\n\n            case 3:\n              return !1 !== c || !1 === this.isPrimary ? [3, 7] : (this.isPrimary = !1, a = [], s = Promise.resolve(), Zl(this.queryViewsByTarget, function (t, e) {\n                u.sharedClientState.isLocalQueryTarget(t) ? a.push(t) : s = s.then(function () {\n                  return u.unlisten(e.query);\n                }), u.remoteStore.unlisten(e.targetId);\n              }), [4, s]);\n\n            case 4:\n              return t.sent(), [4, this.synchronizeQueryViewsAndRaiseSnapshots(a)];\n\n            case 5:\n              return t.sent(), this.resetLimboDocuments(), [4, this.remoteStore.applyPrimaryState(!1)];\n\n            case 6:\n              t.sent(), t.label = 7;\n\n            case 7:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.resetLimboDocuments = function () {\n      var e = this;\n      Zl(this.limboResolutionsByTarget, function (t) {\n        e.remoteStore.unlisten(t);\n      }), this.limboDocumentRefs.removeAllReferences(), this.limboResolutionsByTarget = [], this.limboTargetsByKey = new tp(Vf.comparator);\n    }, t.prototype.synchronizeQueryViewsAndRaiseSnapshots = function (t) {\n      for (var e = this, n = Promise.resolve(), a = [], s = [], r = function (o) {\n        n = n.then(function () {\n          return fr(e, void 0, void 0, function () {\n            var e, n, r, i;\n            return pr(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return (n = this.queryViewsByTarget[o]) ? [4, this.localStore.releaseQuery(n.query, !0)] : [3, 4];\n\n                case 1:\n                  return t.sent(), [4, this.localStore.allocateQuery(n.query)];\n\n                case 2:\n                  return e = t.sent(), [4, this.synchronizeViewAndComputeSnapshot(n)];\n\n                case 3:\n                  return (r = t.sent()).snapshot && s.push(r.snapshot), [3, 8];\n\n                case 4:\n                  return Ql(!0 === this.isPrimary, \"A secondary tab should never have an active query without an active view.\"), [4, this.localStore.getQueryForTarget(o)];\n\n                case 5:\n                  return Ql(!!(i = t.sent()), \"Query data for target \" + o + \" not found\"), [4, this.localStore.allocateQuery(i)];\n\n                case 6:\n                  return e = t.sent(), [4, this.initializeViewAndComputeSnapshot(e, !1)];\n\n                case 7:\n                  t.sent(), t.label = 8;\n\n                case 8:\n                  return a.push(e), [2];\n              }\n            });\n          });\n        });\n      }, i = 0, o = t; i < o.length; i++) {\n        r(o[i]);\n      }\n\n      return n.then(function () {\n        return e.syncEngineListener.onWatchChange(s), a;\n      });\n    }, t.prototype.getActiveClients = function () {\n      return this.localStore.getActiveClients();\n    }, t.prototype.applyTargetState = function (r, o, n) {\n      return fr(this, void 0, void 0, function () {\n        var e,\n            i = this;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (this.isPrimary) return Bl(ag, \"Ignoring unexpected query state notification.\"), [2];\n              if (!this.queryViewsByTarget[r]) return [3, 5];\n\n              switch (o) {\n                case \"current\":\n                case \"not-current\":\n                  return [3, 1];\n\n                case \"rejected\":\n                  return [3, 2];\n              }\n\n              return [3, 4];\n\n            case 1:\n              return [2, this.localStore.getNewDocumentChanges().then(function (n) {\n                return fr(i, void 0, void 0, function () {\n                  var e;\n                  return pr(this, function (t) {\n                    switch (t.label) {\n                      case 0:\n                        return e = dm.createSynthesizedRemoteEventForCurrentChange(r, \"current\" === o), [4, this.emitNewSnapsAndNotifyLocalStore(n, e)];\n\n                      case 1:\n                        return t.sent(), [2];\n                    }\n                  });\n                });\n              }, function (r) {\n                return fr(i, void 0, void 0, function () {\n                  var n;\n                  return pr(this, function (t) {\n                    switch (t.label) {\n                      case 0:\n                        return (e = r).code !== zl.DATA_LOSS || e.message !== Yp ? [3, 2] : (n = [], Zl(this.queryViewsByTarget, function (t) {\n                          return n.push(t);\n                        }), [4, this.synchronizeQueryViewsAndRaiseSnapshots(n)]);\n\n                      case 1:\n                        return t.sent(), [3, 3];\n\n                      case 2:\n                        throw r;\n\n                      case 3:\n                        return [2];\n                    }\n\n                    var e;\n                  });\n                });\n              })];\n\n            case 2:\n              return e = this.queryViewsByTarget[r], this.removeAndCleanupQuery(e), [4, this.localStore.releaseQuery(e.query, !0)];\n\n            case 3:\n              return t.sent(), this.syncEngineListener.onWatchError(e.query, n), [3, 5];\n\n            case 4:\n              Kl(\"Unexpected target state: \" + o), t.label = 5;\n\n            case 5:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.applyActiveTargetsChange = function (l, f) {\n      return fr(this, void 0, void 0, function () {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s,\n            u,\n            c,\n            h = this;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (!this.isPrimary) return [2];\n              e = 0, n = l, t.label = 1;\n\n            case 1:\n              return e < n.length ? (c = n[e], Ql(!this.queryViewsByTarget[c], \"Trying to add an already active target\"), [4, this.localStore.getQueryForTarget(c)]) : [3, 6];\n\n            case 2:\n              return Ql(!!(r = t.sent()), \"Query data for active target \" + c + \" not found\"), [4, this.localStore.allocateQuery(r)];\n\n            case 3:\n              return i = t.sent(), [4, this.initializeViewAndComputeSnapshot(i, !1)];\n\n            case 4:\n              t.sent(), this.remoteStore.listen(i), t.label = 5;\n\n            case 5:\n              return e++, [3, 1];\n\n            case 6:\n              o = function (e) {\n                var n;\n                return pr(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return (n = a.queryViewsByTarget[e]) ? [4, a.localStore.releaseQuery(n.query, !1).then(function () {\n                        h.remoteStore.unlisten(e), h.removeAndCleanupQuery(n);\n                      }).catch(Bd)] : [3, 2];\n\n                    case 1:\n                      t.sent(), t.label = 2;\n\n                    case 2:\n                      return [2];\n                  }\n                });\n              }, a = this, s = 0, u = f, t.label = 7;\n\n            case 7:\n              return s < u.length ? (c = u[s], [5, o(c)]) : [3, 10];\n\n            case 8:\n              t.sent(), t.label = 9;\n\n            case 9:\n              return s++, [3, 7];\n\n            case 10:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.enableNetwork = function () {\n      return this.localStore.setNetworkEnabled(!0), this.remoteStore.enableNetwork();\n    }, t.prototype.disableNetwork = function () {\n      return this.localStore.setNetworkEnabled(!1), this.remoteStore.disableNetwork();\n    }, t.prototype.getRemoteKeysForTarget = function (t) {\n      var e = this.limboResolutionsByTarget[t];\n      return e && e.receivedDocument ? dp().add(e.key) : this.queryViewsByTarget[t] ? this.queryViewsByTarget[t].view.syncedDocuments : dp();\n    }, t;\n  }(),\n      hg = function () {\n    function t(t) {\n      this.uid = t;\n    }\n\n    return t.prototype.isAuthenticated = function () {\n      return null != this.uid;\n    }, t.prototype.toKey = function () {\n      return this.isAuthenticated() ? \"uid:\" + this.uid : \"anonymous-user\";\n    }, t.prototype.isEqual = function (t) {\n      return t.uid === this.uid;\n    }, t.UNAUTHENTICATED = new t(null), t.GOOGLE_CREDENTIALS = new t(\"google-credentials-uid\"), t.FIRST_PARTY = new t(\"first-party-uid\"), t;\n  }(),\n      lg = \"SharedClientState\",\n      fg = \"firestore_clients\",\n      pg = \"firestore_mutations\",\n      dg = \"firestore_targets\",\n      yg = function () {\n    function a(t, e, n, r) {\n      this.user = t, this.batchId = e, this.state = n, Ql(void 0 !== (this.error = r) == (\"rejected\" === n), \"MutationMetadata must contain an error iff state is 'rejected'\");\n    }\n\n    return a.fromWebStorageEntry = function (t, e, n) {\n      var r = JSON.parse(n),\n          i = \"object\" == typeof r && -1 !== [\"pending\", \"acknowledged\", \"rejected\"].indexOf(r.state) && (void 0 === r.error || \"object\" == typeof r.error),\n          o = void 0;\n      return i && r.error && (i = \"string\" == typeof r.error.message && \"string\" == typeof r.error.code) && (o = new Yl(r.error.code, r.error.message)), i ? new a(t, e, r.state, o) : (jl(lg, \"Failed to parse mutation state for ID '\" + e + \"': \" + n), null);\n    }, a.prototype.toWebStorageJSON = function () {\n      var t = {\n        state: this.state,\n        updateTimeMs: Date.now()\n      };\n      return this.error && (t.error = {\n        code: this.error.code,\n        message: this.error.message\n      }), JSON.stringify(t);\n    }, a;\n  }(),\n      mg = function () {\n    function o(t, e, n) {\n      this.targetId = t, this.state = e, Ql(void 0 !== (this.error = n) == (\"rejected\" === e), \"QueryTargetMetadata must contain an error iff state is 'rejected'\");\n    }\n\n    return o.fromWebStorageEntry = function (t, e) {\n      var n = JSON.parse(e),\n          r = \"object\" == typeof n && -1 !== [\"not-current\", \"current\", \"rejected\"].indexOf(n.state) && (void 0 === n.error || \"object\" == typeof n.error),\n          i = void 0;\n      return r && n.error && (r = \"string\" == typeof n.error.message && \"string\" == typeof n.error.code) && (i = new Yl(n.error.code, n.error.message)), r ? new o(t, n.state, i) : (jl(lg, \"Failed to parse target state for ID '\" + t + \"': \" + e), null);\n    }, o.prototype.toWebStorageJSON = function () {\n      var t = {\n        state: this.state,\n        updateTimeMs: Date.now()\n      };\n      return this.error && (t.error = {\n        code: this.error.code,\n        message: this.error.message\n      }), JSON.stringify(t);\n    }, o;\n  }(),\n      gg = function () {\n    function a(t, e) {\n      this.clientId = t, this.activeTargetIds = e;\n    }\n\n    return a.fromWebStorageEntry = function (t, e) {\n      for (var n = JSON.parse(e), r = \"object\" == typeof n && n.activeTargetIds instanceof Array, i = mp(), o = 0; r && o < n.activeTargetIds.length; ++o) r = Vy(n.activeTargetIds[o]), i = i.add(n.activeTargetIds[o]);\n\n      return r ? new a(t, i) : (jl(lg, \"Failed to parse client data for instance '\" + t + \"': \" + e), null);\n    }, a;\n  }(),\n      vg = function () {\n    function n(t, e) {\n      this.clientId = t, this.onlineState = e;\n    }\n\n    return n.fromWebStorageEntry = function (t) {\n      var e = JSON.parse(t);\n      return \"object\" == typeof e && e.onlineState in Qy && \"string\" == typeof e.clientId ? new n(e.clientId, Qy[e.onlineState]) : (jl(lg, \"Failed to parse online state: \" + t), null);\n    }, n;\n  }(),\n      bg = function () {\n    function t() {\n      this.activeTargetIds = mp();\n    }\n\n    return t.prototype.addQueryTarget = function (t) {\n      Ql(!this.activeTargetIds.has(t), \"Target with ID '\" + t + \"' already active.\"), this.activeTargetIds = this.activeTargetIds.add(t);\n    }, t.prototype.removeQueryTarget = function (t) {\n      this.activeTargetIds = this.activeTargetIds.delete(t);\n    }, t.prototype.toWebStorageJSON = function () {\n      var t = {\n        activeTargetIds: this.activeTargetIds.toArray(),\n        updateTimeMs: Date.now()\n      };\n      return JSON.stringify(t);\n    }, t;\n  }(),\n      wg = function () {\n    function a(t, e, n, r, i) {\n      if (this.queue = t, this.platform = e, this.persistenceKey = n, this.localClientId = r, this.syncEngine = null, this.onlineStateHandler = null, this.sequenceNumberHandler = null, this.activeClients = {}, this.storageListener = this.handleWebStorageEvent.bind(this), this.started = !1, this.earlyEvents = [], !a.isAvailable(this.platform)) throw new Yl(zl.UNIMPLEMENTED, \"LocalStorage is not available on this platform.\");\n      var o = n.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n      this.storage = this.platform.window.localStorage, this.currentUser = i, this.localClientStorageKey = this.toWebStorageClientStateKey(this.localClientId), this.sequenceNumberKey = \"firestore_sequence_number_\" + n, this.activeClients[this.localClientId] = new bg(), this.clientStateKeyRe = new RegExp(\"^\" + fg + \"_\" + o + \"_([^_]*)$\"), this.mutationBatchKeyRe = new RegExp(\"^\" + pg + \"_\" + o + \"_(\\\\d+)(?:_(.*))?$\"), this.queryTargetKeyRe = new RegExp(\"^\" + dg + \"_\" + o + \"_(\\\\d+)$\"), this.onlineStateKey = \"firestore_online_state_\" + n, this.platform.window.addEventListener(\"storage\", this.storageListener);\n    }\n\n    return a.isAvailable = function (t) {\n      return !(!t.window || null == t.window.localStorage);\n    }, a.prototype.start = function () {\n      return fr(this, void 0, void 0, function () {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s,\n            u,\n            c,\n            h,\n            l,\n            f = this;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return Ql(!this.started, \"WebStorageSharedClientState already started\"), Ql(null !== this.syncEngine, \"syncEngine property must be set before calling start()\"), Ql(null !== this.onlineStateHandler, \"onlineStateHandler property must be set before calling start()\"), [4, this.syncEngine.getActiveClients()];\n\n            case 1:\n              for (e = t.sent(), n = 0, r = e; n < r.length; n++) (i = r[n]) !== this.localClientId && (o = this.getItem(this.toWebStorageClientStateKey(i))) && (a = gg.fromWebStorageEntry(i, o)) && (this.activeClients[a.clientId] = a);\n\n              for (this.persistClientState(), (s = this.storage.getItem(this.onlineStateKey)) && (u = this.fromWebStorageOnlineState(s)) && this.handleOnlineStateEvent(u), c = 0, h = this.earlyEvents; c < h.length; c++) l = h[c], this.handleWebStorageEvent(l);\n\n              return this.earlyEvents = [], this.platform.window.addEventListener(\"unload\", function () {\n                return f.shutdown();\n              }), this.started = !0, [2];\n          }\n        });\n      });\n    }, a.prototype.writeSequenceNumber = function (t) {\n      this.setItem(this.sequenceNumberKey, JSON.stringify(t));\n    }, a.prototype.getAllActiveQueryTargets = function () {\n      var n = mp();\n      return tf(this.activeClients, function (t, e) {\n        n = n.unionWith(e.activeTargetIds);\n      }), n;\n    }, a.prototype.isActiveQueryTarget = function (t) {\n      for (var e in this.activeClients) if (this.activeClients.hasOwnProperty(e) && this.activeClients[e].activeTargetIds.has(t)) return !0;\n\n      return !1;\n    }, a.prototype.addPendingMutation = function (t) {\n      this.persistMutationState(t, \"pending\");\n    }, a.prototype.updateMutationState = function (t, e, n) {\n      this.persistMutationState(t, e, n), this.removeMutationState(t);\n    }, a.prototype.addLocalQueryTarget = function (t) {\n      var e = \"not-current\";\n\n      if (this.isActiveQueryTarget(t)) {\n        var n = this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));\n\n        if (n) {\n          var r = mg.fromWebStorageEntry(t, n);\n          r && (e = r.state);\n        }\n      }\n\n      return this.localClientState.addQueryTarget(t), this.persistClientState(), e;\n    }, a.prototype.removeLocalQueryTarget = function (t) {\n      this.localClientState.removeQueryTarget(t), this.persistClientState();\n    }, a.prototype.isLocalQueryTarget = function (t) {\n      return this.localClientState.activeTargetIds.has(t);\n    }, a.prototype.clearQueryState = function (t) {\n      this.removeItem(this.toWebStorageQueryTargetMetadataKey(t));\n    }, a.prototype.updateQueryState = function (t, e, n) {\n      this.persistQueryTargetState(t, e, n);\n    }, a.prototype.handleUserChange = function (t, e, n) {\n      var r = this;\n      e.forEach(function (t) {\n        r.removeMutationState(t);\n      }), this.currentUser = t, n.forEach(function (t) {\n        r.addPendingMutation(t);\n      });\n    }, a.prototype.setOnlineState = function (t) {\n      this.persistOnlineState(t);\n    }, a.prototype.shutdown = function () {\n      this.started && (this.platform.window.removeEventListener(\"storage\", this.storageListener), this.removeItem(this.localClientStorageKey), this.started = !1);\n    }, a.prototype.getItem = function (t) {\n      var e = this.storage.getItem(t);\n      return Bl(lg, \"READ\", t, e), e;\n    }, a.prototype.setItem = function (t, e) {\n      Bl(lg, \"SET\", t, e), this.storage.setItem(t, e);\n    }, a.prototype.removeItem = function (t) {\n      Bl(lg, \"REMOVE\", t), this.storage.removeItem(t);\n    }, a.prototype.handleWebStorageEvent = function (s) {\n      var t = this;\n\n      if (s.storageArea === this.storage) {\n        if (Bl(lg, \"EVENT\", s.key, s.newValue), s.key === this.localClientStorageKey) return void jl(\"Received WebStorage notification for local change. Another client might have garbage-collected our state\");\n        this.queue.enqueueAndForget(function () {\n          return fr(t, void 0, void 0, function () {\n            var e, n, r, i, o, a;\n            return pr(this, function (t) {\n              if (!this.started) return this.earlyEvents.push(s), [2];\n              if (null === s.key) return [2];\n\n              if (this.clientStateKeyRe.test(s.key)) {\n                if (null == s.newValue) return n = this.fromWebStorageClientStateKey(s.key), [2, this.handleClientStateEvent(n, null)];\n                if (e = this.fromWebStorageClientState(s.key, s.newValue)) return [2, this.handleClientStateEvent(e.clientId, e)];\n              } else if (this.mutationBatchKeyRe.test(s.key)) {\n                if (null !== s.newValue && (r = this.fromWebStorageMutationMetadata(s.key, s.newValue))) return [2, this.handleMutationBatchEvent(r)];\n              } else if (this.queryTargetKeyRe.test(s.key)) {\n                if (null !== s.newValue && (i = this.fromWebStorageQueryTargetMetadata(s.key, s.newValue))) return [2, this.handleQueryTargetEvent(i)];\n              } else if (s.key === this.onlineStateKey) {\n                if (null !== s.newValue && (o = this.fromWebStorageOnlineState(s.newValue))) return [2, this.handleOnlineStateEvent(o)];\n              } else s.key === this.sequenceNumberKey && (Ql(!!this.sequenceNumberHandler, \"Missing sequenceNumberHandler\"), (a = function (t) {\n                var e = Mf.INVALID;\n                if (null != t) try {\n                  var n = JSON.parse(t);\n                  Ql(\"number\" == typeof n, \"Found non-numeric sequence number\"), e = n;\n                } catch (t) {\n                  jl(lg, \"Failed to read sequence number from WebStorage\", t);\n                }\n                return e;\n              }(s.newValue)) !== Mf.INVALID && this.sequenceNumberHandler(a));\n\n              return [2];\n            });\n          });\n        });\n      }\n    }, Object.defineProperty(a.prototype, \"localClientState\", {\n      get: function () {\n        return this.activeClients[this.localClientId];\n      },\n      enumerable: !0,\n      configurable: !0\n    }), a.prototype.persistClientState = function () {\n      this.setItem(this.localClientStorageKey, this.localClientState.toWebStorageJSON());\n    }, a.prototype.persistMutationState = function (t, e, n) {\n      var r = new yg(this.currentUser, t, e, n),\n          i = this.toWebStorageMutationBatchKey(t);\n      this.setItem(i, r.toWebStorageJSON());\n    }, a.prototype.removeMutationState = function (t) {\n      var e = this.toWebStorageMutationBatchKey(t);\n      this.removeItem(e);\n    }, a.prototype.persistOnlineState = function (t) {\n      var e = {\n        clientId: this.localClientId,\n        onlineState: Qy[t]\n      };\n      this.storage.setItem(this.onlineStateKey, JSON.stringify(e));\n    }, a.prototype.persistQueryTargetState = function (t, e, n) {\n      var r = this.toWebStorageQueryTargetMetadataKey(t),\n          i = new mg(t, e, n);\n      this.setItem(r, i.toWebStorageJSON());\n    }, a.prototype.toWebStorageClientStateKey = function (t) {\n      return Ql(-1 === t.indexOf(\"_\"), \"Client key cannot contain '_', but was '\" + t + \"'\"), fg + \"_\" + this.persistenceKey + \"_\" + t;\n    }, a.prototype.toWebStorageQueryTargetMetadataKey = function (t) {\n      return dg + \"_\" + this.persistenceKey + \"_\" + t;\n    }, a.prototype.toWebStorageMutationBatchKey = function (t) {\n      var e = pg + \"_\" + this.persistenceKey + \"_\" + t;\n      return this.currentUser.isAuthenticated() && (e += \"_\" + this.currentUser.uid), e;\n    }, a.prototype.fromWebStorageClientStateKey = function (t) {\n      var e = this.clientStateKeyRe.exec(t);\n      return e ? e[1] : null;\n    }, a.prototype.fromWebStorageClientState = function (t, e) {\n      var n = this.fromWebStorageClientStateKey(t);\n      return Ql(null !== n, \"Cannot parse client state key '\" + t + \"'\"), gg.fromWebStorageEntry(n, e);\n    }, a.prototype.fromWebStorageMutationMetadata = function (t, e) {\n      var n = this.mutationBatchKeyRe.exec(t);\n      Ql(null !== n, \"Cannot parse mutation batch key '\" + t + \"'\");\n      var r = Number(n[1]),\n          i = void 0 !== n[2] ? n[2] : null;\n      return yg.fromWebStorageEntry(new hg(i), r, e);\n    }, a.prototype.fromWebStorageQueryTargetMetadata = function (t, e) {\n      var n = this.queryTargetKeyRe.exec(t);\n      Ql(null !== n, \"Cannot parse query target key '\" + t + \"'\");\n      var r = Number(n[1]);\n      return mg.fromWebStorageEntry(r, e);\n    }, a.prototype.fromWebStorageOnlineState = function (t) {\n      return vg.fromWebStorageEntry(t);\n    }, a.prototype.handleMutationBatchEvent = function (e) {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          return e.user.uid !== this.currentUser.uid ? (Bl(lg, \"Ignoring mutation for non-active user \" + e.user.uid), [2]) : [2, this.syncEngine.applyBatchState(e.batchId, e.state, e.error)];\n        });\n      });\n    }, a.prototype.handleQueryTargetEvent = function (t) {\n      return this.syncEngine.applyTargetState(t.targetId, t.state, t.error);\n    }, a.prototype.handleClientStateEvent = function (t, e) {\n      var n = this,\n          r = this.getAllActiveQueryTargets();\n      e ? this.activeClients[t] = e : delete this.activeClients[t];\n      var i = this.getAllActiveQueryTargets(),\n          o = [],\n          a = [];\n      return i.forEach(function (e) {\n        return fr(n, void 0, void 0, function () {\n          return pr(this, function (t) {\n            return r.has(e) || o.push(e), [2];\n          });\n        });\n      }), r.forEach(function (e) {\n        return fr(n, void 0, void 0, function () {\n          return pr(this, function (t) {\n            return i.has(e) || a.push(e), [2];\n          });\n        });\n      }), this.syncEngine.applyActiveTargetsChange(o, a);\n    }, a.prototype.handleOnlineStateEvent = function (t) {\n      this.activeClients[t.clientId] && this.onlineStateHandler(t.onlineState);\n    }, a;\n  }();\n\n  var _g = function () {\n    function t() {\n      this.localState = new bg(), this.queryState = {}, this.syncEngine = null, this.onlineStateHandler = null, this.sequenceNumberHandler = null;\n    }\n\n    return t.prototype.addPendingMutation = function (t) {}, t.prototype.updateMutationState = function (t, e, n) {}, t.prototype.addLocalQueryTarget = function (t) {\n      return this.localState.addQueryTarget(t), this.queryState[t] || \"not-current\";\n    }, t.prototype.updateQueryState = function (t, e, n) {\n      this.queryState[t] = e;\n    }, t.prototype.removeLocalQueryTarget = function (t) {\n      this.localState.removeQueryTarget(t);\n    }, t.prototype.isLocalQueryTarget = function (t) {\n      return this.localState.activeTargetIds.has(t);\n    }, t.prototype.clearQueryState = function (t) {\n      delete this.queryState[t];\n    }, t.prototype.getAllActiveQueryTargets = function () {\n      return this.localState.activeTargetIds;\n    }, t.prototype.isActiveQueryTarget = function (t) {\n      return this.localState.activeTargetIds.has(t);\n    }, t.prototype.start = function () {\n      return this.localState = new bg(), Promise.resolve();\n    }, t.prototype.handleUserChange = function (t, e, n) {}, t.prototype.setOnlineState = function (t) {}, t.prototype.shutdown = function () {}, t.prototype.writeSequenceNumber = function (t) {}, t;\n  }(),\n      Eg = \"FirestoreClient\",\n      Tg = function () {\n    function t(t, e) {\n      this.cacheSizeBytes = t, this.synchronizeTabs = e;\n    }\n\n    return t.prototype.lruParams = function () {\n      return Pd.withCacheSize(this.cacheSizeBytes);\n    }, t;\n  }(),\n      Sg = function () {},\n      Ig = function () {\n    function t(t, e, n, r) {\n      this.platform = t, this.databaseInfo = e, this.credentials = n, this.asyncQueue = r, this.clientId = _f.newId(), this._clientShutdown = !1;\n    }\n\n    return t.prototype.start = function (t) {\n      var n = this;\n      this.verifyNotShutdown();\n      var r = new Bf(),\n          i = new Bf(),\n          o = !1;\n      return this.credentials.setChangeListener(function (e) {\n        o ? n.asyncQueue.enqueueAndForget(function () {\n          return n.handleCredentialChange(e);\n        }) : (o = !0, n.initializePersistence(t, i, e).then(function (t) {\n          return n.initializeRest(e, t);\n        }).then(r.resolve, r.reject));\n      }), this.asyncQueue.enqueueAndForget(function () {\n        return r.promise;\n      }), i.promise;\n    }, t.prototype.enableNetwork = function () {\n      var t = this;\n      return this.verifyNotShutdown(), this.asyncQueue.enqueue(function () {\n        return t.syncEngine.enableNetwork();\n      });\n    }, t.prototype.initializePersistence = function (t, e, n) {\n      var r = this;\n      return t instanceof Tg ? this.startIndexedDbPersistence(n, t).then(function (t) {\n        return e.resolve(), t;\n      }).catch(function (t) {\n        if (e.reject(t), !r.canFallback(t)) throw t;\n        return console.warn(\"Error enabling offline persistence. Falling back to persistence disabled: \" + t), r.startMemoryPersistence();\n      }) : (e.resolve(), this.startMemoryPersistence());\n    }, t.prototype.canFallback = function (t) {\n      return t instanceof Yl ? t.code === zl.FAILED_PRECONDITION || t.code === zl.UNIMPLEMENTED : !(\"undefined\" != typeof DOMException && t instanceof DOMException) || 22 === t.code || 20 === t.code || 11 === t.code;\n    }, t.prototype.verifyNotShutdown = function () {\n      if (this._clientShutdown) throw new Yl(zl.FAILED_PRECONDITION, \"The client has already been shutdown.\");\n    }, t.prototype.startIndexedDbPersistence = function (r, i) {\n      var t = this,\n          o = Vd.buildStoragePrefix(this.databaseInfo),\n          a = new $m(this.databaseInfo.databaseId, {\n        useProto3Json: !0\n      });\n      return Promise.resolve().then(function () {\n        return fr(t, void 0, void 0, function () {\n          var e, n;\n          return pr(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (i.synchronizeTabs && !wg.isAvailable(this.platform)) throw new Yl(zl.UNIMPLEMENTED, \"IndexedDB persistence is only available on platforms that support LocalStorage.\");\n                return n = i.lruParams(), i.synchronizeTabs ? (this.sharedClientState = new wg(this.asyncQueue, this.platform, o, this.clientId, r), [4, Vd.createMultiClientIndexedDbPersistence(o, this.clientId, this.platform, this.asyncQueue, a, n, {\n                  sequenceNumberSyncer: this.sharedClientState\n                })]) : [3, 2];\n\n              case 1:\n                return e = t.sent(), [3, 4];\n\n              case 2:\n                return this.sharedClientState = new _g(), [4, Vd.createIndexedDbPersistence(o, this.clientId, this.platform, this.asyncQueue, a, n)];\n\n              case 3:\n                e = t.sent(), t.label = 4;\n\n              case 4:\n                return [2, (this.persistence = e).referenceDelegate.garbageCollector];\n            }\n          });\n        });\n      });\n    }, t.prototype.startMemoryPersistence = function () {\n      return this.persistence = Ry.createEagerPersistence(this.clientId), this.sharedClientState = new _g(), Promise.resolve(null);\n    }, t.prototype.initializeRest = function (u, c) {\n      var t = this;\n      return Bl(Eg, \"Initializing. user=\", u.uid), this.platform.loadConnection(this.databaseInfo).then(function (s) {\n        return fr(t, void 0, void 0, function () {\n          var e,\n              n,\n              r,\n              i,\n              o,\n              a = this;\n          return pr(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.localStore = new Cy(this.persistence, u), c && (this.lruScheduler = new Md(c, this.asyncQueue, this.localStore)), e = this.platform.newConnectivityMonitor(), n = this.platform.newSerializer(this.databaseInfo.databaseId), r = new $y(this.asyncQueue, s, this.credentials, n), i = function (t) {\n                  return a.syncEngine.applyOnlineStateChange(t, Gy.RemoteStore);\n                }, o = function (t) {\n                  return a.syncEngine.applyOnlineStateChange(t, Gy.SharedClientState);\n                }, this.remoteStore = new Sm(this.localStore, r, this.asyncQueue, i, e), this.syncEngine = new cg(this.localStore, this.remoteStore, this.sharedClientState, u), this.sharedClientState.onlineStateHandler = o, this.remoteStore.syncEngine = this.syncEngine, this.sharedClientState.syncEngine = this.syncEngine, this.eventMgr = new tg(this.syncEngine), [4, this.sharedClientState.start()];\n\n              case 1:\n                return t.sent(), [4, this.remoteStore.start()];\n\n              case 2:\n                return t.sent(), [4, this.persistence.setPrimaryStateListener(function (e) {\n                  return fr(a, void 0, void 0, function () {\n                    return pr(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, this.syncEngine.applyPrimaryState(e)];\n\n                        case 1:\n                          return t.sent(), this.lruScheduler && (e && !this.lruScheduler.started ? this.lruScheduler.start() : e || this.lruScheduler.stop()), [2];\n                      }\n                    });\n                  });\n                })];\n\n              case 3:\n                return t.sent(), [4, this.persistence.setDatabaseDeletedListener(function () {\n                  return fr(a, void 0, void 0, function () {\n                    return pr(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, this.shutdown()];\n\n                        case 1:\n                          return t.sent(), [2];\n                      }\n                    });\n                  });\n                })];\n\n              case 4:\n                return t.sent(), [2];\n            }\n          });\n        });\n      });\n    }, t.prototype.handleCredentialChange = function (t) {\n      return this.asyncQueue.verifyOperationInProgress(), Bl(Eg, \"Credential Changed. Current user: \" + t.uid), this.syncEngine.handleCredentialChange(t);\n    }, t.prototype.disableNetwork = function () {\n      var t = this;\n      return this.verifyNotShutdown(), this.asyncQueue.enqueue(function () {\n        return t.syncEngine.disableNetwork();\n      });\n    }, t.prototype.shutdown = function () {\n      var t = this;\n      return this.asyncQueue.enqueue(function () {\n        return fr(t, void 0, void 0, function () {\n          return pr(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this._clientShutdown ? [3, 4] : (this.lruScheduler && this.lruScheduler.stop(), [4, this.remoteStore.shutdown()]);\n\n              case 1:\n                return t.sent(), [4, this.sharedClientState.shutdown()];\n\n              case 2:\n                return t.sent(), [4, this.persistence.shutdown()];\n\n              case 3:\n                t.sent(), this.credentials.removeChangeListener(), this._clientShutdown = !0, t.label = 4;\n\n              case 4:\n                return [2];\n            }\n          });\n        });\n      });\n    }, t.prototype.listen = function (t, e, n) {\n      var r = this;\n      this.verifyNotShutdown();\n      var i = new eg(t, e, n);\n      return this.asyncQueue.enqueueAndForget(function () {\n        return r.eventMgr.listen(i);\n      }), i;\n    }, t.prototype.unlisten = function (t) {\n      var e = this;\n      this.verifyNotShutdown(), this.asyncQueue.enqueueAndForget(function () {\n        return e.eventMgr.unlisten(t);\n      });\n    }, t.prototype.getDocumentFromLocalCache = function (t) {\n      var e = this;\n      return this.verifyNotShutdown(), this.asyncQueue.enqueue(function () {\n        return e.localStore.readDocument(t);\n      }).then(function (t) {\n        if (t instanceof Kp) return t;\n        if (t instanceof Qp) return null;\n        throw new Yl(zl.UNAVAILABLE, \"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)\");\n      });\n    }, t.prototype.getDocumentsFromLocalCache = function (i) {\n      var t = this;\n      return this.verifyNotShutdown(), this.asyncQueue.enqueue(function () {\n        return t.localStore.executeQuery(i);\n      }).then(function (t) {\n        var e = dp(),\n            n = new og(i, e),\n            r = n.computeDocChanges(t);\n        return n.applyChanges(r, !1).snapshot;\n      });\n    }, t.prototype.write = function (t) {\n      var e = this;\n      this.verifyNotShutdown();\n      var n = new Bf();\n      return this.asyncQueue.enqueueAndForget(function () {\n        return e.syncEngine.write(t, n);\n      }), n.promise;\n    }, t.prototype.databaseId = function () {\n      return this.databaseInfo.databaseId;\n    }, Object.defineProperty(t.prototype, \"clientShutdown\", {\n      get: function () {\n        return this._clientShutdown;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.transaction = function (t) {\n      var e = this;\n      return this.verifyNotShutdown(), this.asyncQueue.enqueue(function () {\n        return fr(e, void 0, void 0, function () {\n          return pr(this, function (t) {\n            return [2];\n          });\n        });\n      }).then(function () {\n        return e.syncEngine.runTransaction(t);\n      });\n    }, t;\n  }(),\n      Cg = function () {\n    function t(t) {\n      this.observer = t, this.muted = !1;\n    }\n\n    return t.prototype.next = function (t) {\n      this.scheduleEvent(this.observer.next, t);\n    }, t.prototype.error = function (t) {\n      this.scheduleEvent(this.observer.error, t);\n    }, t.prototype.mute = function () {\n      this.muted = !0;\n    }, t.prototype.scheduleEvent = function (t, e) {\n      var n = this;\n      this.muted || setTimeout(function () {\n        n.muted || t(e);\n      }, 0);\n    }, t;\n  }(),\n      Ng = function () {\n    function e() {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      !function (t, e, n, r) {\n        if (!(e instanceof Array) || e.length < r) throw new Yl(zl.INVALID_ARGUMENT, \"Function \" + t + \"() requires its \" + n + \" argument to be an array with at least \" + wf(r, \"element\") + \".\");\n      }(\"FieldPath\", t, \"fieldNames\", 1);\n\n      for (var n = 0; n < t.length; ++n) if (sf(\"FieldPath\", \"string\", n, t[n]), 0 === t[n].length) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid field name at argument $(i + 1). Field names must not be empty.\");\n\n      this._internalPath = new qf(t);\n    }\n\n    return e.documentId = function () {\n      return e._DOCUMENT_ID;\n    }, e.prototype.isEqual = function (t) {\n      if (!(t instanceof e)) throw vf(\"isEqual\", \"FieldPath\", 1, t);\n      return this._internalPath.isEqual(t._internalPath);\n    }, e._DOCUMENT_ID = new e(qf.keyField().canonicalString()), e;\n  }(),\n      Ag = new RegExp(\"[~\\\\*/\\\\[\\\\]]\");\n\n  var kg = function (t, e) {\n    this.user = e, this.type = \"OAuth\", this.authHeaders = {\n      Authorization: \"Bearer \" + t\n    };\n  },\n      Dg = function () {\n    function t() {\n      this.changeListener = null;\n    }\n\n    return t.prototype.getToken = function () {\n      return Promise.resolve(null);\n    }, t.prototype.invalidateToken = function () {}, t.prototype.setChangeListener = function (t) {\n      Ql(!this.changeListener, \"Can only call setChangeListener() once.\"), (this.changeListener = t)(hg.UNAUTHENTICATED);\n    }, t.prototype.removeChangeListener = function () {\n      Ql(null !== this.changeListener, \"removeChangeListener() when no listener registered\"), this.changeListener = null;\n    }, t;\n  }(),\n      Rg = function () {\n    function t(t) {\n      var e = this;\n      this.app = t, this.tokenListener = null, this.tokenCounter = 0, this.changeListener = null, this.forceRefresh = !1, this.tokenListener = function () {\n        e.tokenCounter++, e.currentUser = e.getUser(), e.changeListener && e.changeListener(e.currentUser);\n      }, this.tokenCounter = 0, this.app.INTERNAL.addAuthTokenListener(this.tokenListener);\n    }\n\n    return t.prototype.getToken = function () {\n      var e = this;\n      Ql(null != this.tokenListener, \"getToken cannot be called after listener removed.\");\n      var n = this.tokenCounter,\n          t = this.forceRefresh;\n      return this.forceRefresh = !1, this.app.INTERNAL.getToken(t).then(function (t) {\n        if (e.tokenCounter !== n) throw new Yl(zl.ABORTED, \"getToken aborted due to token change.\");\n        return t ? (Ql(\"string\" == typeof t.accessToken, \"Invalid tokenData returned from getToken():\" + t), new kg(t.accessToken, e.currentUser)) : null;\n      });\n    }, t.prototype.invalidateToken = function () {\n      this.forceRefresh = !0;\n    }, t.prototype.setChangeListener = function (t) {\n      Ql(!this.changeListener, \"Can only call setChangeListener() once.\"), this.changeListener = t, this.currentUser && t(this.currentUser);\n    }, t.prototype.removeChangeListener = function () {\n      Ql(null != this.tokenListener, \"removeChangeListener() called twice\"), Ql(null !== this.changeListener, \"removeChangeListener() called when no listener registered\"), this.app.INTERNAL.removeAuthTokenListener(this.tokenListener), this.tokenListener = null, this.changeListener = null;\n    }, t.prototype.getUser = function () {\n      var t = this.app.INTERNAL.getUid();\n      return Ql(null === t || \"string\" == typeof t, \"Received invalid UID: \" + t), new hg(t);\n    }, t;\n  }(),\n      Og = function () {\n    function t(t, e) {\n      this.gapi = t, this.sessionIndex = e, this.type = \"FirstParty\", this.user = hg.FIRST_PARTY;\n    }\n\n    return Object.defineProperty(t.prototype, \"authHeaders\", {\n      get: function () {\n        var t = {\n          \"X-Goog-AuthUser\": this.sessionIndex\n        },\n            e = this.gapi.auth.getAuthHeaderValueForFirstParty([]);\n        return e && (t.Authorization = e), t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t;\n  }(),\n      Pg = function () {\n    function t(t, e) {\n      this.gapi = t, this.sessionIndex = e;\n    }\n\n    return t.prototype.getToken = function () {\n      return Promise.resolve(new Og(this.gapi, this.sessionIndex));\n    }, t.prototype.setChangeListener = function (t) {\n      t(hg.FIRST_PARTY);\n    }, t.prototype.removeChangeListener = function () {}, t.prototype.invalidateToken = function () {}, t;\n  }();\n\n  function Mg(t) {\n    return function (t, e) {\n      if (\"object\" != typeof t || null === t) return !1;\n\n      for (var n = t, r = 0, i = e; r < i.length; r++) {\n        var o = i[r];\n        if (o in n && \"function\" == typeof n[o]) return !0;\n      }\n\n      return !1;\n    }(t, [\"next\", \"error\", \"complete\"]);\n  }\n\n  var xg,\n      Lg,\n      Fg = function () {\n    function t(t) {\n      this._methodName = t;\n    }\n\n    return t.delete = function () {\n      return nf(\"FieldValue.delete\", arguments), Ug.instance;\n    }, t.serverTimestamp = function () {\n      return nf(\"FieldValue.serverTimestamp\", arguments), qg.instance;\n    }, t.arrayUnion = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      return of(\"FieldValue.arrayUnion\", arguments, 1), new Vg(t);\n    }, t.arrayRemove = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      return of(\"FieldValue.arrayRemove\", arguments, 1), new Bg(t);\n    }, t.increment = function (t) {\n      return sf(\"FieldValue.increment\", \"number\", 1, t), rf(\"FieldValue.increment\", arguments, 1), new jg(t);\n    }, t.prototype.isEqual = function (t) {\n      return this === t;\n    }, t;\n  }(),\n      Ug = function (t) {\n    function e() {\n      return t.call(this, \"FieldValue.delete\") || this;\n    }\n\n    return hr(e, t), e.instance = new e(), e;\n  }(Fg),\n      qg = function (t) {\n    function e() {\n      return t.call(this, \"FieldValue.serverTimestamp\") || this;\n    }\n\n    return hr(e, t), e.instance = new e(), e;\n  }(Fg),\n      Vg = function (n) {\n    function t(t) {\n      var e = n.call(this, \"FieldValue.arrayUnion\") || this;\n      return e._elements = t, e;\n    }\n\n    return hr(t, n), t;\n  }(Fg),\n      Bg = function (n) {\n    function t(t) {\n      var e = n.call(this, \"FieldValue.arrayRemove\") || this;\n      return e._elements = t, e;\n    }\n\n    return hr(t, n), t;\n  }(Fg),\n      jg = function (n) {\n    function t(t) {\n      var e = n.call(this, \"FieldValue.increment\") || this;\n      return e._operand = t, e;\n    }\n\n    return hr(t, n), t;\n  }(Fg),\n      Wg = Xl(Fg, \"Use FieldValue.<field>() instead.\"),\n      Kg = /^__.*__$/,\n      Qg = function () {\n    function t(t, e, n) {\n      this.data = t, this.fieldMask = e, this.fieldTransforms = n;\n    }\n\n    return t.prototype.toMutations = function (t, e) {\n      var n = [];\n      return null !== this.fieldMask ? n.push(new wy(t, this.data, this.fieldMask, e)) : n.push(new by(t, this.data, e)), 0 < this.fieldTransforms.length && n.push(new _y(t, this.fieldTransforms)), n;\n    }, t;\n  }(),\n      Hg = function () {\n    function t(t, e, n) {\n      this.data = t, this.fieldMask = e, this.fieldTransforms = n;\n    }\n\n    return t.prototype.toMutations = function (t, e) {\n      var n = [new wy(t, this.data, this.fieldMask, e)];\n      return 0 < this.fieldTransforms.length && n.push(new _y(t, this.fieldTransforms)), n;\n    }, t;\n  }();\n\n  function Gg(t) {\n    switch (t) {\n      case xg.Set:\n      case xg.MergeSet:\n      case xg.Update:\n        return !0;\n\n      case xg.Argument:\n        return !1;\n\n      default:\n        throw Kl(\"Unexpected case for UserDataSource: \" + t);\n    }\n  }\n\n  (Lg = xg || (xg = {}))[Lg.Set = 0] = \"Set\", Lg[Lg.Update = 1] = \"Update\", Lg[Lg.MergeSet = 2] = \"MergeSet\", Lg[Lg.Argument = 3] = \"Argument\";\n\n  var zg = function () {\n    function r(t, e, n, r, i, o) {\n      this.dataSource = t, this.methodName = e, this.path = n, this.arrayElement = r, void 0 === i && this.validatePath(), this.arrayElement = void 0 !== r && r, this.fieldTransforms = i || [], this.fieldMask = o || [];\n    }\n\n    return r.prototype.childContextForField = function (t) {\n      var e = null == this.path ? null : this.path.child(t),\n          n = new r(this.dataSource, this.methodName, e, !1, this.fieldTransforms, this.fieldMask);\n      return n.validatePathSegment(t), n;\n    }, r.prototype.childContextForFieldPath = function (t) {\n      var e = null == this.path ? null : this.path.child(t),\n          n = new r(this.dataSource, this.methodName, e, !1, this.fieldTransforms, this.fieldMask);\n      return n.validatePath(), n;\n    }, r.prototype.childContextForArray = function (t) {\n      return new r(this.dataSource, this.methodName, null, !0, this.fieldTransforms, this.fieldMask);\n    }, r.prototype.createError = function (t) {\n      var e = null === this.path || this.path.isEmpty() ? \"\" : \" (found in field \" + this.path.toString() + \")\";\n      return new Yl(zl.INVALID_ARGUMENT, \"Function \" + this.methodName + \"() called with invalid data. \" + t + e);\n    }, r.prototype.contains = function (e) {\n      return void 0 !== this.fieldMask.find(function (t) {\n        return e.isPrefixOf(t);\n      }) || void 0 !== this.fieldTransforms.find(function (t) {\n        return e.isPrefixOf(t.field);\n      });\n    }, r.prototype.validatePath = function () {\n      if (null !== this.path) for (var t = 0; t < this.path.length; t++) this.validatePathSegment(this.path.get(t));\n    }, r.prototype.validatePathSegment = function (t) {\n      if (Gg(this.dataSource) && Kg.test(t)) throw this.createError(\"Document fields cannot begin and end with __\");\n    }, r;\n  }(),\n      Yg = function (t, e) {\n    this.databaseId = t, this.key = e;\n  },\n      Xg = function () {\n    function t(t) {\n      this.preConverter = t;\n    }\n\n    return t.prototype.parseSetData = function (t, e) {\n      var n = new zg(xg.Set, t, qf.EMPTY_PATH);\n      $g(\"Data must be an object, but it was:\", n, e);\n      var r = this.parseData(e, n);\n      return new Qg(r, null, n.fieldTransforms);\n    }, t.prototype.parseMergeData = function (t, e, n) {\n      var r = new zg(xg.MergeSet, t, qf.EMPTY_PATH);\n      $g(\"Data must be an object, but it was:\", r, e);\n      var i,\n          o,\n          a = this.parseData(e, r);\n\n      if (n) {\n        for (var s = new ip(qf.comparator), u = 0, c = n; u < c.length; u++) {\n          var h = c[u],\n              l = void 0;\n          if (h instanceof Ng) l = h._internalPath;else {\n            if (\"string\" != typeof h) throw Kl(\"Expected stringOrFieldPath to be a string or a FieldPath\");\n            l = tv(t, h);\n          }\n          if (!r.contains(l)) throw new Yl(zl.INVALID_ARGUMENT, \"Field '\" + l + \"' is specified in your field mask but missing from your input data.\");\n          s = s.add(l);\n        }\n\n        i = dy.fromSet(s), o = r.fieldTransforms.filter(function (t) {\n          return i.covers(t.field);\n        });\n      } else i = dy.fromArray(r.fieldMask), o = r.fieldTransforms;\n\n      return new Qg(a, i, o);\n    }, t.prototype.parseUpdateData = function (o, t) {\n      var a = this,\n          s = new zg(xg.Update, o, qf.EMPTY_PATH);\n      $g(\"Data must be an object, but it was:\", s, t);\n      var u = new ip(qf.comparator),\n          c = fy.EMPTY;\n      tf(t, function (t, e) {\n        var n = tv(o, t),\n            r = s.childContextForFieldPath(n);\n        if ((e = a.runPreConverter(e, r)) instanceof Ug) u = u.add(n);else {\n          var i = a.parseData(e, r);\n          null != i && (u = u.add(n), c = c.set(n, i));\n        }\n      });\n      var e = dy.fromSet(u);\n      return new Hg(c, e, s.fieldTransforms);\n    }, t.prototype.parseUpdateVarargs = function (t, e, n, r) {\n      var i = new zg(xg.Update, t, qf.EMPTY_PATH),\n          o = [Zg(t, e)],\n          a = [n];\n      if (r.length % 2 != 0) throw new Yl(zl.INVALID_ARGUMENT, \"Function \" + t + \"() needs to be called with an even number of arguments that alternate between field names and values.\");\n\n      for (var s = 0; s < r.length; s += 2) o.push(Zg(t, r[s])), a.push(r[s + 1]);\n\n      var u = new ip(qf.comparator),\n          c = fy.EMPTY;\n\n      for (s = 0; s < o.length; ++s) {\n        var h = o[s],\n            l = i.childContextForFieldPath(h),\n            f = this.runPreConverter(a[s], l);\n        if (f instanceof Ug) u = u.add(h);else {\n          var p = this.parseData(f, l);\n          null != p && (u = u.add(h), c = c.set(h, p));\n        }\n      }\n\n      var d = dy.fromSet(u);\n      return new Hg(c, d, i.fieldTransforms);\n    }, t.prototype.parseQueryValue = function (t, e) {\n      var n = new zg(xg.Argument, t, qf.EMPTY_PATH),\n          r = this.parseData(e, n);\n      return Ql(null != r, \"Parsed data should not be null.\"), Ql(0 === n.fieldTransforms.length, \"Field transforms should have been disallowed.\"), r;\n    }, t.prototype.runPreConverter = function (t, e) {\n      try {\n        return this.preConverter(t);\n      } catch (t) {\n        var n = ev(t);\n        throw e.createError(n);\n      }\n    }, t.prototype.parseData = function (t, e) {\n      if (Jg(t = this.runPreConverter(t, e))) return $g(\"Unsupported field value:\", e, t), this.parseObject(t, e);\n      if (t instanceof Fg) return this.parseSentinelFieldValue(t, e), null;\n\n      if (e.path && e.fieldMask.push(e.path), t instanceof Array) {\n        if (e.arrayElement) throw e.createError(\"Nested arrays are not supported\");\n        return this.parseArray(t, e);\n      }\n\n      return this.parseScalarValue(t, e);\n    }, t.prototype.parseObject = function (t, r) {\n      var i = this,\n          o = new tp(Ef);\n      return ef(t) ? r.path && 0 < r.path.length && r.fieldMask.push(r.path) : tf(t, function (t, e) {\n        var n = i.parseData(e, r.childContextForField(t));\n        null != n && (o = o.insert(t, n));\n      }), new fy(o);\n    }, t.prototype.parseArray = function (t, e) {\n      for (var n = [], r = 0, i = 0, o = t; i < o.length; i++) {\n        var a = o[i],\n            s = this.parseData(a, e.childContextForArray(r));\n        null == s && (s = $d.INSTANCE), n.push(s), r++;\n      }\n\n      return new py(n);\n    }, t.prototype.parseSentinelFieldValue = function (t, e) {\n      if (!Gg(e.dataSource)) throw e.createError(t._methodName + \"() can only be used with update() and set()\");\n      if (null === e.path) throw e.createError(t._methodName + \"() is not currently supported inside arrays\");\n\n      if (t instanceof Ug) {\n        if (e.dataSource !== xg.MergeSet) throw e.dataSource === xg.Update ? (Ql(0 < e.path.length, \"FieldValue.delete() at the top level should have already been handled.\"), e.createError(\"FieldValue.delete() can only appear at the top level of your update data\")) : e.createError(\"FieldValue.delete() cannot be used with set() unless you pass {merge:true}\");\n        e.fieldMask.push(e.path);\n      } else if (t instanceof qg) e.fieldTransforms.push(new yy(e.path, qm.instance));else if (t instanceof Vg) {\n        var n = this.parseArrayTransformElements(t._methodName, t._elements),\n            r = new Vm(n);\n        e.fieldTransforms.push(new yy(e.path, r));\n      } else if (t instanceof Bg) {\n        n = this.parseArrayTransformElements(t._methodName, t._elements);\n        var i = new Bm(n);\n        e.fieldTransforms.push(new yy(e.path, i));\n      } else if (t instanceof jg) {\n        var o = this.parseQueryValue(\"FieldValue.increment\", t._operand),\n            a = new jm(o);\n        e.fieldTransforms.push(new yy(e.path, a));\n      } else Kl(\"Unknown FieldValue type: \" + t);\n    }, t.prototype.parseScalarValue = function (t, e) {\n      if (null === t) return $d.INSTANCE;\n      if (\"number\" == typeof t) return Vy(t) ? new iy(t) : new oy(t);\n      if (\"boolean\" == typeof t) return Zd.of(t);\n      if (\"string\" == typeof t) return new ay(t);\n      if (t instanceof Date) return new sy($f.fromDate(t));\n      if (t instanceof $f) return new sy(new $f(t.seconds, 1e3 * Math.floor(t.nanoseconds / 1e3)));\n      if (t instanceof Im) return new ly(t);\n      if (t instanceof kf) return new cy(t);\n      if (t instanceof Yg) return new hy(t.databaseId, t.key);\n      throw e.createError(\"Unsupported field value: \" + yf(t));\n    }, t.prototype.parseArrayTransformElements = function (r, t) {\n      var i = this;\n      return t.map(function (t, e) {\n        var n = new zg(xg.Argument, r, qf.EMPTY_PATH);\n        return i.parseData(t, n.childContextForArray(e));\n      });\n    }, t;\n  }();\n\n  function Jg(t) {\n    return !(\"object\" != typeof t || null === t || t instanceof Array || t instanceof Date || t instanceof $f || t instanceof Im || t instanceof kf || t instanceof Yg || t instanceof Fg);\n  }\n\n  function $g(t, e, n) {\n    if (!Jg(n) || !df(n)) {\n      var r = yf(n);\n      throw \"an object\" === r ? e.createError(t + \" a custom object\") : e.createError(t + \" \" + r);\n    }\n  }\n\n  function Zg(t, e) {\n    if (e instanceof Ng) return e._internalPath;\n    if (\"string\" == typeof e) return tv(t, e);\n    throw new Yl(zl.INVALID_ARGUMENT, \"Function \" + t + \"() called with invalid data. Field path arguments must be of type string or FieldPath.\");\n  }\n\n  function tv(e, t) {\n    try {\n      return function (e) {\n        if (0 <= e.search(Ag)) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid field path (\" + e + \"). Paths must not contain '~', '*', '/', '[', or ']'\");\n\n        try {\n          return new (Ng.bind.apply(Ng, [void 0].concat(e.split(\".\"))))();\n        } catch (t) {\n          throw new Yl(zl.INVALID_ARGUMENT, \"Invalid field path (\" + e + \"). Paths must not be empty, begin with '.', end with '.', or contain '..'\");\n        }\n      }(t)._internalPath;\n    } catch (t) {\n      var n = ev(t);\n      throw new Yl(zl.INVALID_ARGUMENT, \"Function \" + e + \"() called with invalid data. \" + n);\n    }\n  }\n\n  function ev(t) {\n    return t instanceof Error ? t.message : t.toString();\n  }\n\n  var nv = Pd.COLLECTION_DISABLED,\n      rv = function () {\n    function t(t) {\n      if (void 0 === t.host) {\n        if (void 0 !== t.ssl) throw new Yl(zl.INVALID_ARGUMENT, \"Can't provide ssl option if host option is not set\");\n        this.host = \"firestore.googleapis.com\", this.ssl = !0;\n      } else cf(\"settings\", \"non-empty string\", \"host\", t.host), this.host = t.host, hf(\"settings\", \"boolean\", \"ssl\", t.ssl), this.ssl = $l(t.ssl, !0);\n\n      if (gf(\"settings\", t, [\"host\", \"ssl\", \"credentials\", \"timestampsInSnapshots\", \"cacheSizeBytes\", \"experimentalForceLongPolling\"]), hf(\"settings\", \"object\", \"credentials\", t.credentials), this.credentials = t.credentials, hf(\"settings\", \"boolean\", \"timestampsInSnapshots\", t.timestampsInSnapshots), !0 === t.timestampsInSnapshots ? jl(\"\\n  The timestampsInSnapshots setting now defaults to true and you no\\n  longer need to explicitly set it. In a future release, the setting\\n  will be removed entirely and so it is recommended that you remove it\\n  from your firestore.settings() call now.\") : !1 === t.timestampsInSnapshots && jl(\"\\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\\n  YOUR CODE.\\n\\n  To hide this warning, stop using the timestampsInSnapshots setting in your\\n  firestore.settings({ ... }) call.\\n\\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\\n  read back as Firebase Timestamp objects instead of as system Date objects.\\n  So you will also need to update code expecting a Date to instead expect a\\n  Timestamp. For example:\\n\\n  // Old:\\n  const date = snapshot.get('created_at');\\n  // New:\\n  const timestamp = snapshot.get('created_at'); const date =\\n  timestamp.toDate();\\n\\n  Please audit all existing usages of Date when you enable the new\\n  behavior.\"), this.timestampsInSnapshots = $l(t.timestampsInSnapshots, !0), hf(\"settings\", \"number\", \"cacheSizeBytes\", t.cacheSizeBytes), void 0 === t.cacheSizeBytes) this.cacheSizeBytes = Pd.DEFAULT_CACHE_SIZE_BYTES;else {\n        if (t.cacheSizeBytes !== nv && t.cacheSizeBytes < Pd.MINIMUM_CACHE_SIZE_BYTES) throw new Yl(zl.INVALID_ARGUMENT, \"cacheSizeBytes must be at least \" + Pd.MINIMUM_CACHE_SIZE_BYTES);\n        this.cacheSizeBytes = t.cacheSizeBytes;\n      }\n      hf(\"settings\", \"boolean\", \"experimentalForceLongPolling\", t.experimentalForceLongPolling), this.forceLongPolling = void 0 !== t.experimentalForceLongPolling && t.experimentalForceLongPolling;\n    }\n\n    return t.prototype.isEqual = function (t) {\n      return this.host === t.host && this.ssl === t.ssl && this.timestampsInSnapshots === t.timestampsInSnapshots && this.credentials === t.credentials && this.cacheSizeBytes === t.cacheSizeBytes && this.forceLongPolling === t.forceLongPolling;\n    }, t;\n  }(),\n      iv = function () {},\n      ov = function () {\n    function o(t) {\n      var e = this;\n      this._queue = new Wf(), this.INTERNAL = {\n        delete: function () {\n          return fr(e, void 0, void 0, function () {\n            return pr(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return this.ensureClientConfigured(), [4, this._firestoreClient.shutdown()];\n\n                case 1:\n                  return t.sent(), [2];\n              }\n            });\n          });\n        }\n      };\n      var n = new iv();\n\n      if (\"object\" == typeof t.options) {\n        var r = t;\n        n.firebaseApp = r, n.databaseId = o.databaseIdFromApp(r), n.persistenceKey = n.firebaseApp.name, n.credentials = new Rg(r);\n      } else {\n        var i = t;\n        if (!i.projectId) throw new Yl(zl.INVALID_ARGUMENT, \"Must provide projectId\");\n        n.databaseId = new Pf(i.projectId, i.database), n.persistenceKey = \"[DEFAULT]\", n.credentials = new Dg();\n      }\n\n      n.settings = new rv({}), this._config = n, this._databaseId = n.databaseId;\n    }\n\n    return o.prototype.settings = function (t) {\n      if (rf(\"Firestore.settings\", arguments, 1), sf(\"Firestore.settings\", \"object\", 1, t), Jl(t, \"persistence\")) throw new Yl(zl.INVALID_ARGUMENT, '\"persistence\" is now specified with a separate call to firestore.enablePersistence().');\n      var e = new rv(t);\n      if (this._firestoreClient && !this._config.settings.isEqual(e)) throw new Yl(zl.FAILED_PRECONDITION, \"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.\");\n      void 0 !== (this._config.settings = e).credentials && (this._config.credentials = function (t) {\n        if (!t) return new Dg();\n\n        switch (t.type) {\n          case \"gapi\":\n            var e = t.client;\n            return Ql(!(\"object\" != typeof e || null === e || !e.auth || !e.auth.getAuthHeaderValueForFirstParty), \"unexpected gapi interface\"), new Pg(e, t.sessionIndex || \"0\");\n\n          case \"provider\":\n            return t.client;\n\n          default:\n            throw new Yl(zl.INVALID_ARGUMENT, \"makeCredentialsProvider failed due to invalid credential type\");\n        }\n      }(e.credentials));\n    }, o.prototype.enableNetwork = function () {\n      return this.ensureClientConfigured(), this._firestoreClient.enableNetwork();\n    }, o.prototype.disableNetwork = function () {\n      return this.ensureClientConfigured(), this._firestoreClient.disableNetwork();\n    }, o.prototype.enablePersistence = function (t) {\n      if (this._firestoreClient) throw new Yl(zl.FAILED_PRECONDITION, \"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.\");\n      var e = !1;\n      return t && (void 0 !== t.experimentalTabSynchronization && jl(\"The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'.\"), e = $l(void 0 !== t.synchronizeTabs ? t.synchronizeTabs : t.experimentalTabSynchronization, !1)), this.configureClient(new Tg(this._config.settings.cacheSizeBytes, e));\n    }, o.prototype.clearPersistence = function () {\n      var t = this,\n          n = Vd.buildStoragePrefix(this.makeDatabaseInfo()),\n          r = new Bf();\n      return this._queue.enqueueAndForget(function () {\n        return fr(t, void 0, void 0, function () {\n          var e;\n          return pr(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (t.trys.push([0, 2,, 3]), void 0 !== this._firestoreClient && !this._firestoreClient.clientShutdown) throw new Yl(zl.FAILED_PRECONDITION, \"Persistence cannot be cleared after this Firestore instance is initialized.\");\n                return [4, Vd.clearPersistence(n)];\n\n              case 1:\n                return t.sent(), r.resolve(), [3, 3];\n\n              case 2:\n                return e = t.sent(), r.reject(e), [3, 3];\n\n              case 3:\n                return [2];\n            }\n          });\n        });\n      }), r.promise;\n    }, o.prototype.ensureClientConfigured = function () {\n      return this._firestoreClient || this.configureClient(new Sg()), this._firestoreClient;\n    }, o.prototype.makeDatabaseInfo = function () {\n      return new Rf(this._config.databaseId, this._config.persistenceKey, this._config.settings.host, this._config.settings.ssl, this._config.settings.forceLongPolling);\n    }, o.prototype.configureClient = function (t) {\n      var r = this;\n      Ql(!!this._config.settings.host, \"FirestoreSettings.host cannot be falsey\"), Ql(!this._firestoreClient, \"configureClient() called multiple times\");\n      var e = this.makeDatabaseInfo();\n      return this._dataConverter = new Xg(function (t) {\n        if (t instanceof uv) {\n          var e = r._config.databaseId,\n              n = t.firestore._config.databaseId;\n          if (!n.isEqual(e)) throw new Yl(zl.INVALID_ARGUMENT, \"Document reference is for database \" + n.projectId + \"/\" + n.database + \" but should be for database \" + e.projectId + \"/\" + e.database);\n          return new Yg(r._config.databaseId, t._key);\n        }\n\n        return t;\n      }), this._firestoreClient = new Ig(Hl.getPlatform(), e, this._config.credentials, this._queue), this._firestoreClient.start(t);\n    }, o.databaseIdFromApp = function (t) {\n      var e = t.options;\n      if (!Jl(e, \"projectId\")) throw new Yl(zl.INVALID_ARGUMENT, '\"projectId\" not provided in firebase.initializeApp.');\n      var n = e.projectId;\n      if (!n || \"string\" != typeof n) throw new Yl(zl.INVALID_ARGUMENT, \"projectId must be a string in FirebaseApp.options\");\n      return new Pf(n);\n    }, Object.defineProperty(o.prototype, \"app\", {\n      get: function () {\n        if (!this._config.firebaseApp) throw new Yl(zl.FAILED_PRECONDITION, \"Firestore was not initialized using the Firebase SDK. 'app' is not available\");\n        return this._config.firebaseApp;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), o.prototype.collection = function (t) {\n      return rf(\"Firestore.collection\", arguments, 1), sf(\"Firestore.collection\", \"non-empty string\", 1, t), this.ensureClientConfigured(), new dv(Ff.fromString(t), this);\n    }, o.prototype.doc = function (t) {\n      return rf(\"Firestore.doc\", arguments, 1), sf(\"Firestore.doc\", \"non-empty string\", 1, t), this.ensureClientConfigured(), uv.forPath(Ff.fromString(t), this);\n    }, o.prototype.collectionGroup = function (t) {\n      if (rf(\"Firestore.collectionGroup\", arguments, 1), sf(\"Firestore.collectionGroup\", \"non-empty string\", 1, t), 0 <= t.indexOf(\"/\")) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid collection ID '\" + t + \"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.\");\n      return this.ensureClientConfigured(), new fv(new Cm(Ff.EMPTY_PATH, t), this);\n    }, o.prototype.runTransaction = function (e) {\n      var n = this;\n      return rf(\"Firestore.runTransaction\", arguments, 1), sf(\"Firestore.runTransaction\", \"function\", 1, e), this.ensureClientConfigured().transaction(function (t) {\n        return e(new av(n, t));\n      });\n    }, o.prototype.batch = function () {\n      return this.ensureClientConfigured(), new sv(this);\n    }, Object.defineProperty(o, \"logLevel\", {\n      get: function () {\n        switch (ql()) {\n          case kl.DEBUG:\n            return \"debug\";\n\n          case kl.ERROR:\n            return \"error\";\n\n          case kl.SILENT:\n            return \"silent\";\n\n          default:\n            return Kl(\"Unknown log level: \" + ql());\n        }\n      },\n      enumerable: !0,\n      configurable: !0\n    }), o.setLogLevel = function (t) {\n      switch (rf(\"Firestore.setLogLevel\", arguments, 1), sf(\"Firestore.setLogLevel\", \"non-empty string\", 1, t), t) {\n        case \"debug\":\n          Vl(kl.DEBUG);\n          break;\n\n        case \"error\":\n          Vl(kl.ERROR);\n          break;\n\n        case \"silent\":\n          Vl(kl.SILENT);\n          break;\n\n        default:\n          throw new Yl(zl.INVALID_ARGUMENT, \"Invalid log level: \" + t);\n      }\n    }, o.prototype._areTimestampsInSnapshotsEnabled = function () {\n      return this._config.settings.timestampsInSnapshots;\n    }, o;\n  }(),\n      av = function () {\n    function t(t, e) {\n      this._firestore = t, this._transaction = e;\n    }\n\n    return t.prototype.get = function (t) {\n      var n = this;\n      rf(\"Transaction.get\", arguments, 1);\n      var r = vv(\"Transaction.get\", t, this._firestore);\n      return this._transaction.lookup([r._key]).then(function (t) {\n        if (!t || 1 !== t.length) return Kl(\"Mismatch in docs returned from document lookup.\");\n        var e = t[0];\n        if (e instanceof Qp) return new hv(n._firestore, r._key, null, !1, !1);\n        if (e instanceof Kp) return new hv(n._firestore, r._key, e, !1, !1);\n        throw Kl(\"BatchGetDocumentsRequest returned unexpected document type: \" + e.constructor.name);\n      });\n    }, t.prototype.set = function (t, e, n) {\n      af(\"Transaction.set\", arguments, 2, 3);\n      var r = vv(\"Transaction.set\", t, this._firestore),\n          i = (n = yv(\"Transaction.set\", n)).merge || n.mergeFields ? this._firestore._dataConverter.parseMergeData(\"Transaction.set\", e, n.mergeFields) : this._firestore._dataConverter.parseSetData(\"Transaction.set\", e);\n      return this._transaction.set(r._key, i), this;\n    }, t.prototype.update = function (t, e, n) {\n      for (var r, i, o = [], a = 3; a < arguments.length; a++) o[a - 3] = arguments[a];\n\n      return i = \"string\" == typeof e || e instanceof Ng ? (of(\"Transaction.update\", arguments, 3), r = vv(\"Transaction.update\", t, this._firestore), this._firestore._dataConverter.parseUpdateVarargs(\"Transaction.update\", e, n, o)) : (rf(\"Transaction.update\", arguments, 2), r = vv(\"Transaction.update\", t, this._firestore), this._firestore._dataConverter.parseUpdateData(\"Transaction.update\", e)), this._transaction.update(r._key, i), this;\n    }, t.prototype.delete = function (t) {\n      rf(\"Transaction.delete\", arguments, 1);\n      var e = vv(\"Transaction.delete\", t, this._firestore);\n      return this._transaction.delete(e._key), this;\n    }, t;\n  }(),\n      sv = function () {\n    function t(t) {\n      this._firestore = t, this._mutations = [], this._committed = !1;\n    }\n\n    return t.prototype.set = function (t, e, n) {\n      af(\"WriteBatch.set\", arguments, 2, 3), this.verifyNotCommitted();\n      var r = vv(\"WriteBatch.set\", t, this._firestore),\n          i = (n = yv(\"WriteBatch.set\", n)).merge || n.mergeFields ? this._firestore._dataConverter.parseMergeData(\"WriteBatch.set\", e, n.mergeFields) : this._firestore._dataConverter.parseSetData(\"WriteBatch.set\", e);\n      return this._mutations = this._mutations.concat(i.toMutations(r._key, gy.NONE)), this;\n    }, t.prototype.update = function (t, e, n) {\n      for (var r, i, o = [], a = 3; a < arguments.length; a++) o[a - 3] = arguments[a];\n\n      return this.verifyNotCommitted(), i = \"string\" == typeof e || e instanceof Ng ? (of(\"WriteBatch.update\", arguments, 3), r = vv(\"WriteBatch.update\", t, this._firestore), this._firestore._dataConverter.parseUpdateVarargs(\"WriteBatch.update\", e, n, o)) : (rf(\"WriteBatch.update\", arguments, 2), r = vv(\"WriteBatch.update\", t, this._firestore), this._firestore._dataConverter.parseUpdateData(\"WriteBatch.update\", e)), this._mutations = this._mutations.concat(i.toMutations(r._key, gy.exists(!0))), this;\n    }, t.prototype.delete = function (t) {\n      rf(\"WriteBatch.delete\", arguments, 1), this.verifyNotCommitted();\n      var e = vv(\"WriteBatch.delete\", t, this._firestore);\n      return this._mutations = this._mutations.concat(new Ey(e._key, gy.NONE)), this;\n    }, t.prototype.commit = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          return this.verifyNotCommitted(), this._committed = !0, 0 < this._mutations.length ? [2, this._firestore.ensureClientConfigured().write(this._mutations)] : [2];\n        });\n      });\n    }, t.prototype.verifyNotCommitted = function () {\n      if (this._committed) throw new Yl(zl.FAILED_PRECONDITION, \"A write batch can no longer be used after commit() has been called.\");\n    }, t;\n  }(),\n      uv = function () {\n    function n(t, e) {\n      this._key = t, this.firestore = e, this._firestoreClient = this.firestore.ensureClientConfigured();\n    }\n\n    return n.forPath = function (t, e) {\n      if (t.length % 2 != 0) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid document reference. Document references must have an even number of segments, but \" + t.canonicalString() + \" has \" + t.length);\n      return new n(new Vf(t), e);\n    }, Object.defineProperty(n.prototype, \"id\", {\n      get: function () {\n        return this._key.path.lastSegment();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(n.prototype, \"parent\", {\n      get: function () {\n        return new dv(this._key.path.popLast(), this.firestore);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(n.prototype, \"path\", {\n      get: function () {\n        return this._key.path.canonicalString();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), n.prototype.collection = function (t) {\n      if (rf(\"DocumentReference.collection\", arguments, 1), sf(\"DocumentReference.collection\", \"non-empty string\", 1, t), !t) throw new Yl(zl.INVALID_ARGUMENT, \"Must provide a non-empty collection name to collection()\");\n      var e = Ff.fromString(t);\n      return new dv(this._key.path.child(e), this.firestore);\n    }, n.prototype.isEqual = function (t) {\n      if (!(t instanceof n)) throw vf(\"isEqual\", \"DocumentReference\", 1, t);\n      return this.firestore === t.firestore && this._key.isEqual(t._key);\n    }, n.prototype.set = function (t, e) {\n      af(\"DocumentReference.set\", arguments, 1, 2);\n      var n = (e = yv(\"DocumentReference.set\", e)).merge || e.mergeFields ? this.firestore._dataConverter.parseMergeData(\"DocumentReference.set\", t, e.mergeFields) : this.firestore._dataConverter.parseSetData(\"DocumentReference.set\", t);\n      return this._firestoreClient.write(n.toMutations(this._key, gy.NONE));\n    }, n.prototype.update = function (t, e) {\n      for (var n, r = [], i = 2; i < arguments.length; i++) r[i - 2] = arguments[i];\n\n      return n = \"string\" == typeof t || t instanceof Ng ? (of(\"DocumentReference.update\", arguments, 2), this.firestore._dataConverter.parseUpdateVarargs(\"DocumentReference.update\", t, e, r)) : (rf(\"DocumentReference.update\", arguments, 1), this.firestore._dataConverter.parseUpdateData(\"DocumentReference.update\", t)), this._firestoreClient.write(n.toMutations(this._key, gy.exists(!0)));\n    }, n.prototype.delete = function () {\n      return rf(\"DocumentReference.delete\", arguments, 0), this._firestoreClient.write([new Ey(this._key, gy.NONE)]);\n    }, n.prototype.onSnapshot = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      af(\"DocumentReference.onSnapshot\", arguments, 1, 4);\n      var n,\n          r = {\n        includeMetadataChanges: !1\n      },\n          i = 0;\n      \"object\" != typeof t[i] || Mg(t[i]) || (gf(\"DocumentReference.onSnapshot\", r = t[i], [\"includeMetadataChanges\"]), hf(\"DocumentReference.onSnapshot\", \"boolean\", \"includeMetadataChanges\", r.includeMetadataChanges), i++);\n      var o = {\n        includeMetadataChanges: r.includeMetadataChanges\n      };\n      return n = Mg(t[i]) ? t[i] : (sf(\"DocumentReference.onSnapshot\", \"function\", i, t[i]), uf(\"DocumentReference.onSnapshot\", \"function\", i + 1, t[i + 1]), uf(\"DocumentReference.onSnapshot\", \"function\", i + 2, t[i + 2]), {\n        next: t[i],\n        error: t[i + 1],\n        complete: t[i + 2]\n      }), this.onSnapshotInternal(o, n);\n    }, n.prototype.onSnapshotInternal = function (t, n) {\n      var r = this,\n          e = function (t) {\n        console.error(\"Uncaught Error in onSnapshot:\", t);\n      };\n\n      n.error && (e = n.error.bind(n));\n\n      var i = new Cg({\n        next: function (t) {\n          if (n.next) {\n            Ql(t.docs.size <= 1, \"Too many documents returned on a document query\");\n            var e = t.docs.get(r._key);\n            n.next(new hv(r.firestore, r._key, e, t.fromCache, t.hasPendingWrites));\n          }\n        },\n        error: e\n      }),\n          o = this._firestoreClient.listen(Cm.atPath(this._key.path), i, t);\n\n      return function () {\n        i.mute(), r._firestoreClient.unlisten(o);\n      };\n    }, n.prototype.get = function (n) {\n      var r = this;\n      return af(\"DocumentReference.get\", arguments, 0, 1), gv(\"DocumentReference.get\", n), new Promise(function (e, t) {\n        n && \"cache\" === n.source ? r.firestore.ensureClientConfigured().getDocumentFromLocalCache(r._key).then(function (t) {\n          e(new hv(r.firestore, r._key, t, !0, t instanceof Kp && t.hasLocalMutations));\n        }, t) : r.getViaSnapshotListener(e, t, n);\n      });\n    }, n.prototype.getViaSnapshotListener = function (e, n, r) {\n      var i = this.onSnapshotInternal({\n        includeMetadataChanges: !0,\n        waitForSyncWhenOnline: !0\n      }, {\n        next: function (t) {\n          i(), !t.exists && t.metadata.fromCache ? n(new Yl(zl.UNAVAILABLE, \"Failed to get document because the client is offline.\")) : t.exists && t.metadata.fromCache && r && \"server\" === r.source ? n(new Yl(zl.UNAVAILABLE, 'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to \"server\" to retrieve the cached document.)')) : e(t);\n        },\n        error: n\n      });\n    }, n;\n  }(),\n      cv = function () {\n    function t(t, e) {\n      this.hasPendingWrites = t, this.fromCache = e;\n    }\n\n    return t.prototype.isEqual = function (t) {\n      return this.hasPendingWrites === t.hasPendingWrites && this.fromCache === t.fromCache;\n    }, t;\n  }(),\n      hv = function () {\n    function e(t, e, n, r, i) {\n      this._firestore = t, this._key = e, this._document = n, this._fromCache = r, this._hasPendingWrites = i;\n    }\n\n    return e.prototype.data = function (t) {\n      return af(\"DocumentSnapshot.data\", arguments, 0, 1), t = mv(\"DocumentSnapshot.data\", t), this._document ? this.convertObject(this._document.data, Xd.fromSnapshotOptions(t, this._firestore._areTimestampsInSnapshotsEnabled())) : void 0;\n    }, e.prototype.get = function (t, e) {\n      if (af(\"DocumentSnapshot.get\", arguments, 1, 2), e = mv(\"DocumentSnapshot.get\", e), this._document) {\n        var n = this._document.data.field(Zg(\"DocumentSnapshot.get\", t));\n\n        if (void 0 !== n) return this.convertValue(n, Xd.fromSnapshotOptions(e, this._firestore._areTimestampsInSnapshotsEnabled()));\n      }\n    }, Object.defineProperty(e.prototype, \"id\", {\n      get: function () {\n        return this._key.path.lastSegment();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"ref\", {\n      get: function () {\n        return new uv(this._key, this._firestore);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"exists\", {\n      get: function () {\n        return null !== this._document;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"metadata\", {\n      get: function () {\n        return new cv(this._hasPendingWrites, this._fromCache);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.isEqual = function (t) {\n      if (!(t instanceof e)) throw vf(\"isEqual\", \"DocumentSnapshot\", 1, t);\n      return this._firestore === t._firestore && this._fromCache === t._fromCache && this._key.isEqual(t._key) && (null === this._document ? null === t._document : this._document.isEqual(t._document));\n    }, e.prototype.convertObject = function (t, n) {\n      var r = this,\n          i = {};\n      return t.forEach(function (t, e) {\n        i[t] = r.convertValue(e, n);\n      }), i;\n    }, e.prototype.convertValue = function (t, e) {\n      if (t instanceof fy) return this.convertObject(t, e);\n      if (t instanceof py) return this.convertArray(t, e);\n\n      if (t instanceof hy) {\n        var n = t.value(e),\n            r = this._firestore.ensureClientConfigured().databaseId();\n\n        return t.databaseId.isEqual(r) || jl(\"Document \" + this._key.path + \" contains a document reference within a different database (\" + t.databaseId.projectId + \"/\" + t.databaseId.database + \") which is not supported. It will be treated as a reference in the current database (\" + r.projectId + \"/\" + r.database + \") instead.\"), new uv(n, this._firestore);\n      }\n\n      return t.value(e);\n    }, e.prototype.convertArray = function (t, e) {\n      var n = this;\n      return t.internalValue.map(function (t) {\n        return n.convertValue(t, e);\n      });\n    }, e;\n  }(),\n      lv = function (o) {\n    function t(t, e, n, r, i) {\n      return o.call(this, t, e, n, r, i) || this;\n    }\n\n    return hr(t, o), t.prototype.data = function (t) {\n      var e = o.prototype.data.call(this, t);\n      return Ql(\"object\" == typeof e, \"Document in a QueryDocumentSnapshot should exist\"), e;\n    }, t;\n  }(hv),\n      fv = function () {\n    function c(t, e) {\n      this._query = t, this.firestore = e;\n    }\n\n    return c.prototype.where = function (t, e, n) {\n      if (rf(\"Query.where\", arguments, 3), mf(\"Query.where\", 3, n), \"in\" !== e && \"array-contains-any\" !== e) {\n        !function (t, e, n, r) {\n          if (!e.some(function (t) {\n            return t === r;\n          })) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid value \" + yf(r) + \" provided to function \" + t + \"() for its \" + bf(n) + \" argument. Acceptable values: \" + e.join(\", \"));\n        }(\"Query.where\", [\"<\", \"<=\", \"==\", \">=\", \">\", \"array-contains\"], 2, e);\n      }\n\n      var r,\n          i = Zg(\"Query.where\", t),\n          o = Am.fromString(e);\n\n      if (i.isKeyField()) {\n        if (o === Am.ARRAY_CONTAINS || o === Am.ARRAY_CONTAINS_ANY || o === Am.IN) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid Query. You can't perform '\" + o.toString() + \"' queries on FieldPath.documentId().\");\n\n        if (\"string\" == typeof n) {\n          if (\"\" === n) throw new Yl(zl.INVALID_ARGUMENT, \"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.\");\n          if (!this._query.isCollectionGroupQuery() && -1 !== n.indexOf(\"/\")) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid third parameter to Query.where(). When querying a collection by FieldPath.documentId(), the value provided must be a plain document ID, but '\" + n + \"' contains a slash.\");\n\n          var a = this._query.path.child(Ff.fromString(n));\n\n          if (!Vf.isDocumentKey(a)) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid third parameter to Query.where(). When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '\" + a + \"' is not because it has an odd number of segments (\" + a.length + \").\");\n          r = new hy(this.firestore._databaseId, new Vf(a));\n        } else {\n          if (!(n instanceof uv)) throw new Yl(zl.INVALID_ARGUMENT, \"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: \" + yf(n) + \".\");\n          var s = n;\n          r = new hy(this.firestore._databaseId, s._key);\n        }\n      } else {\n        if (o === Am.IN || o === Am.ARRAY_CONTAINS_ANY) {\n          if (!Array.isArray(n) || 0 === n.length) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid Query. A non-empty array is required for '\" + o.toString() + \"' filters.\");\n          if (10 < n.length) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid Query. '\" + o.toString() + \"' filters support a maximum of 10 elements in the value array.\");\n        }\n\n        r = this.firestore._dataConverter.parseQueryValue(\"Query.where\", n);\n      }\n\n      var u = km.create(i, o, r);\n      return this.validateNewFilter(u), new c(this._query.addFilter(u), this.firestore);\n    }, c.prototype.orderBy = function (t, e) {\n      var n;\n      if (af(\"Query.orderBy\", arguments, 1, 2), uf(\"Query.orderBy\", \"non-empty string\", 2, e), void 0 === e || \"asc\" === e) n = Mm.ASCENDING;else {\n        if (\"desc\" !== e) throw new Yl(zl.INVALID_ARGUMENT, \"Function Query.orderBy() has unknown direction '\" + e + \"', expected 'asc' or 'desc'.\");\n        n = Mm.DESCENDING;\n      }\n      if (null !== this._query.startAt) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().\");\n      if (null !== this._query.endAt) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().\");\n      var r = Zg(\"Query.orderBy\", t),\n          i = new Lm(r, n);\n      return this.validateNewOrderBy(i), new c(this._query.addOrderBy(i), this.firestore);\n    }, c.prototype.limit = function (t) {\n      if (rf(\"Query.limit\", arguments, 1), sf(\"Query.limit\", \"number\", 1, t), t <= 0) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid Query. Query limit (\" + t + \") is invalid. Limit must be positive.\");\n      return new c(this._query.withLimit(t), this.firestore);\n    }, c.prototype.startAt = function (t) {\n      for (var e = [], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];\n\n      of(\"Query.startAt\", arguments, 1);\n      var r = this.boundFromDocOrFields(\"Query.startAt\", t, e, !0);\n      return new c(this._query.withStartAt(r), this.firestore);\n    }, c.prototype.startAfter = function (t) {\n      for (var e = [], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];\n\n      of(\"Query.startAfter\", arguments, 1);\n      var r = this.boundFromDocOrFields(\"Query.startAfter\", t, e, !1);\n      return new c(this._query.withStartAt(r), this.firestore);\n    }, c.prototype.endBefore = function (t) {\n      for (var e = [], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];\n\n      of(\"Query.endBefore\", arguments, 1);\n      var r = this.boundFromDocOrFields(\"Query.endBefore\", t, e, !0);\n      return new c(this._query.withEndAt(r), this.firestore);\n    }, c.prototype.endAt = function (t) {\n      for (var e = [], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];\n\n      of(\"Query.endAt\", arguments, 1);\n      var r = this.boundFromDocOrFields(\"Query.endAt\", t, e, !1);\n      return new c(this._query.withEndAt(r), this.firestore);\n    }, c.prototype.isEqual = function (t) {\n      if (!(t instanceof c)) throw vf(\"isEqual\", \"Query\", 1, t);\n      return this.firestore === t.firestore && this._query.isEqual(t._query);\n    }, c.prototype.boundFromDocOrFields = function (t, e, n, r) {\n      if (mf(t, 1, e), e instanceof hv) {\n        if (0 < n.length) throw new Yl(zl.INVALID_ARGUMENT, \"Too many arguments provided to \" + t + \"().\");\n        var i = e;\n        if (!i.exists) throw new Yl(zl.NOT_FOUND, \"Can't use a DocumentSnapshot that doesn't exist for \" + t + \"().\");\n        return this.boundFromDocument(t, i._document, r);\n      }\n\n      var o = [e].concat(n);\n      return this.boundFromFields(t, o, r);\n    }, c.prototype.boundFromDocument = function (t, e, n) {\n      for (var r = [], i = 0, o = this._query.orderBy; i < o.length; i++) {\n        var a = o[i];\n        if (a.field.isKeyField()) r.push(new hy(this.firestore._databaseId, e.key));else {\n          var s = e.field(a.field);\n          if (s instanceof uy) throw new Yl(zl.INVALID_ARGUMENT, 'Invalid query. You are trying to start or end a query using a document for which the field \"' + a.field + '\" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');\n\n          if (void 0 === s) {\n            var u = a.field.canonicalString();\n            throw new Yl(zl.INVALID_ARGUMENT, \"Invalid query. You are trying to start or end a query using a document for which the field '\" + u + \"' (used as the orderBy) does not exist.\");\n          }\n\n          r.push(s);\n        }\n      }\n\n      return new xm(r, n);\n    }, c.prototype.boundFromFields = function (t, e, n) {\n      var r = this._query.explicitOrderBy;\n      if (e.length > r.length) throw new Yl(zl.INVALID_ARGUMENT, \"Too many arguments provided to \" + t + \"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses\");\n\n      for (var i = [], o = 0; o < e.length; o++) {\n        var a = e[o];\n\n        if (r[o].field.isKeyField()) {\n          if (\"string\" != typeof a) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid query. Expected a string for document ID in \" + t + \"(), but got a \" + typeof a);\n          if (!this._query.isCollectionGroupQuery() && -1 !== a.indexOf(\"/\")) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to \" + t + \"() must be a plain document ID, but '\" + a + \"' contains a slash.\");\n\n          var s = this._query.path.child(Ff.fromString(a));\n\n          if (!Vf.isDocumentKey(s)) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to \" + t + \"() must result in a valid document path, but '\" + s + \"' is not because it contains an odd number of segments.\");\n          var u = new Vf(s);\n          i.push(new hy(this.firestore._databaseId, u));\n        } else {\n          var c = this.firestore._dataConverter.parseQueryValue(t, a);\n\n          i.push(c);\n        }\n      }\n\n      return new xm(i, n);\n    }, c.prototype.onSnapshot = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      af(\"Query.onSnapshot\", arguments, 1, 4);\n      var n,\n          r = {},\n          i = 0;\n      return \"object\" != typeof t[i] || Mg(t[i]) || (gf(\"Query.onSnapshot\", r = t[i], [\"includeMetadataChanges\"]), hf(\"Query.onSnapshot\", \"boolean\", \"includeMetadataChanges\", r.includeMetadataChanges), i++), n = Mg(t[i]) ? t[i] : (sf(\"Query.onSnapshot\", \"function\", i, t[i]), uf(\"Query.onSnapshot\", \"function\", i + 1, t[i + 1]), uf(\"Query.onSnapshot\", \"function\", i + 2, t[i + 2]), {\n        next: t[i],\n        error: t[i + 1],\n        complete: t[i + 2]\n      }), this.onSnapshotInternal(r, n);\n    }, c.prototype.onSnapshotInternal = function (t, e) {\n      var n = this,\n          r = function (t) {\n        console.error(\"Uncaught Error in onSnapshot:\", t);\n      };\n\n      e.error && (r = e.error.bind(e));\n      var i = new Cg({\n        next: function (t) {\n          e.next && e.next(new pv(n.firestore, n._query, t));\n        },\n        error: r\n      }),\n          o = this.firestore.ensureClientConfigured(),\n          a = o.listen(this._query, i, t);\n      return function () {\n        i.mute(), o.unlisten(a);\n      };\n    }, c.prototype.get = function (n) {\n      var r = this;\n      return af(\"Query.get\", arguments, 0, 1), gv(\"Query.get\", n), new Promise(function (e, t) {\n        n && \"cache\" === n.source ? r.firestore.ensureClientConfigured().getDocumentsFromLocalCache(r._query).then(function (t) {\n          e(new pv(r.firestore, r._query, t));\n        }, t) : r.getViaSnapshotListener(e, t, n);\n      });\n    }, c.prototype.getViaSnapshotListener = function (e, n, r) {\n      var i = this.onSnapshotInternal({\n        includeMetadataChanges: !0,\n        waitForSyncWhenOnline: !0\n      }, {\n        next: function (t) {\n          i(), t.metadata.fromCache && r && \"server\" === r.source ? n(new Yl(zl.UNAVAILABLE, 'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to \"server\" to retrieve the cached documents.)')) : e(t);\n        },\n        error: n\n      });\n    }, c.prototype.validateNewFilter = function (t) {\n      if (t instanceof km) {\n        var e = [Am.ARRAY_CONTAINS, Am.ARRAY_CONTAINS_ANY],\n            n = [Am.IN, Am.ARRAY_CONTAINS_ANY],\n            r = 0 <= e.indexOf(t.op),\n            i = 0 <= n.indexOf(t.op);\n\n        if (t.isInequality()) {\n          var o = this._query.getInequalityFilterField();\n\n          if (null !== o && !o.isEqual(t.field)) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '\" + o.toString() + \"' and '\" + t.field.toString() + \"'\");\n\n          var a = this._query.getFirstOrderByField();\n\n          null !== a && this.validateOrderByAndInequalityMatch(t.field, a);\n        } else if (i || r) {\n          var s = null;\n          if (i && (s = this._query.findFilterOperator(n)), null === s && r && (s = this._query.findFilterOperator(e)), null != s) throw s === t.op ? new Yl(zl.INVALID_ARGUMENT, \"Invalid query. You cannot use more than one '\" + t.op.toString() + \"' filter.\") : new Yl(zl.INVALID_ARGUMENT, \"Invalid query. You cannot use '\" + t.op.toString() + \"' filters with '\" + s.toString() + \"' filters.\");\n        }\n      }\n    }, c.prototype.validateNewOrderBy = function (t) {\n      if (null === this._query.getFirstOrderByField()) {\n        var e = this._query.getInequalityFilterField();\n\n        null !== e && this.validateOrderByAndInequalityMatch(e, t.field);\n      }\n    }, c.prototype.validateOrderByAndInequalityMatch = function (t, e) {\n      if (!e.isEqual(t)) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '\" + t.toString() + \"' and so you must also use '\" + t.toString() + \"' as your first Query.orderBy(), but your first Query.orderBy() is on field '\" + e.toString() + \"' instead.\");\n    }, c;\n  }(),\n      pv = function () {\n    function e(t, e, n) {\n      this._firestore = t, this._originalQuery = e, this._snapshot = n, this._cachedChanges = null, this._cachedChangesIncludeMetadataChanges = null, this.metadata = new cv(n.hasPendingWrites, n.fromCache);\n    }\n\n    return Object.defineProperty(e.prototype, \"docs\", {\n      get: function () {\n        var e = [];\n        return this.forEach(function (t) {\n          return e.push(t);\n        }), e;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"empty\", {\n      get: function () {\n        return this._snapshot.docs.isEmpty();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"size\", {\n      get: function () {\n        return this._snapshot.docs.size;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.forEach = function (e, n) {\n      var r = this;\n      af(\"QuerySnapshot.forEach\", arguments, 1, 2), sf(\"QuerySnapshot.forEach\", \"function\", 1, e), this._snapshot.docs.forEach(function (t) {\n        e.call(n, r.convertToDocumentImpl(t));\n      });\n    }, Object.defineProperty(e.prototype, \"query\", {\n      get: function () {\n        return new fv(this._originalQuery, this._firestore);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), e.prototype.docChanges = function (t) {\n      t && (gf(\"QuerySnapshot.docChanges\", t, [\"includeMetadataChanges\"]), hf(\"QuerySnapshot.docChanges\", \"boolean\", \"includeMetadataChanges\", t.includeMetadataChanges));\n      var e = !(!t || !t.includeMetadataChanges);\n      if (e && this._snapshot.excludesMetadataChanges) throw new Yl(zl.INVALID_ARGUMENT, \"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().\");\n      return this._cachedChanges && this._cachedChangesIncludeMetadataChanges === e || (this._cachedChanges = function (i, e, o) {\n        {\n          if (o.oldDocs.isEmpty()) {\n            var n,\n                r = 0;\n            return o.docChanges.map(function (t) {\n              var e = new lv(i, t.doc.key, t.doc, o.fromCache, o.mutatedKeys.has(t.doc.key));\n              return Ql(t.type === om.Added, \"Invalid event type for first snapshot\"), Ql(!n || o.query.docComparator(n, t.doc) < 0, \"Got added events in wrong order\"), n = t.doc, {\n                type: \"added\",\n                doc: e,\n                oldIndex: -1,\n                newIndex: r++\n              };\n            });\n          }\n\n          var a = o.oldDocs;\n          return o.docChanges.filter(function (t) {\n            return e || t.type !== om.Metadata;\n          }).map(function (t) {\n            var e = new lv(i, t.doc.key, t.doc, o.fromCache, o.mutatedKeys.has(t.doc.key)),\n                n = -1,\n                r = -1;\n            return t.type !== om.Added && (Ql(0 <= (n = a.indexOf(t.doc.key)), \"Index for document not found\"), a = a.delete(t.doc.key)), t.type !== om.Removed && (a = a.add(t.doc), r = a.indexOf(t.doc.key)), {\n              type: function (t) {\n                switch (t) {\n                  case om.Added:\n                    return \"added\";\n\n                  case om.Modified:\n                  case om.Metadata:\n                    return \"modified\";\n\n                  case om.Removed:\n                    return \"removed\";\n\n                  default:\n                    return Kl(\"Unknown change type: \" + t);\n                }\n              }(t.type),\n              doc: e,\n              oldIndex: n,\n              newIndex: r\n            };\n          });\n        }\n      }(this._firestore, e, this._snapshot), this._cachedChangesIncludeMetadataChanges = e), this._cachedChanges;\n    }, e.prototype.isEqual = function (t) {\n      if (!(t instanceof e)) throw vf(\"isEqual\", \"QuerySnapshot\", 1, t);\n      return this._firestore === t._firestore && this._originalQuery.isEqual(t._originalQuery) && this._snapshot.isEqual(t._snapshot);\n    }, e.prototype.convertToDocumentImpl = function (t) {\n      return new lv(this._firestore, t.key, t, this.metadata.fromCache, this._snapshot.mutatedKeys.has(t.key));\n    }, e;\n  }();\n\n  [\"length\", \"forEach\", \"map\"].concat(\"undefined\" != typeof Symbol ? [Symbol.iterator] : []).forEach(function (t) {\n    try {\n      Object.defineProperty(pv.prototype.docChanges, t, {\n        get: function () {\n          return function () {\n            throw new Yl(zl.INVALID_ARGUMENT, 'QuerySnapshot.docChanges has been changed from a property into a method, so usages like \"querySnapshot.docChanges\" should become \"querySnapshot.docChanges()\"');\n          }();\n        }\n      });\n    } catch (t) {}\n  });\n\n  var dv = function (r) {\n    function t(t, e) {\n      var n = r.call(this, Cm.atPath(t), e) || this;\n      if (t.length % 2 != 1) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid collection reference. Collection references must have an odd number of segments, but \" + t.canonicalString() + \" has \" + t.length);\n      return n;\n    }\n\n    return hr(t, r), Object.defineProperty(t.prototype, \"id\", {\n      get: function () {\n        return this._query.path.lastSegment();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"parent\", {\n      get: function () {\n        var t = this._query.path.popLast();\n\n        return t.isEmpty() ? null : new uv(new Vf(t), this.firestore);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"path\", {\n      get: function () {\n        return this._query.path.canonicalString();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.doc = function (t) {\n      if (af(\"CollectionReference.doc\", arguments, 0, 1), 0 === arguments.length && (t = _f.newId()), sf(\"CollectionReference.doc\", \"non-empty string\", 1, t), \"\" === t) throw new Yl(zl.INVALID_ARGUMENT, \"Document path must be a non-empty string\");\n      var e = Ff.fromString(t);\n      return uv.forPath(this._query.path.child(e), this.firestore);\n    }, t.prototype.add = function (t) {\n      rf(\"CollectionReference.add\", arguments, 1), sf(\"CollectionReference.add\", \"object\", 1, t);\n      var e = this.doc();\n      return e.set(t).then(function () {\n        return e;\n      });\n    }, t;\n  }(fv);\n\n  function yv(t, e) {\n    if (void 0 === e) return {\n      merge: !1\n    };\n    if (gf(t, e, [\"merge\", \"mergeFields\"]), hf(t, \"boolean\", \"merge\", e.merge), lf(t, \"mergeFields\", \"a string or a FieldPath\", e.mergeFields, function (t) {\n      return \"string\" == typeof t || t instanceof Ng;\n    }), void 0 !== e.mergeFields && void 0 !== e.merge) throw new Yl(zl.INVALID_ARGUMENT, \"Invalid options passed to function \" + t + '(): You cannot specify both \"merge\" and \"mergeFields\".');\n    return e;\n  }\n\n  function mv(t, e) {\n    return void 0 === e ? {} : (gf(t, e, [\"serverTimestamps\"]), ff(t, 0, \"serverTimestamps\", e.serverTimestamps, [\"estimate\", \"previous\", \"none\"]), e);\n  }\n\n  function gv(t, e) {\n    uf(t, \"object\", 1, e), e && (gf(t, e, [\"source\"]), ff(t, 0, \"source\", e.source, [\"default\", \"server\", \"cache\"]));\n  }\n\n  function vv(t, e, n) {\n    if (e instanceof uv) {\n      if (e.firestore !== n) throw new Yl(zl.INVALID_ARGUMENT, \"Provided document reference is from a different Firestore instance.\");\n      return e;\n    }\n\n    throw vf(t, \"DocumentReference\", 1, e);\n  }\n\n  var bv = Xl(ov, \"Use firebase.firestore() instead.\"),\n      wv = Xl(av, \"Use firebase.firestore().runTransaction() instead.\"),\n      _v = Xl(sv, \"Use firebase.firestore().batch() instead.\"),\n      Ev = Xl(uv, \"Use firebase.firestore().doc() instead.\"),\n      Tv = Xl(hv),\n      Sv = Xl(lv),\n      Iv = Xl(fv),\n      Cv = Xl(pv),\n      Nv = Xl(dv, \"Use firebase.firestore().collection() instead.\"),\n      Av = {\n    Firestore: bv,\n    GeoPoint: Im,\n    Timestamp: $f,\n    Blob: Df,\n    Transaction: wv,\n    WriteBatch: _v,\n    DocumentReference: Ev,\n    DocumentSnapshot: Tv,\n    Query: Iv,\n    QueryDocumentSnapshot: Sv,\n    QuerySnapshot: Cv,\n    CollectionReference: Nv,\n    FieldPath: Ng,\n    FieldValue: Wg,\n    setLogLevel: ov.setLogLevel,\n    CACHE_SIZE_UNLIMITED: nv\n  };\n\n  function kv(t) {\n    t.INTERNAL.registerService(\"firestore\", function (t) {\n      return new ov(t);\n    }, function (t) {\n      Ql(t && \"object\" == typeof t, \"shallowCopy() expects object parameter.\");\n      var e = {};\n\n      for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n\n      return e;\n    }(Av));\n  }\n\n  var Dv = function () {\n    function t() {}\n\n    return t.prototype.addCallback = function (t) {}, t.prototype.shutdown = function () {}, t;\n  }(),\n      Rv = \"ConnectivityMonitor\",\n      Ov = function () {\n    function t() {\n      var t = this;\n      this.networkAvailableListener = function () {\n        return t.onNetworkAvailable();\n      }, this.networkUnavailableListener = function () {\n        return t.onNetworkUnavailable();\n      }, this.callbacks = [], this.configureNetworkMonitoring();\n    }\n\n    return t.prototype.addCallback = function (t) {\n      this.callbacks.push(t);\n    }, t.prototype.shutdown = function () {\n      window.removeEventListener(\"online\", this.networkAvailableListener), window.removeEventListener(\"offline\", this.networkUnavailableListener);\n    }, t.prototype.configureNetworkMonitoring = function () {\n      window.addEventListener(\"online\", this.networkAvailableListener), window.addEventListener(\"offline\", this.networkUnavailableListener);\n    }, t.prototype.onNetworkAvailable = function () {\n      Bl(Rv, \"Network connectivity changed: AVAILABLE\");\n\n      for (var t = 0, e = this.callbacks; t < e.length; t++) {\n        (0, e[t])(0);\n      }\n    }, t.prototype.onNetworkUnavailable = function () {\n      Bl(Rv, \"Network connectivity changed: UNAVAILABLE\");\n\n      for (var t = 0, e = this.callbacks; t < e.length; t++) {\n        (0, e[t])(1);\n      }\n    }, t.isAvailable = function () {\n      return \"undefined\" != typeof window && void 0 !== window.addEventListener && void 0 !== window.removeEventListener;\n    }, t;\n  }(),\n      Pv = function () {\n    function t(t) {\n      this.sendFn = t.sendFn, this.closeFn = t.closeFn;\n    }\n\n    return t.prototype.onOpen = function (t) {\n      Ql(!this.wrappedOnOpen, \"Called onOpen on stream twice!\"), this.wrappedOnOpen = t;\n    }, t.prototype.onClose = function (t) {\n      Ql(!this.wrappedOnClose, \"Called onClose on stream twice!\"), this.wrappedOnClose = t;\n    }, t.prototype.onMessage = function (t) {\n      Ql(!this.wrappedOnMessage, \"Called onMessage on stream twice!\"), this.wrappedOnMessage = t;\n    }, t.prototype.close = function () {\n      this.closeFn();\n    }, t.prototype.send = function (t) {\n      this.sendFn(t);\n    }, t.prototype.callOnOpen = function () {\n      Ql(void 0 !== this.wrappedOnOpen, \"Cannot call onOpen because no callback was set\"), this.wrappedOnOpen();\n    }, t.prototype.callOnClose = function (t) {\n      Ql(void 0 !== this.wrappedOnClose, \"Cannot call onClose because no callback was set\"), this.wrappedOnClose(t);\n    }, t.prototype.callOnMessage = function (t) {\n      Ql(void 0 !== this.wrappedOnMessage, \"Cannot call onMessage because no callback was set\"), this.wrappedOnMessage(t);\n    }, t;\n  }(),\n      Mv = \"Connection\",\n      xv = {\n    BatchGetDocuments: \"batchGet\",\n    Commit: \"commit\"\n  },\n      Lv = \"gl-js/ fire/\" + Fl,\n      Fv = function () {\n    function t(t) {\n      this.databaseId = t.databaseId;\n      var e = t.ssl ? \"https\" : \"http\";\n      this.baseUrl = e + \"://\" + t.host, this.forceLongPolling = t.forceLongPolling;\n    }\n\n    return t.prototype.modifyHeadersForRequest = function (t, e) {\n      if (e) for (var n in e.authHeaders) e.authHeaders.hasOwnProperty(n) && (t[n] = e.authHeaders[n]);\n      t[\"X-Goog-Api-Client\"] = Lv;\n    }, t.prototype.invokeRPC = function (o, a, s) {\n      var u = this,\n          c = this.makeUrl(o);\n      return new Promise(function (n, r) {\n        var i = new Ll();\n        i.listenOnce(Ml.COMPLETE, function () {\n          try {\n            switch (i.getLastErrorCode()) {\n              case Pl.NO_ERROR:\n                var t = i.getResponseJson();\n                Bl(Mv, \"XHR received:\", JSON.stringify(t)), n(t);\n                break;\n\n              case Pl.TIMEOUT:\n                Bl(Mv, 'RPC \"' + o + '\" timed out'), r(new Yl(zl.DEADLINE_EXCEEDED, \"Request time out\"));\n                break;\n\n              case Pl.HTTP_ERROR:\n                var e = i.getStatus();\n                Bl(Mv, 'RPC \"' + o + '\" failed with status:', e, \"response text:\", i.getResponseText()), 0 < e ? r(new Yl(function (t) {\n                  switch (t) {\n                    case 200:\n                      return zl.OK;\n\n                    case 400:\n                      return zl.INVALID_ARGUMENT;\n\n                    case 401:\n                      return zl.UNAUTHENTICATED;\n\n                    case 403:\n                      return zl.PERMISSION_DENIED;\n\n                    case 404:\n                      return zl.NOT_FOUND;\n\n                    case 409:\n                      return zl.ABORTED;\n\n                    case 416:\n                      return zl.OUT_OF_RANGE;\n\n                    case 429:\n                      return zl.RESOURCE_EXHAUSTED;\n\n                    case 499:\n                      return zl.CANCELLED;\n\n                    case 500:\n                      return zl.UNKNOWN;\n\n                    case 501:\n                      return zl.UNIMPLEMENTED;\n\n                    case 503:\n                      return zl.UNAVAILABLE;\n\n                    case 504:\n                      return zl.DEADLINE_EXCEEDED;\n\n                    default:\n                      return 200 <= t && t < 300 ? zl.OK : 400 <= t && t < 500 ? zl.FAILED_PRECONDITION : 500 <= t && t < 600 ? zl.INTERNAL : zl.UNKNOWN;\n                  }\n                }(e), \"Server responded with status \" + i.getStatusText())) : (Bl(Mv, 'RPC \"' + o + '\" failed'), r(new Yl(zl.UNAVAILABLE, \"Connection failed.\")));\n                break;\n\n              default:\n                Kl('RPC \"' + o + '\" failed with unanticipated webchannel error ' + i.getLastErrorCode() + \": \" + i.getLastError() + \", giving up.\");\n            }\n          } finally {\n            Bl(Mv, 'RPC \"' + o + '\" completed.');\n          }\n        });\n        var t = JSON.stringify(a);\n        Bl(Mv, \"XHR sending: \", c + \" \" + t);\n        var e = {\n          \"Content-Type\": \"text/plain\"\n        };\n        u.modifyHeadersForRequest(e, s), i.send(c, \"POST\", t, e, 15);\n      });\n    }, t.prototype.invokeStreamingRPC = function (t, e, n) {\n      return this.invokeRPC(t, e, n);\n    }, t.prototype.openStream = function (t, e) {\n      var n = [this.baseUrl, \"/\", \"google.firestore.v1.Firestore\", \"/\", t, \"/channel\"],\n          r = Ol(),\n          i = {\n        backgroundChannelTest: !0,\n        httpSessionIdParam: \"gsessionid\",\n        initMessageHeaders: {},\n        messageUrlParams: {\n          database: \"projects/\" + this.databaseId.projectId + \"/databases/\" + this.databaseId.database\n        },\n        sendRawJson: !0,\n        supportsCrossDomainXhr: !0,\n        internalChannelParams: {\n          forwardChannelRequestTimeoutMs: 6e5\n        },\n        forceLongPolling: this.forceLongPolling\n      };\n      this.modifyHeadersForRequest(i.initMessageHeaders, e), Nr() || (i.httpHeadersOverwriteParam = \"$httpHeaders\");\n      var o = n.join(\"\");\n      Bl(Mv, \"Creating WebChannel: \" + o + \" \" + i);\n\n      var s = r.createWebChannel(o, i),\n          a = !1,\n          u = !1,\n          c = new Pv({\n        sendFn: function (t) {\n          u ? Bl(Mv, \"Not sending because WebChannel is closed:\", t) : (a || (Bl(Mv, \"Opening WebChannel transport.\"), s.open(), a = !0), Bl(Mv, \"WebChannel sending:\", t), s.send(t));\n        },\n        closeFn: function () {\n          return s.close();\n        }\n      }),\n          h = function (t, e) {\n        s.listen(t, function (t) {\n          try {\n            e(t);\n          } catch (t) {\n            setTimeout(function () {\n              throw t;\n            }, 0);\n          }\n        });\n      };\n\n      return h(xl.EventType.OPEN, function () {\n        u || Bl(Mv, \"WebChannel transport opened.\");\n      }), h(xl.EventType.CLOSE, function () {\n        u || (u = !0, Bl(Mv, \"WebChannel transport closed\"), c.callOnClose());\n      }), h(xl.EventType.ERROR, function (t) {\n        u || (u = !0, Bl(Mv, \"WebChannel transport errored:\", t), c.callOnClose(new Yl(zl.UNAVAILABLE, \"The operation could not be completed\")));\n      }), h(xl.EventType.MESSAGE, function (t) {\n        if (!u) {\n          var e = t.data[0];\n          Ql(!!e, \"Got a webchannel message without data.\");\n          var n = e,\n              r = n.error || n[0] && n[0].error;\n\n          if (r) {\n            Bl(Mv, \"WebChannel received error:\", r);\n\n            var i = r.status,\n                o = function (t) {\n              var e = tm[t];\n              if (void 0 !== e) return im(e);\n            }(i),\n                a = r.message;\n\n            void 0 === o && (o = zl.INTERNAL, a = \"Unknown error status: \" + i + \" with message \" + r.message), u = !0, c.callOnClose(new Yl(o, a)), s.close();\n          } else Bl(Mv, \"WebChannel received:\", e), c.callOnMessage(e);\n        }\n      }), setTimeout(function () {\n        c.callOnOpen();\n      }, 0), c;\n    }, t.prototype.makeUrl = function (t) {\n      var e = xv[t];\n      Ql(void 0 !== e, \"Unknown REST mapping for: \" + t);\n      var n = [this.baseUrl, \"/\", \"v1\"];\n      return n.push(\"/projects/\"), n.push(this.databaseId.projectId), n.push(\"/databases/\"), n.push(this.databaseId.database), n.push(\"/documents\"), n.push(\":\"), n.push(e), n.join(\"\");\n    }, t;\n  }(),\n      Uv = function () {\n    function t() {\n      this.emptyByteString = \"\", this.base64Available = \"undefined\" != typeof atob;\n    }\n\n    return Object.defineProperty(t.prototype, \"document\", {\n      get: function () {\n        return \"undefined\" != typeof document ? document : null;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"window\", {\n      get: function () {\n        return \"undefined\" != typeof window ? window : null;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.loadConnection = function (t) {\n      return Promise.resolve(new Fv(t));\n    }, t.prototype.newConnectivityMonitor = function () {\n      return Ov.isAvailable() ? new Ov() : new Dv();\n    }, t.prototype.newSerializer = function (t) {\n      return new $m(t, {\n        useProto3Json: !0\n      });\n    }, t.prototype.formatJSON = function (t) {\n      return JSON.stringify(t);\n    }, t.prototype.atob = function (t) {\n      return atob(t);\n    }, t.prototype.btoa = function (t) {\n      return btoa(t);\n    }, t;\n  }();\n\n  Hl.setPlatform(new Uv()), kv(Hh);\n\n  var qv = {\n    OK: \"ok\",\n    CANCELLED: \"cancelled\",\n    UNKNOWN: \"unknown\",\n    INVALID_ARGUMENT: \"invalid-argument\",\n    DEADLINE_EXCEEDED: \"deadline-exceeded\",\n    NOT_FOUND: \"not-found\",\n    ALREADY_EXISTS: \"already-exists\",\n    PERMISSION_DENIED: \"permission-denied\",\n    UNAUTHENTICATED: \"unauthenticated\",\n    RESOURCE_EXHAUSTED: \"resource-exhausted\",\n    FAILED_PRECONDITION: \"failed-precondition\",\n    ABORTED: \"aborted\",\n    OUT_OF_RANGE: \"out-of-range\",\n    UNIMPLEMENTED: \"unimplemented\",\n    INTERNAL: \"internal\",\n    UNAVAILABLE: \"unavailable\",\n    DATA_LOSS: \"data-loss\"\n  },\n      Vv = function (i) {\n    function o(t, e, n) {\n      var r = i.call(this, e) || this;\n      return Object.setPrototypeOf(r, o.prototype), r.code = t, r.details = n, r;\n    }\n\n    return hr(o, i), o;\n  }(Error);\n\n  var Bv = function () {\n    function t(t) {\n      this.app = t;\n    }\n\n    return t.prototype.getAuthToken = function () {\n      return fr(this, void 0, void 0, function () {\n        var e;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return t.trys.push([0, 2,, 3]), [4, this.app.INTERNAL.getToken()];\n\n            case 1:\n              return (e = t.sent()) ? [2, e.accessToken] : [2, void 0];\n\n            case 2:\n              return t.sent(), [2, void 0];\n\n            case 3:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.getInstanceIdToken = function () {\n      return fr(this, void 0, void 0, function () {\n        var e;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return t.trys.push([0, 2,, 3]), this.app.messaging ? [4, this.app.messaging().getToken()] : [2, void 0];\n\n            case 1:\n              return (e = t.sent()) ? [2, e] : [2, void 0];\n\n            case 2:\n              return t.sent(), [2, void 0];\n\n            case 3:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.getContext = function () {\n      return fr(this, void 0, void 0, function () {\n        var e, n;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.getAuthToken()];\n\n            case 1:\n              return e = t.sent(), [4, this.getInstanceIdToken()];\n\n            case 2:\n              return n = t.sent(), [2, {\n                authToken: e,\n                instanceIdToken: n\n              }];\n          }\n        });\n      });\n    }, t;\n  }();\n\n  function jv(t, e) {\n    var n = {};\n\n    for (var r in t) t.hasOwnProperty(r) && (n[r] = e(t[r]));\n\n    return n;\n  }\n\n  var Wv = function () {\n    function t() {}\n\n    return t.prototype.encode = function (t) {\n      var e = this;\n      if (null == t) return null;\n      if (t instanceof Number && (t = t.valueOf()), \"number\" == typeof t && isFinite(t)) return t;\n      if (!0 === t || !1 === t) return t;\n      if (\"[object String]\" === Object.prototype.toString.call(t)) return t;\n      if (Array.isArray(t)) return t.map(function (t) {\n        return e.encode(t);\n      });\n      if (\"function\" == typeof t || \"object\" == typeof t) return jv(t, function (t) {\n        return e.encode(t);\n      });\n      throw new Error(\"Data cannot be encoded in JSON: \" + t);\n    }, t.prototype.decode = function (t) {\n      var e = this;\n      if (null == t) return t;\n      if (t[\"@type\"]) switch (t[\"@type\"]) {\n        case \"type.googleapis.com/google.protobuf.Int64Value\":\n        case \"type.googleapis.com/google.protobuf.UInt64Value\":\n          var n = Number(t.value);\n          if (isNaN(n)) throw new Error(\"Data cannot be decoded from JSON: \" + t);\n          return n;\n\n        default:\n          throw new Error(\"Data cannot be decoded from JSON: \" + t);\n      }\n      return Array.isArray(t) ? t.map(function (t) {\n        return e.decode(t);\n      }) : \"function\" == typeof t || \"object\" == typeof t ? jv(t, function (t) {\n        return e.decode(t);\n      }) : t;\n    }, t;\n  }();\n\n  var Kv,\n      Qv,\n      Hv = function () {\n    function t(t, e) {\n      var n = this;\n      void 0 === e && (e = \"us-central1\"), this.app_ = t, this.region_ = e, this.serializer = new Wv(), this.emulatorOrigin = null, this.INTERNAL = {\n        delete: function () {\n          return n.deleteService();\n        }\n      }, this.contextProvider = new Bv(t), this.cancelAllRequests = new Promise(function (t) {\n        n.deleteService = function () {\n          return t();\n        };\n      });\n    }\n\n    return Object.defineProperty(t.prototype, \"app\", {\n      get: function () {\n        return this.app_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype._url = function (t) {\n      var e = this.app_.options.projectId,\n          n = this.region_;\n      return null === this.emulatorOrigin ? \"https://\" + n + \"-\" + e + \".cloudfunctions.net/\" + t : this.emulatorOrigin + \"/\" + e + \"/\" + n + \"/\" + t;\n    }, t.prototype.useFunctionsEmulator = function (t) {\n      this.emulatorOrigin = t;\n    }, t.prototype.httpsCallable = function (e, n) {\n      var r = this;\n      return function (t) {\n        return r.call(e, t, n || {});\n      };\n    }, t.prototype.postJSON = function (r, i, o) {\n      return fr(this, void 0, void 0, function () {\n        var e, n;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              o.append(\"Content-Type\", \"application/json\"), t.label = 1;\n\n            case 1:\n              return t.trys.push([1, 3,, 4]), [4, fetch(r, {\n                method: \"POST\",\n                body: JSON.stringify(i),\n                headers: o\n              })];\n\n            case 2:\n              return e = t.sent(), [3, 4];\n\n            case 3:\n              return t.sent(), [2, {\n                status: 0,\n                json: null\n              }];\n\n            case 4:\n              n = null, t.label = 5;\n\n            case 5:\n              return t.trys.push([5, 7,, 8]), [4, e.json()];\n\n            case 6:\n              return n = t.sent(), [3, 8];\n\n            case 7:\n              return t.sent(), [3, 8];\n\n            case 8:\n              return [2, {\n                status: e.status,\n                json: n\n              }];\n          }\n        });\n      });\n    }, t.prototype.call = function (h, l, f) {\n      return fr(this, void 0, void 0, function () {\n        var e, r, i, o, a, s, u, c;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return e = this._url(h), l = this.serializer.encode(l), r = {\n                data: l\n              }, i = new Headers(), [4, this.contextProvider.getContext()];\n\n            case 1:\n              return (o = t.sent()).authToken && i.append(\"Authorization\", \"Bearer \" + o.authToken), o.instanceIdToken && i.append(\"Firebase-Instance-ID-Token\", o.instanceIdToken), a = f.timeout || 7e4, [4, Promise.race([this.postJSON(e, r, i), (n = a, new Promise(function (t, e) {\n                setTimeout(function () {\n                  e(new Vv(\"deadline-exceeded\", \"deadline-exceeded\"));\n                }, n);\n              })), this.cancelAllRequests])];\n\n            case 2:\n              if (!(s = t.sent())) throw new Vv(\"cancelled\", \"Firebase Functions instance was deleted.\");\n              if (u = function (t, e, n) {\n                var r = function (t) {\n                  if (200 <= t && t < 300) return \"ok\";\n\n                  switch (t) {\n                    case 0:\n                      return \"internal\";\n\n                    case 400:\n                      return \"invalid-argument\";\n\n                    case 401:\n                      return \"unauthenticated\";\n\n                    case 403:\n                      return \"permission-denied\";\n\n                    case 404:\n                      return \"not-found\";\n\n                    case 409:\n                      return \"aborted\";\n\n                    case 429:\n                      return \"resource-exhausted\";\n\n                    case 499:\n                      return \"cancelled\";\n\n                    case 500:\n                      return \"internal\";\n\n                    case 501:\n                      return \"unimplemented\";\n\n                    case 503:\n                      return \"unavailable\";\n\n                    case 504:\n                      return \"deadline-exceeded\";\n                  }\n\n                  return \"unknown\";\n                }(t),\n                    i = r,\n                    o = void 0;\n\n                try {\n                  var a = e && e.error;\n\n                  if (a) {\n                    var s = a.status;\n\n                    if (\"string\" == typeof s) {\n                      if (!qv[s]) return new Vv(\"internal\", \"internal\");\n                      r = qv[s], i = s;\n                    }\n\n                    var u = a.message;\n                    \"string\" == typeof u && (i = u), void 0 !== (o = a.details) && (o = n.decode(o));\n                  }\n                } catch (t) {}\n\n                return \"ok\" === r ? null : new Vv(r, i, o);\n              }(s.status, s.json, this.serializer)) throw u;\n              if (!s.json) throw new Vv(\"internal\", \"Response is not valid JSON object.\");\n              if (void 0 === (c = s.json.data) && (c = s.json.result), void 0 === c) throw new Vv(\"internal\", \"Response is missing data field.\");\n              return [2, {\n                data: this.serializer.decode(c)\n              }];\n          }\n\n          var n;\n        });\n      });\n    }, t;\n  }();\n\n  function Gv(t, e, n) {\n    return new Hv(t, n);\n  }\n\n  Kv = {\n    Functions: Hv\n  }, Hh.INTERNAL.registerService(\"functions\", Gv, Kv, void 0, !0);\n  var zv,\n      Yv,\n      Xv,\n      Jv,\n      $v = ((Qv = {})[\"only-available-in-window\"] = \"This method is available in a Window context.\", Qv[\"only-available-in-sw\"] = \"This method is available in a service worker context.\", Qv[\"should-be-overriden\"] = \"This method should be overriden by extended classes.\", Qv[\"bad-sender-id\"] = \"Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().\", Qv[\"permission-default\"] = \"The required permissions were not granted and dismissed instead.\", Qv[\"permission-blocked\"] = \"The required permissions were not granted and blocked instead.\", Qv[\"unsupported-browser\"] = \"This browser doesn't support the API's required to use the firebase SDK.\", Qv[\"notifications-blocked\"] = \"Notifications have been blocked.\", Qv[\"failed-serviceworker-registration\"] = \"We are unable to register the default service worker. {$browserErrorMessage}\", Qv[\"sw-registration-expected\"] = \"A service worker registration was the expected input.\", Qv[\"get-subscription-failed\"] = \"There was an error when trying to get any existing Push Subscriptions.\", Qv[\"invalid-saved-token\"] = \"Unable to access details of the saved token.\", Qv[\"sw-reg-redundant\"] = \"The service worker being used for push was made redundant.\", Qv[\"token-subscribe-failed\"] = \"A problem occured while subscribing the user to FCM: {$errorInfo}\", Qv[\"token-subscribe-no-token\"] = \"FCM returned no token when subscribing the user to push.\", Qv[\"token-subscribe-no-push-set\"] = \"FCM returned an invalid response when getting an FCM token.\", Qv[\"token-unsubscribe-failed\"] = \"A problem occured while unsubscribing the user from FCM: {$errorInfo}\", Qv[\"token-update-failed\"] = \"A problem occured while updating the user from FCM: {$errorInfo}\", Qv[\"token-update-no-token\"] = \"FCM returned no token when updating the user to push.\", Qv[\"use-sw-before-get-token\"] = \"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.\", Qv[\"invalid-delete-token\"] = \"You must pass a valid token into deleteToken(), i.e. the token from getToken().\", Qv[\"delete-token-not-found\"] = \"The deletion attempt for token could not be performed as the token was not found.\", Qv[\"delete-scope-not-found\"] = \"The deletion attempt for service worker scope could not be performed as the scope was not found.\", Qv[\"bg-handler-function-expected\"] = \"The input to setBackgroundMessageHandler() must be a function.\", Qv[\"no-window-client-to-msg\"] = \"An attempt was made to message a non-existant window client.\", Qv[\"unable-to-resubscribe\"] = \"There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}\", Qv[\"no-fcm-token-for-resubscribe\"] = \"Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.\", Qv[\"failed-to-delete-token\"] = \"Unable to delete the currently saved token.\", Qv[\"no-sw-in-reg\"] = \"Even though the service worker registration was successful, there was a problem accessing the service worker itself.\", Qv[\"incorrect-gcm-sender-id\"] = \"Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.\", Qv[\"bad-scope\"] = \"The service worker scope must be a string with at least one character.\", Qv[\"bad-vapid-key\"] = \"The public VAPID key is not a Uint8Array with 65 bytes.\", Qv[\"bad-subscription\"] = \"The subscription must be a valid PushSubscription.\", Qv[\"bad-token\"] = \"The FCM Token used for storage / lookup was not a valid token string.\", Qv[\"bad-push-set\"] = \"The FCM push set used for storage / lookup was not not a valid push set string.\", Qv[\"failed-delete-vapid-key\"] = \"The VAPID key could not be deleted.\", Qv[\"invalid-public-vapid-key\"] = \"The public VAPID key must be a string.\", Qv[\"use-public-key-before-get-token\"] = \"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.\", Qv[\"public-vapid-key-decryption-failed\"] = \"The public VAPID key did not equal 65 bytes when decrypted.\", Qv),\n      Zv = new Dr(\"messaging\", \"Messaging\", $v),\n      tb = new Uint8Array([4, 51, 148, 247, 223, 161, 235, 177, 220, 3, 162, 94, 21, 113, 219, 72, 211, 46, 237, 237, 178, 52, 219, 183, 71, 58, 12, 143, 196, 204, 225, 111, 60, 140, 132, 223, 171, 182, 102, 62, 242, 12, 212, 139, 254, 227, 249, 118, 47, 20, 28, 99, 8, 106, 111, 45, 177, 26, 149, 176, 206, 55, 192, 156, 110]),\n      eb = \"https://fcm.googleapis.com\";\n\n  function nb(t, e) {\n    if (null == t || null == e) return !1;\n    if (t === e) return !0;\n    if (t.byteLength !== e.byteLength) return !1;\n\n    for (var n = new DataView(t), r = new DataView(e), i = 0; i < t.byteLength; i++) if (n.getUint8(i) !== r.getUint8(i)) return !1;\n\n    return !0;\n  }\n\n  function rb(t) {\n    var e;\n    return (e = new Uint8Array(t), btoa(String.fromCharCode.apply(String, yr(e)))).replace(/=/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n  }\n\n  (Yv = zv || (zv = {})).TYPE_OF_MSG = \"firebase-messaging-msg-type\", Yv.DATA = \"firebase-messaging-msg-data\", (Jv = Xv || (Xv = {})).PUSH_MSG_RECEIVED = \"push-msg-received\", Jv.NOTIFICATION_CLICKED = \"notification-clicked\";\n\n  var ib = function () {\n    function t() {}\n\n    return t.prototype.getToken = function (h, l, f) {\n      return fr(this, void 0, void 0, function () {\n        var e, n, r, i, o, a, s, u, c;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              e = rb(l.getKey(\"p256dh\")), n = rb(l.getKey(\"auth\")), r = \"authorized_entity=\" + h + \"&endpoint=\" + l.endpoint + \"&encryption_key=\" + e + \"&encryption_auth=\" + n, nb(f.buffer, tb.buffer) || (i = rb(f), r += \"&application_pub_key=\" + i), (o = new Headers()).append(\"Content-Type\", \"application/x-www-form-urlencoded\"), a = {\n                method: \"POST\",\n                headers: o,\n                body: r\n              }, t.label = 1;\n\n            case 1:\n              return t.trys.push([1, 4,, 5]), [4, fetch(eb + \"/fcm/connect/subscribe\", a)];\n\n            case 2:\n              return [4, t.sent().json()];\n\n            case 3:\n              return s = t.sent(), [3, 5];\n\n            case 4:\n              throw u = t.sent(), Zv.create(\"token-subscribe-failed\", {\n                errorInfo: u\n              });\n\n            case 5:\n              if (s.error) throw c = s.error.message, Zv.create(\"token-subscribe-failed\", {\n                errorInfo: c\n              });\n              if (!s.token) throw Zv.create(\"token-subscribe-no-token\");\n              if (!s.pushSet) throw Zv.create(\"token-subscribe-no-push-set\");\n              return [2, {\n                token: s.token,\n                pushSet: s.pushSet\n              }];\n          }\n        });\n      });\n    }, t.prototype.updateToken = function (h, l, f, p, d) {\n      return fr(this, void 0, void 0, function () {\n        var e, n, r, i, o, a, s, u, c;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              e = rb(p.getKey(\"p256dh\")), n = rb(p.getKey(\"auth\")), r = \"push_set=\" + f + \"&token=\" + l + \"&authorized_entity=\" + h + \"&endpoint=\" + p.endpoint + \"&encryption_key=\" + e + \"&encryption_auth=\" + n, nb(d.buffer, tb.buffer) || (i = rb(d), r += \"&application_pub_key=\" + i), (o = new Headers()).append(\"Content-Type\", \"application/x-www-form-urlencoded\"), a = {\n                method: \"POST\",\n                headers: o,\n                body: r\n              }, t.label = 1;\n\n            case 1:\n              return t.trys.push([1, 4,, 5]), [4, fetch(eb + \"/fcm/connect/subscribe\", a)];\n\n            case 2:\n              return [4, t.sent().json()];\n\n            case 3:\n              return s = t.sent(), [3, 5];\n\n            case 4:\n              throw u = t.sent(), Zv.create(\"token-update-failed\", {\n                errorInfo: u\n              });\n\n            case 5:\n              if (s.error) throw c = s.error.message, Zv.create(\"token-update-failed\", {\n                errorInfo: c\n              });\n              if (!s.token) throw Zv.create(\"token-update-no-token\");\n              return [2, s.token];\n          }\n        });\n      });\n    }, t.prototype.deleteToken = function (s, u, c) {\n      return fr(this, void 0, void 0, function () {\n        var e, n, r, i, o, a;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              e = \"authorized_entity=\" + s + \"&token=\" + u + \"&pushSet=\" + c, (n = new Headers()).append(\"Content-Type\", \"application/x-www-form-urlencoded\"), r = {\n                method: \"POST\",\n                headers: n,\n                body: e\n              }, t.label = 1;\n\n            case 1:\n              return t.trys.push([1, 4,, 5]), [4, fetch(eb + \"/fcm/connect/unsubscribe\", r)];\n\n            case 2:\n              return [4, t.sent().json()];\n\n            case 3:\n              if ((i = t.sent()).error) throw o = i.error.message, Zv.create(\"token-unsubscribe-failed\", {\n                errorInfo: o\n              });\n              return [3, 5];\n\n            case 4:\n              throw a = t.sent(), Zv.create(\"token-unsubscribe-failed\", {\n                errorInfo: a\n              });\n\n            case 5:\n              return [2];\n          }\n        });\n      });\n    }, t;\n  }();\n\n  function ob(t) {\n    for (var e = (t + \"=\".repeat((4 - t.length % 4) % 4)).replace(/\\-/g, \"+\").replace(/_/g, \"/\"), n = atob(e), r = new Uint8Array(n.length), i = 0; i < n.length; ++i) r[i] = n.charCodeAt(i);\n\n    return r;\n  }\n\n  var ab = \"undefined\",\n      sb = \"fcm_token_object_Store\";\n\n  function ub() {\n    var e = indexedDB.open(ab);\n    e.onerror = function (t) {}, e.onsuccess = function (t) {\n      !function (n) {\n        if (n.objectStoreNames.contains(sb)) {\n          var t = n.transaction(sb).objectStore(sb),\n              r = new ib(),\n              i = t.openCursor();\n          i.onerror = function (t) {\n            console.warn(\"Unable to cleanup old IDB.\", t);\n          }, i.onsuccess = function () {\n            var t = i.result;\n\n            if (t) {\n              var e = t.value;\n              r.deleteToken(e.fcmSenderId, e.fcmToken, e.fcmPushSet), t.continue();\n            } else n.close(), indexedDB.deleteDatabase(ab);\n          };\n        }\n      }(e.result);\n    };\n  }\n\n  var cb = function () {\n    function t() {\n      this.dbPromise = null;\n    }\n\n    return t.prototype.get = function (e) {\n      return this.createTransaction(function (t) {\n        return t.get(e);\n      });\n    }, t.prototype.getIndex = function (e, n) {\n      return this.createTransaction(function (t) {\n        return t.index(e).get(n);\n      });\n    }, t.prototype.put = function (e) {\n      return this.createTransaction(function (t) {\n        return t.put(e);\n      }, \"readwrite\");\n    }, t.prototype.delete = function (e) {\n      return this.createTransaction(function (t) {\n        return t.delete(e);\n      }, \"readwrite\");\n    }, t.prototype.closeDatabase = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.dbPromise ? [4, this.dbPromise] : [3, 2];\n\n            case 1:\n              t.sent().close(), this.dbPromise = null, t.label = 2;\n\n            case 2:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.createTransaction = function (a, s) {\n      return void 0 === s && (s = \"readonly\"), fr(this, void 0, void 0, function () {\n        var e, r, i, o;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.getDb()];\n\n            case 1:\n              return e = t.sent(), r = e.transaction(this.objectStoreName, s), i = r.objectStore(this.objectStoreName), [4, (n = a(i), new Promise(function (t, e) {\n                n.onsuccess = function () {\n                  t(n.result);\n                }, n.onerror = function () {\n                  e(n.error);\n                };\n              }))];\n\n            case 2:\n              return o = t.sent(), [2, new Promise(function (t, e) {\n                r.oncomplete = function () {\n                  t(o);\n                }, r.onerror = function () {\n                  e(r.error);\n                };\n              })];\n          }\n\n          var n;\n        });\n      });\n    }, t.prototype.getDb = function () {\n      var r = this;\n      return this.dbPromise || (this.dbPromise = new Promise(function (t, e) {\n        var n = indexedDB.open(r.dbName, r.dbVersion);\n        n.onsuccess = function () {\n          t(n.result);\n        }, n.onerror = function () {\n          r.dbPromise = null, e(n.error);\n        }, n.onupgradeneeded = function (t) {\n          return r.onDbUpgrade(n, t);\n        };\n      })), this.dbPromise;\n    }, t;\n  }();\n\n  var hb = function (e) {\n    function t() {\n      var t = null !== e && e.apply(this, arguments) || this;\n      return t.dbName = \"fcm_token_details_db\", t.dbVersion = 3, t.objectStoreName = \"fcm_token_object_Store\", t;\n    }\n\n    return hr(t, e), t.prototype.onDbUpgrade = function (t, e) {\n      var n = t.result;\n\n      switch (e.oldVersion) {\n        case 0:\n          (r = n.createObjectStore(this.objectStoreName, {\n            keyPath: \"swScope\"\n          })).createIndex(\"fcmSenderId\", \"fcmSenderId\", {\n            unique: !1\n          }), r.createIndex(\"fcmToken\", \"fcmToken\", {\n            unique: !0\n          });\n\n        case 1:\n          ub();\n\n        case 2:\n          var r,\n              i = (r = t.transaction.objectStore(this.objectStoreName)).openCursor();\n\n          i.onsuccess = function () {\n            var t = i.result;\n\n            if (t) {\n              var e = t.value,\n                  n = lr({}, e);\n              e.createTime || (n.createTime = Date.now()), \"string\" == typeof e.vapidKey && (n.vapidKey = ob(e.vapidKey)), \"string\" == typeof e.auth && (n.auth = ob(e.auth).buffer), \"string\" == typeof e.auth && (n.p256dh = ob(e.p256dh).buffer), t.update(n), t.continue();\n            }\n          };\n\n      }\n    }, t.prototype.getTokenDetailsFromToken = function (e) {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          if (!e) throw Zv.create(\"bad-token\");\n          return lb({\n            fcmToken: e\n          }), [2, this.getIndex(\"fcmToken\", e)];\n        });\n      });\n    }, t.prototype.getTokenDetailsFromSWScope = function (e) {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          if (!e) throw Zv.create(\"bad-scope\");\n          return lb({\n            swScope: e\n          }), [2, this.get(e)];\n        });\n      });\n    }, t.prototype.saveTokenDetails = function (e) {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          if (!e.swScope) throw Zv.create(\"bad-scope\");\n          if (!e.vapidKey) throw Zv.create(\"bad-vapid-key\");\n          if (!e.endpoint || !e.auth || !e.p256dh) throw Zv.create(\"bad-subscription\");\n          if (!e.fcmSenderId) throw Zv.create(\"bad-sender-id\");\n          if (!e.fcmToken) throw Zv.create(\"bad-token\");\n          if (!e.fcmPushSet) throw Zv.create(\"bad-push-set\");\n          return lb(e), [2, this.put(e)];\n        });\n      });\n    }, t.prototype.deleteToken = function (n) {\n      return fr(this, void 0, void 0, function () {\n        var e;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return \"string\" != typeof n || 0 === n.length ? [2, Promise.reject(Zv.create(\"invalid-delete-token\"))] : [4, this.getTokenDetailsFromToken(n)];\n\n            case 1:\n              if (!(e = t.sent())) throw Zv.create(\"delete-token-not-found\");\n              return [4, this.delete(e.swScope)];\n\n            case 2:\n              return t.sent(), [2, e];\n          }\n        });\n      });\n    }, t;\n  }(cb);\n\n  function lb(t) {\n    if (t.fcmToken && (\"string\" != typeof t.fcmToken || 0 === t.fcmToken.length)) throw Zv.create(\"bad-token\");\n    if (t.swScope && (\"string\" != typeof t.swScope || 0 === t.swScope.length)) throw Zv.create(\"bad-scope\");\n    if (t.vapidKey && (!(t.vapidKey instanceof Uint8Array) || 65 !== t.vapidKey.length)) throw Zv.create(\"bad-vapid-key\");\n    if (t.endpoint && (\"string\" != typeof t.endpoint || 0 === t.endpoint.length)) throw Zv.create(\"bad-subscription\");\n    if (t.auth && !(t.auth instanceof ArrayBuffer)) throw Zv.create(\"bad-subscription\");\n    if (t.p256dh && !(t.p256dh instanceof ArrayBuffer)) throw Zv.create(\"bad-subscription\");\n    if (t.fcmSenderId && (\"string\" != typeof t.fcmSenderId || 0 === t.fcmSenderId.length)) throw Zv.create(\"bad-sender-id\");\n    if (t.fcmPushSet && (\"string\" != typeof t.fcmPushSet || 0 === t.fcmPushSet.length)) throw Zv.create(\"bad-push-set\");\n  }\n\n  var fb = function (e) {\n    function t() {\n      var t = null !== e && e.apply(this, arguments) || this;\n      return t.dbName = \"fcm_vapid_details_db\", t.dbVersion = 1, t.objectStoreName = \"fcm_vapid_object_Store\", t;\n    }\n\n    return hr(t, e), t.prototype.onDbUpgrade = function (t) {\n      t.result.createObjectStore(this.objectStoreName, {\n        keyPath: \"swScope\"\n      });\n    }, t.prototype.getVapidFromSWScope = function (n) {\n      return fr(this, void 0, void 0, function () {\n        var e;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (\"string\" != typeof n || 0 === n.length) throw Zv.create(\"bad-scope\");\n              return [4, this.get(n)];\n\n            case 1:\n              return [2, (e = t.sent()) ? e.vapidKey : void 0];\n          }\n        });\n      });\n    }, t.prototype.saveVapidDetails = function (n, r) {\n      return fr(this, void 0, void 0, function () {\n        var e;\n        return pr(this, function (t) {\n          if (\"string\" != typeof n || 0 === n.length) throw Zv.create(\"bad-scope\");\n          if (null === r || 65 !== r.length) throw Zv.create(\"bad-vapid-key\");\n          return e = {\n            swScope: n,\n            vapidKey: r\n          }, [2, this.put(e)];\n        });\n      });\n    }, t.prototype.deleteVapidDetails = function (n) {\n      return fr(this, void 0, void 0, function () {\n        var e;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.getVapidFromSWScope(n)];\n\n            case 1:\n              if (!(e = t.sent())) throw Zv.create(\"delete-scope-not-found\");\n              return [4, this.delete(n)];\n\n            case 2:\n              return t.sent(), [2, e];\n          }\n        });\n      });\n    }, t;\n  }(cb),\n      pb = \"messagingSenderId\",\n      db = function () {\n    function t(t) {\n      var e = this;\n      if (!t.options[pb] || \"string\" != typeof t.options[pb]) throw Zv.create(\"bad-sender-id\");\n      this.messagingSenderId = t.options[pb], this.tokenDetailsModel = new hb(), this.vapidDetailsModel = new fb(), this.iidModel = new ib(), this.app = t, this.INTERNAL = {\n        delete: function () {\n          return e.delete();\n        }\n      };\n    }\n\n    return t.prototype.getToken = function () {\n      return fr(this, void 0, void 0, function () {\n        var e, n, r, i, o;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (\"denied\" === (e = this.getNotificationPermission_())) throw Zv.create(\"notifications-blocked\");\n              return \"granted\" !== e ? [2, null] : [4, this.getSWRegistration_()];\n\n            case 1:\n              return n = t.sent(), [4, this.getPublicVapidKey_()];\n\n            case 2:\n              return r = t.sent(), [4, this.getPushSubscription(n, r)];\n\n            case 3:\n              return i = t.sent(), [4, this.tokenDetailsModel.getTokenDetailsFromSWScope(n.scope)];\n\n            case 4:\n              return (o = t.sent()) ? [2, this.manageExistingToken(n, i, r, o)] : [2, this.getNewToken(n, i, r)];\n          }\n        });\n      });\n    }, t.prototype.manageExistingToken = function (e, n, r, i) {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return function (t, e, n) {\n                if (!n.vapidKey || !nb(e.buffer, n.vapidKey.buffer)) return !1;\n                var r = t.endpoint === n.endpoint,\n                    i = nb(t.getKey(\"auth\"), n.auth),\n                    o = nb(t.getKey(\"p256dh\"), n.p256dh);\n                return r && i && o;\n              }(n, r, i) ? Date.now() < i.createTime + 6048e5 ? [2, i.fcmToken] : [2, this.updateToken(e, n, r, i)] : [4, this.deleteTokenFromDB(i.fcmToken)];\n\n            case 1:\n              return t.sent(), [2, this.getNewToken(e, n, r)];\n          }\n        });\n      });\n    }, t.prototype.updateToken = function (i, o, a, s) {\n      return fr(this, void 0, void 0, function () {\n        var e, n, r;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return t.trys.push([0, 4,, 6]), [4, this.iidModel.updateToken(this.messagingSenderId, s.fcmToken, s.fcmPushSet, o, a)];\n\n            case 1:\n              return e = t.sent(), n = {\n                swScope: i.scope,\n                vapidKey: a,\n                fcmSenderId: this.messagingSenderId,\n                fcmToken: e,\n                fcmPushSet: s.fcmPushSet,\n                createTime: Date.now(),\n                endpoint: o.endpoint,\n                auth: o.getKey(\"auth\"),\n                p256dh: o.getKey(\"p256dh\")\n              }, [4, this.tokenDetailsModel.saveTokenDetails(n)];\n\n            case 2:\n              return t.sent(), [4, this.vapidDetailsModel.saveVapidDetails(i.scope, a)];\n\n            case 3:\n              return t.sent(), [2, e];\n\n            case 4:\n              return r = t.sent(), [4, this.deleteToken(s.fcmToken)];\n\n            case 5:\n              throw t.sent(), r;\n\n            case 6:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.getNewToken = function (r, i, o) {\n      return fr(this, void 0, void 0, function () {\n        var e, n;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.iidModel.getToken(this.messagingSenderId, i, o)];\n\n            case 1:\n              return e = t.sent(), n = {\n                swScope: r.scope,\n                vapidKey: o,\n                fcmSenderId: this.messagingSenderId,\n                fcmToken: e.token,\n                fcmPushSet: e.pushSet,\n                createTime: Date.now(),\n                endpoint: i.endpoint,\n                auth: i.getKey(\"auth\"),\n                p256dh: i.getKey(\"p256dh\")\n              }, [4, this.tokenDetailsModel.saveTokenDetails(n)];\n\n            case 2:\n              return t.sent(), [4, this.vapidDetailsModel.saveVapidDetails(r.scope, o)];\n\n            case 3:\n              return t.sent(), [2, e.token];\n          }\n        });\n      });\n    }, t.prototype.deleteToken = function (r) {\n      return fr(this, void 0, void 0, function () {\n        var e, n;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.deleteTokenFromDB(r)];\n\n            case 1:\n              return t.sent(), [4, this.getSWRegistration_()];\n\n            case 2:\n              return (e = t.sent()) ? [4, e.pushManager.getSubscription()] : [3, 4];\n\n            case 3:\n              if (n = t.sent()) return [2, n.unsubscribe()];\n              t.label = 4;\n\n            case 4:\n              return [2, !0];\n          }\n        });\n      });\n    }, t.prototype.deleteTokenFromDB = function (n) {\n      return fr(this, void 0, void 0, function () {\n        var e;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.tokenDetailsModel.deleteToken(n)];\n\n            case 1:\n              return e = t.sent(), [4, this.iidModel.deleteToken(e.fcmSenderId, e.fcmToken, e.fcmPushSet)];\n\n            case 2:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.getPushSubscription = function (e, n) {\n      return e.pushManager.getSubscription().then(function (t) {\n        return t || e.pushManager.subscribe({\n          userVisibleOnly: !0,\n          applicationServerKey: n\n        });\n      });\n    }, t.prototype.requestPermission = function () {\n      throw Zv.create(\"only-available-in-window\");\n    }, t.prototype.useServiceWorker = function (t) {\n      throw Zv.create(\"only-available-in-window\");\n    }, t.prototype.usePublicVapidKey = function (t) {\n      throw Zv.create(\"only-available-in-window\");\n    }, t.prototype.onMessage = function (t, e, n) {\n      throw Zv.create(\"only-available-in-window\");\n    }, t.prototype.onTokenRefresh = function (t, e, n) {\n      throw Zv.create(\"only-available-in-window\");\n    }, t.prototype.setBackgroundMessageHandler = function (t) {\n      throw Zv.create(\"only-available-in-sw\");\n    }, t.prototype.delete = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, Promise.all([this.tokenDetailsModel.closeDatabase(), this.vapidDetailsModel.closeDatabase()])];\n\n            case 1:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.getNotificationPermission_ = function () {\n      return Notification.permission;\n    }, t.prototype.getTokenDetailsModel = function () {\n      return this.tokenDetailsModel;\n    }, t.prototype.getVapidDetailsModel = function () {\n      return this.vapidDetailsModel;\n    }, t.prototype.getIidModel = function () {\n      return this.iidModel;\n    }, t;\n  }();\n\n  var yb = \"FCM_MSG\",\n      mb = function (n) {\n    function t(t) {\n      var e = n.call(this, t) || this;\n      return e.bgMessageHandler = null, self.addEventListener(\"push\", function (t) {\n        e.onPush(t);\n      }), self.addEventListener(\"pushsubscriptionchange\", function (t) {\n        e.onSubChange(t);\n      }), self.addEventListener(\"notificationclick\", function (t) {\n        e.onNotificationClick(t);\n      }), e;\n    }\n\n    return hr(t, n), t.prototype.onPush = function (t) {\n      t.waitUntil(this.onPush_(t));\n    }, t.prototype.onSubChange = function (t) {\n      t.waitUntil(this.onSubChange_(t));\n    }, t.prototype.onNotificationClick = function (t) {\n      t.waitUntil(this.onNotificationClick_(t));\n    }, t.prototype.onPush_ = function (s) {\n      return fr(this, void 0, void 0, function () {\n        var e, n, r, i, o, a;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (!s.data) return [2];\n\n              try {\n                e = s.data.json();\n              } catch (t) {\n                return [2];\n              }\n\n              return [4, this.hasVisibleClients_()];\n\n            case 1:\n              return t.sent() ? [2, this.sendMessageToWindowClients_(e)] : (n = this.getNotificationData_(e)) ? (r = n.title || \"\", [4, this.getSWRegistration_()]) : [3, 3];\n\n            case 2:\n              return i = t.sent(), o = n.actions, a = Notification.maxActions, o && a && o.length > a && console.warn(\"This browser only supports \" + a + \" actions.The remaining actions will not be displayed.\"), [2, i.showNotification(r, n)];\n\n            case 3:\n              return this.bgMessageHandler ? [4, this.bgMessageHandler(e)] : [3, 5];\n\n            case 4:\n              return t.sent(), [2];\n\n            case 5:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.onSubChange_ = function (t) {\n      return fr(this, void 0, void 0, function () {\n        var e, n, r, i;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return t.trys.push([0, 2,, 3]), [4, this.getSWRegistration_()];\n\n            case 1:\n              return e = t.sent(), [3, 3];\n\n            case 2:\n              throw n = t.sent(), Zv.create(\"unable-to-resubscribe\", {\n                errorInfo: n\n              });\n\n            case 3:\n              return t.trys.push([3, 5,, 8]), [4, e.pushManager.getSubscription()];\n\n            case 4:\n              return t.sent(), [3, 8];\n\n            case 5:\n              return r = t.sent(), [4, this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];\n\n            case 6:\n              if (!(i = t.sent())) throw r;\n              return [4, this.deleteToken(i.fcmToken)];\n\n            case 7:\n              throw t.sent(), r;\n\n            case 8:\n              return [2];\n          }\n        });\n      });\n    }, t.prototype.onNotificationClick_ = function (o) {\n      return fr(this, void 0, void 0, function () {\n        var e, n, r, i;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return o.notification && o.notification.data && o.notification.data[yb] ? o.action ? [2] : (o.stopImmediatePropagation(), o.notification.close(), (e = o.notification.data[yb]).notification && (n = e.fcmOptions && e.fcmOptions.link || e.notification.click_action) ? [4, this.getWindowClient_(n)] : [2]) : [2];\n\n            case 1:\n              return (r = t.sent()) ? [3, 3] : [4, self.clients.openWindow(n)];\n\n            case 2:\n              return r = t.sent(), [3, 5];\n\n            case 3:\n              return [4, r.focus()];\n\n            case 4:\n              r = t.sent(), t.label = 5;\n\n            case 5:\n              return r ? (delete e.notification, delete e.fcmOptions, i = vb(Xv.NOTIFICATION_CLICKED, e), [2, this.attemptToMessageClient_(r, i)]) : [2];\n          }\n        });\n      });\n    }, t.prototype.getNotificationData_ = function (t) {\n      var e;\n\n      if (t && \"object\" == typeof t.notification) {\n        var n = lr({}, t.notification);\n        return n.data = lr({}, t.notification.data, ((e = {})[yb] = t, e)), n;\n      }\n    }, t.prototype.setBackgroundMessageHandler = function (t) {\n      if (!t || \"function\" != typeof t) throw Zv.create(\"bg-handler-function-expected\");\n      this.bgMessageHandler = t;\n    }, t.prototype.getWindowClient_ = function (o) {\n      return fr(this, void 0, void 0, function () {\n        var e, n, r, i;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return e = new URL(o, self.location.href).href, [4, gb()];\n\n            case 1:\n              for (n = t.sent(), r = null, i = 0; i < n.length; i++) if (new URL(n[i].url, self.location.href).href === e) {\n                r = n[i];\n                break;\n              }\n\n              return [2, r];\n          }\n        });\n      });\n    }, t.prototype.attemptToMessageClient_ = function (e, n) {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          if (!e) throw Zv.create(\"no-window-client-to-msg\");\n          return e.postMessage(n), [2];\n        });\n      });\n    }, t.prototype.hasVisibleClients_ = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, gb()];\n\n            case 1:\n              return [2, t.sent().some(function (t) {\n                return \"visible\" === t.visibilityState && !t.url.startsWith(\"chrome-extension://\");\n              })];\n          }\n        });\n      });\n    }, t.prototype.sendMessageToWindowClients_ = function (i) {\n      return fr(this, void 0, void 0, function () {\n        var e,\n            n,\n            r = this;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, gb()];\n\n            case 1:\n              return e = t.sent(), n = vb(Xv.PUSH_MSG_RECEIVED, i), [4, Promise.all(e.map(function (t) {\n                return r.attemptToMessageClient_(t, n);\n              }))];\n\n            case 2:\n              return t.sent(), [2];\n          }\n        });\n      });\n    }, t.prototype.getSWRegistration_ = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          return [2, self.registration];\n        });\n      });\n    }, t.prototype.getPublicVapidKey_ = function () {\n      return fr(this, void 0, void 0, function () {\n        var e, n;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return [4, this.getSWRegistration_()];\n\n            case 1:\n              if (!(e = t.sent())) throw Zv.create(\"sw-registration-expected\");\n              return [4, this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];\n\n            case 2:\n              return null == (n = t.sent()) ? [2, tb] : [2, n];\n          }\n        });\n      });\n    }, t;\n  }(db);\n\n  function gb() {\n    return self.clients.matchAll({\n      type: \"window\",\n      includeUncontrolled: !0\n    });\n  }\n\n  function vb(t, e) {\n    var n;\n    return (n = {})[zv.TYPE_OF_MSG] = t, n[zv.DATA] = e, n;\n  }\n\n  var bb,\n      wb = function (n) {\n    function t(t) {\n      var e = n.call(this, t) || this;\n      return e.registrationToUse = null, e.publicVapidKeyToUse = null, e.manifestCheckPromise = null, e.messageObserver = null, e.tokenRefreshObserver = null, e.onMessageInternal = Qr(function (t) {\n        e.messageObserver = t;\n      }), e.onTokenRefreshInternal = Qr(function (t) {\n        e.tokenRefreshObserver = t;\n      }), e.setupSWMessageListener_(), e;\n    }\n\n    return hr(t, n), t.prototype.getToken = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return this.manifestCheckPromise || (this.manifestCheckPromise = function () {\n                return fr(this, void 0, void 0, function () {\n                  var e, n;\n                  return pr(this, function (t) {\n                    switch (t.label) {\n                      case 0:\n                        if (!(e = document.querySelector('link[rel=\"manifest\"]'))) return [2];\n                        t.label = 1;\n\n                      case 1:\n                        return t.trys.push([1, 4,, 5]), [4, fetch(e.href)];\n\n                      case 2:\n                        return [4, t.sent().json()];\n\n                      case 3:\n                        return n = t.sent(), [3, 5];\n\n                      case 4:\n                        return t.sent(), [2];\n\n                      case 5:\n                        if (!n || !n.gcm_sender_id) return [2];\n                        if (\"103953800507\" !== n.gcm_sender_id) throw Zv.create(\"incorrect-gcm-sender-id\");\n                        return [2];\n                    }\n                  });\n                });\n              }()), [4, this.manifestCheckPromise];\n\n            case 1:\n              return t.sent(), [2, n.prototype.getToken.call(this)];\n          }\n        });\n      });\n    }, t.prototype.requestPermission = function () {\n      return fr(this, void 0, void 0, function () {\n        var e;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return \"granted\" === this.getNotificationPermission_() ? [2] : [4, Notification.requestPermission()];\n\n            case 1:\n              if (\"granted\" === (e = t.sent())) return [2];\n              throw \"denied\" === e ? Zv.create(\"permission-blocked\") : Zv.create(\"permission-default\");\n          }\n        });\n      });\n    }, t.prototype.useServiceWorker = function (t) {\n      if (!(t instanceof ServiceWorkerRegistration)) throw Zv.create(\"sw-registration-expected\");\n      if (null != this.registrationToUse) throw Zv.create(\"use-sw-before-get-token\");\n      this.registrationToUse = t;\n    }, t.prototype.usePublicVapidKey = function (t) {\n      if (\"string\" != typeof t) throw Zv.create(\"invalid-public-vapid-key\");\n      if (null != this.publicVapidKeyToUse) throw Zv.create(\"use-public-key-before-get-token\");\n      var e = ob(t);\n      if (65 !== e.length) throw Zv.create(\"public-vapid-key-decryption-failed\");\n      this.publicVapidKeyToUse = e;\n    }, t.prototype.onMessage = function (t, e, n) {\n      return \"function\" == typeof t ? this.onMessageInternal(t, e, n) : this.onMessageInternal(t);\n    }, t.prototype.onTokenRefresh = function (t, e, n) {\n      return \"function\" == typeof t ? this.onTokenRefreshInternal(t, e, n) : this.onTokenRefreshInternal(t);\n    }, t.prototype.waitForRegistrationToActivate_ = function (r) {\n      var i = r.installing || r.waiting || r.active;\n      return new Promise(function (t, e) {\n        if (i) {\n          if (\"activated\" !== i.state) {\n            if (\"redundant\" !== i.state) {\n              var n = function () {\n                if (\"activated\" === i.state) t(r);else {\n                  if (\"redundant\" !== i.state) return;\n                  e(Zv.create(\"sw-reg-redundant\"));\n                }\n                i.removeEventListener(\"statechange\", n);\n              };\n\n              i.addEventListener(\"statechange\", n);\n            } else e(Zv.create(\"sw-reg-redundant\"));\n          } else t(r);\n        } else e(Zv.create(\"no-sw-in-reg\"));\n      });\n    }, t.prototype.getSWRegistration_ = function () {\n      var e = this;\n      return this.registrationToUse ? this.waitForRegistrationToActivate_(this.registrationToUse) : (this.registrationToUse = null, navigator.serviceWorker.register(\"/firebase-messaging-sw.js\", {\n        scope: \"/firebase-cloud-messaging-push-scope\"\n      }).catch(function (t) {\n        throw Zv.create(\"failed-serviceworker-registration\", {\n          browserErrorMessage: t.message\n        });\n      }).then(function (t) {\n        return e.waitForRegistrationToActivate_(t).then(function () {\n          return (e.registrationToUse = t).update(), t;\n        });\n      }));\n    }, t.prototype.getPublicVapidKey_ = function () {\n      return fr(this, void 0, void 0, function () {\n        return pr(this, function (t) {\n          return this.publicVapidKeyToUse ? [2, this.publicVapidKeyToUse] : [2, tb];\n        });\n      });\n    }, t.prototype.setupSWMessageListener_ = function () {\n      var r = this;\n      navigator.serviceWorker.addEventListener(\"message\", function (t) {\n        if (t.data && t.data[zv.TYPE_OF_MSG]) {\n          var e = t.data;\n\n          switch (e[zv.TYPE_OF_MSG]) {\n            case Xv.PUSH_MSG_RECEIVED:\n            case Xv.NOTIFICATION_CLICKED:\n              var n = e[zv.DATA];\n              r.messageObserver && r.messageObserver.next(n);\n          }\n        }\n      }, !1);\n    }, t;\n  }(db);\n\n  function _b() {\n    return self && \"ServiceWorkerGlobalScope\" in self ? \"PushManager\" in self && \"Notification\" in self && ServiceWorkerRegistration.prototype.hasOwnProperty(\"showNotification\") && PushSubscription.prototype.hasOwnProperty(\"getKey\") : navigator.cookieEnabled && \"serviceWorker\" in navigator && \"PushManager\" in window && \"Notification\" in window && \"fetch\" in window && ServiceWorkerRegistration.prototype.hasOwnProperty(\"showNotification\") && PushSubscription.prototype.hasOwnProperty(\"getKey\");\n  }\n\n  bb = {\n    isSupported: _b\n  }, Hh.INTERNAL.registerService(\"messaging\", function (t) {\n    if (!_b()) throw Zv.create(\"unsupported-browser\");\n    return self && \"ServiceWorkerGlobalScope\" in self ? new mb(t) : new wb(t);\n  }, bb);\n\n  var Eb = \"firebasestorage.googleapis.com\",\n      Tb = \"storageBucket\",\n      Sb = function () {\n    function t(t, e) {\n      this.code_ = Cb(t), this.message_ = \"Firebase Storage: \" + e, this.serverResponse_ = null, this.name_ = \"FirebaseError\";\n    }\n\n    return t.prototype.codeProp = function () {\n      return this.code;\n    }, t.prototype.codeEquals = function (t) {\n      return Cb(t) === this.codeProp();\n    }, t.prototype.serverResponseProp = function () {\n      return this.serverResponse_;\n    }, t.prototype.setServerResponseProp = function (t) {\n      this.serverResponse_ = t;\n    }, Object.defineProperty(t.prototype, \"name\", {\n      get: function () {\n        return this.name_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"code\", {\n      get: function () {\n        return this.code_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"message\", {\n      get: function () {\n        return this.message_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"serverResponse\", {\n      get: function () {\n        return this.serverResponse_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t;\n  }(),\n      Ib = {\n    UNKNOWN: \"unknown\",\n    OBJECT_NOT_FOUND: \"object-not-found\",\n    BUCKET_NOT_FOUND: \"bucket-not-found\",\n    PROJECT_NOT_FOUND: \"project-not-found\",\n    QUOTA_EXCEEDED: \"quota-exceeded\",\n    UNAUTHENTICATED: \"unauthenticated\",\n    UNAUTHORIZED: \"unauthorized\",\n    RETRY_LIMIT_EXCEEDED: \"retry-limit-exceeded\",\n    INVALID_CHECKSUM: \"invalid-checksum\",\n    CANCELED: \"canceled\",\n    INVALID_EVENT_NAME: \"invalid-event-name\",\n    INVALID_URL: \"invalid-url\",\n    INVALID_DEFAULT_BUCKET: \"invalid-default-bucket\",\n    NO_DEFAULT_BUCKET: \"no-default-bucket\",\n    CANNOT_SLICE_BLOB: \"cannot-slice-blob\",\n    SERVER_FILE_WRONG_SIZE: \"server-file-wrong-size\",\n    NO_DOWNLOAD_URL: \"no-download-url\",\n    INVALID_ARGUMENT: \"invalid-argument\",\n    INVALID_ARGUMENT_COUNT: \"invalid-argument-count\",\n    APP_DELETED: \"app-deleted\",\n    INVALID_ROOT_OPERATION: \"invalid-root-operation\",\n    INVALID_FORMAT: \"invalid-format\",\n    INTERNAL_ERROR: \"internal-error\"\n  };\n\n  function Cb(t) {\n    return \"storage/\" + t;\n  }\n\n  function Nb() {\n    return new Sb(Ib.UNKNOWN, \"An unknown error occurred, please check the error payload for server response.\");\n  }\n\n  function Ab() {\n    return new Sb(Ib.CANCELED, \"User canceled the upload/download.\");\n  }\n\n  function kb() {\n    return new Sb(Ib.CANNOT_SLICE_BLOB, \"Cannot slice blob for upload. Please retry the upload.\");\n  }\n\n  function Db(t, e, n) {\n    return new Sb(Ib.INVALID_ARGUMENT, \"Invalid argument in `\" + e + \"` at index \" + t + \": \" + n);\n  }\n\n  function Rb() {\n    return new Sb(Ib.APP_DELETED, \"The Firebase app was deleted.\");\n  }\n\n  function Ob(t, e) {\n    return new Sb(Ib.INVALID_FORMAT, \"String does not match format '\" + t + \"': \" + e);\n  }\n\n  function Pb(t) {\n    throw new Sb(Ib.INTERNAL_ERROR, \"Internal error: \" + t);\n  }\n\n  var Mb = {\n    RAW: \"raw\",\n    BASE64: \"base64\",\n    BASE64URL: \"base64url\",\n    DATA_URL: \"data_url\"\n  };\n\n  function xb(t) {\n    switch (t) {\n      case Mb.RAW:\n      case Mb.BASE64:\n      case Mb.BASE64URL:\n      case Mb.DATA_URL:\n        return;\n\n      default:\n        throw \"Expected one of the event types: [\" + Mb.RAW + \", \" + Mb.BASE64 + \", \" + Mb.BASE64URL + \", \" + Mb.DATA_URL + \"].\";\n    }\n  }\n\n  var Lb = function (t, e) {\n    this.data = t, this.contentType = e || null;\n  };\n\n  function Fb(t, e) {\n    switch (t) {\n      case Mb.RAW:\n        return new Lb(Ub(e));\n\n      case Mb.BASE64:\n      case Mb.BASE64URL:\n        return new Lb(qb(t, e));\n\n      case Mb.DATA_URL:\n        return new Lb((n = new Vb(e)).base64 ? qb(Mb.BASE64, n.rest) : function (t) {\n          var e;\n\n          try {\n            e = decodeURIComponent(t);\n          } catch (t) {\n            throw Ob(Mb.DATA_URL, \"Malformed data URL.\");\n          }\n\n          return Ub(e);\n        }(n.rest), new Vb(e).contentType);\n    }\n\n    var n;\n    throw Nb();\n  }\n\n  function Ub(t) {\n    for (var e = [], n = 0; n < t.length; n++) {\n      var r = t.charCodeAt(n);\n      if (r <= 127) e.push(r);else if (r <= 2047) e.push(192 | r >> 6, 128 | 63 & r);else if (55296 == (64512 & r)) {\n        if (n < t.length - 1 && 56320 == (64512 & t.charCodeAt(n + 1))) r = 65536 | (1023 & r) << 10 | 1023 & t.charCodeAt(++n), e.push(240 | r >> 18, 128 | r >> 12 & 63, 128 | r >> 6 & 63, 128 | 63 & r);else e.push(239, 191, 189);\n      } else 56320 == (64512 & r) ? e.push(239, 191, 189) : e.push(224 | r >> 12, 128 | r >> 6 & 63, 128 | 63 & r);\n    }\n\n    return new Uint8Array(e);\n  }\n\n  function qb(e, t) {\n    switch (e) {\n      case Mb.BASE64:\n        var n = -1 !== t.indexOf(\"-\"),\n            r = -1 !== t.indexOf(\"_\");\n        if (n || r) throw Ob(e, \"Invalid character '\" + (n ? \"-\" : \"_\") + \"' found: is it base64url encoded?\");\n        break;\n\n      case Mb.BASE64URL:\n        var i = -1 !== t.indexOf(\"+\"),\n            o = -1 !== t.indexOf(\"/\");\n        if (i || o) throw Ob(e, \"Invalid character '\" + (i ? \"+\" : \"/\") + \"' found: is it base64 encoded?\");\n        t = t.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    }\n\n    var a;\n\n    try {\n      a = atob(t);\n    } catch (t) {\n      throw Ob(e, \"Invalid character found\");\n    }\n\n    for (var s = new Uint8Array(a.length), u = 0; u < a.length; u++) s[u] = a.charCodeAt(u);\n\n    return s;\n  }\n\n  var Vb = function (t) {\n    this.base64 = !1, this.contentType = null;\n    var e = t.match(/^data:([^,]+)?,/);\n    if (null === e) throw Ob(Mb.DATA_URL, \"Must be formatted 'data:[<mediatype>][;base64],<data>\");\n    var n,\n        r,\n        i = e[1] || null;\n    null != i && (this.base64 = (r = \";base64\", (n = i).length >= r.length && n.substring(n.length - r.length) === r), this.contentType = this.base64 ? i.substring(0, i.length - \";base64\".length) : i), this.rest = t.substring(t.indexOf(\",\") + 1);\n  };\n\n  var Bb,\n      jb,\n      Wb = {\n    STATE_CHANGED: \"state_changed\"\n  },\n      Kb = \"running\",\n      Qb = \"pausing\",\n      Hb = \"paused\",\n      Gb = \"success\",\n      zb = \"canceling\",\n      Yb = \"canceled\",\n      Xb = \"error\",\n      Jb = {\n    RUNNING: \"running\",\n    PAUSED: \"paused\",\n    SUCCESS: \"success\",\n    CANCELED: \"canceled\",\n    ERROR: \"error\"\n  };\n\n  function $b(t) {\n    switch (t) {\n      case Kb:\n      case Qb:\n      case zb:\n        return Jb.RUNNING;\n\n      case Hb:\n        return Jb.PAUSED;\n\n      case Gb:\n        return Jb.SUCCESS;\n\n      case Yb:\n        return Jb.CANCELED;\n\n      case Xb:\n      default:\n        return Jb.ERROR;\n    }\n  }\n\n  function Zb(t) {\n    return null != t;\n  }\n\n  function tw(t) {\n    return void 0 !== t;\n  }\n\n  function ew(t) {\n    return \"function\" == typeof t;\n  }\n\n  function nw(t) {\n    return \"object\" == typeof t;\n  }\n\n  function rw(t) {\n    return \"string\" == typeof t || t instanceof String;\n  }\n\n  function iw(t) {\n    return \"number\" == typeof t || t instanceof Number;\n  }\n\n  function ow(t) {\n    return aw() && t instanceof Blob;\n  }\n\n  function aw() {\n    return \"undefined\" != typeof Blob;\n  }\n\n  (jb = Bb || (Bb = {}))[jb.NO_ERROR = 0] = \"NO_ERROR\", jb[jb.NETWORK_ERROR = 1] = \"NETWORK_ERROR\", jb[jb.ABORT = 2] = \"ABORT\";\n\n  var sw = function () {\n    function t() {\n      var e = this;\n      this.sent_ = !1, this.xhr_ = new XMLHttpRequest(), this.errorCode_ = Bb.NO_ERROR, this.sendPromise_ = new Promise(function (t) {\n        e.xhr_.addEventListener(\"abort\", function () {\n          e.errorCode_ = Bb.ABORT, t(e);\n        }), e.xhr_.addEventListener(\"error\", function () {\n          e.errorCode_ = Bb.NETWORK_ERROR, t(e);\n        }), e.xhr_.addEventListener(\"load\", function () {\n          t(e);\n        });\n      });\n    }\n\n    return t.prototype.send = function (t, e, n, r) {\n      if (this.sent_) throw Pb(\"cannot .send() more than once\");\n      if (this.sent_ = !0, this.xhr_.open(e, t, !0), Zb(r)) for (var i in r) r.hasOwnProperty(i) && this.xhr_.setRequestHeader(i, r[i].toString());\n      return Zb(n) ? this.xhr_.send(n) : this.xhr_.send(), this.sendPromise_;\n    }, t.prototype.getErrorCode = function () {\n      if (!this.sent_) throw Pb(\"cannot .getErrorCode() before sending\");\n      return this.errorCode_;\n    }, t.prototype.getStatus = function () {\n      if (!this.sent_) throw Pb(\"cannot .getStatus() before sending\");\n\n      try {\n        return this.xhr_.status;\n      } catch (t) {\n        return -1;\n      }\n    }, t.prototype.getResponseText = function () {\n      if (!this.sent_) throw Pb(\"cannot .getResponseText() before sending\");\n      return this.xhr_.responseText;\n    }, t.prototype.abort = function () {\n      this.xhr_.abort();\n    }, t.prototype.getResponseHeader = function (t) {\n      return this.xhr_.getResponseHeader(t);\n    }, t.prototype.addUploadProgressListener = function (t) {\n      Zb(this.xhr_.upload) && this.xhr_.upload.addEventListener(\"progress\", t);\n    }, t.prototype.removeUploadProgressListener = function (t) {\n      Zb(this.xhr_.upload) && this.xhr_.upload.removeEventListener(\"progress\", t);\n    }, t;\n  }(),\n      uw = function () {\n    function t() {}\n\n    return t.prototype.createXhrIo = function () {\n      return new sw();\n    }, t;\n  }();\n\n  function cw() {\n    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n    var n = \"undefined\" != typeof BlobBuilder ? BlobBuilder : \"undefined\" != typeof WebKitBlobBuilder ? WebKitBlobBuilder : void 0;\n\n    if (void 0 !== n) {\n      for (var r = new n(), i = 0; i < t.length; i++) r.append(t[i]);\n\n      return r.getBlob();\n    }\n\n    if (aw()) return new Blob(t);\n    throw Error(\"This browser doesn't seem to support creating Blobs\");\n  }\n\n  var hw = function () {\n    function s(t, e) {\n      var n = 0,\n          r = \"\";\n      ow(t) ? (n = (this.data_ = t).size, r = t.type) : t instanceof ArrayBuffer ? (e ? this.data_ = new Uint8Array(t) : (this.data_ = new Uint8Array(t.byteLength), this.data_.set(new Uint8Array(t))), n = this.data_.length) : t instanceof Uint8Array && (e ? this.data_ = t : (this.data_ = new Uint8Array(t.length), this.data_.set(t)), n = t.length), this.size_ = n, this.type_ = r;\n    }\n\n    return s.prototype.size = function () {\n      return this.size_;\n    }, s.prototype.type = function () {\n      return this.type_;\n    }, s.prototype.slice = function (t, e) {\n      if (ow(this.data_)) {\n        var n = this.data_,\n            r = (o = t, a = e, (i = n).webkitSlice ? i.webkitSlice(o, a) : i.mozSlice ? i.mozSlice(o, a) : i.slice ? i.slice(o, a) : null);\n        return null === r ? null : new s(r);\n      }\n\n      var i, o, a;\n      return new s(new Uint8Array(this.data_.buffer, t, e - t), !0);\n    }, s.getBlob = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      if (aw()) {\n        var n = t.map(function (t) {\n          return t instanceof s ? t.data_ : t;\n        });\n        return new s(cw.apply(null, n));\n      }\n\n      var r = t.map(function (t) {\n        return rw(t) ? Fb(Mb.RAW, t).data : t.data_;\n      }),\n          i = 0;\n      r.forEach(function (t) {\n        i += t.byteLength;\n      });\n      var o = new Uint8Array(i),\n          a = 0;\n      return r.forEach(function (t) {\n        for (var e = 0; e < t.length; e++) o[a++] = t[e];\n      }), new s(o, !0);\n    }, s.prototype.uploadData = function () {\n      return this.data_;\n    }, s;\n  }(),\n      lw = function () {\n    function f(t, e) {\n      this.bucket = t, this.path_ = e;\n    }\n\n    return Object.defineProperty(f.prototype, \"path\", {\n      get: function () {\n        return this.path_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(f.prototype, \"isRoot\", {\n      get: function () {\n        return 0 === this.path.length;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), f.prototype.fullServerUrl = function () {\n      var t = encodeURIComponent;\n      return \"/b/\" + t(this.bucket) + \"/o/\" + t(this.path);\n    }, f.prototype.bucketOnlyServerUrl = function () {\n      return \"/b/\" + encodeURIComponent(this.bucket) + \"/o\";\n    }, f.makeFromBucketSpec = function (e) {\n      var t, n;\n\n      try {\n        t = f.makeFromUrl(e);\n      } catch (t) {\n        return new f(e, \"\");\n      }\n\n      if (\"\" === t.path) return t;\n      throw n = e, new Sb(Ib.INVALID_DEFAULT_BUCKET, \"Invalid default bucket '\" + n + \"'.\");\n    }, f.makeFromUrl = function (t) {\n      var e = null,\n          n = \"([A-Za-z0-9.\\\\-_]+)\";\n      var r = new RegExp(\"^gs://\" + n + \"(/(.*))?$\", \"i\");\n\n      for (var i, o = Eb.replace(/[.]/g, \"\\\\.\"), a = [{\n        regex: r,\n        indices: {\n          bucket: 1,\n          path: 3\n        },\n        postModify: function (t) {\n          \"/\" === t.path.charAt(t.path.length - 1) && (t.path_ = t.path_.slice(0, -1));\n        }\n      }, {\n        regex: new RegExp(\"^https?://\" + o + \"/v[A-Za-z0-9_]+/b/\" + n + \"/o(/([^?#]*).*)?$\", \"i\"),\n        indices: {\n          bucket: 1,\n          path: 3\n        },\n        postModify: function (t) {\n          t.path_ = decodeURIComponent(t.path);\n        }\n      }], s = 0; s < a.length; s++) {\n        var u = a[s],\n            c = u.regex.exec(t);\n\n        if (c) {\n          var h = c[u.indices.bucket],\n              l = c[u.indices.path];\n          l || (l = \"\"), e = new f(h, l), u.postModify(e);\n          break;\n        }\n      }\n\n      if (null == e) throw i = t, new Sb(Ib.INVALID_URL, \"Invalid URL '\" + i + \"'.\");\n      return e;\n    }, f;\n  }();\n\n  function fw(t) {\n    var e, n;\n\n    try {\n      e = JSON.parse(t);\n    } catch (t) {\n      return null;\n    }\n\n    return nw(n = e) && !Array.isArray(n) ? e : null;\n  }\n\n  function pw(t) {\n    var e = t.lastIndexOf(\"/\", t.length - 2);\n    return -1 === e ? t : t.slice(e + 1);\n  }\n\n  function dw(t) {\n    return \"https://\" + Eb + \"/v0\" + t;\n  }\n\n  function yw(t) {\n    var e = encodeURIComponent,\n        n = \"?\";\n\n    for (var r in t) {\n      if (t.hasOwnProperty(r)) n = n + (e(r) + \"=\" + e(t[r])) + \"&\";\n    }\n\n    return n = n.slice(0, -1);\n  }\n\n  function mw(t, e) {\n    return e;\n  }\n\n  var gw = function (t, e, n, r) {\n    this.server = t, this.local = e || t, this.writable = !!n, this.xform = r || mw;\n  },\n      vw = null;\n\n  function bw() {\n    if (vw) return vw;\n    var t = [];\n    t.push(new gw(\"bucket\")), t.push(new gw(\"generation\")), t.push(new gw(\"metageneration\")), t.push(new gw(\"name\", \"fullPath\", !0));\n    var e = new gw(\"name\");\n    e.xform = function (t, e) {\n      return !rw(n = e) || n.length < 2 ? n : pw(n);\n      var n;\n    }, t.push(e);\n    var n = new gw(\"size\");\n    return n.xform = function (t, e) {\n      return Zb(e) ? Number(e) : e;\n    }, t.push(n), t.push(new gw(\"timeCreated\")), t.push(new gw(\"updated\")), t.push(new gw(\"md5Hash\", null, !0)), t.push(new gw(\"cacheControl\", null, !0)), t.push(new gw(\"contentDisposition\", null, !0)), t.push(new gw(\"contentEncoding\", null, !0)), t.push(new gw(\"contentLanguage\", null, !0)), t.push(new gw(\"contentType\", null, !0)), t.push(new gw(\"metadata\", \"customMetadata\", !0)), vw = t;\n  }\n\n  function ww(t, e, n) {\n    for (var r, i, o = {\n      type: \"file\"\n    }, a = n.length, s = 0; s < a; s++) {\n      var u = n[s];\n      o[u.local] = u.xform(o, e[u.server]);\n    }\n\n    return r = o, i = t, Object.defineProperty(r, \"ref\", {\n      get: function () {\n        var t = r.bucket,\n            e = r.fullPath,\n            n = new lw(t, e);\n        return i.makeStorageReference(n);\n      }\n    }), o;\n  }\n\n  function _w(t, e, n) {\n    var r = fw(e);\n    return null === r ? null : ww(t, r, n);\n  }\n\n  function Ew(t, e) {\n    for (var n = {}, r = e.length, i = 0; i < r; i++) {\n      var o = e[i];\n      o.writable && (n[o.server] = t[o.local]);\n    }\n\n    return JSON.stringify(n);\n  }\n\n  function Tw(t) {\n    if (!nw(t) || !t) throw \"Expected Metadata object.\";\n\n    for (var e in t) if (t.hasOwnProperty(e)) {\n      var n = t[e];\n\n      if (\"customMetadata\" === e) {\n        if (!nw(n)) throw \"Expected object for 'customMetadata' mapping.\";\n      } else if (nw(r = n) && null !== r) throw \"Mapping for '\" + e + \"' cannot be an object.\";\n    }\n\n    var r;\n  }\n\n  var Sw = \"maxResults\",\n      Iw = 1e3,\n      Cw = \"pageToken\",\n      Nw = \"prefixes\",\n      Aw = \"items\";\n\n  function kw(t, e) {\n    var n = {\n      prefixes: [],\n      items: [],\n      nextPageToken: e.nextPageToken\n    },\n        r = t.bucket();\n    if (null === r) throw new Sb(Ib.NO_DEFAULT_BUCKET, \"No default bucket found. Did you set the '\" + Tb + \"' property when initializing the app?\");\n    if (e[Nw]) for (var i = 0, o = e[Nw]; i < o.length; i++) {\n      var a = o[i].replace(/\\/$/, \"\"),\n          s = t.makeStorageReference(new lw(r, a));\n      n.prefixes.push(s);\n    }\n    if (e[Aw]) for (var u = 0, c = e[Aw]; u < c.length; u++) {\n      var h = c[u];\n      s = t.makeStorageReference(new lw(r, h.name));\n      n.items.push(s);\n    }\n    return n;\n  }\n\n  function Dw(t) {\n    if (!nw(t) || !t) throw \"Expected ListOptions object.\";\n\n    for (var e in t) if (e === Sw) {\n      if (!iw(n = t[Sw]) || !Number.isInteger(n) || t[Sw] <= 0) throw \"Expected maxResults to be a positive number.\";\n      if (1e3 < t[Sw]) throw \"Expected maxResults to be less than or equal to \" + Iw + \".\";\n    } else {\n      if (e !== Cw) throw \"Unknown option: \" + e;\n      if (t[Cw] && !rw(t[Cw])) throw \"Expected pageToken to be string.\";\n    }\n\n    var n;\n  }\n\n  var Rw = function (t, e, n, r) {\n    this.url = t, this.method = e, this.handler = n, this.timeout = r, this.urlParams = {}, this.headers = {}, this.body = null, this.errorHandler = null, this.progressCallback = null, this.successCodes = [200], this.additionalRetryCodes = [];\n  };\n\n  function Ow(t) {\n    if (!t) throw Nb();\n  }\n\n  function Pw(r, i) {\n    return function (t, e) {\n      var n = _w(r, e, i);\n\n      return Ow(null !== n), n;\n    };\n  }\n\n  function Mw(o) {\n    return function (t, e) {\n      var n,\n          r,\n          i = (n = o, null === (r = fw(e)) ? null : kw(n, r));\n      return Ow(null !== i), i;\n    };\n  }\n\n  function xw(r, i) {\n    return function (t, e) {\n      var n = _w(r, e, i);\n\n      return Ow(null !== n), function (r, t) {\n        var e = fw(t);\n        if (null === e) return null;\n        if (!rw(e.downloadTokens)) return null;\n        var n = e.downloadTokens;\n        if (0 === n.length) return null;\n        var i = encodeURIComponent;\n        return n.split(\",\").map(function (t) {\n          var e = r.bucket,\n              n = r.fullPath;\n          return dw(\"/b/\" + i(e) + \"/o/\" + i(n)) + yw({\n            alt: \"media\",\n            token: t\n          });\n        })[0];\n      }(n, e);\n    };\n  }\n\n  function Lw(o) {\n    return function (t, e) {\n      var n, r, i;\n      return (n = 401 === t.getStatus() ? new Sb(Ib.UNAUTHENTICATED, \"User is not authenticated, please authenticate using Firebase Authentication and try again.\") : 402 === t.getStatus() ? (i = o.bucket, new Sb(Ib.QUOTA_EXCEEDED, \"Quota for bucket '\" + i + \"' exceeded, please view quota on https://firebase.google.com/pricing/.\")) : 403 === t.getStatus() ? (r = o.path, new Sb(Ib.UNAUTHORIZED, \"User does not have permission to access '\" + r + \"'.\")) : e).setServerResponseProp(e.serverResponseProp()), n;\n    };\n  }\n\n  function Fw(i) {\n    var o = Lw(i);\n    return function (t, e) {\n      var n,\n          r = o(t, e);\n      return 404 === t.getStatus() && (n = i.path, r = new Sb(Ib.OBJECT_NOT_FOUND, \"Object '\" + n + \"' does not exist.\")), r.setServerResponseProp(e.serverResponseProp()), r;\n    };\n  }\n\n  function Uw(t, e, n) {\n    var r = dw(e.fullServerUrl()),\n        i = t.maxOperationRetryTime(),\n        o = new Rw(r, \"GET\", Pw(t, n), i);\n    return o.errorHandler = Fw(e), o;\n  }\n\n  function qw(t, e, n) {\n    var r,\n        i,\n        o = Object.assign({}, n);\n    return o.fullPath = t.path, o.size = e.size(), o.contentType || (o.contentType = (i = e, (r = null) && r.contentType || i && i.type() || \"application/octet-stream\")), o;\n  }\n\n  var Vw = function (t, e, n, r) {\n    this.current = t, this.total = e, this.finalized = !!n, this.metadata = r || null;\n  };\n\n  function Bw(t, e) {\n    var n = null;\n\n    try {\n      n = t.getResponseHeader(\"X-Goog-Upload-Status\");\n    } catch (t) {\n      Ow(!1);\n    }\n\n    return Ow(!!n && -1 !== (e || [\"active\"]).indexOf(n)), n;\n  }\n\n  function jw(t, a, e, s, n, u, r, i) {\n    var c = new Vw(0, 0);\n    if (c.total = r ? (c.current = r.current, r.total) : (c.current = 0, s.size()), s.size() !== c.total) throw new Sb(Ib.SERVER_FILE_WRONG_SIZE, \"Server recorded incorrect upload file size, please retry the upload.\");\n    var o = c.total - c.current,\n        h = o;\n    0 < n && (h = Math.min(h, n));\n    var l = c.current,\n        f = l + h,\n        p = {\n      \"X-Goog-Upload-Command\": h === o ? \"upload, finalize\" : \"upload\",\n      \"X-Goog-Upload-Offset\": c.current\n    },\n        d = s.slice(l, f);\n    if (null === d) throw kb();\n    var y = a.maxUploadRetryTime(),\n        m = new Rw(e, \"POST\", function (t, e) {\n      var n,\n          r = Bw(t, [\"active\", \"final\"]),\n          i = c.current + h,\n          o = s.size();\n      return n = \"final\" === r ? Pw(a, u)(t, e) : null, new Vw(i, o, \"final\" === r, n);\n    }, y);\n    return m.headers = p, m.body = d.uploadData(), m.progressCallback = i || null, m.errorHandler = Lw(t), m;\n  }\n\n  var Ww = function (t, e, n) {\n    if (ew(t) || Zb(e) || Zb(n)) this.next = t, this.error = e || null, this.complete = n || null;else {\n      var r = t;\n      this.next = r.next || null, this.error = r.error || null, this.complete = r.complete || null;\n    }\n  },\n      Kw = function (t, e, n, r, i, o) {\n    this.bytesTransferred = t, this.totalBytes = e, this.state = n, this.metadata = r, this.task = i, this.ref = o;\n  };\n\n  function Qw(e, t, n) {\n    for (var r = t.length, i = t.length, o = 0; o < t.length; o++) if (t[o].optional) {\n      r = o;\n      break;\n    }\n\n    var a, s, u, c, h, l;\n    if (!(r <= n.length && n.length <= i)) throw a = r, s = i, u = e, c = n.length, l = a === s ? 1 === (h = a) ? \"argument\" : \"arguments\" : (h = \"between \" + a + \" and \" + s, \"arguments\"), new Sb(Ib.INVALID_ARGUMENT_COUNT, \"Invalid argument count in `\" + u + \"`: Expected \" + h + \" \" + l + \", received \" + c + \".\");\n\n    for (o = 0; o < n.length; o++) try {\n      t[o].validator(n[o]);\n    } catch (t) {\n      throw t instanceof Error ? Db(o, e, t.message) : Db(o, e, t);\n    }\n  }\n\n  var Hw = function (e, t) {\n    var n = this;\n    this.validator = function (t) {\n      n.optional && !tw(t) || e(t);\n    }, this.optional = !!t;\n  };\n\n  function Gw(t, e) {\n    function n(t) {\n      if (!rw(t)) throw \"Expected string.\";\n    }\n\n    var r, i, o;\n    return r = t ? (i = n, o = t, function (t) {\n      i(t), o(t);\n    }) : n, new Hw(r, e);\n  }\n\n  function zw(t) {\n    return new Hw(Tw, t);\n  }\n\n  function Yw() {\n    return new Hw(function (t) {\n      if (!(iw(t) && 0 <= t)) throw \"Expected a number 0 or greater.\";\n    });\n  }\n\n  function Xw(e, t) {\n    return new Hw(function (t) {\n      if (!(null === t || Zb(t) && t instanceof Object)) throw \"Expected an Object.\";\n      null != e && e(t);\n    }, t);\n  }\n\n  function Jw(t) {\n    return new Hw(function (t) {\n      if (null !== t && !ew(t)) throw \"Expected a Function.\";\n    }, t);\n  }\n\n  function $w(n) {\n    return function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      Promise.resolve().then(function () {\n        return n.apply(void 0, t);\n      });\n    };\n  }\n\n  var Zw = function () {\n    function t(t, e, n, r, i, o) {\n      var a = this;\n      void 0 === o && (o = null), this.transferred_ = 0, this.needToFetchStatus_ = !1, this.needToFetchMetadata_ = !1, this.observers_ = [], this.error_ = null, this.uploadUrl_ = null, this.request_ = null, this.chunkMultiplier_ = 1, this.resolve_ = null, this.reject_ = null, this.ref_ = t, this.authWrapper_ = e, this.location_ = n, this.blob_ = i, this.metadata_ = o, this.mappings_ = r, this.resumable_ = this.shouldDoResumable_(this.blob_), this.state_ = Kb, this.errorHandler_ = function (t) {\n        a.request_ = null, a.chunkMultiplier_ = 1, t.codeEquals(Ib.CANCELED) ? (a.needToFetchStatus_ = !0, a.completeTransitions_()) : (a.error_ = t, a.transition_(Xb));\n      }, this.metadataErrorHandler_ = function (t) {\n        a.request_ = null, t.codeEquals(Ib.CANCELED) ? a.completeTransitions_() : (a.error_ = t, a.transition_(Xb));\n      }, this.promise_ = new Promise(function (t, e) {\n        a.resolve_ = t, a.reject_ = e, a.start_();\n      }), this.promise_.then(null, function () {});\n    }\n\n    return t.prototype.makeProgressCallback_ = function () {\n      var e = this,\n          n = this.transferred_;\n      return function (t) {\n        return e.updateProgress_(n + t);\n      };\n    }, t.prototype.shouldDoResumable_ = function (t) {\n      return 262144 < t.size();\n    }, t.prototype.start_ = function () {\n      this.state_ === Kb && null === this.request_ && (this.resumable_ ? null === this.uploadUrl_ ? this.createResumable_() : this.needToFetchStatus_ ? this.fetchStatus_() : this.needToFetchMetadata_ ? this.fetchMetadata_() : this.continueUpload_() : this.oneShotUpload_());\n    }, t.prototype.resolveToken_ = function (e) {\n      var n = this;\n      this.authWrapper_.getAuthToken().then(function (t) {\n        switch (n.state_) {\n          case Kb:\n            e(t);\n            break;\n\n          case zb:\n            n.transition_(Yb);\n            break;\n\n          case Qb:\n            n.transition_(Hb);\n        }\n      });\n    }, t.prototype.createResumable_ = function () {\n      var m = this;\n      this.resolveToken_(function (t) {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s,\n            u,\n            c,\n            h,\n            l,\n            f,\n            p,\n            d = (e = m.authWrapper_, n = m.location_, r = m.mappings_, i = m.blob_, o = m.metadata_, a = n.bucketOnlyServerUrl(), s = qw(n, i, o), u = {\n          name: s.fullPath\n        }, c = dw(a), h = {\n          \"X-Goog-Upload-Protocol\": \"resumable\",\n          \"X-Goog-Upload-Command\": \"start\",\n          \"X-Goog-Upload-Header-Content-Length\": i.size(),\n          \"X-Goog-Upload-Header-Content-Type\": s.contentType,\n          \"Content-Type\": \"application/json; charset=utf-8\"\n        }, l = Ew(s, r), f = e.maxUploadRetryTime(), (p = new Rw(c, \"POST\", function (t) {\n          var e;\n          Bw(t);\n\n          try {\n            e = t.getResponseHeader(\"X-Goog-Upload-URL\");\n          } catch (t) {\n            Ow(!1);\n          }\n\n          return Ow(rw(e)), e;\n        }, f)).urlParams = u, p.headers = h, p.body = l, p.errorHandler = Lw(n), p),\n            y = m.authWrapper_.makeRequest(d, t);\n        (m.request_ = y).getPromise().then(function (t) {\n          m.request_ = null, m.uploadUrl_ = t, m.needToFetchStatus_ = !1, m.completeTransitions_();\n        }, m.errorHandler_);\n      });\n    }, t.prototype.fetchStatus_ = function () {\n      var c = this,\n          h = this.uploadUrl_;\n      this.resolveToken_(function (t) {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s = (e = c.authWrapper_, n = c.location_, r = h, i = c.blob_, o = e.maxUploadRetryTime(), (a = new Rw(r, \"POST\", function (t) {\n          var e = Bw(t, [\"active\", \"final\"]),\n              n = null;\n\n          try {\n            n = t.getResponseHeader(\"X-Goog-Upload-Size-Received\");\n          } catch (t) {\n            Ow(!1);\n          }\n\n          n || Ow(!1);\n          var r = Number(n);\n          return Ow(!isNaN(r)), new Vw(r, i.size(), \"final\" === e);\n        }, o)).headers = {\n          \"X-Goog-Upload-Command\": \"query\"\n        }, a.errorHandler = Lw(n), a),\n            u = c.authWrapper_.makeRequest(s, t);\n        (c.request_ = u).getPromise().then(function (t) {\n          t = t, c.request_ = null, c.updateProgress_(t.current), c.needToFetchStatus_ = !1, t.finalized && (c.needToFetchMetadata_ = !0), c.completeTransitions_();\n        }, c.errorHandler_);\n      });\n    }, t.prototype.continueUpload_ = function () {\n      var r = this,\n          i = 262144 * this.chunkMultiplier_,\n          o = new Vw(this.transferred_, this.blob_.size()),\n          a = this.uploadUrl_;\n      this.resolveToken_(function (t) {\n        var e;\n\n        try {\n          e = jw(r.location_, r.authWrapper_, a, r.blob_, i, r.mappings_, o, r.makeProgressCallback_());\n        } catch (t) {\n          return r.error_ = t, void r.transition_(Xb);\n        }\n\n        var n = r.authWrapper_.makeRequest(e, t);\n        (r.request_ = n).getPromise().then(function (t) {\n          r.increaseMultiplier_(), r.request_ = null, r.updateProgress_(t.current), t.finalized ? (r.metadata_ = t.metadata, r.transition_(Gb)) : r.completeTransitions_();\n        }, r.errorHandler_);\n      });\n    }, t.prototype.increaseMultiplier_ = function () {\n      262144 * this.chunkMultiplier_ < 33554432 && (this.chunkMultiplier_ *= 2);\n    }, t.prototype.fetchMetadata_ = function () {\n      var r = this;\n      this.resolveToken_(function (t) {\n        var e = Uw(r.authWrapper_, r.location_, r.mappings_),\n            n = r.authWrapper_.makeRequest(e, t);\n        (r.request_ = n).getPromise().then(function (t) {\n          r.request_ = null, r.metadata_ = t, r.transition_(Gb);\n        }, r.metadataErrorHandler_);\n      });\n    }, t.prototype.oneShotUpload_ = function () {\n      var r = this;\n      this.resolveToken_(function (t) {\n        var e = function (t, e, n, r, i) {\n          var o = e.bucketOnlyServerUrl(),\n              a = {\n            \"X-Goog-Upload-Protocol\": \"multipart\"\n          },\n              s = function () {\n            for (var t = \"\", e = 0; e < 2; e++) t += Math.random().toString().slice(2);\n\n            return t;\n          }();\n\n          a[\"Content-Type\"] = \"multipart/related; boundary=\" + s;\n          var u = qw(e, r, i),\n              c = \"--\" + s + \"\\r\\nContent-Type: application/json; charset=utf-8\\r\\n\\r\\n\" + Ew(u, n) + \"\\r\\n--\" + s + \"\\r\\nContent-Type: \" + u.contentType + \"\\r\\n\\r\\n\",\n              h = \"\\r\\n--\" + s + \"--\",\n              l = hw.getBlob(c, r, h);\n          if (null === l) throw kb();\n          var f = {\n            name: u.fullPath\n          },\n              p = dw(o),\n              d = t.maxUploadRetryTime(),\n              y = new Rw(p, \"POST\", Pw(t, n), d);\n          return y.urlParams = f, y.headers = a, y.body = l.uploadData(), y.errorHandler = Lw(e), y;\n        }(r.authWrapper_, r.location_, r.mappings_, r.blob_, r.metadata_),\n            n = r.authWrapper_.makeRequest(e, t);\n\n        (r.request_ = n).getPromise().then(function (t) {\n          r.request_ = null, r.metadata_ = t, r.updateProgress_(r.blob_.size()), r.transition_(Gb);\n        }, r.errorHandler_);\n      });\n    }, t.prototype.updateProgress_ = function (t) {\n      var e = this.transferred_;\n      this.transferred_ = t, this.transferred_ !== e && this.notifyObservers_();\n    }, t.prototype.transition_ = function (t) {\n      if (this.state_ !== t) switch (t) {\n        case zb:\n        case Qb:\n          this.state_ = t, null !== this.request_ && this.request_.cancel();\n          break;\n\n        case Kb:\n          var e = this.state_ === Hb;\n          this.state_ = t, e && (this.notifyObservers_(), this.start_());\n          break;\n\n        case Hb:\n          this.state_ = t, this.notifyObservers_();\n          break;\n\n        case Yb:\n          this.error_ = Ab(), this.state_ = t, this.notifyObservers_();\n          break;\n\n        case Xb:\n        case Gb:\n          this.state_ = t, this.notifyObservers_();\n      }\n    }, t.prototype.completeTransitions_ = function () {\n      switch (this.state_) {\n        case Qb:\n          this.transition_(Hb);\n          break;\n\n        case zb:\n          this.transition_(Yb);\n          break;\n\n        case Kb:\n          this.start_();\n      }\n    }, Object.defineProperty(t.prototype, \"snapshot\", {\n      get: function () {\n        var t = $b(this.state_);\n        return new Kw(this.transferred_, this.blob_.size(), t, this.metadata_, this, this.ref_);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.on = function (t, e, n, o) {\n      var r = \"Expected a function or an Object with one of `next`, `error`, `complete` properties.\",\n          i = Jw(!0).validator,\n          a = Xw(null, !0).validator;\n\n      function s(t) {\n        try {\n          return void i(t);\n        } catch (t) {}\n\n        try {\n          if (a(t), !(tw(t.next) || tw(t.error) || tw(t.complete))) throw \"\";\n          return;\n        } catch (t) {\n          throw r;\n        }\n      }\n\n      Qw(\"on\", [Gw(function () {\n        if (t !== Wb.STATE_CHANGED) throw \"Expected one of the event types: [\" + Wb.STATE_CHANGED + \"].\";\n      }), Xw(s, !0), Jw(!0), Jw(!0)], arguments);\n      var u = this;\n\n      function c(i) {\n        return function (t, e, n) {\n          null !== i && Qw(\"on\", i, arguments);\n          var r = new Ww(t, e, o);\n          return u.addObserver_(r), function () {\n            u.removeObserver_(r);\n          };\n        };\n      }\n\n      var h = [Xw(function (t) {\n        if (null === t) throw r;\n        s(t);\n      }), Jw(!0), Jw(!0)];\n      return !(tw(e) || tw(n) || tw(o)) ? c(h) : c(null)(e, n, o);\n    }, t.prototype.then = function (t, e) {\n      return this.promise_.then(t, e);\n    }, t.prototype.catch = function (t) {\n      return this.then(null, t);\n    }, t.prototype.addObserver_ = function (t) {\n      this.observers_.push(t), this.notifyObserver_(t);\n    }, t.prototype.removeObserver_ = function (t) {\n      var e = this.observers_.indexOf(t);\n      -1 !== e && this.observers_.splice(e, 1);\n    }, t.prototype.notifyObservers_ = function () {\n      var e = this;\n      this.finishPromise_(), this.observers_.slice().forEach(function (t) {\n        e.notifyObserver_(t);\n      });\n    }, t.prototype.finishPromise_ = function () {\n      if (null !== this.resolve_) {\n        var t = !0;\n\n        switch ($b(this.state_)) {\n          case Jb.SUCCESS:\n            $w(this.resolve_.bind(null, this.snapshot))();\n            break;\n\n          case Jb.CANCELED:\n          case Jb.ERROR:\n            $w(this.reject_.bind(null, this.error_))();\n            break;\n\n          default:\n            t = !1;\n        }\n\n        t && (this.resolve_ = null, this.reject_ = null);\n      }\n    }, t.prototype.notifyObserver_ = function (t) {\n      switch ($b(this.state_)) {\n        case Jb.RUNNING:\n        case Jb.PAUSED:\n          t.next && $w(t.next.bind(t, this.snapshot))();\n          break;\n\n        case Jb.SUCCESS:\n          t.complete && $w(t.complete.bind(t))();\n          break;\n\n        case Jb.CANCELED:\n        case Jb.ERROR:\n          t.error && $w(t.error.bind(t, this.error_))();\n          break;\n\n        default:\n          t.error && $w(t.error.bind(t, this.error_))();\n      }\n    }, t.prototype.resume = function () {\n      Qw(\"resume\", [], arguments);\n      var t = this.state_ === Hb || this.state_ === Qb;\n      return t && this.transition_(Kb), t;\n    }, t.prototype.pause = function () {\n      Qw(\"pause\", [], arguments);\n      var t = this.state_ === Kb;\n      return t && this.transition_(Qb), t;\n    }, t.prototype.cancel = function () {\n      Qw(\"cancel\", [], arguments);\n      var t = this.state_ === Kb || this.state_ === Qb;\n      return t && this.transition_(zb), t;\n    }, t;\n  }(),\n      t_ = function () {\n    function n(t, e) {\n      this.authWrapper = t, this.location = e instanceof lw ? e : lw.makeFromUrl(e);\n    }\n\n    return n.prototype.toString = function () {\n      return Qw(\"toString\", [], arguments), \"gs://\" + this.location.bucket + \"/\" + this.location.path;\n    }, n.prototype.newRef = function (t, e) {\n      return new n(t, e);\n    }, n.prototype.mappings = function () {\n      return bw();\n    }, n.prototype.child = function (t) {\n      Qw(\"child\", [Gw()], arguments);\n      var e,\n          n,\n          r = (e = this.location.path, n = t.split(\"/\").filter(function (t) {\n        return 0 < t.length;\n      }).join(\"/\"), 0 === e.length ? n : e + \"/\" + n),\n          i = new lw(this.location.bucket, r);\n      return this.newRef(this.authWrapper, i);\n    }, Object.defineProperty(n.prototype, \"parent\", {\n      get: function () {\n        var t = function (t) {\n          if (0 === t.length) return null;\n          var e = t.lastIndexOf(\"/\");\n          return -1 === e ? \"\" : t.slice(0, e);\n        }(this.location.path);\n\n        if (null === t) return null;\n        var e = new lw(this.location.bucket, t);\n        return this.newRef(this.authWrapper, e);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(n.prototype, \"root\", {\n      get: function () {\n        var t = new lw(this.location.bucket, \"\");\n        return this.newRef(this.authWrapper, t);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(n.prototype, \"bucket\", {\n      get: function () {\n        return this.location.bucket;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(n.prototype, \"fullPath\", {\n      get: function () {\n        return this.location.path;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(n.prototype, \"name\", {\n      get: function () {\n        return pw(this.location.path);\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(n.prototype, \"storage\", {\n      get: function () {\n        return this.authWrapper.service();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), n.prototype.put = function (t, e) {\n      return void 0 === e && (e = null), Qw(\"put\", [new Hw(function (t) {\n        if (!(t instanceof Uint8Array || t instanceof ArrayBuffer || aw() && t instanceof Blob)) throw \"Expected Blob or File.\";\n      }), zw(!0)], arguments), this.throwIfRoot_(\"put\"), new Zw(this, this.authWrapper, this.location, this.mappings(), new hw(t), e);\n    }, n.prototype.putString = function (t, e, n) {\n      void 0 === e && (e = Mb.RAW), Qw(\"putString\", [Gw(), Gw(xb, !0), zw(!0)], arguments), this.throwIfRoot_(\"putString\");\n      var r = Fb(e, t),\n          i = Object.assign({}, n);\n      return !Zb(i.contentType) && Zb(r.contentType) && (i.contentType = r.contentType), new Zw(this, this.authWrapper, this.location, this.mappings(), new hw(r.data, !0), i);\n    }, n.prototype.delete = function () {\n      var s = this;\n      return Qw(\"delete\", [], arguments), this.throwIfRoot_(\"delete\"), this.authWrapper.getAuthToken().then(function (t) {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a = (e = s.authWrapper, n = s.location, r = dw(n.fullServerUrl()), i = e.maxOperationRetryTime(), (o = new Rw(r, \"DELETE\", function (t, e) {}, i)).successCodes = [200, 204], o.errorHandler = Fw(n), o);\n        return s.authWrapper.makeRequest(a, t).getPromise();\n      });\n    }, n.prototype.listAll = function () {\n      Qw(\"listAll\", [], arguments);\n      var t = {\n        prefixes: [],\n        items: []\n      };\n      return this.listAllHelper(t).then(function () {\n        return t;\n      });\n    }, n.prototype.listAllHelper = function (o, a) {\n      return fr(this, void 0, void 0, function () {\n        var e, n, r, i;\n        return pr(this, function (t) {\n          switch (t.label) {\n            case 0:\n              return r = {\n                pageToken: a\n              }, [4, this.list(r)];\n\n            case 1:\n              return i = t.sent(), (e = o.prefixes).push.apply(e, i.prefixes), (n = o.items).push.apply(n, i.items), null == i.nextPageToken ? [3, 3] : [4, this.listAllHelper(o, i.nextPageToken)];\n\n            case 2:\n              t.sent(), t.label = 3;\n\n            case 3:\n              return [2];\n          }\n        });\n      });\n    }, n.prototype.list = function (r) {\n      var t;\n      Qw(\"list\", [(t = !0, new Hw(Dw, t))], arguments);\n      var i = this;\n      return this.authWrapper.getAuthToken().then(function (t) {\n        var e = r || {},\n            n = function (t, e, n, r, i) {\n          var o = {};\n          e.isRoot ? o.prefix = \"\" : o.prefix = e.path + \"/\", n && 0 < n.length && (o.delimiter = n), r && (o.pageToken = r), i && (o.maxResults = i);\n          var a = dw(e.bucketOnlyServerUrl()),\n              s = t.maxOperationRetryTime(),\n              u = new Rw(a, \"GET\", Mw(t), s);\n          return u.urlParams = o, u.errorHandler = Lw(e), u;\n        }(i.authWrapper, i.location, \"/\", e.pageToken, e.maxResults);\n\n        return i.authWrapper.makeRequest(n, t).getPromise();\n      });\n    }, n.prototype.getMetadata = function () {\n      var n = this;\n      return Qw(\"getMetadata\", [], arguments), this.throwIfRoot_(\"getMetadata\"), this.authWrapper.getAuthToken().then(function (t) {\n        var e = Uw(n.authWrapper, n.location, n.mappings());\n        return n.authWrapper.makeRequest(e, t).getPromise();\n      });\n    }, n.prototype.updateMetadata = function (h) {\n      var l = this;\n      return Qw(\"updateMetadata\", [zw()], arguments), this.throwIfRoot_(\"updateMetadata\"), this.authWrapper.getAuthToken().then(function (t) {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s,\n            u,\n            c = (e = l.authWrapper, n = l.location, r = h, i = l.mappings(), o = dw(n.fullServerUrl()), a = Ew(r, i), s = e.maxOperationRetryTime(), (u = new Rw(o, \"PATCH\", Pw(e, i), s)).headers = {\n          \"Content-Type\": \"application/json; charset=utf-8\"\n        }, u.body = a, u.errorHandler = Fw(n), u);\n        return l.authWrapper.makeRequest(c, t).getPromise();\n      });\n    }, n.prototype.getDownloadURL = function () {\n      var u = this;\n      return Qw(\"getDownloadURL\", [], arguments), this.throwIfRoot_(\"getDownloadURL\"), this.authWrapper.getAuthToken().then(function (t) {\n        var e,\n            n,\n            r,\n            i,\n            o,\n            a,\n            s = (e = u.authWrapper, n = u.location, r = u.mappings(), i = dw(n.fullServerUrl()), o = e.maxOperationRetryTime(), (a = new Rw(i, \"GET\", xw(e, r), o)).errorHandler = Fw(n), a);\n        return u.authWrapper.makeRequest(s, t).getPromise().then(function (t) {\n          if (null === t) throw new Sb(Ib.NO_DOWNLOAD_URL, \"The given file does not have any download URLs.\");\n          return t;\n        });\n      });\n    }, n.prototype.throwIfRoot_ = function (t) {\n      if (\"\" === this.location.path) throw e = t, new Sb(Ib.INVALID_ROOT_OPERATION, \"The operation '\" + e + \"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').\");\n      var e;\n    }, n;\n  }(),\n      e_ = function () {\n    function t(t) {\n      this.promise_ = Promise.reject(t);\n    }\n\n    return t.prototype.getPromise = function () {\n      return this.promise_;\n    }, t.prototype.cancel = function (t) {\n      void 0 === t && (t = !1);\n    }, t;\n  }(),\n      n_ = function () {\n    function t() {\n      this.map_ = new Map(), this.id_ = -9007199254740991;\n    }\n\n    return t.prototype.addRequest = function (t) {\n      var e = this,\n          n = this.id_;\n      this.id_++, this.map_.set(n, t), t.getPromise().then(function () {\n        return e.map_.delete(n);\n      }, function () {\n        return e.map_.delete(n);\n      });\n    }, t.prototype.clear = function () {\n      this.map_.forEach(function (t) {\n        t && t.cancel(!0);\n      }), this.map_.clear();\n    }, t;\n  }(),\n      r_ = function () {\n    function a(t, e, n, r, i) {\n      if (this.bucket_ = null, this.deleted_ = !1, this.app_ = t, null !== this.app_) {\n        var o = this.app_.options;\n        Zb(o) && (this.bucket_ = a.extractBucket_(o));\n      }\n\n      this.storageRefMaker_ = e, this.requestMaker_ = n, this.pool_ = i, this.service_ = r, this.maxOperationRetryTime_ = 12e4, this.maxUploadRetryTime_ = 6e4, this.requestMap_ = new n_();\n    }\n\n    return a.extractBucket_ = function (t) {\n      var e = t[Tb] || null;\n      return null == e ? null : lw.makeFromBucketSpec(e).bucket;\n    }, a.prototype.getAuthToken = function () {\n      return null !== this.app_ && Zb(this.app_.INTERNAL) && Zb(this.app_.INTERNAL.getToken) ? this.app_.INTERNAL.getToken().then(function (t) {\n        return null !== t ? t.accessToken : null;\n      }, function () {\n        return null;\n      }) : Promise.resolve(null);\n    }, a.prototype.bucket = function () {\n      if (this.deleted_) throw Rb();\n      return this.bucket_;\n    }, a.prototype.service = function () {\n      return this.service_;\n    }, a.prototype.makeStorageReference = function (t) {\n      return this.storageRefMaker_(this, t);\n    }, a.prototype.makeRequest = function (t, e) {\n      if (this.deleted_) return new e_(Rb());\n      var n = this.requestMaker_(t, e, this.pool_);\n      return this.requestMap_.addRequest(n), n;\n    }, a.prototype.deleteApp = function () {\n      this.deleted_ = !0, this.app_ = null, this.requestMap_.clear();\n    }, a.prototype.maxUploadRetryTime = function () {\n      return this.maxUploadRetryTime_;\n    }, a.prototype.setMaxUploadRetryTime = function (t) {\n      this.maxUploadRetryTime_ = t;\n    }, a.prototype.maxOperationRetryTime = function () {\n      return this.maxOperationRetryTime_;\n    }, a.prototype.setMaxOperationRetryTime = function (t) {\n      this.maxOperationRetryTime_ = t;\n    }, a;\n  }();\n\n  var i_ = function () {\n    function t(t, e, n, r, i, o, a, s, u, c, h) {\n      var l = this;\n      this.pendingXhr_ = null, this.backoffId_ = null, this.resolve_ = null, this.reject_ = null, this.canceled_ = !1, this.appDelete_ = !1, this.url_ = t, this.method_ = e, this.headers_ = n, this.body_ = r, this.successCodes_ = i.slice(), this.additionalRetryCodes_ = o.slice(), this.callback_ = a, this.errorCallback_ = s, this.progressCallback_ = c, this.timeout_ = u, this.pool_ = h, this.promise_ = new Promise(function (t, e) {\n        l.resolve_ = t, l.reject_ = e, l.start_();\n      });\n    }\n\n    return t.prototype.start_ = function () {\n      var s = this;\n\n      function t(t, e) {\n        var n,\n            r = s.resolve_,\n            i = s.reject_,\n            o = e.xhr;\n        if (e.wasSuccessCode) try {\n          var a = s.callback_(o, o.getResponseText());\n          tw(a) ? r(a) : r();\n        } catch (t) {\n          i(t);\n        } else null !== o ? ((n = Nb()).setServerResponseProp(o.getResponseText()), s.errorCallback_ ? i(s.errorCallback_(o, n)) : i(n)) : e.canceled ? i(n = s.appDelete_ ? Rb() : Ab()) : i(n = new Sb(Ib.RETRY_LIMIT_EXCEEDED, \"Max retry time for operation exceeded, please try again.\"));\n      }\n\n      this.canceled_ ? t(0, new o_(!1, null, !0)) : this.backoffId_ = function (e, t, n) {\n        var r = 1,\n            i = null,\n            o = !1,\n            a = 0;\n\n        function s() {\n          return 2 === a;\n        }\n\n        var u = !1;\n\n        function c() {\n          u || (u = !0, t.apply(null, arguments));\n        }\n\n        function h(t) {\n          i = setTimeout(function () {\n            i = null, e(l, s());\n          }, t);\n        }\n\n        function l(t) {\n          u || (t ? c.apply(null, arguments) : s() || o ? c.apply(null, arguments) : (r < 64 && (r *= 2), h(1 === a ? (a = 2, 0) : 1e3 * (r + Math.random()))));\n        }\n\n        var f = !1;\n\n        function p(t) {\n          f || (f = !0, u || (null !== i ? (t || (a = 2), clearTimeout(i), h(0)) : t || (a = 1)));\n        }\n\n        return h(0), setTimeout(function () {\n          p(o = !0);\n        }, n), p;\n      }(function (o, t) {\n        if (t) o(!1, new o_(!1, null, !0));else {\n          var e = s.pool_.createXhrIo();\n          s.pendingXhr_ = e, null !== s.progressCallback_ && e.addUploadProgressListener(a), e.send(s.url_, s.method_, s.body_, s.headers_).then(function (t) {\n            null !== s.progressCallback_ && t.removeUploadProgressListener(a), s.pendingXhr_ = null;\n            var e = (t = t).getErrorCode() === Bb.NO_ERROR,\n                n = t.getStatus();\n\n            if (e && !s.isRetryStatusCode_(n)) {\n              var r = -1 !== s.successCodes_.indexOf(n);\n              o(!0, new o_(r, t));\n            } else {\n              var i = t.getErrorCode() === Bb.ABORT;\n              o(!1, new o_(!1, null, i));\n            }\n          });\n        }\n\n        function a(t) {\n          var e = t.loaded,\n              n = t.lengthComputable ? t.total : -1;\n          null !== s.progressCallback_ && s.progressCallback_(e, n);\n        }\n      }, t, this.timeout_);\n    }, t.prototype.getPromise = function () {\n      return this.promise_;\n    }, t.prototype.cancel = function (t) {\n      this.canceled_ = !0, this.appDelete_ = t || !1, null !== this.backoffId_ && (0, this.backoffId_)(!1), null !== this.pendingXhr_ && this.pendingXhr_.abort();\n    }, t.prototype.isRetryStatusCode_ = function (t) {\n      var e = 500 <= t && t < 600,\n          n = -1 !== [408, 429].indexOf(t),\n          r = -1 !== this.additionalRetryCodes_.indexOf(t);\n      return e || n || r;\n    }, t;\n  }(),\n      o_ = function (t, e, n) {\n    this.wasSuccessCode = t, this.xhr = e, this.canceled = !!n;\n  };\n\n  function a_(t, e, n) {\n    var r,\n        i,\n        o,\n        a,\n        s = yw(t.urlParams),\n        u = t.url + s,\n        c = Object.assign({}, t.headers);\n    return r = c, null !== (i = e) && 0 < i.length && (r.Authorization = \"Firebase \" + i), o = c, a = void 0 !== Hh ? Hh.SDK_VERSION : \"AppManager\", o[\"X-Firebase-Storage-Version\"] = \"webjs/\" + a, new i_(u, t.method, c, t.body, t.successCodes, t.additionalRetryCodes, t.handler, t.errorHandler, t.timeout, t.progressCallback, n);\n  }\n\n  var s_,\n      u_ = function () {\n    function t(t, e, n) {\n      if (this.bucket_ = null, this.authWrapper_ = new r_(t, function (t, e) {\n        return new t_(t, e);\n      }, a_, this, e), this.app_ = t, null != n) this.bucket_ = lw.makeFromBucketSpec(n);else {\n        var r = this.authWrapper_.bucket();\n        null != r && (this.bucket_ = new lw(r, \"\"));\n      }\n      this.internals_ = new c_(this);\n    }\n\n    return t.prototype.ref = function (t) {\n      if (Qw(\"ref\", [Gw(function (t) {\n        if (/^[A-Za-z]+:\\/\\//.test(t)) throw \"Expected child path but got a URL, use refFromURL instead.\";\n      }, !0)], arguments), null == this.bucket_) throw new Error(\"No Storage Bucket defined in Firebase Options.\");\n      var e = new t_(this.authWrapper_, this.bucket_);\n      return null != t ? e.child(t) : e;\n    }, t.prototype.refFromURL = function (t) {\n      return Qw(\"refFromURL\", [Gw(function (t) {\n        if (!/^[A-Za-z]+:\\/\\//.test(t)) throw \"Expected full URL but got a child path, use ref instead.\";\n\n        try {\n          lw.makeFromUrl(t);\n        } catch (t) {\n          throw \"Expected valid full URL but got an invalid one.\";\n        }\n      }, !1)], arguments), new t_(this.authWrapper_, t);\n    }, Object.defineProperty(t.prototype, \"maxUploadRetryTime\", {\n      get: function () {\n        return this.authWrapper_.maxUploadRetryTime();\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t.prototype.setMaxUploadRetryTime = function (t) {\n      Qw(\"setMaxUploadRetryTime\", [Yw()], arguments), this.authWrapper_.setMaxUploadRetryTime(t);\n    }, t.prototype.setMaxOperationRetryTime = function (t) {\n      Qw(\"setMaxOperationRetryTime\", [Yw()], arguments), this.authWrapper_.setMaxOperationRetryTime(t);\n    }, Object.defineProperty(t.prototype, \"app\", {\n      get: function () {\n        return this.app_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"INTERNAL\", {\n      get: function () {\n        return this.internals_;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t;\n  }(),\n      c_ = function () {\n    function t(t) {\n      this.service_ = t;\n    }\n\n    return t.prototype.delete = function () {\n      return this.service_.authWrapper_.deleteApp(), Promise.resolve();\n    }, t;\n  }();\n\n  function h_(t, e, n) {\n    return new u_(t, new uw(), n);\n  }\n\n  function l_(n) {\n    return new Promise(function (t, e) {\n      n.onsuccess = function () {\n        t(n.result);\n      }, n.onerror = function () {\n        e(n.error);\n      };\n    });\n  }\n\n  function f_(n, r, i) {\n    var o,\n        t = new Promise(function (t, e) {\n      l_(o = n[r].apply(n, i)).then(t, e);\n    });\n    return t.request = o, t;\n  }\n\n  function p_(t, n, e) {\n    e.forEach(function (e) {\n      Object.defineProperty(t.prototype, e, {\n        get: function () {\n          return this[n][e];\n        },\n        set: function (t) {\n          this[n][e] = t;\n        }\n      });\n    });\n  }\n\n  function d_(e, n, r, t) {\n    t.forEach(function (t) {\n      t in r.prototype && (e.prototype[t] = function () {\n        return f_(this[n], t, arguments);\n      });\n    });\n  }\n\n  function y_(e, n, r, t) {\n    t.forEach(function (t) {\n      t in r.prototype && (e.prototype[t] = function () {\n        return this[n][t].apply(this[n], arguments);\n      });\n    });\n  }\n\n  function m_(t, r, e, n) {\n    n.forEach(function (n) {\n      n in e.prototype && (t.prototype[n] = function () {\n        return t = this[r], (e = f_(t, n, arguments)).then(function (t) {\n          if (t) return new v_(t, e.request);\n        });\n        var t, e;\n      });\n    });\n  }\n\n  function g_(t) {\n    this._index = t;\n  }\n\n  function v_(t, e) {\n    this._cursor = t, this._request = e;\n  }\n\n  function b_(t) {\n    this._store = t;\n  }\n\n  function w_(n) {\n    this._tx = n, this.complete = new Promise(function (t, e) {\n      n.oncomplete = function () {\n        t();\n      }, n.onerror = function () {\n        e(n.error);\n      }, n.onabort = function () {\n        e(n.error);\n      };\n    });\n  }\n\n  function __(t, e, n) {\n    this._db = t, this.oldVersion = e, this.transaction = new w_(n);\n  }\n\n  function E_(t) {\n    this._db = t;\n  }\n\n  s_ = {\n    TaskState: Jb,\n    TaskEvent: Wb,\n    StringFormat: Mb,\n    Storage: u_,\n    Reference: t_\n  }, Hh.INTERNAL.registerService(\"storage\", h_, s_, void 0, !0), p_(g_, \"_index\", [\"name\", \"keyPath\", \"multiEntry\", \"unique\"]), d_(g_, \"_index\", IDBIndex, [\"get\", \"getKey\", \"getAll\", \"getAllKeys\", \"count\"]), m_(g_, \"_index\", IDBIndex, [\"openCursor\", \"openKeyCursor\"]), p_(v_, \"_cursor\", [\"direction\", \"key\", \"primaryKey\", \"value\"]), d_(v_, \"_cursor\", IDBCursor, [\"update\", \"delete\"]), [\"advance\", \"continue\", \"continuePrimaryKey\"].forEach(function (n) {\n    n in IDBCursor.prototype && (v_.prototype[n] = function () {\n      var e = this,\n          t = arguments;\n      return Promise.resolve().then(function () {\n        return e._cursor[n].apply(e._cursor, t), l_(e._request).then(function (t) {\n          if (t) return new v_(t, e._request);\n        });\n      });\n    });\n  }), b_.prototype.createIndex = function () {\n    return new g_(this._store.createIndex.apply(this._store, arguments));\n  }, b_.prototype.index = function () {\n    return new g_(this._store.index.apply(this._store, arguments));\n  }, p_(b_, \"_store\", [\"name\", \"keyPath\", \"indexNames\", \"autoIncrement\"]), d_(b_, \"_store\", IDBObjectStore, [\"put\", \"add\", \"delete\", \"clear\", \"get\", \"getAll\", \"getKey\", \"getAllKeys\", \"count\"]), m_(b_, \"_store\", IDBObjectStore, [\"openCursor\", \"openKeyCursor\"]), y_(b_, \"_store\", IDBObjectStore, [\"deleteIndex\"]), w_.prototype.objectStore = function () {\n    return new b_(this._tx.objectStore.apply(this._tx, arguments));\n  }, p_(w_, \"_tx\", [\"objectStoreNames\", \"mode\"]), y_(w_, \"_tx\", IDBTransaction, [\"abort\"]), __.prototype.createObjectStore = function () {\n    return new b_(this._db.createObjectStore.apply(this._db, arguments));\n  }, p_(__, \"_db\", [\"name\", \"version\", \"objectStoreNames\"]), y_(__, \"_db\", IDBDatabase, [\"deleteObjectStore\", \"close\"]), E_.prototype.transaction = function () {\n    return new w_(this._db.transaction.apply(this._db, arguments));\n  }, p_(E_, \"_db\", [\"name\", \"version\", \"objectStoreNames\"]), y_(E_, \"_db\", IDBDatabase, [\"close\"]), [\"openCursor\", \"openKeyCursor\"].forEach(function (o) {\n    [b_, g_].forEach(function (t) {\n      o in t.prototype && (t.prototype[o.replace(\"open\", \"iterate\")] = function () {\n        var t,\n            e = (t = arguments, Array.prototype.slice.call(t)),\n            n = e[e.length - 1],\n            r = this._store || this._index,\n            i = r[o].apply(r, e.slice(0, -1));\n\n        i.onsuccess = function () {\n          n(i.result);\n        };\n      });\n    });\n  }), [g_, b_].forEach(function (t) {\n    t.prototype.getAll || (t.prototype.getAll = function (t, n) {\n      var r = this,\n          i = [];\n      return new Promise(function (e) {\n        r.iterateCursor(t, function (t) {\n          t ? (i.push(t.value), void 0 === n || i.length != n ? t.continue() : e(i)) : e(i);\n        });\n      });\n    });\n  });\n  var T_,\n      S_ = 1e4,\n      I_ = \"w:0.1.7\",\n      C_ = \"FIS_v2\",\n      N_ = \"https://firebaseinstallations.googleapis.com/v1\",\n      A_ = 36e5,\n      k_ = ((T_ = {})[\"missing-app-config-values\"] = \"Missing App configuration values.\", T_[\"create-installation-failed\"] = \"Could not register Firebase Installation.\", T_[\"generate-token-failed\"] = \"Could not generate Auth Token.\", T_[\"not-registered\"] = \"Firebase Installation is not registered.\", T_[\"installation-not-found\"] = \"Firebase Installation not found.\", T_[\"request-failed\"] = '{$requestName} request failed with error \"{$serverCode} {$serverStatus}: {$serverMessage}\"', T_[\"app-offline\"] = \"Could not process request. Application offline.\", T_[\"delete-pending-registration\"] = \"Can't delete installation while there is a pending registration request.\", T_),\n      D_ = new Dr(\"installations\", \"Installations\", k_);\n\n  function R_(t) {\n    return t instanceof kr && t.code.includes(\"request-failed\");\n  }\n\n  function O_(t) {\n    if (!t || !t.options) throw D_.create(\"missing-app-config-values\");\n    var e = t.name,\n        n = t.options,\n        r = n.projectId,\n        i = n.apiKey,\n        o = n.appId;\n    if (!(e && r && i && o)) throw D_.create(\"missing-app-config-values\");\n    return {\n      appName: e,\n      projectId: r,\n      apiKey: i,\n      appId: o\n    };\n  }\n\n  function P_(t) {\n    var e = t.projectId;\n    return N_ + \"/projects/\" + e + \"/installations\";\n  }\n\n  function M_(t) {\n    return {\n      token: t.token,\n      requestStatus: 2,\n      expiresIn: (e = t.expiresIn, Number(e.replace(\"s\", \"000\"))),\n      creationTime: Date.now()\n    };\n    var e;\n  }\n\n  function x_(r, i) {\n    return fr(this, void 0, void 0, function () {\n      var e, n;\n      return pr(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return [4, i.json()];\n\n          case 1:\n            return e = t.sent(), n = e.error, [2, D_.create(\"request-failed\", {\n              requestName: r,\n              serverCode: n.code,\n              serverMessage: n.message,\n              serverStatus: n.status\n            })];\n        }\n      });\n    });\n  }\n\n  function L_(t) {\n    var e = t.apiKey;\n    return new Headers({\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\",\n      \"x-goog-api-key\": e\n    });\n  }\n\n  function F_(t, e) {\n    var n = e.refreshToken,\n        r = L_(t);\n    return r.append(\"Authorization\", C_ + \" \" + n), r;\n  }\n\n  function U_(n) {\n    return fr(this, void 0, void 0, function () {\n      var e;\n      return pr(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return [4, n()];\n\n          case 1:\n            return 500 <= (e = t.sent()).status && e.status < 600 ? [2, n()] : [2, e];\n        }\n      });\n    });\n  }\n\n  function q_(e) {\n    return new Promise(function (t) {\n      setTimeout(t, e);\n    });\n  }\n\n  function V_() {\n    var t,\n        e,\n        n = new Uint8Array(17);\n    return crypto.getRandomValues(n), n[0] = 112 + n[0] % 16, (t = n, e = t instanceof Uint8Array ? t : new Uint8Array(t), btoa(String.fromCharCode.apply(String, yr(e))).replace(/\\+/g, \"-\").replace(/\\//g, \"_\")).substr(0, 22);\n  }\n\n  var B_,\n      j_,\n      W_,\n      K_ = \"firebase-installations-store\",\n      Q_ = (B_ = function (t) {\n    switch (t.oldVersion) {\n      case 0:\n        t.createObjectStore(K_);\n    }\n  }, j_ = f_(indexedDB, \"open\", [\"firebase-installations-database\", 1]), (W_ = j_.request) && (W_.onupgradeneeded = function (t) {\n    B_ && B_(new __(W_.result, t.oldVersion, W_.transaction));\n  }), j_.then(function (t) {\n    return new E_(t);\n  }));\n\n  function H_(i, o) {\n    return fr(this, void 0, void 0, function () {\n      var e, n, r;\n      return pr(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return e = Y_(i), [4, Q_];\n\n          case 1:\n            return n = t.sent(), [4, (r = n.transaction(K_, \"readwrite\")).objectStore(K_).put(o, e)];\n\n          case 2:\n            return t.sent(), [4, r.complete];\n\n          case 3:\n            return t.sent(), [2, o];\n        }\n      });\n    });\n  }\n\n  function G_(i) {\n    return fr(this, void 0, void 0, function () {\n      var e, n, r;\n      return pr(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return e = Y_(i), [4, Q_];\n\n          case 1:\n            return n = t.sent(), [4, (r = n.transaction(K_, \"readwrite\")).objectStore(K_).delete(e)];\n\n          case 2:\n            return t.sent(), [4, r.complete];\n\n          case 3:\n            return t.sent(), [2];\n        }\n      });\n    });\n  }\n\n  function z_(s, u) {\n    return fr(this, void 0, void 0, function () {\n      var e, n, r, i, o, a;\n      return pr(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return e = Y_(s), [4, Q_];\n\n          case 1:\n            return n = t.sent(), r = n.transaction(K_, \"readwrite\"), [4, (i = r.objectStore(K_)).get(e)];\n\n          case 2:\n            return o = t.sent(), (a = u(o)) === o ? [2, a] : void 0 !== a ? [3, 4] : [4, i.delete(e)];\n\n          case 3:\n            return t.sent(), [3, 6];\n\n          case 4:\n            return [4, i.put(a, e)];\n\n          case 5:\n            t.sent(), t.label = 6;\n\n          case 6:\n            return [4, r.complete];\n\n          case 7:\n            return t.sent(), [2, a];\n        }\n      });\n    });\n  }\n\n  function Y_(t) {\n    return t.appName + \"!\" + t.appId;\n  }\n\n  function X_(i) {\n    return fr(this, void 0, void 0, function () {\n      var r, e;\n      return pr(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return e = {}, [4, z_(i, function (t) {\n              var e = function (t) {\n                var e = t || {\n                  fid: V_(),\n                  registrationStatus: 0\n                };\n                if ($_(e)) return {\n                  fid: e.fid,\n                  registrationStatus: 0\n                };\n                return e;\n              }(t),\n                  n = function (t, e) {\n                {\n                  if (0 !== e.registrationStatus) return 1 === e.registrationStatus ? {\n                    installationEntry: e,\n                    registrationPromise: function (n) {\n                      return fr(this, void 0, void 0, function () {\n                        var e;\n                        return pr(this, function (t) {\n                          switch (t.label) {\n                            case 0:\n                              return [4, J_(n)];\n\n                            case 1:\n                              e = t.sent(), t.label = 2;\n\n                            case 2:\n                              return 1 !== e.registrationStatus ? [3, 5] : [4, q_(100)];\n\n                            case 3:\n                              return t.sent(), [4, J_(n)];\n\n                            case 4:\n                              return e = t.sent(), [3, 2];\n\n                            case 5:\n                              if (0 === e.registrationStatus) throw D_.create(\"create-installation-failed\");\n                              return [2];\n                          }\n                        });\n                      });\n                    }(t)\n                  } : {\n                    installationEntry: e\n                  };\n\n                  if (!navigator.onLine) {\n                    var n = Promise.reject(D_.create(\"app-offline\"));\n                    return {\n                      installationEntry: e,\n                      registrationPromise: n\n                    };\n                  }\n\n                  var r = {\n                    fid: e.fid,\n                    registrationStatus: 1,\n                    registrationTime: Date.now()\n                  },\n                      i = function (r, i) {\n                    return fr(this, void 0, void 0, function () {\n                      var e, n;\n                      return pr(this, function (t) {\n                        switch (t.label) {\n                          case 0:\n                            return t.trys.push([0, 3,, 8]), [4, function (s, t) {\n                              var u = t.fid;\n                              return fr(this, void 0, void 0, function () {\n                                var e, n, r, i, o, a;\n                                return pr(this, function (t) {\n                                  switch (t.label) {\n                                    case 0:\n                                      return e = P_(s), n = L_(s), r = {\n                                        fid: u,\n                                        authVersion: C_,\n                                        appId: s.appId,\n                                        sdkVersion: I_\n                                      }, i = {\n                                        method: \"POST\",\n                                        headers: n,\n                                        body: JSON.stringify(r)\n                                      }, [4, U_(function () {\n                                        return fetch(e, i);\n                                      })];\n\n                                    case 1:\n                                      return (o = t.sent()).ok ? [4, o.json()] : [3, 3];\n\n                                    case 2:\n                                      return a = t.sent(), [2, {\n                                        fid: u,\n                                        registrationStatus: 2,\n                                        refreshToken: a.refreshToken,\n                                        authToken: M_(a.authToken)\n                                      }];\n\n                                    case 3:\n                                      return [4, x_(\"Create Installation\", o)];\n\n                                    case 4:\n                                      throw t.sent();\n                                  }\n                                });\n                              });\n                            }(r, i)];\n\n                          case 1:\n                            return e = t.sent(), [4, H_(r, e)];\n\n                          case 2:\n                            return t.sent(), [3, 8];\n\n                          case 3:\n                            return R_(n = t.sent()) && 409 === n.serverCode ? [4, G_(r)] : [3, 5];\n\n                          case 4:\n                            return t.sent(), [3, 7];\n\n                          case 5:\n                            return [4, H_(r, {\n                              fid: i.fid,\n                              registrationStatus: 0\n                            })];\n\n                          case 6:\n                            t.sent(), t.label = 7;\n\n                          case 7:\n                            throw n;\n\n                          case 8:\n                            return [2];\n                        }\n                      });\n                    });\n                  }(t, r);\n\n                  return {\n                    installationEntry: r,\n                    registrationPromise: i\n                  };\n                }\n              }(i, e);\n\n              return r = n.registrationPromise, n.installationEntry;\n            })];\n\n          case 1:\n            return [2, (e.installationEntry = t.sent(), e.registrationPromise = r, e)];\n        }\n      });\n    });\n  }\n\n  function J_(t) {\n    return z_(t, function (t) {\n      if (!t) throw D_.create(\"installation-not-found\");\n      return $_(t) ? {\n        fid: t.fid,\n        registrationStatus: 0\n      } : t;\n    });\n  }\n\n  function $_(t) {\n    return 1 === t.registrationStatus && t.registrationTime + S_ < Date.now();\n  }\n\n  function Z_(c, h) {\n    return fr(this, void 0, void 0, function () {\n      var r, i, o, a, s, u;\n      return pr(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return e = c, n = h.fid, r = P_(e) + \"/\" + n + \"/authTokens:generate\", i = F_(c, h), o = {\n              installation: {\n                sdkVersion: I_\n              }\n            }, a = {\n              method: \"POST\",\n              headers: i,\n              body: JSON.stringify(o)\n            }, [4, U_(function () {\n              return fetch(r, a);\n            })];\n\n          case 1:\n            return (s = t.sent()).ok ? [4, s.json()] : [3, 3];\n\n          case 2:\n            return u = t.sent(), [2, M_(u)];\n\n          case 3:\n            return [4, x_(\"Generate Auth Token\", s)];\n\n          case 4:\n            throw t.sent();\n        }\n\n        var e, n;\n      });\n    });\n  }\n\n  function tE(c) {\n    return fr(this, void 0, void 0, function () {\n      var u, e, n;\n      return pr(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return [4, z_(c, function (t) {\n              if (!nE(t)) throw D_.create(\"not-registered\");\n              var e,\n                  n,\n                  r,\n                  i,\n                  o,\n                  a = t.authToken;\n\n              if (2 !== (r = a).requestStatus || (i = r, (o = Date.now()) < i.creationTime || i.creationTime + i.expiresIn < o + A_)) {\n                if (1 === a.requestStatus) return u = function (r) {\n                  return fr(this, void 0, void 0, function () {\n                    var e, n;\n                    return pr(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, eE(r)];\n\n                        case 1:\n                          e = t.sent(), t.label = 2;\n\n                        case 2:\n                          return 1 !== e.authToken.requestStatus ? [3, 5] : [4, q_(100)];\n\n                        case 3:\n                          return t.sent(), [4, eE(r)];\n\n                        case 4:\n                          return e = t.sent(), [3, 2];\n\n                        case 5:\n                          if (0 === (n = e.authToken).requestStatus) throw D_.create(\"generate-token-failed\");\n                          return [2, n];\n                      }\n                    });\n                  });\n                }(c), t;\n                if (!navigator.onLine) throw D_.create(\"app-offline\");\n                var s = (e = t, n = {\n                  requestStatus: 1,\n                  requestTime: Date.now()\n                }, lr({}, e, {\n                  authToken: n\n                }));\n                return u = function (i, o) {\n                  return fr(this, void 0, void 0, function () {\n                    var e, n, r;\n                    return pr(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return t.trys.push([0, 3,, 8]), [4, Z_(i, o)];\n\n                        case 1:\n                          return e = t.sent(), r = lr({}, o, {\n                            authToken: e\n                          }), [4, H_(i, r)];\n\n                        case 2:\n                          return t.sent(), [2, e];\n\n                        case 3:\n                          return !R_(n = t.sent()) || 401 !== n.serverCode && 404 !== n.serverCode ? [3, 5] : [4, G_(i)];\n\n                        case 4:\n                          return t.sent(), [3, 7];\n\n                        case 5:\n                          return r = lr({}, o, {\n                            authToken: {\n                              requestStatus: 0\n                            }\n                          }), [4, H_(i, r)];\n\n                        case 6:\n                          t.sent(), t.label = 7;\n\n                        case 7:\n                          throw n;\n\n                        case 8:\n                          return [2];\n                      }\n                    });\n                  });\n                }(c, s), s;\n              }\n\n              return t;\n            })];\n\n          case 1:\n            return e = t.sent(), u ? [4, u] : [3, 3];\n\n          case 2:\n            return n = t.sent(), [3, 4];\n\n          case 3:\n            n = e.authToken, t.label = 4;\n\n          case 4:\n            return [2, n.token];\n        }\n      });\n    });\n  }\n\n  function eE(t) {\n    return z_(t, function (t) {\n      if (!nE(t)) throw D_.create(\"not-registered\");\n      var e,\n          n = t.authToken;\n      return 1 === (e = n).requestStatus && e.requestTime + S_ < Date.now() ? lr({}, t, {\n        authToken: {\n          requestStatus: 0\n        }\n      }) : t;\n    });\n  }\n\n  function nE(t) {\n    return void 0 !== t && 2 === t.registrationStatus;\n  }\n\n  function rE(n) {\n    return fr(this, void 0, void 0, function () {\n      var e;\n      return pr(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return [4, function (i) {\n              return fr(this, void 0, void 0, function () {\n                var e, n, r;\n                return pr(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return [4, X_(i)];\n\n                    case 1:\n                      return e = t.sent(), n = e.installationEntry, (r = e.registrationPromise) ? [4, r] : [3, 3];\n\n                    case 2:\n                      return t.sent(), [3, 4];\n\n                    case 3:\n                      if (2 !== n.registrationStatus) throw D_.create(\"create-installation-failed\");\n                      t.label = 4;\n\n                    case 4:\n                      return [2];\n                  }\n                });\n              });\n            }(e = O_(n))];\n\n          case 1:\n            return t.sent(), [2, tE(e)];\n        }\n      });\n    });\n  }\n\n  function iE(s, u) {\n    return fr(this, void 0, void 0, function () {\n      var r, i, o, a;\n      return pr(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return e = s, n = u.fid, r = P_(e) + \"/\" + n, i = F_(s, u), o = {\n              method: \"DELETE\",\n              headers: i\n            }, [4, U_(function () {\n              return fetch(r, o);\n            })];\n\n          case 1:\n            return (a = t.sent()).ok ? [3, 3] : [4, x_(\"Delete Installation\", a)];\n\n          case 2:\n            throw t.sent();\n\n          case 3:\n            return [2];\n        }\n\n        var e, n;\n      });\n    });\n  }\n\n  Hh.INTERNAL.registerService(\"installations\", function (t) {\n    return O_(t), {\n      app: t,\n      getId: function () {\n        return function (o) {\n          return fr(this, void 0, void 0, function () {\n            var e, n, r, i;\n            return pr(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return [4, X_(e = O_(o))];\n\n                case 1:\n                  return n = t.sent(), r = n.installationEntry, (i = n.registrationPromise) && i.catch(function () {}), 2 === r.registrationStatus && tE(e).catch(function () {}), [2, r.fid];\n              }\n            });\n          });\n        }(t);\n      },\n      getToken: function () {\n        return rE(t);\n      },\n      delete: function () {\n        return function (r) {\n          return fr(this, void 0, void 0, function () {\n            var e, n;\n            return pr(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return [4, z_(e = O_(r), function (t) {\n                    if (!t || 0 !== t.registrationStatus) return t;\n                  })];\n\n                case 1:\n                  if (!(n = t.sent())) return [3, 6];\n                  if (1 !== n.registrationStatus) return [3, 2];\n                  throw D_.create(\"delete-pending-registration\");\n\n                case 2:\n                  if (2 !== n.registrationStatus) return [3, 6];\n                  if (navigator.onLine) return [3, 3];\n                  throw D_.create(\"app-offline\");\n\n                case 3:\n                  return [4, iE(e, n)];\n\n                case 4:\n                  return t.sent(), [4, G_(e)];\n\n                case 5:\n                  t.sent(), t.label = 6;\n\n                case 6:\n                  return [2];\n              }\n            });\n          });\n        }(t);\n      }\n    };\n  });\n\n  var oE,\n      aE,\n      sE,\n      uE,\n      cE = \"0.2.10\",\n      hE = \"FB-PERF-TRACE-MEASURE\",\n      lE = \"@firebase/performance/config\",\n      fE = \"@firebase/performance/configexpire\",\n      pE = \"Performance\",\n      dE = ((oE = {})[\"trace started\"] = \"Trace {$traceName} was started before.\", oE[\"trace stopped\"] = \"Trace {$traceName} is not running.\", oE[\"no window\"] = \"Window is not available.\", oE[\"no app id\"] = \"App id is not available.\", oE[\"no project id\"] = \"Project id is not available.\", oE[\"no api key\"] = \"Api key is not available.\", oE[\"invalid cc log\"] = \"Attempted to queue invalid cc event\", oE[\"FB not default\"] = \"Performance can only start when Firebase app instance is the default one.\", oE[\"RC response not ok\"] = \"RC response is not ok\", oE),\n      yE = new Dr(\"performance\", pE, dE),\n      mE = function () {\n    function t(t) {\n      if (!t) throw yE.create(\"no window\");\n      this.performance = t.performance, this.PerformanceObserver = t.PerformanceObserver, this.windowLocation = t.location, this.navigator = t.navigator, this.document = t.document, this.navigator && this.navigator.cookieEnabled && (this.localStorage = t.localStorage), t.perfMetrics && t.perfMetrics.onFirstInputDelay && (this.onFirstInputDelay = t.perfMetrics.onFirstInputDelay);\n    }\n\n    return t.prototype.getUrl = function () {\n      return this.windowLocation.href.split(\"?\")[0];\n    }, t.prototype.mark = function (t) {\n      this.performance && this.performance.mark && this.performance.mark(t);\n    }, t.prototype.measure = function (t, e, n) {\n      this.performance && this.performance.measure && this.performance.measure(t, e, n);\n    }, t.prototype.getEntriesByType = function (t) {\n      return this.performance && this.performance.getEntriesByType ? this.performance.getEntriesByType(t) : [];\n    }, t.prototype.getEntriesByName = function (t) {\n      return this.performance && this.performance.getEntriesByName ? this.performance.getEntriesByName(t) : [];\n    }, t.prototype.getTimeOrigin = function () {\n      return this.performance && (this.performance.timeOrigin || this.performance.timing.navigationStart);\n    }, t.prototype.requiredApisAvailable = function () {\n      return !!(fetch && Promise && this.navigator && this.navigator.cookieEnabled);\n    }, t.prototype.setupObserver = function (t, i) {\n      this.PerformanceObserver && new this.PerformanceObserver(function (t) {\n        for (var e = 0, n = t.getEntries(); e < n.length; e++) {\n          var r = n[e];\n          i(r);\n        }\n      }).observe({\n        entryTypes: [t]\n      });\n    }, t.getInstance = function () {\n      return void 0 === aE && (aE = new t(sE)), aE;\n    }, t;\n  }();\n\n  var gE,\n      vE,\n      bE,\n      wE = function () {\n    function t() {\n      this.instrumentationEnabled = !0, this.dataCollectionEnabled = !0, this.loggingEnabled = !1, this.tracesSamplingRate = 1, this.networkRequestsSamplingRate = 1, this.logEndPointUrl = \"https://firebaselogging.googleapis.com/v0cc/log?format=json_proto\", this.logSource = 462, this.logTraceAfterSampling = !1, this.logNetworkAfterSampling = !1, this.configTimeToLive = 12;\n    }\n\n    return t.prototype.getAppId = function () {\n      var t = this.firebaseAppInstance && this.firebaseAppInstance.options && this.firebaseAppInstance.options.appId;\n      if (!t) throw yE.create(\"no app id\");\n      return t;\n    }, t.prototype.getProjectId = function () {\n      var t = this.firebaseAppInstance && this.firebaseAppInstance.options && this.firebaseAppInstance.options.projectId;\n      if (!t) throw yE.create(\"no project id\");\n      return t;\n    }, t.prototype.getApiKey = function () {\n      var t = this.firebaseAppInstance && this.firebaseAppInstance.options && this.firebaseAppInstance.options.apiKey;\n      if (!t) throw yE.create(\"no api key\");\n      return t;\n    }, t.getInstance = function () {\n      return void 0 === uE && (uE = new t()), uE;\n    }, t;\n  }();\n\n  function _E() {\n    return gE;\n  }\n\n  function EE() {\n    switch (mE.getInstance().document.visibilityState) {\n      case \"visible\":\n        return vE.VISIBLE;\n\n      case \"hidden\":\n        return vE.HIDDEN;\n\n      case \"prerender\":\n        return vE.PRERENDER;\n\n      default:\n        return vE.UNKNOWN;\n    }\n  }\n\n  (bE = vE || (vE = {}))[bE.UNKNOWN = 0] = \"UNKNOWN\", bE[bE.VISIBLE = 1] = \"VISIBLE\", bE[bE.HIDDEN = 2] = \"HIDDEN\", bE[bE.PRERENDER = 3] = \"PRERENDER\", bE[bE.UNLOADED = 4] = \"UNLOADED\";\n  var TE = new ii(pE);\n  TE.logLevel = $r.INFO;\n  var SE = \"0.0.1\",\n      IE = {\n    loggingEnabled: !0\n  },\n      CE = \"FIREBASE_INSTALLATIONS_AUTH\";\n\n  function NE(t) {\n    var i,\n        e,\n        n = function () {\n      var t = mE.getInstance().localStorage,\n          e = t.getItem(fE);\n      if (!(e && (n = e, Number(n) > Date.now()))) return;\n      var n;\n      var r = t.getItem(lE);\n      if (!r) return;\n\n      try {\n        var i = JSON.parse(r);\n        return i;\n      } catch (t) {\n        return;\n      }\n    }();\n\n    return n ? (kE(n), Promise.resolve()) : (i = t, (e = wE.getInstance().firebaseAppInstance.installations().getToken(), e.then(function (t) {}), e).then(function (t) {\n      var e = wE.getInstance().getProjectId(),\n          n = \"https://firebaseremoteconfig.googleapis.com/v1/projects/\" + e + \"/namespaces/fireperf:fetch?key=\" + wE.getInstance().getApiKey(),\n          r = new Request(n, {\n        method: \"POST\",\n        headers: {\n          Authorization: CE + \" \" + t\n        },\n        body: JSON.stringify({\n          app_instance_id: i,\n          app_instance_id_token: t,\n          app_id: wE.getInstance().getAppId(),\n          app_version: cE,\n          sdk_version: SE\n        })\n      });\n      return fetch(r).then(function (t) {\n        if (t.ok) return t.json();\n        throw yE.create(\"RC response not ok\");\n      });\n    }).catch(function () {\n      TE.info(AE);\n    })).then(function (t) {\n      return kE(t);\n    }).then(function (t) {\n      return function (t) {\n        if (!t) return;\n        var e = mE.getInstance().localStorage;\n        e.setItem(lE, JSON.stringify(t)), e.setItem(fE, String(Date.now() + 60 * wE.getInstance().configTimeToLive * 60 * 1e3));\n      }(t);\n    }, function () {});\n  }\n\n  var AE = \"Could not fetch config, will use default configs\";\n\n  function kE(t) {\n    if (!t) return t;\n    var e = wE.getInstance(),\n        n = t.entries || {};\n    return void 0 !== n.fpr_enabled ? e.loggingEnabled = \"true\" === String(n.fpr_enabled) : e.loggingEnabled = IE.loggingEnabled, n.fpr_log_source && (e.logSource = Number(n.fpr_log_source)), n.fpr_log_endpoint_url && (e.logEndPointUrl = n.fpr_log_endpoint_url), void 0 !== n.fpr_vc_network_request_sampling_rate && (e.networkRequestsSamplingRate = Number(n.fpr_vc_network_request_sampling_rate)), void 0 !== n.fpr_vc_trace_sampling_rate && (e.tracesSamplingRate = Number(n.fpr_vc_trace_sampling_rate)), e.logTraceAfterSampling = DE(e.tracesSamplingRate), e.logNetworkAfterSampling = DE(e.networkRequestsSamplingRate), t;\n  }\n\n  function DE(t) {\n    return Math.random() <= t;\n  }\n\n  var RE,\n      OE = 1;\n\n  function PE() {\n    var n;\n    return OE = 2, RE = RE || (n = mE.getInstance().document, new Promise(function (t) {\n      if (n && \"complete\" !== n.readyState) {\n        var e = function () {\n          \"complete\" === n.readyState && (n.removeEventListener(\"readystatechange\", e), t());\n        };\n\n        n.addEventListener(\"readystatechange\", e);\n      } else t();\n    })).then(function () {\n      return (t = wE.getInstance().firebaseAppInstance.installations().getId()).then(function (t) {\n        gE = t;\n      }), t;\n      var t;\n    }).then(function (t) {\n      return NE(t);\n    }).then(function () {\n      return ME();\n    }, function () {\n      return ME();\n    });\n  }\n\n  function ME() {\n    OE = 3;\n  }\n\n  var xE,\n      LE = 1e4,\n      FE = 3,\n      UE = FE,\n      qE = [];\n\n  function VE(i) {\n    return function (t, e) {\n      for (var n = [], r = 2; r < arguments.length; r++) n[r - 2] = arguments[r];\n\n      !function (t) {\n        if (!t.eventTime || !t.message) throw yE.create(\"invalid cc log\");\n        qE = qE.concat([t]);\n      }({\n        message: i.apply(void 0, n),\n        eventTime: Date.now()\n      });\n    };\n  }\n\n  function BE() {\n    if (xE) return xE;\n    var t = VE(KE);\n    return (xE = new ii(\"@firebase/performance/cc\")).logHandler = t, xE;\n  }\n\n  function jE(t) {\n    var e = wE.getInstance();\n    !e.instrumentationEnabled && t.isAuto || (e.dataCollectionEnabled || t.isAuto) && mE.getInstance().requiredApisAvailable() && (t.isAuto && EE() !== vE.VISIBLE || e.loggingEnabled && e.logTraceAfterSampling && (3 === OE ? WE(t) : PE().then(function () {\n      return WE(t);\n    }, function () {\n      return WE(t);\n    })));\n  }\n\n  function WE(t) {\n    _E() && setTimeout(function () {\n      return BE().log(t, 1);\n    }, 0);\n  }\n\n  function KE(t, e) {\n    return 0 === e ? (r = {\n      url: (n = t).url,\n      http_method: n.httpMethod || 0,\n      http_response_code: 200,\n      response_payload_bytes: n.responsePayloadBytes,\n      client_start_time_us: n.startTimeUs,\n      time_to_response_initiated_us: n.timeToResponseInitiatedUs,\n      time_to_response_completed_us: n.timeToResponseCompletedUs\n    }, i = {\n      application_info: QE(),\n      network_request_metric: r\n    }, JSON.stringify(i)) : function (t) {\n      var e = {\n        name: t.name,\n        is_auto: t.isAuto,\n        client_start_time_us: t.startTimeUs,\n        duration_us: t.durationUs\n      };\n      0 !== Object.keys(t.counters).length && (e.counters = HE(t.counters));\n      var n = t.getAttributes();\n      0 !== Object.keys(n).length && (e.custom_attributes = HE(n));\n      var r = {\n        application_info: QE(),\n        trace_metric: e\n      };\n      return JSON.stringify(r);\n    }(t);\n    var n, r, i;\n  }\n\n  function QE() {\n    return {\n      google_app_id: wE.getInstance().getAppId(),\n      app_instance_id: _E(),\n      web_app_info: {\n        sdk_version: cE,\n        page_url: mE.getInstance().getUrl(),\n        service_worker_status: (t = mE.getInstance().navigator, \"serviceWorker\" in t ? t.serviceWorker.controller ? 2 : 3 : 1),\n        visibility_state: EE(),\n        effective_connection_type: function () {\n          var t = mE.getInstance().navigator.connection;\n\n          switch (t && t.effectiveType) {\n            case \"slow-2g\":\n              return 1;\n\n            case \"2g\":\n              return 2;\n\n            case \"3g\":\n              return 3;\n\n            case \"4g\":\n              return 4;\n\n            default:\n              return 0;\n          }\n        }()\n      },\n      application_process_state: 0\n    };\n    var t;\n  }\n\n  function HE(e) {\n    return Object.keys(e).map(function (t) {\n      return {\n        key: t,\n        value: e[t]\n      };\n    });\n  }\n\n  !function r(t) {\n    setTimeout(function () {\n      if (0 !== UE) {\n        if (!qE.length) return r(LE);\n        var t = qE.slice();\n        qE = [];\n        var e = t.map(function (t) {\n          return {\n            source_extension_json: t.message,\n            event_time_ms: String(t.eventTime)\n          };\n        }),\n            n = {\n          request_time_ms: String(Date.now()),\n          client_info: {\n            client_type: 1,\n            js_client_info: {}\n          },\n          log_source: wE.getInstance().logSource,\n          log_event: e\n        };\n        fetch(wE.getInstance().logEndPointUrl, {\n          method: \"POST\",\n          body: JSON.stringify(n)\n        }).then(function (t) {\n          return t.ok || TE.info(\"Call to Firebase backend failed.\"), t.json();\n        }).then(function (t) {\n          var e = Number(t.next_request_wait_millis),\n              n = isNaN(e) ? LE : Math.max(LE, e);\n          UE = FE, r(n);\n        }).catch(function () {\n          qE = t.concat(qE), UE--, TE.info(\"Tries left: \" + UE + \".\"), r(LE);\n        });\n      }\n    }, t);\n  }(5500);\n\n  var GE = function () {\n    function u(t, e, n) {\n      void 0 === e && (e = !1), this.name = t, this.isAuto = e, this.state = 1, this.customAttributes = {}, this.counters = {}, this.api = mE.getInstance(), this.randomId = Math.floor(1e6 * Math.random()), this.isAuto || (this.traceStartMark = \"FB-PERF-TRACE-START-\" + this.randomId + \"-\" + this.name, this.traceStopMark = \"FB-PERF-TRACE-STOP-\" + this.randomId + \"-\" + this.name, this.traceMeasure = n || hE + \"-\" + this.randomId + \"-\" + this.name, n && this.calculateTraceMetrics());\n    }\n\n    return u.prototype.start = function () {\n      if (1 !== this.state) throw yE.create(\"trace started\", {\n        traceName: this.name\n      });\n      this.api.mark(this.traceStartMark), this.state = 2;\n    }, u.prototype.stop = function () {\n      if (2 !== this.state) throw yE.create(\"trace stopped\", {\n        traceName: this.name\n      });\n      this.state = 3, this.api.mark(this.traceStopMark), this.api.measure(this.traceMeasure, this.traceStartMark, this.traceStopMark), this.calculateTraceMetrics(), jE(this);\n    }, u.prototype.record = function (t, e, n) {\n      if (this.durationUs = Math.floor(1e3 * e), this.startTimeUs = Math.floor(1e3 * t), n && n.attributes && (this.customAttributes = lr({}, n.attributes)), n && n.metrics) for (var r = 0, i = Object.keys(n.metrics); r < i.length; r++) {\n        var o = i[r];\n        isNaN(Number(n.metrics[o])) || (this.counters[o] = Number(Math.floor(n.metrics[o])));\n      }\n      jE(this);\n    }, u.prototype.incrementMetric = function (t, e) {\n      void 0 === e && (e = 1), void 0 === this.counters[t] && (this.counters[t] = 0), this.counters[t] += e;\n    }, u.prototype.putMetric = function (t, e) {\n      this.counters[t] = e;\n    }, u.prototype.getMetric = function (t) {\n      return this.counters[t] || 0;\n    }, u.prototype.putAttribute = function (t, e) {\n      this.customAttributes[t] = e;\n    }, u.prototype.getAttribute = function (t) {\n      return this.customAttributes[t];\n    }, u.prototype.removeAttribute = function (t) {\n      void 0 !== this.customAttributes[t] && delete this.customAttributes[t];\n    }, u.prototype.getAttributes = function () {\n      return lr({}, this.customAttributes);\n    }, u.prototype.setStartTime = function (t) {\n      this.startTimeUs = t;\n    }, u.prototype.setDuration = function (t) {\n      this.durationUs = t;\n    }, u.prototype.calculateTraceMetrics = function () {\n      var t = this.api.getEntriesByName(this.traceMeasure),\n          e = t && t[0];\n      e && (this.durationUs = Math.floor(1e3 * e.duration), this.startTimeUs = Math.floor(1e3 * (e.startTime + this.api.getTimeOrigin())));\n    }, u.createOobTrace = function (t, e, n) {\n      var r = mE.getInstance().getUrl();\n\n      if (r) {\n        var i = new u(\"_wt_\" + r, !0),\n            o = Math.floor(1e3 * mE.getInstance().getTimeOrigin());\n        i.setStartTime(o), t && t[0] && (i.setDuration(Math.floor(1e3 * t[0].duration)), i.incrementMetric(\"domInteractive\", Math.floor(1e3 * t[0].domInteractive)), i.incrementMetric(\"domContentLoadedEventEnd\", Math.floor(1e3 * t[0].domContentLoadedEventEnd)), i.incrementMetric(\"loadEventEnd\", Math.floor(1e3 * t[0].loadEventEnd)));\n\n        if (e) {\n          var a = e.find(function (t) {\n            return \"first-paint\" === t.name;\n          });\n          a && a.startTime && i.incrementMetric(\"_fp\", Math.floor(1e3 * a.startTime));\n          var s = e.find(function (t) {\n            return \"first-contentful-paint\" === t.name;\n          });\n          s && s.startTime && i.incrementMetric(\"_fcp\", Math.floor(1e3 * s.startTime)), n && i.incrementMetric(\"_fid\", Math.floor(1e3 * n));\n        }\n\n        jE(i);\n      }\n    }, u.createUserTimingTrace = function (t) {\n      jE(new u(t, !1, t));\n    }, u;\n  }();\n\n  function zE(t) {\n    var e = t;\n\n    if (e && void 0 !== e.responseStart) {\n      var n,\n          r,\n          i = mE.getInstance().getTimeOrigin(),\n          o = Math.floor(1e3 * (e.startTime + i)),\n          a = e.responseStart ? Math.floor(1e3 * (e.responseStart - e.startTime)) : void 0,\n          s = Math.floor(1e3 * (e.responseEnd - e.startTime)),\n          u = {\n        url: e.name && e.name.split(\"?\")[0],\n        responsePayloadBytes: e.transferSize,\n        startTimeUs: o,\n        timeToResponseInitiatedUs: a,\n        timeToResponseCompletedUs: s\n      };\n      n = u, (r = wE.getInstance()).instrumentationEnabled && n.url !== r.logEndPointUrl.split(\"?\")[0] && r.loggingEnabled && r.logNetworkAfterSampling && setTimeout(function () {\n        return BE().log(n, 0);\n      }, 0);\n    }\n  }\n\n  var YE = 5e3;\n\n  function XE() {\n    _E() && (setTimeout(function () {\n      return function () {\n        var t = mE.getInstance(),\n            e = t.getEntriesByType(\"navigation\"),\n            n = t.getEntriesByType(\"paint\");\n\n        if (t.onFirstInputDelay) {\n          var r = setTimeout(function () {\n            GE.createOobTrace(e, n), r = void 0;\n          }, YE);\n          t.onFirstInputDelay(function (t) {\n            r && (clearTimeout(r), GE.createOobTrace(e, n, t));\n          });\n        } else GE.createOobTrace(e, n);\n      }();\n    }, 0), setTimeout(function () {\n      return function () {\n        for (var t = mE.getInstance(), e = t.getEntriesByType(\"resource\"), n = 0, r = e; n < r.length; n++) {\n          var i = r[n];\n          zE(i);\n        }\n\n        t.setupObserver(\"resource\", zE);\n      }();\n    }, 0), setTimeout(function () {\n      return function () {\n        for (var t = mE.getInstance(), e = t.getEntriesByType(\"measure\"), n = 0, r = e; n < r.length; n++) {\n          var i = r[n];\n          JE(i);\n        }\n\n        t.setupObserver(\"measure\", JE);\n      }();\n    }, 0));\n  }\n\n  function JE(t) {\n    var e = t.name;\n    e.substring(0, hE.length) !== hE && GE.createUserTimingTrace(e);\n  }\n\n  var $E,\n      ZE = function () {\n    function t(t) {\n      this.app = t, mE.getInstance().requiredApisAvailable() ? PE().then(XE, XE) : TE.info(\"Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.\");\n    }\n\n    return t.prototype.trace = function (t) {\n      return new GE(t);\n    }, Object.defineProperty(t.prototype, \"instrumentationEnabled\", {\n      get: function () {\n        return wE.getInstance().instrumentationEnabled;\n      },\n      set: function (t) {\n        wE.getInstance().instrumentationEnabled = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"dataCollectionEnabled\", {\n      get: function () {\n        return wE.getInstance().dataCollectionEnabled;\n      },\n      set: function (t) {\n        wE.getInstance().dataCollectionEnabled = t;\n      },\n      enumerable: !0,\n      configurable: !0\n    }), t;\n  }();\n\n  return $E = window, sE = $E, Hh.INTERNAL.registerService(\"performance\", function (t) {\n    if (\"[DEFAULT]\" !== t.name) throw yE.create(\"FB not default\");\n    return wE.getInstance().firebaseAppInstance = t, new ZE(t);\n  }, {}), console.warn(\"\\nIt looks like you're using the development build of the Firebase JS SDK.\\nWhen deploying Firebase apps to production, it is advisable to only import\\nthe individual SDK components you intend to use.\\n\\nFor the CDN builds, these are available in the following manner\\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\\n\\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\\n\"), Hh;\n});","map":null,"metadata":{},"sourceType":"script"}