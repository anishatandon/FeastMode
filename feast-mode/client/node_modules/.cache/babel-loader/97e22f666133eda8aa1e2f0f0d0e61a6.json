{"ast":null,"code":"import _slicedToArray from \"/Users/cssummer19/Documents/FeastMode/feast-mode/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/cssummer19/Documents/FeastMode/feast-mode/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/cssummer19/Documents/FeastMode/feast-mode/client/src/components/Auth/Profile/ProfileEdit/ImageUpload.js\";\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteral([\"\\n    border-radius: 50%; \\n    align-items: center;\\n    display: block;\\n    margin-left: auto;\\n    margin-right: auto;\\n    width: 25rem;\\n    height: 25rem;\\n    object-fit: cover;\\n    transition: all 0.3s;\\n    opacity: \", \"\\n\"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n    margin-bottom: 1rem;\\n    width: 74%;\\n    display: flex;\\n    align-items: center;\\n\\n    div, label {\\n        opacity: 0;\\n        transition: all 0.3s;\\n        cursor: pointer;\\n    }\\n\\n    :hover div, :hover label {\\n        opacity: 1;\\n        transform: translateY(-4px);\\n\\n        &:hover {\\n            transform: translateY(-4px);\\n        }\\n        &:active {\\n            transform: translateY(2px);\\n        }\\n    }\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport FileUploader from \"react-firebase-file-uploader\";\nimport * as actions from '../../../../backend/store/actions';\nimport { storage } from 'firebase';\nimport styled from 'styled-components';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrashAlt, faCloudUploadAlt } from '@fortawesome/free-solid-svg-icons';\nconst ImageForm = styled.form(_templateObject());\nconst StyledImage = styled.img(_templateObject2(), props => props.opacity ? \"0.6\" : \"1\");\n\nconst ImageUpload = ({\n  updateImageUrl,\n  profile,\n  loading\n}) => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        completeLoading = _useState2[0],\n        setCompleteLoading = _useState2[1];\n\n  if (!profile.isLoaded) return null;\n  let state = {\n    avatar: \"\",\n    avatarURL: profile.image[0],\n    oldAvatar: profile.image[1]\n  };\n\n  const handleDelete = () => {\n    storage().ref(\"images/\").child(\"user.png\").getDownloadURL().then(url => {\n      state.avatarURL = url;\n      updateImageUrl(state);\n    });\n  };\n\n  const handleClick = () => {\n    setCompleteLoading(true);\n  };\n\n  const handleUploadSuccess = filename => {\n    state.avatar = filename;\n    storage().ref(\"images/\").child(filename).getDownloadURL().then(url => {\n      state.avatarURL = url;\n      updateImageUrl(state);\n    });\n  };\n\n  return React.createElement(ImageForm, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    onClick: handleClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(FontAwesomeIcon, {\n    icon: faCloudUploadAlt,\n    size: \"4x\",\n    color: \"#ff870C\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }), React.createElement(FileUploader, {\n    hidden: true,\n    accept: \"image/*\",\n    name: \"avatar\",\n    randomizeFilename: true,\n    storageRef: storage().ref(\"images\"),\n    onUploadSuccess: handleUploadSuccess,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  })), !loading, state.avatarURL && React.createElement(StyledImage, {\n    src: state.avatarURL,\n    opacity: completeLoading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    onClick: handleDelete,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, \" \", React.createElement(FontAwesomeIcon, {\n    icon: faTrashAlt,\n    size: \"4x\",\n    color: \"#ff870C\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }), \" \"), console.log(state));\n};\n\nconst mapStateToProps = ({\n  firebase,\n  auth\n}) => ({\n  profile: firebase.profile,\n  loading: auth.pfpEdit.loading\n});\n\nconst mapDispatchToProps = {\n  updateImageUrl: actions.updateImageUrl\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageUpload);","map":{"version":3,"sources":["/Users/cssummer19/Documents/FeastMode/feast-mode/client/src/components/Auth/Profile/ProfileEdit/ImageUpload.js"],"names":["React","useState","connect","FileUploader","actions","storage","styled","FontAwesomeIcon","faTrashAlt","faCloudUploadAlt","ImageForm","form","StyledImage","img","props","opacity","ImageUpload","updateImageUrl","profile","loading","completeLoading","setCompleteLoading","isLoaded","state","avatar","avatarURL","image","oldAvatar","handleDelete","ref","child","getDownloadURL","then","url","handleClick","handleUploadSuccess","filename","console","log","mapStateToProps","firebase","auth","pfpEdit","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport FileUploader from \"react-firebase-file-uploader\"\nimport * as actions from '../../../../backend/store/actions'\nimport { storage } from 'firebase'\nimport styled from 'styled-components'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTrashAlt, faCloudUploadAlt } from '@fortawesome/free-solid-svg-icons'\n\nconst ImageForm = styled.form`\n    margin-bottom: 1rem;\n    width: 74%;\n    display: flex;\n    align-items: center;\n\n    div, label {\n        opacity: 0;\n        transition: all 0.3s;\n        cursor: pointer;\n    }\n\n    :hover div, :hover label {\n        opacity: 1;\n        transform: translateY(-4px);\n\n        &:hover {\n            transform: translateY(-4px);\n        }\n        &:active {\n            transform: translateY(2px);\n        }\n    }\n`\nconst StyledImage = styled.img`\n    border-radius: 50%; \n    align-items: center;\n    display: block;\n    margin-left: auto;\n    margin-right: auto;\n    width: 25rem;\n    height: 25rem;\n    object-fit: cover;\n    transition: all 0.3s;\n    opacity: ${props => props.opacity ? \"0.6\" : \"1\"}\n`\n\nconst ImageUpload = ({ updateImageUrl, profile, loading }) => {\n    const [completeLoading, setCompleteLoading] = useState(false)\n    if (!profile.isLoaded) return null\n\n    let state = {\n        avatar: \"\",\n        avatarURL: profile.image[0],\n        oldAvatar: profile.image[1]\n    }\n\n    const handleDelete = () => {\n        storage()\n            .ref(\"images/\")\n            .child(\"user.png\")\n            .getDownloadURL()\n            .then(url => { \n                state.avatarURL = url\n                updateImageUrl(state)\n            }\n        )\n    }\n\n    const handleClick = () => {\n        setCompleteLoading(true)\n    }\n\n    const handleUploadSuccess = filename => {\n        state.avatar = filename\n        storage()\n            .ref(\"images/\")\n            .child(filename)\n            .getDownloadURL()\n            .then(url => {\n                state.avatarURL = url\n                updateImageUrl(state)\n            }\n        )\n    }\n\n    return (\n        <ImageForm>\n            <label onClick = {handleClick}>\n                <FontAwesomeIcon icon = {faCloudUploadAlt} size = \"4x\" color = \"#ff870C\" />\n                <FileUploader\n                    hidden\n                    accept = \"image/*\"\n                    name = \"avatar\"\n                    randomizeFilename\n                    storageRef = {storage().ref(\"images\")}\n                    onUploadSuccess = {handleUploadSuccess}\n                />\n            </label>\n            {!loading }\n            {state.avatarURL && <StyledImage src = {state.avatarURL} opacity = {completeLoading}/>}\n            <div onClick = {handleDelete}> <FontAwesomeIcon icon = {faTrashAlt} size = \"4x\" color = \"#ff870C\"/> </div>\n            {console.log(state)}\n        </ImageForm>\n    )\n}\n\nconst mapStateToProps = ({ firebase, auth }) => ({\n    profile: firebase.profile,\n    loading: auth.pfpEdit.loading,\n})\n\nconst mapDispatchToProps = {\n    updateImageUrl: actions.updateImageUrl,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageUpload);\n"]},"metadata":{},"sourceType":"module"}