{"ast":null,"code":"'use strict';\n\nvar MenuItem = require('./MenuItem');\n\nvar MenuCategory = require('./MenuCategory');\n\nvar Menu = function (menuData) {\n  if (!menuData) {\n    menuData = {};\n  } else {\n    this.parseMenu(menuData);\n  }\n\n  this.menuData = menuData;\n};\n\nMenu.prototype.getRaw = function () {\n  return this.menuData;\n};\n\nMenu.prototype.buildCategories = function (categoryData, parent) {\n  var category = new MenuCategory(categoryData, parent);\n\n  for (var subIndex in categoryData.Categories) {\n    category.getSubcategories().push(this.buildCategories(categoryData.Categories[subIndex], category));\n  }\n\n  categoryData.Products.forEach(function (productCode) {\n    //link up products and categories\n    var product = this.menuByCode[productCode];\n\n    if (!product) {\n      console.log(\"PRODUCT NOT FOUND: \" + productCode, category.getCode());\n      return;\n    }\n\n    category.getProducts().push(product);\n    product.getCategories().push(category);\n  }.bind(this));\n  return category;\n};\n\nMenu.prototype.parseItems = function (parentMenuData, ParseClass) {\n  var items = [];\n  Object.keys(parentMenuData).forEach(function (code) {\n    var menuData = parentMenuData[code];\n    var obj = new ParseClass(menuData);\n    this.menuByCode[obj.getCode()] = obj;\n    items.push(obj);\n  }.bind(this));\n  return items;\n};\n\nMenu.prototype.parseMenu = function (menuData) {\n  this.menuByCode = {};\n  var products = this.parseItems(menuData.result.Products, MenuItem);\n  var coupons = this.parseItems(menuData.result.Coupons, MenuItem);\n  var preconfigured = this.parseItems(menuData.result.PreconfiguredProducts, MenuItem);\n  this.rootCategories = {}; //generate category tree using MenuCategory objects\n\n  for (var categoryType in menuData.result.Categorization) {\n    var categoryData = menuData.result.Categorization[categoryType];\n    this.rootCategories[categoryType] = this.buildCategories(categoryData);\n  }\n};\n\nMenu.prototype.getFoodCategory = function () {\n  return this.rootCategories[\"Food\"];\n};\n\nMenu.prototype.getCouponCategory = function () {\n  return this.rootCategories[\"Coupons\"];\n};\n\nMenu.prototype.getPreconfiguredCategory = function () {\n  return this.rootCategories[\"PreconfiguredProducts\"];\n};\n\nMenu.prototype.getItemByCode = function (code) {\n  return this.menuByCode[code];\n};\n\nmodule.exports = Menu;","map":{"version":3,"sources":["/Users/cssummer19/Documents/FeastMode/feast-mode/src/dominos/src/Menu.js"],"names":["MenuItem","require","MenuCategory","Menu","menuData","parseMenu","prototype","getRaw","buildCategories","categoryData","parent","category","subIndex","Categories","getSubcategories","push","Products","forEach","productCode","product","menuByCode","console","log","getCode","getProducts","getCategories","bind","parseItems","parentMenuData","ParseClass","items","Object","keys","code","obj","products","result","coupons","Coupons","preconfigured","PreconfiguredProducts","rootCategories","categoryType","Categorization","getFoodCategory","getCouponCategory","getPreconfiguredCategory","getItemByCode","module","exports"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nvar MenuItem = require('./MenuItem');\r\nvar MenuCategory = require('./MenuCategory');\r\n\r\n\r\nvar Menu = function(menuData) {\r\n    if(!menuData) {\r\n        menuData={};\r\n    } else {\r\n        this.parseMenu(menuData);\r\n    }\r\n    this.menuData = menuData;\r\n}\r\n\r\nMenu.prototype.getRaw = function() {\r\n    return this.menuData;\r\n}\r\n\r\nMenu.prototype.buildCategories = function(categoryData,parent) {\r\n    var category = new MenuCategory(categoryData,parent);\r\n    for (var subIndex in categoryData.Categories) {\r\n        category.getSubcategories().push(this.buildCategories(categoryData.Categories[subIndex],category));\r\n    }\r\n    categoryData.Products.forEach((function(productCode) { //link up products and categories\r\n        var product = this.menuByCode[productCode];\r\n        if (!product) {\r\n            console.log(\"PRODUCT NOT FOUND: \"+productCode,category.getCode());\r\n            return;\r\n        }\r\n        category.getProducts().push(product);\r\n        product.getCategories().push(category);\r\n    }).bind(this));\r\n    return category;\r\n}\r\n\r\nMenu.prototype.parseItems = function(parentMenuData,ParseClass) {\r\n    var items = [];\r\n    Object.keys(parentMenuData).forEach((function(code) {\r\n        var menuData = parentMenuData[code];\r\n        var obj = new ParseClass(menuData);\r\n        this.menuByCode[obj.getCode()] = obj;\r\n        items.push(obj);\r\n    }).bind(this));\r\n    return items;\r\n}\r\n\r\nMenu.prototype.parseMenu = function(menuData) {\r\n    this.menuByCode = {};\r\n    var products = this.parseItems(menuData.result.Products,MenuItem);\r\n    var coupons = this.parseItems(menuData.result.Coupons,MenuItem);\r\n    var preconfigured = this.parseItems(menuData.result.PreconfiguredProducts,MenuItem);\r\n\r\n    this.rootCategories = {}; //generate category tree using MenuCategory objects\r\n    for (var categoryType in menuData.result.Categorization) {\r\n        var categoryData = menuData.result.Categorization[categoryType];\r\n        this.rootCategories[categoryType] = this.buildCategories(categoryData);\r\n    }\r\n}\r\n\r\nMenu.prototype.getFoodCategory = function() {\r\n    return this.rootCategories[\"Food\"];\r\n}\r\n\r\nMenu.prototype.getCouponCategory = function() {\r\n    return this.rootCategories[\"Coupons\"];\r\n}\r\n\r\nMenu.prototype.getPreconfiguredCategory = function() {\r\n    return this.rootCategories[\"PreconfiguredProducts\"];\r\n}\r\n\r\nMenu.prototype.getItemByCode = function(code) {\r\n    return this.menuByCode[code];\r\n}\r\n\r\nmodule.exports = Menu;\r\n"]},"metadata":{},"sourceType":"module"}