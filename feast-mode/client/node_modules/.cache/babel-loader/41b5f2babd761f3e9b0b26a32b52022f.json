{"ast":null,"code":"import _objectSpread from \"/Users/cssummer19/Documents/FeastMode/feast-mode/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/cssummer19/Documents/FeastMode/feast-mode/src/components/Profile/profile_change.js\";\nimport React, { Component } from 'react'; // import Firebase from '../Firebase';\n\nimport { withFirebase } from '../../backend/Firebase';\nconst INITIAL_STATE = {\n  loading: false,\n  users: [],\n  user: {\n    id: \"\",\n    //email\n    username: \"\",\n    phone: NaN,\n    friends: [],\n    orders: [],\n    creditCardNum: NaN,\n    creditCardType: '',\n    expirationDate: '',\n    securityCode: NaN,\n    billAddress: ''\n  }\n};\n\nclass ProfileChangeForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSubmit = event => {\n      event.preventDefault();\n      const user = this.props.firebase.userID();\n      console.log(user);\n      const _this$state = this.state,\n            username = _this$state.username,\n            email = _this$state.email,\n            phone = _this$state.phone;\n      this.props.firebase.doEmailUpdate(email).then(() => {\n        this.setState(_objectSpread({}, INITIAL_STATE));\n      }).catch(error => {\n        this.setState({\n          error\n        });\n      });\n      this.props.firebase.doProfileUpdate({\n        username: this.username,\n        email: this.email,\n        phone: this.phone\n      }).then(() => {\n        this.setState(_objectSpread({}, INITIAL_STATE));\n      }).catch(error => {\n        this.setState({\n          error\n        });\n      });\n      event.preventDefault();\n    };\n\n    this.onChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.state = _objectSpread({}, INITIAL_STATE); // this.updateProfile = this.updateProfile.bind(this); //new\n  }\n\n  componentDidMount() {\n    this.setState({\n      loading: true\n    });\n    this.props.firebase.users().on('value', snapshot => {\n      const usersObject = snapshot.val();\n      const usersList = Object.keys(usersObject).map(key => _objectSpread({}, usersObject[key], {\n        uid: key\n      }));\n      this.setState({\n        users: usersList,\n        loading: false\n      });\n    });\n  } // new\n  // updateProfile(profile){\n  //   const user = {...this.state.user};\n  //   user[profile.id] = profile;\n  // }\n  //\n  // componentWillMount() {\n  //   this.usersRef = this.props.firebase.db.syncState('users', {\n  //     context: this,\n  //     state: 'users',\n  //   })\n  // }\n  //\n  // componentWillUnmount() {\n  //   this.props.db.removeBinding(this.usersRef);\n  // }\n  //new\n\n\n  render() {\n    const _this$state2 = this.state,\n          username = _this$state2.username,\n          email = _this$state2.email,\n          phone = _this$state2.phone,\n          error = _this$state2.error;\n    const _this$state3 = this.state,\n          users = _this$state3.users,\n          loading = _this$state3.loading;\n    const isInvalid = false; //   username === '' &&\n    //   email === '' &&\n    //   phone === '';\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Profile Change\"), loading && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Loading ...\"), React.createElement(UserList, {\n      users: users,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      name: \"username\",\n      value: username,\n      onChange: this.onChange,\n      type: \"text\",\n      placeholder: \"New Username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      name: \"email\",\n      value: email,\n      onChange: this.onChange,\n      type: \"text\",\n      placeholder: \"New email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      name: \"phone\",\n      value: phone,\n      onChange: this.onChange,\n      type: \"text\",\n      placeholder: \"New Phone\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      disabled: isInvalid,\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Save\"), error && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, error.message)));\n  }\n\n}\n\nconst UserList = ({\n  users\n}) => React.createElement(\"ul\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 164\n  },\n  __self: this\n}, users.map(user => React.createElement(\"li\", {\n  key: user.uid,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 166\n  },\n  __self: this\n}, React.createElement(\"span\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 167\n  },\n  __self: this\n}, React.createElement(\"strong\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 168\n  },\n  __self: this\n}, \"ID:\"), \" \", user.uid), React.createElement(\"span\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 170\n  },\n  __self: this\n}, React.createElement(\"strong\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 171\n  },\n  __self: this\n}, \"E-Mail:\"), \" \", user.email), React.createElement(\"span\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 173\n  },\n  __self: this\n}, React.createElement(\"strong\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 174\n  },\n  __self: this\n}, \"Username:\"), \" \", user.username), React.createElement(\"span\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 176\n  },\n  __self: this\n}, React.createElement(\"strong\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 177\n  },\n  __self: this\n}, \"Phone:\"), \" \", user.phone))));\n\nexport default withFirebase(ProfileChangeForm);","map":{"version":3,"sources":["/Users/cssummer19/Documents/FeastMode/feast-mode/src/components/Profile/profile_change.js"],"names":["React","Component","withFirebase","INITIAL_STATE","loading","users","user","id","username","phone","NaN","friends","orders","creditCardNum","creditCardType","expirationDate","securityCode","billAddress","ProfileChangeForm","constructor","props","onSubmit","event","preventDefault","firebase","userID","console","log","state","email","doEmailUpdate","then","setState","catch","error","doProfileUpdate","onChange","target","name","value","componentDidMount","on","snapshot","usersObject","val","usersList","Object","keys","map","key","uid","render","isInvalid","message","UserList"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CACA;;AACA,SAASC,YAAT,QAA6B,wBAA7B;AAEA,MAAMC,aAAa,GAAG;AACpBC,EAAAA,OAAO,EAAE,KADW;AAEpBC,EAAAA,KAAK,EAAE,EAFa;AAGpBC,EAAAA,IAAI,EAAE;AACJC,IAAAA,EAAE,EAAE,EADA;AACI;AACRC,IAAAA,QAAQ,EAAE,EAFN;AAGJC,IAAAA,KAAK,EAAEC,GAHH;AAIJC,IAAAA,OAAO,EAAE,EAJL;AAKJC,IAAAA,MAAM,EAAE,EALJ;AAMJC,IAAAA,aAAa,EAAEH,GANX;AAOJI,IAAAA,cAAc,EAAE,EAPZ;AAQJC,IAAAA,cAAc,EAAE,EARZ;AASJC,IAAAA,YAAY,EAAEN,GATV;AAUJO,IAAAA,WAAW,EAAE;AAVT;AAHc,CAAtB;;AAmBA,MAAMC,iBAAN,SAAgCjB,SAAhC,CAA0C;AACxCkB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAgDnBC,QAhDmB,GAgDRC,KAAK,IAAI;AAClBA,MAAAA,KAAK,CAACC,cAAN;AACA,YAAMjB,IAAI,GAAG,KAAKc,KAAL,CAAWI,QAAX,CAAoBC,MAApB,EAAb;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYrB,IAAZ;AAHkB,0BAKiB,KAAKsB,KALtB;AAAA,YAKVpB,QALU,eAKVA,QALU;AAAA,YAKAqB,KALA,eAKAA,KALA;AAAA,YAKOpB,KALP,eAKOA,KALP;AAOlB,WAAKW,KAAL,CAAWI,QAAX,CACGM,aADH,CACiBD,KADjB,EAEGE,IAFH,CAEQ,MAAM;AACV,aAAKC,QAAL,mBAAmB7B,aAAnB;AACD,OAJH,EAKG8B,KALH,CAKSC,KAAK,IAAI;AACd,aAAKF,QAAL,CAAc;AAAEE,UAAAA;AAAF,SAAd;AACD,OAPH;AAWA,WAAKd,KAAL,CAAWI,QAAX,CACGW,eADH,CAEI;AAAC3B,QAAAA,QAAQ,EAAE,KAAKA,QAAhB;AACAqB,QAAAA,KAAK,EAAE,KAAKA,KADZ;AAEApB,QAAAA,KAAK,EAAE,KAAKA;AAFZ,OAFJ,EAMGsB,IANH,CAMQ,MAAM;AACV,aAAKC,QAAL,mBAAmB7B,aAAnB;AACD,OARH,EASG8B,KATH,CASSC,KAAK,IAAI;AACd,aAAKF,QAAL,CAAc;AAAEE,UAAAA;AAAF,SAAd;AACD,OAXH;AAaAZ,MAAAA,KAAK,CAACC,cAAN;AACD,KAhFkB;;AAAA,SAkFnBa,QAlFmB,GAkFRd,KAAK,IAAI;AAClB,WAAKU,QAAL,CAAc;AAAE,SAACV,KAAK,CAACe,MAAN,CAAaC,IAAd,GAAqBhB,KAAK,CAACe,MAAN,CAAaE;AAApC,OAAd;AACD,KApFkB;;AAGjB,SAAKX,KAAL,qBAAkBzB,aAAlB,EAHiB,CAIjB;AACD;;AAKDqC,EAAAA,iBAAiB,GAAG;AAClB,SAAKR,QAAL,CAAc;AAAE5B,MAAAA,OAAO,EAAE;AAAX,KAAd;AAEA,SAAKgB,KAAL,CAAWI,QAAX,CAAoBnB,KAApB,GAA4BoC,EAA5B,CAA+B,OAA/B,EAAwCC,QAAQ,IAAI;AAClD,YAAMC,WAAW,GAAGD,QAAQ,CAACE,GAAT,EAApB;AAEA,YAAMC,SAAS,GAAGC,MAAM,CAACC,IAAP,CAAYJ,WAAZ,EAAyBK,GAAzB,CAA6BC,GAAG,sBAC7CN,WAAW,CAACM,GAAD,CADkC;AAEhDC,QAAAA,GAAG,EAAED;AAF2C,QAAhC,CAAlB;AAKA,WAAKjB,QAAL,CAAc;AACZ3B,QAAAA,KAAK,EAAEwC,SADK;AAEZzC,QAAAA,OAAO,EAAE;AAFG,OAAd;AAID,KAZD;AAaD,GA3BuC,CA6BxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AA0CA+C,EAAAA,MAAM,GAAG;AAAA,yBACmC,KAAKvB,KADxC;AAAA,UACCpB,QADD,gBACCA,QADD;AAAA,UACWqB,KADX,gBACWA,KADX;AAAA,UACkBpB,KADlB,gBACkBA,KADlB;AAAA,UACyByB,KADzB,gBACyBA,KADzB;AAAA,yBAEoB,KAAKN,KAFzB;AAAA,UAECvB,KAFD,gBAECA,KAFD;AAAA,UAEQD,OAFR,gBAEQA,OAFR;AAKP,UAAMgD,SAAS,GAAG,KAAlB,CALO,CAMP;AACA;AACA;;AAEA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAGGhD,OAAO,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAHd,EAKE,oBAAC,QAAD;AAAU,MAAA,KAAK,EAAEC,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,EAOA;AAAM,MAAA,QAAQ,EAAE,KAAKgB,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,KAAK,EAAEb,QAFT;AAGE,MAAA,QAAQ,EAAE,KAAK4B,QAHjB;AAIE,MAAA,IAAI,EAAC,MAJP;AAKE,MAAA,WAAW,EAAC,cALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAQE;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,KAAK,EAAEP,KAFT;AAGE,MAAA,QAAQ,EAAE,KAAKO,QAHjB;AAIE,MAAA,IAAI,EAAC,MAJP;AAKE,MAAA,WAAW,EAAC,WALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARF,EAeE;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,KAAK,EAAE3B,KAFT;AAGE,MAAA,QAAQ,EAAE,KAAK2B,QAHjB;AAIE,MAAA,IAAI,EAAC,MAJP;AAKE,MAAA,WAAW,EAAC,WALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfF,EAsBE;AAAQ,MAAA,QAAQ,EAAEgB,SAAlB;AAA6B,MAAA,IAAI,EAAC,QAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAtBF,EA0BGlB,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIA,KAAK,CAACmB,OAAV,CA1BZ,CAPA,CADF;AAuCD;;AAxIuC;;AA2I1C,MAAMC,QAAQ,GAAG,CAAC;AAAEjD,EAAAA;AAAF,CAAD,KACf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GACGA,KAAK,CAAC2C,GAAN,CAAU1C,IAAI,IACb;AAAI,EAAA,GAAG,EAAEA,IAAI,CAAC4C,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,OACwB5C,IAAI,CAAC4C,GAD7B,CADF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,OAC4B5C,IAAI,CAACuB,KADjC,CAJF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,OAC8BvB,IAAI,CAACE,QADnC,CAPF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,OAC2BF,IAAI,CAACG,KADhC,CAVF,CADD,CADH,CADF;;AAqBA,eAAeP,YAAY,CAACgB,iBAAD,CAA3B","sourcesContent":["import React, { Component } from 'react';\n// import Firebase from '../Firebase';\nimport { withFirebase } from '../../backend/Firebase'\n\nconst INITIAL_STATE = {\n  loading: false,\n  users: [],\n  user: {\n    id: \"\", //email\n    username: \"\",\n    phone: NaN,\n    friends: [],\n    orders: [],\n    creditCardNum: NaN,\n    creditCardType: '',\n    expirationDate: '',\n    securityCode: NaN,\n    billAddress: '',\n  },\n};\n\n\n\nclass ProfileChangeForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { ...INITIAL_STATE };\n    // this.updateProfile = this.updateProfile.bind(this); //new\n  }\n\n\n\n\n  componentDidMount() {\n    this.setState({ loading: true });\n\n    this.props.firebase.users().on('value', snapshot => {\n      const usersObject = snapshot.val();\n\n      const usersList = Object.keys(usersObject).map(key => ({\n        ...usersObject[key],\n        uid: key,\n      }));\n\n      this.setState({\n        users: usersList,\n        loading: false,\n      });\n    });\n  }\n\n  // new\n  // updateProfile(profile){\n  //   const user = {...this.state.user};\n  //   user[profile.id] = profile;\n  // }\n  //\n  // componentWillMount() {\n  //   this.usersRef = this.props.firebase.db.syncState('users', {\n  //     context: this,\n  //     state: 'users',\n  //   })\n  // }\n  //\n  // componentWillUnmount() {\n  //   this.props.db.removeBinding(this.usersRef);\n  // }\n  //new\n\n\n\n  onSubmit = event => {\n    event.preventDefault();\n    const user = this.props.firebase.userID();\n    console.log(user)\n\n    const { username, email, phone } = this.state;\n\n    this.props.firebase\n      .doEmailUpdate(email)\n      .then(() => {\n        this.setState({ ...INITIAL_STATE });\n      })\n      .catch(error => {\n        this.setState({ error });\n      });\n\n\n\n    this.props.firebase\n      .doProfileUpdate(\n        {username: this.username,\n        email: this.email,\n        phone: this.phone,\n        })\n      .then(() => {\n        this.setState({ ...INITIAL_STATE });\n      })\n      .catch(error => {\n        this.setState({ error });\n      });\n\n    event.preventDefault();\n  };\n\n  onChange = event => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  render() {\n    const { username, email, phone, error } = this.state;\n    const { users, loading } = this.state;\n\n\n    const isInvalid = false\n    //   username === '' &&\n    //   email === '' &&\n    //   phone === '';\n\n    return (\n      <div>\n        <h1>Profile Change</h1>\n\n        {loading && <div>Loading ...</div>}\n\n        <UserList users={users} />\n\n      <form onSubmit={this.onSubmit}>\n        <input\n          name=\"username\"\n          value={username}\n          onChange={this.onChange}\n          type=\"text\"\n          placeholder=\"New Username\"\n        />\n        <input\n          name=\"email\"\n          value={email}\n          onChange={this.onChange}\n          type=\"text\"\n          placeholder=\"New email\"\n        />\n        <input\n          name=\"phone\"\n          value={phone}\n          onChange={this.onChange}\n          type=\"text\"\n          placeholder=\"New Phone\"\n        />\n        <button disabled={isInvalid} type=\"submit\">\n          Save\n        </button>\n\n        {error && <p>{error.message}</p>}\n      </form>\n\n      </div>\n    );\n  }\n}\n\nconst UserList = ({ users }) => (\n  <ul>\n    {users.map(user => (\n      <li key={user.uid}>\n        <span>\n          <strong>ID:</strong> {user.uid}\n        </span>\n        <span>\n          <strong>E-Mail:</strong> {user.email}\n        </span>\n        <span>\n          <strong>Username:</strong> {user.username}\n        </span>\n        <span>\n          <strong>Phone:</strong> {user.phone}\n        </span>\n      </li>\n    ))}\n  </ul>\n);\n\nexport default withFirebase(ProfileChangeForm);\n"]},"metadata":{},"sourceType":"module"}