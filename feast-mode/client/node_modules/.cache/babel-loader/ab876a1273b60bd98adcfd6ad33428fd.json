{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/cssummer19/Documents/FeastMode/feast-mode/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/cssummer19/Documents/FeastMode/feast-mode/client/src/components/Auth/Profile/ProfileEdit/ImageUpload.js\";\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n    border-radius: 50%; \\n    align-items: center;\\n    display: block;\\n    margin-left: auto;\\n    margin-right: auto;\\n    width: 25rem;\\n    height: 25rem;\\n    object-fit: cover;\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport FileUploader from \"react-firebase-file-uploader\";\nimport * as actions from '../../../../backend/store/actions';\nimport { storage } from 'firebase';\nimport styled from 'styled-components';\nconst StyledImage = styled.img(_templateObject());\n\nconst ImageUpload = ({\n  user,\n  updateImageUrl,\n  profile,\n  cleanUp,\n  error,\n  loading\n}) => {\n  if (!profile || !profile.imageUrl) {\n    return null;\n  }\n\n  let state = {\n    avatar: \"\",\n    avatarURL: profile.imageUrl,\n    updateImageUrl: updateImageUrl\n  };\n\n  const handleUploadSuccess = filename => {\n    state.avatar = filename;\n    storage().ref(\"images/\").child(filename).getDownloadURL().then(url => {\n      console.log(url);\n      state.avatarURL = url;\n      updateImageUrl(state.avatarURL);\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, state.avatarURL && React.createElement(StyledImage, {\n    src: state.avatarURL,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }), React.createElement(FileUploader, {\n    hidden: true,\n    accept: \"image/*\",\n    name: \"avatar\",\n    randomizeFilename: true,\n    storageRef: storage().ref(\"images\"),\n    onUploadSuccess: handleUploadSuccess,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }))));\n};\n\nconst mapStateToProps = ({\n  auth,\n  firebase\n}) => ({\n  profile: firebase.profile,\n  loading: auth.loading,\n  error: auth.error\n});\n\nconst mapDispatchToProps = {\n  updateImageUrl: actions.updateImageUrl,\n  cleanUp: actions.clean\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageUpload);","map":{"version":3,"sources":["/Users/cssummer19/Documents/FeastMode/feast-mode/client/src/components/Auth/Profile/ProfileEdit/ImageUpload.js"],"names":["React","connect","FileUploader","actions","storage","styled","StyledImage","img","ImageUpload","user","updateImageUrl","profile","cleanUp","error","loading","imageUrl","state","avatar","avatarURL","handleUploadSuccess","filename","ref","child","getDownloadURL","then","url","console","log","mapStateToProps","auth","firebase","mapDispatchToProps","clean"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AAEA,OAAO,KAAKC,OAAZ,MAAyB,mCAAzB;AACA,SAASC,OAAT,QAAwB,UAAxB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,MAAMC,WAAW,GAAGD,MAAM,CAACE,GAAV,mBAAjB;;AAWA,MAAMC,WAAW,GAAG,CAAC;AAACC,EAAAA,IAAD;AAAOC,EAAAA,cAAP;AAAuBC,EAAAA,OAAvB;AAAgCC,EAAAA,OAAhC;AAAyCC,EAAAA,KAAzC;AAAgDC,EAAAA;AAAhD,CAAD,KAA8D;AAE9E,MAAI,CAACH,OAAD,IAAY,CAACA,OAAO,CAACI,QAAzB,EAAkC;AAC9B,WAAO,IAAP;AACH;;AAED,MAAIC,KAAK,GAAG;AACRC,IAAAA,MAAM,EAAE,EADA;AAERC,IAAAA,SAAS,EAAEP,OAAO,CAACI,QAFX;AAGRL,IAAAA,cAAc,EAAEA;AAHR,GAAZ;;AAMA,QAAMS,mBAAmB,GAAGC,QAAQ,IAAI;AACpCJ,IAAAA,KAAK,CAACC,MAAN,GAAeG,QAAf;AACAhB,IAAAA,OAAO,GACFiB,GADL,CACS,SADT,EAEKC,KAFL,CAEWF,QAFX,EAGKG,cAHL,GAIKC,IAJL,CAIWC,GAAG,IAAI;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAT,MAAAA,KAAK,CAACE,SAAN,GAAkBO,GAAlB;AACAf,MAAAA,cAAc,CAACM,KAAK,CAACE,SAAP,CAAd;AACH,KARL;AAWH,GAbD;;AAeA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKF,KAAK,CAACE,SAAN,IAAmB,oBAAC,WAAD;AAAa,IAAA,GAAG,EAAEF,KAAK,CAACE,SAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADxB,EAEI,oBAAC,YAAD;AACA,IAAA,MAAM,MADN;AAEA,IAAA,MAAM,EAAC,SAFP;AAGA,IAAA,IAAI,EAAC,QAHL;AAIA,IAAA,iBAAiB,MAJjB;AAKA,IAAA,UAAU,EAAEd,OAAO,GAAGiB,GAAV,CAAc,QAAd,CALZ;AAMA,IAAA,eAAe,EAAEF,mBANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADJ,CADJ,CADJ;AAiBH,CA5CD;;AA+CA,MAAMS,eAAe,GAAG,CAAC;AAAEC,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAAD,MAAyB;AAC7CnB,EAAAA,OAAO,EAAEmB,QAAQ,CAACnB,OAD2B;AAE7CG,EAAAA,OAAO,EAAEe,IAAI,CAACf,OAF+B;AAG7CD,EAAAA,KAAK,EAAEgB,IAAI,CAAChB;AAHiC,CAAzB,CAAxB;;AAMA,MAAMkB,kBAAkB,GAAG;AACvBrB,EAAAA,cAAc,EAAEP,OAAO,CAACO,cADD;AAEvBE,EAAAA,OAAO,EAAET,OAAO,CAAC6B;AAFM,CAA3B;AAKA,eAAe/B,OAAO,CAAC2B,eAAD,EAAkBG,kBAAlB,CAAP,CAA6CvB,WAA7C,CAAf","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport FileUploader from \"react-firebase-file-uploader\";\n\nimport * as actions from '../../../../backend/store/actions'\nimport { storage } from 'firebase';\nimport styled from 'styled-components'\n\nconst StyledImage = styled.img`\n    border-radius: 50%; \n    align-items: center;\n    display: block;\n    margin-left: auto;\n    margin-right: auto;\n    width: 25rem;\n    height: 25rem;\n    object-fit: cover;\n`\n\nconst ImageUpload = ({user, updateImageUrl, profile, cleanUp, error, loading}) => {\n    \n    if( !profile || !profile.imageUrl){\n        return null\n    }\n\n    let state = {\n        avatar: \"\",\n        avatarURL: profile.imageUrl,\n        updateImageUrl: updateImageUrl,\n    };\n\n    const handleUploadSuccess = filename => {\n        state.avatar = filename;\n        storage()\n            .ref(\"images/\")\n            .child(filename)\n            .getDownloadURL()\n            .then( url => {\n                console.log(url)\n                state.avatarURL = url\n                updateImageUrl(state.avatarURL)\n            }\n         );\n        \n    }\n\n    return(\n        <div>\n            <form>\n                <label>\n                    {state.avatarURL && <StyledImage src={state.avatarURL}/>}\n                    <FileUploader\n                    hidden\n                    accept=\"image/*\"\n                    name=\"avatar\"\n                    randomizeFilename\n                    storageRef={storage().ref(\"images\")}\n                    onUploadSuccess={handleUploadSuccess}\n                />\n                </label>\n            </form>\n        </div>\n    )\n}\n\n\nconst mapStateToProps = ({ auth, firebase }) => ({\n    profile: firebase.profile,\n    loading: auth.loading,\n    error: auth.error,\n})\n\nconst mapDispatchToProps = {\n    updateImageUrl: actions.updateImageUrl,\n    cleanUp: actions.clean,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageUpload);\n"]},"metadata":{},"sourceType":"module"}