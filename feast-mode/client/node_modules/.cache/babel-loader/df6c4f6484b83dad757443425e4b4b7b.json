{"ast":null,"code":"import * as actions from './actionTypes.js';\nexport const sendInvite = data => async (dispatch, getState, {\n  getFirebase,\n  getFirestore\n}) => {\n  const firebase = getFirebase();\n  const firestore = getFirestore();\n  const inviteId = data;\n  const userId = getState().firebase.auth.uid;\n  dispatch({\n    type: actions.SEND_INVITE_START\n  });\n\n  try {\n    const newRequest = {\n      friendId: userId,\n      friendFirst: getState().firebase.profile.firstName,\n      friendLast: getState().firebase.profile.lastName,\n      friendEmail: getState().firebase.auth.email,\n      friendPhone: getState().firebase.profile.phone\n    };\n    const res = await firestore.collection('friends').doc(inviteId).get();\n    const idList = res.data().requests.map(user => user.friendId);\n\n    if (!res.data() || !res.data().requests) {\n      firestore.collection('friends').doc(inviteId).set({\n        requests: [newRequest]\n      });\n    } else {\n      if (idList.indexOf(userId) === -1 && userId !== inviteId) {\n        firestore.collection('friends').doc(inviteId).update({\n          requests: [...res.data().requests, newRequest]\n        });\n      }\n    }\n\n    dispatch({\n      type: actions.SEND_INVITE_SUCCESS\n    });\n  } catch (err) {\n    dispatch({\n      type: actions.SEND_INVITE_FAIL,\n      payload: err.message\n    });\n  }\n};\nexport const acceptInvite = data => async (dispatch, getState, {\n  getFirebase,\n  getFirestore\n}) => {\n  const firebase = getFirebase();\n  const firestore = getFirestore();\n  const inviteId = data.friendId;\n  const userId = getState().firebase.auth.uid;\n  dispatch({\n    type: actions.ACCEPT_INVITE_START\n  });\n\n  try {\n    const resUser = await firestore.collection('friends').doc(userId).get();\n    const resInvite = await firestore.collection('friends').doc(inviteId).get();\n    const newUser = {\n      friendId: userId,\n      friendFirst: getState().firebase.profile.firstName,\n      friendLast: getState().firebase.profile.lastName,\n      friendEmail: getState().firebase.auth.email,\n      friendPhone: getState().firebase.profile.phone\n    };\n    const newInvite = {\n      friendId: inviteId,\n      friendFirst: data.friendFirst,\n      friendLast: data.friendLast,\n      friendEmail: data.friendEmail,\n      friendPhone: data.friendPhone\n    };\n    const userPrevious = resUser.data().requests.filter(request => request.friendId !== inviteId);\n\n    if (!resUser.data() || !resUser.data().friends) {\n      firestore.collection('friends').doc(userId).set({\n        friends: [newInvite],\n        requests: userPrevious\n      });\n    } else {\n      if (resUser.data().friends.indexOf(inviteId) === -1) {\n        firestore.collection('friends').doc(userId).update({\n          friends: [...resUser.data().friends, newInvite],\n          requests: userPrevious\n        });\n      }\n    }\n\n    if (!resInvite.data() || !resInvite.data().friends) {\n      firestore.collection('friends').doc(inviteId).set({\n        friends: [newUser],\n        requests: [...resInvite.data().requests]\n      });\n    } else {\n      if (resInvite.data().friends.indexOf(userId) === -1) {\n        firestore.collection('friends').doc(inviteId).update({\n          friends: [...resInvite.data().friends, newUser],\n          requests: [...resInvite.data().requests]\n        });\n      }\n    }\n\n    dispatch({\n      type: actions.SEND_INVITE_SUCCESS\n    });\n  } catch (err) {\n    dispatch({\n      type: actions.SEND_INVITE_FAIL,\n      payload: err.message\n    });\n  }\n};\nexport const deleteInvite = data => async (dispatch, getState, {\n  getFirebase,\n  getFirestore\n}) => {\n  const firebase = getFirebase();\n  const firestore = getFirestore();\n  const inviteId = data;\n  const userId = getState().firebase.auth.uid;\n  dispatch({\n    type: actions.DELETE_INVITE_START\n  });\n\n  try {\n    const resUser = await firestore.collection('friends').doc(userId).get();\n    const userPrevious = resUser.data().requests.filter(request => request.friendId !== inviteId); // console.log(userPrevious)\n\n    firestore.collection('friends').doc(userId).update({\n      requests: userPrevious\n    }); // console.log(\"past\")\n\n    dispatch({\n      type: actions.DELETE_INVITE_SUCCESS\n    });\n  } catch (err) {\n    dispatch({\n      type: actions.DELETE_INVITE_FAIL,\n      payload: err.message\n    });\n  }\n};\nexport const deleteFriend = data => async (dispatch, getState, {\n  getFirebase,\n  getFirestore\n}) => {\n  const firebase = getFirebase();\n  const firestore = getFirestore();\n  const inviteId = data;\n  const userId = getState().firebase.auth.uid;\n  dispatch({\n    type: actions.DELETE_FRIEND_START\n  });\n\n  try {\n    const resUser = await firestore.collection('friends').doc(userId).get();\n    const resInvite = await firestore.collection('friends').doc(inviteId).get();\n    console.log(resUser); // console.log(userPrevious)\n    // console.log(invitePrevious)\n    // console.log(!resUser.data() )\n\n    if (resUser.data()) {\n      const userPrevious = resUser.data().friends.filter(friend => friend.friendId !== inviteId);\n      firestore.collection('friends').doc(userId).update({\n        friends: userPrevious\n      });\n    }\n\n    if (resInvite.data()) {\n      const invitePrevious = resInvite.data().friends.filter(friend => friend.friendId !== userId);\n      firestore.collection('friends').doc(inviteId).update({\n        friends: invitePrevious\n      });\n    }\n\n    dispatch({\n      type: actions.DELETE_FRIEND_SUCCESS\n    });\n  } catch (err) {\n    dispatch({\n      type: actions.DELETE_FRIEND_FAIL,\n      payload: err.message\n    });\n  }\n};","map":{"version":3,"sources":["/Users/cssummer19/Documents/FeastMode/feast-mode/src/backend/store/actions/appActions.js"],"names":["actions","sendInvite","data","dispatch","getState","getFirebase","getFirestore","firebase","firestore","inviteId","userId","auth","uid","type","SEND_INVITE_START","newRequest","friendId","friendFirst","profile","firstName","friendLast","lastName","friendEmail","email","friendPhone","phone","res","collection","doc","get","idList","requests","map","user","set","indexOf","update","SEND_INVITE_SUCCESS","err","SEND_INVITE_FAIL","payload","message","acceptInvite","ACCEPT_INVITE_START","resUser","resInvite","newUser","newInvite","userPrevious","filter","request","friends","deleteInvite","DELETE_INVITE_START","DELETE_INVITE_SUCCESS","DELETE_INVITE_FAIL","deleteFriend","DELETE_FRIEND_START","console","log","friend","invitePrevious","DELETE_FRIEND_SUCCESS","DELETE_FRIEND_FAIL"],"mappings":"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","sourcesContent":["import * as actions from './actionTypes.js'\n\n\nexport const sendInvite = data => async (dispatch, getState, { getFirebase, getFirestore }) => {\n    \n    const firebase = getFirebase()\n    const firestore = getFirestore()\n    const inviteId = data;\n    const userId = getState().firebase.auth.uid;\n\n    dispatch({ type: actions.SEND_INVITE_START })\n    try {\n        const newRequest = {\n            friendId: userId,\n            friendFirst: getState().firebase.profile.firstName,\n            friendLast: getState().firebase.profile.lastName, \n            friendEmail: getState().firebase.auth.email, \n            friendPhone: getState().firebase.profile.phone, \n        }\n\n        const res = await firestore\n            .collection('friends')\n            .doc(inviteId)\n            .get();\n\n        const idList = res.data().requests.map(user => user.friendId)\n\n        if (!res.data() || !res.data().requests) {\n            firestore\n            .collection('friends')\n            .doc(inviteId)\n            .set({\n                requests: [newRequest],\n            });\n        } \n\n        else { \n            if(idList.indexOf(userId) === -1 && userId !== inviteId ){\n                firestore\n                .collection('friends')\n                .doc(inviteId)\n                .update({\n                    requests: [...res.data().requests, newRequest],\n                });\n            }\n        }\n\n        dispatch({ type: actions.SEND_INVITE_SUCCESS }) \n\n    } catch(err) {\n        dispatch({ type: actions.SEND_INVITE_FAIL, payload: err.message })\n    }\n}\n\n\nexport const acceptInvite = data => async (dispatch, getState, { getFirebase, getFirestore }) => {\n    const firebase = getFirebase()\n    const firestore = getFirestore()\n    const inviteId = data.friendId;\n    const userId = getState().firebase.auth.uid;\n\n    dispatch({ type: actions.ACCEPT_INVITE_START })\n    try {\n        const resUser = await firestore\n            .collection('friends')\n            .doc(userId)\n            .get();\n\n        const resInvite = await firestore\n            .collection('friends')\n            .doc(inviteId)\n            .get();\n\n        const newUser = {\n            friendId: userId,\n            friendFirst: getState().firebase.profile.firstName,\n            friendLast: getState().firebase.profile.lastName, \n            friendEmail: getState().firebase.auth.email, \n            friendPhone: getState().firebase.profile.phone, \n        }\n\n        const newInvite = {\n            friendId: inviteId, \n            friendFirst: data.friendFirst,\n            friendLast: data.friendLast,\n            friendEmail: data.friendEmail,\n            friendPhone: data.friendPhone,\n        }\n            \n        const userPrevious = resUser.data().requests.filter(request => request.friendId !== inviteId);\n        \n        if (!resUser.data() || !resUser.data().friends) {\n            firestore\n            .collection('friends')\n            .doc(userId)\n            .set({\n                friends: [newInvite],\n                requests: userPrevious,\n            });\n        } \n\n        else { \n            if(resUser.data().friends.indexOf(inviteId) === -1 ){\n                firestore\n                .collection('friends')\n                .doc(userId)\n                .update({\n                    friends: [...resUser.data().friends, newInvite],\n                    requests: userPrevious,\n                });\n            }\n        }\n\n        if (!resInvite.data() || !resInvite.data().friends) {\n            firestore\n            .collection('friends')\n            .doc(inviteId)\n            .set({\n                friends: [newUser],\n                requests: [...resInvite.data().requests],\n            });\n        } \n        \n        else { \n            if(resInvite.data().friends.indexOf(userId) === -1 ){\n                firestore\n                .collection('friends')\n                .doc(inviteId)\n                .update({\n                    friends: [...resInvite.data().friends, newUser],\n                    requests: [...resInvite.data().requests],\n                });\n            }\n        }\n\n        dispatch({ type: actions.SEND_INVITE_SUCCESS }) \n\n    } catch(err) {\n        dispatch({ type: actions.SEND_INVITE_FAIL, payload: err.message })\n    }\n}\n\n\nexport const deleteInvite = data => async (dispatch, getState, { getFirebase, getFirestore }) => {\n    const firebase = getFirebase()\n    const firestore = getFirestore()\n    const inviteId = data;\n    const userId = getState().firebase.auth.uid;\n\n    dispatch({ type: actions.DELETE_INVITE_START })\n    try {\n        const resUser = await firestore\n            .collection('friends')\n            .doc(userId)\n            .get();\n\n        const userPrevious = resUser.data().requests.filter(request => request.friendId !== inviteId);\n        // console.log(userPrevious)\n        firestore\n            .collection('friends')\n            .doc(userId)\n            .update({\n                requests: userPrevious,\n            });\n        // console.log(\"past\")\n        dispatch({ type: actions.DELETE_INVITE_SUCCESS }) \n\n    } catch(err) {\n        dispatch({ type: actions.DELETE_INVITE_FAIL, payload: err.message })\n    }\n}\n\n\nexport const deleteFriend = data => async (dispatch, getState, { getFirebase, getFirestore }) => {\n    const firebase = getFirebase()\n    const firestore = getFirestore()\n    const inviteId = data;\n    const userId = getState().firebase.auth.uid;\n\n    dispatch({ type: actions.DELETE_FRIEND_START })\n    try {\n\n        const resUser = await firestore\n            .collection('friends')\n            .doc(userId)\n            .get();\n        const resInvite = await firestore\n            .collection('friends')\n            .doc(inviteId)\n            .get();\n\n        console.log(resUser)\n\n        // console.log(userPrevious)\n        // console.log(invitePrevious)\n        // console.log(!resUser.data() )\n        if (resUser.data() ) {\n            const userPrevious = resUser.data().friends.filter(friend => friend.friendId !== inviteId);\n            firestore\n            .collection('friends')\n            .doc(userId)\n            .update({\n                friends: userPrevious,\n            });\n        } \n        \n        if (resInvite.data() ) {\n            const invitePrevious = resInvite.data().friends.filter(friend => friend.friendId !== userId);\n            firestore\n            .collection('friends')\n            .doc(inviteId)\n            .update({\n                friends: invitePrevious,\n            });\n        } \n\n        dispatch({ type: actions.DELETE_FRIEND_SUCCESS }) \n\n    } catch(err) {\n        dispatch({ type: actions.DELETE_FRIEND_FAIL, payload: err.message })\n    }\n}"]},"metadata":{},"sourceType":"module"}