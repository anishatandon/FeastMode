{"ast":null,"code":"var http = require('request');\n\nmodule.exports.post = function (url, req, callback) {\n  if (typeof req != 'string') req = JSON.stringify(req);\n  var requestBody = {\n    uri: url,\n    headers: {\n      Referer: 'https://order.dominos.com/en/pages/order/',\n      'Content-Type': 'application/json'\n    },\n    body: req\n  };\n  http.post(requestBody, function (error, res, body) {\n    if (error) {\n      return callback({\n        success: false,\n        message: error\n      });\n    }\n\n    if (res.statusCode !== 200) {\n      return callback({\n        success: false,\n        message: 'HTML Status Code Error ' + res.statusCode\n      });\n    }\n\n    try {\n      var parsed = JSON.parse(body);\n    } catch (error) {\n      console.log(error);\n      return callback({\n        success: false,\n        message: error\n      });\n    }\n\n    return callback({\n      success: true,\n      result: parsed\n    });\n  });\n};\n\nmodule.exports.get = function (url, callback) {\n  var requestBody = {\n    uri: url,\n    headers: {\n      'Referer': 'https://order.dominos.com/en/pages/order/'\n    }\n  };\n  http.get(requestBody, function (error, res, body) {\n    if (error) {\n      //If request errored out.\n      callback({\n        success: false,\n        message: error\n      });\n      return;\n    }\n\n    if (res.statusCode !== 200) {\n      //If request didn't error but response isn't status code 200.\n      callback({\n        success: false,\n        message: 'HTML Status Code Error ' + res.statusCode\n      });\n      return;\n    }\n\n    try {\n      var parsed = JSON.parse(body);\n    } catch (error) {\n      console.log(error);\n      return callback({\n        success: false,\n        message: error\n      });\n    }\n\n    return callback({\n      success: true,\n      result: parsed\n    });\n  });\n};","map":null,"metadata":{},"sourceType":"script"}